(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();function Gl(e){if(e&&!(typeof window>"u")){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}function Jt(e,t){var i=e.__state.conversionName.toString(),n=Math.round(e.r),r=Math.round(e.g),o=Math.round(e.b),a=e.a,u=Math.round(e.h),f=e.s.toFixed(1),c=e.v.toFixed(1);if(t||i==="THREE_CHAR_HEX"||i==="SIX_CHAR_HEX"){for(var d=e.hex.toString(16);d.length<6;)d="0"+d;return"#"+d}else{if(i==="CSS_RGB")return"rgb("+n+","+r+","+o+")";if(i==="CSS_RGBA")return"rgba("+n+","+r+","+o+","+a+")";if(i==="HEX")return"0x"+e.hex.toString(16);if(i==="RGB_ARRAY")return"["+n+","+r+","+o+"]";if(i==="RGBA_ARRAY")return"["+n+","+r+","+o+","+a+"]";if(i==="RGB_OBJ")return"{r:"+n+",g:"+r+",b:"+o+"}";if(i==="RGBA_OBJ")return"{r:"+n+",g:"+r+",b:"+o+",a:"+a+"}";if(i==="HSV_OBJ")return"{h:"+u+",s:"+f+",v:"+c+"}";if(i==="HSVA_OBJ")return"{h:"+u+",s:"+f+",v:"+c+",a:"+a+"}"}return"unknown format"}var ea=Array.prototype.forEach,pi=Array.prototype.slice,M={BREAK:{},extend:function(t){return this.each(pi.call(arguments,1),function(i){var n=this.isObject(i)?Object.keys(i):[];n.forEach(function(r){this.isUndefined(i[r])||(t[r]=i[r])}.bind(this))},this),t},defaults:function(t){return this.each(pi.call(arguments,1),function(i){var n=this.isObject(i)?Object.keys(i):[];n.forEach(function(r){this.isUndefined(t[r])&&(t[r]=i[r])}.bind(this))},this),t},compose:function(){var t=pi.call(arguments);return function(){for(var i=pi.call(arguments),n=t.length-1;n>=0;n--)i=[t[n].apply(this,i)];return i[0]}},each:function(t,i,n){if(t){if(ea&&t.forEach&&t.forEach===ea)t.forEach(i,n);else if(t.length===t.length+0){var r=void 0,o=void 0;for(r=0,o=t.length;r<o;r++)if(r in t&&i.call(n,t[r],r)===this.BREAK)return}else for(var a in t)if(i.call(n,t[a],a)===this.BREAK)return}},defer:function(t){setTimeout(t,0)},debounce:function(t,i,n){var r=void 0;return function(){var o=this,a=arguments;function u(){r=null,n||t.apply(o,a)}var f=n||!r;clearTimeout(r),r=setTimeout(u,i),f&&t.apply(o,a)}},toArray:function(t){return t.toArray?t.toArray():pi.call(t)},isUndefined:function(t){return t===void 0},isNull:function(t){return t===null},isNaN:function(e){function t(i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return t instanceof Function}},Vl=[{litmus:M.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var i=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return i===null?!1:{space:"HEX",hex:parseInt("0x"+i[1].toString()+i[1].toString()+i[2].toString()+i[2].toString()+i[3].toString()+i[3].toString(),0)}},write:Jt},SIX_CHAR_HEX:{read:function(t){var i=t.match(/^#([A-F0-9]{6})$/i);return i===null?!1:{space:"HEX",hex:parseInt("0x"+i[1].toString(),0)}},write:Jt},CSS_RGB:{read:function(t){var i=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return i===null?!1:{space:"RGB",r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3])}},write:Jt},CSS_RGBA:{read:function(t){var i=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return i===null?!1:{space:"RGB",r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3]),a:parseFloat(i[4])}},write:Jt}}},{litmus:M.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:M.isArray,conversions:{RGB_ARRAY:{read:function(t){return t.length!==3?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return t.length!==4?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:M.isObject,conversions:{RGBA_OBJ:{read:function(t){return M.isNumber(t.r)&&M.isNumber(t.g)&&M.isNumber(t.b)&&M.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return M.isNumber(t.r)&&M.isNumber(t.g)&&M.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return M.isNumber(t.h)&&M.isNumber(t.s)&&M.isNumber(t.v)&&M.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return M.isNumber(t.h)&&M.isNumber(t.s)&&M.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],_i=void 0,Vi=void 0,Vr=function(){Vi=!1;var t=arguments.length>1?M.toArray(arguments):arguments[0];return M.each(Vl,function(i){if(i.litmus(t))return M.each(i.conversions,function(n,r){if(_i=n.read(t),Vi===!1&&_i!==!1)return Vi=_i,_i.conversionName=r,_i.conversion=n,M.BREAK}),M.BREAK}),Vi},ta=void 0,hn={hsv_to_rgb:function(t,i,n){var r=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),a=n*(1-i),u=n*(1-o*i),f=n*(1-(1-o)*i),c=[[n,f,a],[u,n,a],[a,n,f],[a,u,n],[f,a,n],[n,a,u]][r];return{r:c[0]*255,g:c[1]*255,b:c[2]*255}},rgb_to_hsv:function(t,i,n){var r=Math.min(t,i,n),o=Math.max(t,i,n),a=o-r,u=void 0,f=void 0;if(o!==0)f=a/o;else return{h:NaN,s:0,v:0};return t===o?u=(i-n)/a:i===o?u=2+(n-t)/a:u=4+(t-i)/a,u/=6,u<0&&(u+=1),{h:u*360,s:f,v:o/255}},rgb_to_hex:function(t,i,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,i),r=this.hex_with_component(r,0,n),r},component_from_hex:function(t,i){return t>>i*8&255},hex_with_component:function(t,i,n){return n<<(ta=i*8)|t&~(255<<ta)}},Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},De=function(){function e(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),gt=function e(t,i,n){t===null&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(r===void 0){var o=Object.getPrototypeOf(t);return o===null?void 0:e(o,i,n)}else{if("value"in r)return r.value;var a=r.get;return a===void 0?void 0:a.call(n)}},wt=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},bt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},se=function(){function e(){if(Le(this,e),this.__state=Vr.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return De(e,[{key:"toString",value:function(){return Jt(this)}},{key:"toHexString",value:function(){return Jt(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function ho(e,t,i){Object.defineProperty(e,t,{get:function(){return this.__state.space==="RGB"?this.__state[t]:(se.recalculateRGB(this,t,i),this.__state[t])},set:function(r){this.__state.space!=="RGB"&&(se.recalculateRGB(this,t,i),this.__state.space="RGB"),this.__state[t]=r}})}function co(e,t){Object.defineProperty(e,t,{get:function(){return this.__state.space==="HSV"?this.__state[t]:(se.recalculateHSV(this),this.__state[t])},set:function(n){this.__state.space!=="HSV"&&(se.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=n}})}se.recalculateRGB=function(e,t,i){if(e.__state.space==="HEX")e.__state[t]=hn.component_from_hex(e.__state.hex,i);else if(e.__state.space==="HSV")M.extend(e.__state,hn.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v));else throw new Error("Corrupted color state")};se.recalculateHSV=function(e){var t=hn.rgb_to_hsv(e.r,e.g,e.b);M.extend(e.__state,{s:t.s,v:t.v}),M.isNaN(t.h)?M.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h};se.COMPONENTS=["r","g","b","h","s","v","hex","a"];ho(se.prototype,"r",2);ho(se.prototype,"g",1);ho(se.prototype,"b",0);co(se.prototype,"h");co(se.prototype,"s");co(se.prototype,"v");Object.defineProperty(se.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}});Object.defineProperty(se.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=hn.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var Ht=function(){function e(t,i){Le(this,e),this.initialValue=t[i],this.domElement=document.createElement("div"),this.object=t,this.property=i,this.__onChange=void 0,this.__onFinishChange=void 0}return De(e,[{key:"onChange",value:function(i){return this.__onChange=i,this}},{key:"onFinishChange",value:function(i){return this.__onFinishChange=i,this}},{key:"setValue",value:function(i){return this.object[this.property]=i,this.__onChange&&this.__onChange.call(this,i),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),Zl={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},Ks={};M.each(Zl,function(e,t){M.each(e,function(i){Ks[i]=t})});var $l=/(\d+(\.\d+)?)px/;function Me(e){if(e==="0"||M.isUndefined(e))return 0;var t=e.match($l);return M.isNull(t)?0:parseFloat(t[1])}var S={makeSelectable:function(t,i){t===void 0||t.style===void 0||(t.onselectstart=i?function(){return!1}:function(){},t.style.MozUserSelect=i?"auto":"none",t.style.KhtmlUserSelect=i?"auto":"none",t.unselectable=i?"on":"off")},makeFullscreen:function(t,i,n){var r=n,o=i;M.isUndefined(o)&&(o=!0),M.isUndefined(r)&&(r=!0),t.style.position="absolute",o&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,i,n,r){var o=n||{},a=Ks[i];if(!a)throw new Error("Event type "+i+" not supported.");var u=document.createEvent(a);switch(a){case"MouseEvents":{var f=o.x||o.clientX||0,c=o.y||o.clientY||0;u.initMouseEvent(i,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,f,c,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var d=u.initKeyboardEvent||u.initKeyEvent;M.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(i,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break}default:{u.initEvent(i,o.bubbles||!1,o.cancelable||!0);break}}M.defaults(u,r),t.dispatchEvent(u)},bind:function(t,i,n,r){var o=r||!1;return t.addEventListener?t.addEventListener(i,n,o):t.attachEvent&&t.attachEvent("on"+i,n),S},unbind:function(t,i,n,r){var o=r||!1;return t.removeEventListener?t.removeEventListener(i,n,o):t.detachEvent&&t.detachEvent("on"+i,n),S},addClass:function(t,i){if(t.className===void 0)t.className=i;else if(t.className!==i){var n=t.className.split(/ +/);n.indexOf(i)===-1&&(n.push(i),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return S},removeClass:function(t,i){if(i)if(t.className===i)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(i);r!==-1&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return S},hasClass:function(t,i){return new RegExp("(?:^|\\s+)"+i+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var i=getComputedStyle(t);return Me(i["border-left-width"])+Me(i["border-right-width"])+Me(i["padding-left"])+Me(i["padding-right"])+Me(i.width)},getHeight:function(t){var i=getComputedStyle(t);return Me(i["border-top-width"])+Me(i["border-bottom-width"])+Me(i["padding-top"])+Me(i["padding-bottom"])+Me(i.height)},getOffset:function(t){var i=t,n={left:0,top:0};if(i.offsetParent)do n.left+=i.offsetLeft,n.top+=i.offsetTop,i=i.offsetParent;while(i);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},Qs=function(e){wt(t,e);function t(i,n){Le(this,t);var r=bt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n)),o=r;r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox");function a(){o.setValue(!o.__prev)}return S.bind(r.__checkbox,"change",a,!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return De(t,[{key:"setValue",value:function(n){var r=gt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),gt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ht),ql=function(e){wt(t,e);function t(i,n,r){Le(this,t);var o=bt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n)),a=r,u=o;if(o.__select=document.createElement("select"),M.isArray(a)){var f={};M.each(a,function(c){f[c]=c}),a=f}return M.each(a,function(c,d){var s=document.createElement("option");s.innerHTML=d,s.setAttribute("value",c),u.__select.appendChild(s)}),o.updateDisplay(),S.bind(o.__select,"change",function(){var c=this.options[this.selectedIndex].value;u.setValue(c)}),o.domElement.appendChild(o.__select),o}return De(t,[{key:"setValue",value:function(n){var r=gt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return S.isActive(this.__select)?this:(this.__select.value=this.getValue(),gt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(Ht),Yl=function(e){wt(t,e);function t(i,n){Le(this,t);var r=bt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n)),o=r;function a(){o.setValue(o.__input.value)}function u(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),S.bind(r.__input,"keyup",a),S.bind(r.__input,"change",a),S.bind(r.__input,"blur",u),S.bind(r.__input,"keydown",function(f){f.keyCode===13&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return De(t,[{key:"updateDisplay",value:function(){return S.isActive(this.__input)||(this.__input.value=this.getValue()),gt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ht);function ia(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var Js=function(e){wt(t,e);function t(i,n,r){Le(this,t);var o=bt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n)),a=r||{};return o.__min=a.min,o.__max=a.max,o.__step=a.step,M.isUndefined(o.__step)?o.initialValue===0?o.__impliedStep=1:o.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(o.initialValue))/Math.LN10))/10:o.__impliedStep=o.__step,o.__precision=ia(o.__impliedStep),o}return De(t,[{key:"setValue",value:function(n){var r=n;return this.__min!==void 0&&r<this.__min?r=this.__min:this.__max!==void 0&&r>this.__max&&(r=this.__max),this.__step!==void 0&&r%this.__step!==0&&(r=Math.round(r/this.__step)*this.__step),gt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(n){return this.__min=n,this}},{key:"max",value:function(n){return this.__max=n,this}},{key:"step",value:function(n){return this.__step=n,this.__impliedStep=n,this.__precision=ia(n),this}}]),t}(Ht);function Kl(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}var cn=function(e){wt(t,e);function t(i,n,r){Le(this,t);var o=bt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n,r));o.__truncationSuspended=!1;var a=o,u=void 0;function f(){var p=parseFloat(a.__input.value);M.isNaN(p)||a.setValue(p)}function c(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function d(){c()}function s(p){var y=u-p.clientY;a.setValue(a.getValue()+y*a.__impliedStep),u=p.clientY}function l(){S.unbind(window,"mousemove",s),S.unbind(window,"mouseup",l),c()}function h(p){S.bind(window,"mousemove",s),S.bind(window,"mouseup",l),u=p.clientY}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),S.bind(o.__input,"change",f),S.bind(o.__input,"blur",d),S.bind(o.__input,"mousedown",h),S.bind(o.__input,"keydown",function(p){p.keyCode===13&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,c())}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return De(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():Kl(this.getValue(),this.__precision),gt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Js);function na(e,t,i,n,r){return n+(r-n)*((e-t)/(i-t))}var Wr=function(e){wt(t,e);function t(i,n,r,o,a){Le(this,t);var u=bt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n,{min:r,max:o,step:a})),f=u;u.__background=document.createElement("div"),u.__foreground=document.createElement("div"),S.bind(u.__background,"mousedown",c),S.bind(u.__background,"touchstart",l),S.addClass(u.__background,"slider"),S.addClass(u.__foreground,"slider-fg");function c(y){document.activeElement.blur(),S.bind(window,"mousemove",d),S.bind(window,"mouseup",s),d(y)}function d(y){y.preventDefault();var E=f.__background.getBoundingClientRect();return f.setValue(na(y.clientX,E.left,E.right,f.__min,f.__max)),!1}function s(){S.unbind(window,"mousemove",d),S.unbind(window,"mouseup",s),f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}function l(y){y.touches.length===1&&(S.bind(window,"touchmove",h),S.bind(window,"touchend",p),h(y))}function h(y){var E=y.touches[0].clientX,w=f.__background.getBoundingClientRect();f.setValue(na(E,w.left,w.right,f.__min,f.__max))}function p(){S.unbind(window,"touchmove",h),S.unbind(window,"touchend",p),f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}return u.updateDisplay(),u.__background.appendChild(u.__foreground),u.domElement.appendChild(u.__background),u}return De(t,[{key:"updateDisplay",value:function(){var n=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=n*100+"%",gt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Js),eu=function(e){wt(t,e);function t(i,n,r){Le(this,t);var o=bt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n)),a=o;return o.__button=document.createElement("div"),o.__button.innerHTML=r===void 0?"Fire":r,S.bind(o.__button,"click",function(u){return u.preventDefault(),a.fire(),!1}),S.addClass(o.__button,"button"),o.domElement.appendChild(o.__button),o}return De(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(Ht),Zr=function(e){wt(t,e);function t(i,n){Le(this,t);var r=bt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n));r.__color=new se(r.getValue()),r.__temp=new se(0);var o=r;r.domElement=document.createElement("div"),S.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",S.bind(r.__input,"keydown",function(y){y.keyCode===13&&s.call(this)}),S.bind(r.__input,"blur",s),S.bind(r.__selector,"mousedown",function(){S.addClass(this,"drag").bind(window,"mouseup",function(){S.removeClass(o.__selector,"drag")})}),S.bind(r.__selector,"touchstart",function(){S.addClass(this,"drag").bind(window,"touchend",function(){S.removeClass(o.__selector,"drag")})});var a=document.createElement("div");M.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),M.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),M.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),M.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),M.extend(a.style,{width:"100%",height:"100%",background:"none"}),ra(a,"top","rgba(0,0,0,0)","#000"),M.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),Jl(r.__hue_field),M.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),S.bind(r.__saturation_field,"mousedown",u),S.bind(r.__saturation_field,"touchstart",u),S.bind(r.__field_knob,"mousedown",u),S.bind(r.__field_knob,"touchstart",u),S.bind(r.__hue_field,"mousedown",f),S.bind(r.__hue_field,"touchstart",f);function u(y){h(y),S.bind(window,"mousemove",h),S.bind(window,"touchmove",h),S.bind(window,"mouseup",c),S.bind(window,"touchend",c)}function f(y){p(y),S.bind(window,"mousemove",p),S.bind(window,"touchmove",p),S.bind(window,"mouseup",d),S.bind(window,"touchend",d)}function c(){S.unbind(window,"mousemove",h),S.unbind(window,"touchmove",h),S.unbind(window,"mouseup",c),S.unbind(window,"touchend",c),l()}function d(){S.unbind(window,"mousemove",p),S.unbind(window,"touchmove",p),S.unbind(window,"mouseup",d),S.unbind(window,"touchend",d),l()}function s(){var y=Vr(this.value);y!==!1?(o.__color.__state=y,o.setValue(o.__color.toOriginal())):this.value=o.__color.toString()}function l(){o.__onFinishChange&&o.__onFinishChange.call(o,o.__color.toOriginal())}r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay();function h(y){y.type.indexOf("touch")===-1&&y.preventDefault();var E=o.__saturation_field.getBoundingClientRect(),w=y.touches&&y.touches[0]||y,v=w.clientX,m=w.clientY,b=(v-E.left)/(E.right-E.left),T=1-(m-E.top)/(E.bottom-E.top);return T>1?T=1:T<0&&(T=0),b>1?b=1:b<0&&(b=0),o.__color.v=T,o.__color.s=b,o.setValue(o.__color.toOriginal()),!1}function p(y){y.type.indexOf("touch")===-1&&y.preventDefault();var E=o.__hue_field.getBoundingClientRect(),w=y.touches&&y.touches[0]||y,v=w.clientY,m=1-(v-E.top)/(E.bottom-E.top);return m>1?m=1:m<0&&(m=0),o.__color.h=m*360,o.setValue(o.__color.toOriginal()),!1}return r}return De(t,[{key:"updateDisplay",value:function(){var n=Vr(this.getValue());if(n!==!1){var r=!1;M.each(se.COMPONENTS,function(u){if(!M.isUndefined(n[u])&&!M.isUndefined(this.__color.__state[u])&&n[u]!==this.__color.__state[u])return r=!0,{}},this),r&&M.extend(this.__color.__state,n)}M.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=this.__color.v<.5||this.__color.s>.5?255:0,a=255-o;M.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+o+","+o+","+o+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,ra(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),M.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+o+","+o+","+o+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}}]),t}(Ht),Ql=["-moz-","-o-","-webkit-","-ms-",""];function ra(e,t,i,n){e.style.background="",M.each(Ql,function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+i+" 0%, "+n+" 100%); "})}function Jl(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var ef={load:function(t,i){var n=i||document,r=n.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=t,n.getElementsByTagName("head")[0].appendChild(r)},inject:function(t,i){var n=i||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var o=n.getElementsByTagName("head")[0];try{o.appendChild(r)}catch{}}},tf=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,nf=function(t,i){var n=t[i];return M.isArray(arguments[2])||M.isObject(arguments[2])?new ql(t,i,arguments[2]):M.isNumber(n)?M.isNumber(arguments[2])&&M.isNumber(arguments[3])?M.isNumber(arguments[4])?new Wr(t,i,arguments[2],arguments[3],arguments[4]):new Wr(t,i,arguments[2],arguments[3]):M.isNumber(arguments[4])?new cn(t,i,{min:arguments[2],max:arguments[3],step:arguments[4]}):new cn(t,i,{min:arguments[2],max:arguments[3]}):M.isString(n)?new Yl(t,i):M.isFunction(n)?new eu(t,i,""):M.isBoolean(n)?new Qs(t,i):null};function rf(e){setTimeout(e,1e3/60)}var of=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||rf,af=function(){function e(){Le(this,e),this.backgroundElement=document.createElement("div"),M.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),S.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),M.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;S.bind(this.backgroundElement,"click",function(){t.hide()})}return De(e,[{key:"show",value:function(){var i=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),M.defer(function(){i.backgroundElement.style.opacity=1,i.domElement.style.opacity=1,i.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var i=this,n=function r(){i.domElement.style.display="none",i.backgroundElement.style.display="none",S.unbind(i.domElement,"webkitTransitionEnd",r),S.unbind(i.domElement,"transitionend",r),S.unbind(i.domElement,"oTransitionEnd",r)};S.bind(this.domElement,"webkitTransitionEnd",n),S.bind(this.domElement,"transitionend",n),S.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-S.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-S.getHeight(this.domElement)/2+"px"}}]),e}(),sf=Gl(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);ef.inject(sf);var oa="dg",aa=72,sa=20,Li="Default",vi=function(){try{return!!window.localStorage}catch{return!1}}(),Ei=void 0,ua=!0,Yt=void 0,Un=!1,tu=[],Q=function e(t){var i=this,n=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),S.addClass(this.domElement,oa),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=M.defaults(n,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),n=M.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),M.isUndefined(n.load)?n.load={preset:Li}:n.preset&&(n.load.preset=n.preset),M.isUndefined(n.parent)&&n.hideable&&tu.push(this),n.resizable=M.isUndefined(n.parent)&&n.resizable,n.autoPlace&&M.isUndefined(n.scrollable)&&(n.scrollable=!0);var r=vi&&localStorage.getItem(Kt(this,"isLocal"))==="true",o=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return i.parent?i.getRoot().preset:n.load.preset},set:function(l){i.parent?i.getRoot().preset=l:n.load.preset=l,hf(this),i.revert()}},width:{get:function(){return n.width},set:function(l){n.width=l,Yr(i,l)}},name:{get:function(){return n.name},set:function(l){n.name=l,a&&(a.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(l){n.closed=l,n.closed?S.addClass(i.__ul,e.CLASS_CLOSED):S.removeClass(i.__ul,e.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=l?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return r},set:function(l){vi&&(r=l,l?S.bind(window,"unload",o):S.unbind(window,"unload",o),localStorage.setItem(Kt(i,"isLocal"),l))}}}),M.isUndefined(n.parent)){if(this.closed=n.closed||!1,S.addClass(this.domElement,e.CLASS_MAIN),S.makeSelectable(this.domElement,!1),vi&&r){i.useLocalStorage=!0;var u=localStorage.getItem(Kt(this,"gui"));u&&(n.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,S.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),n.closeOnTop?(S.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(S.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),S.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{n.closed===void 0&&(n.closed=!0);var f=document.createTextNode(n.name);S.addClass(f,"controller-name"),a=po(i,f);var c=function(l){return l.preventDefault(),i.closed=!i.closed,!1};S.addClass(this.__ul,e.CLASS_CLOSED),S.addClass(a,"title"),S.bind(a,"click",c),n.closed||(this.closed=!1)}n.autoPlace&&(M.isUndefined(n.parent)&&(ua&&(Yt=document.createElement("div"),S.addClass(Yt,oa),S.addClass(Yt,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Yt),ua=!1),Yt.appendChild(this.domElement),S.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||Yr(i,n.width)),this.__resizeHandler=function(){i.onResizeDebounced()},S.bind(window,"resize",this.__resizeHandler),S.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),S.bind(this.__ul,"transitionend",this.__resizeHandler),S.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&ff(this),o=function(){vi&&localStorage.getItem(Kt(i,"isLocal"))==="true"&&localStorage.setItem(Kt(i,"gui"),JSON.stringify(i.getSaveObject()))},this.saveToLocalStorageIfPossible=o;function d(){var s=i.getRoot();s.width+=1,M.defer(function(){s.width-=1})}n.parent||d()};Q.toggleHide=function(){Un=!Un,M.each(tu,function(e){e.domElement.style.display=Un?"none":""})};Q.CLASS_AUTO_PLACE="a";Q.CLASS_AUTO_PLACE_CONTAINER="ac";Q.CLASS_MAIN="main";Q.CLASS_CONTROLLER_ROW="cr";Q.CLASS_TOO_TALL="taller-than-window";Q.CLASS_CLOSED="closed";Q.CLASS_CLOSE_BUTTON="close-button";Q.CLASS_CLOSE_TOP="close-top";Q.CLASS_CLOSE_BOTTOM="close-bottom";Q.CLASS_DRAG="drag";Q.DEFAULT_WIDTH=245;Q.TEXT_CLOSED="Close Controls";Q.TEXT_OPEN="Open Controls";Q._keydownHandler=function(e){document.activeElement.type!=="text"&&(e.which===aa||e.keyCode===aa)&&Q.toggleHide()};S.bind(window,"keydown",Q._keydownHandler,!1);M.extend(Q.prototype,{add:function(t,i){return Ti(this,t,i,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,i){return Ti(this,t,i,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var i=this;M.defer(function(){i.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Yt.removeChild(this.domElement);var t=this;M.each(this.__folders,function(i){t.removeFolder(i)}),S.unbind(window,"keydown",Q._keydownHandler,!1),la(this)},addFolder:function(t){if(this.__folders[t]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+t+'"');var i={name:t,parent:this};i.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(i.closed=this.load.folders[t].closed,i.load=this.load.folders[t]);var n=new Q(i);this.__folders[t]=n;var r=po(this,n.domElement);return S.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],la(t);var i=this;M.each(t.__folders,function(n){t.removeFolder(n)}),M.defer(function(){i.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var i=S.getOffset(t.__ul).top,n=0;M.each(t.__ul.childNodes,function(r){t.autoPlace&&r===t.__save_row||(n+=S.getHeight(r))}),window.innerHeight-i-sa<n?(S.addClass(t.domElement,Q.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-i-sa+"px"):(S.removeClass(t.domElement,Q.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&M.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:M.debounce(function(){this.onResize()},50),remember:function(){if(M.isUndefined(Ei)&&(Ei=new af,Ei.domElement.innerHTML=tf),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;M.each(Array.prototype.slice.call(arguments),function(i){t.__rememberedObjects.length===0&&lf(t),t.__rememberedObjects.indexOf(i)===-1&&t.__rememberedObjects.push(i)}),this.autoPlace&&Yr(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=Wi(this)),t.folders={},M.each(this.__folders,function(i,n){t.folders[n]=i.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Wi(this),$r(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[Li]=Wi(this,!0)),this.load.remembered[t]=Wi(this),this.preset=t,qr(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){M.each(this.__controllers,function(i){this.getRoot().load.remembered?iu(t||this.getRoot(),i):i.setValue(i.initialValue),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())},this),M.each(this.__folders,function(i){i.revert(i)}),t||$r(this.getRoot(),!1)},listen:function(t){var i=this.__listening.length===0;this.__listening.push(t),i&&nu(this.__listening)},updateDisplay:function(){M.each(this.__controllers,function(t){t.updateDisplay()}),M.each(this.__folders,function(t){t.updateDisplay()})}});function po(e,t,i){var n=document.createElement("li");return t&&n.appendChild(t),i?e.__ul.insertBefore(n,i):e.__ul.appendChild(n),e.onResize(),n}function la(e){S.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&S.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function $r(e,t){var i=e.__preset_select[e.__preset_select.selectedIndex];t?i.innerHTML=i.value+"*":i.innerHTML=i.value}function uf(e,t,i){if(i.__li=t,i.__gui=e,M.extend(i,{options:function(a){if(arguments.length>1){var u=i.__li.nextElementSibling;return i.remove(),Ti(e,i.object,i.property,{before:u,factoryArgs:[M.toArray(arguments)]})}if(M.isArray(a)||M.isObject(a)){var f=i.__li.nextElementSibling;return i.remove(),Ti(e,i.object,i.property,{before:f,factoryArgs:[a]})}},name:function(a){return i.__li.firstElementChild.firstElementChild.innerHTML=a,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof Wr){var n=new cn(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});M.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(o){var a=i[o],u=n[o];i[o]=n[o]=function(){var f=Array.prototype.slice.call(arguments);return u.apply(n,f),a.apply(i,f)}}),S.addClass(t,"has-slider"),i.domElement.insertBefore(n.domElement,i.domElement.firstElementChild)}else if(i instanceof cn){var r=function(a){if(M.isNumber(i.__min)&&M.isNumber(i.__max)){var u=i.__li.firstElementChild.firstElementChild.innerHTML,f=i.__gui.__listening.indexOf(i)>-1;i.remove();var c=Ti(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]});return c.name(u),f&&c.listen(),c}return a};i.min=M.compose(r,i.min),i.max=M.compose(r,i.max)}else i instanceof Qs?(S.bind(t,"click",function(){S.fakeEvent(i.__checkbox,"click")}),S.bind(i.__checkbox,"click",function(o){o.stopPropagation()})):i instanceof eu?(S.bind(t,"click",function(){S.fakeEvent(i.__button,"click")}),S.bind(t,"mouseover",function(){S.addClass(i.__button,"hover")}),S.bind(t,"mouseout",function(){S.removeClass(i.__button,"hover")})):i instanceof Zr&&(S.addClass(t,"color"),i.updateDisplay=M.compose(function(o){return t.style.borderLeftColor=i.__color.toString(),o},i.updateDisplay),i.updateDisplay());i.setValue=M.compose(function(o){return e.getRoot().__preset_select&&i.isModified()&&$r(e.getRoot(),!0),o},i.setValue)}function iu(e,t){var i=e.getRoot(),n=i.__rememberedObjects.indexOf(t.object);if(n!==-1){var r=i.__rememberedObjectIndecesToControllers[n];if(r===void 0&&(r={},i.__rememberedObjectIndecesToControllers[n]=r),r[t.property]=t,i.load&&i.load.remembered){var o=i.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else if(o[Li])a=o[Li];else return;if(a[n]&&a[n][t.property]!==void 0){var u=a[n][t.property];t.initialValue=u,t.setValue(u)}}}}function Ti(e,t,i,n){if(t[i]===void 0)throw new Error('Object "'+t+'" has no property "'+i+'"');var r=void 0;if(n.color)r=new Zr(t,i);else{var o=[t,i].concat(n.factoryArgs);r=nf.apply(e,o)}n.before instanceof Ht&&(n.before=n.before.__li),iu(e,r),S.addClass(r.domElement,"c");var a=document.createElement("span");S.addClass(a,"property-name"),a.innerHTML=r.property;var u=document.createElement("div");u.appendChild(a),u.appendChild(r.domElement);var f=po(e,u,n.before);return S.addClass(f,Q.CLASS_CONTROLLER_ROW),r instanceof Zr?S.addClass(f,"color"):S.addClass(f,Wl(r.getValue())),uf(e,f,r),e.__controllers.push(r),r}function Kt(e,t){return document.location.href+"."+t}function qr(e,t,i){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),i&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function fa(e,t){t.style.display=e.useLocalStorage?"block":"none"}function lf(e){var t=e.__save_row=document.createElement("li");S.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),S.addClass(t,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",S.addClass(i,"button gears");var n=document.createElement("span");n.innerHTML="Save",S.addClass(n,"button"),S.addClass(n,"save");var r=document.createElement("span");r.innerHTML="New",S.addClass(r,"button"),S.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",S.addClass(o,"button"),S.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?M.each(e.load.remembered,function(s,l){qr(e,l,l===e.preset)}):qr(e,Li,!1),S.bind(a,"change",function(){for(var s=0;s<e.__preset_select.length;s++)e.__preset_select[s].innerHTML=e.__preset_select[s].value;e.preset=this.value}),t.appendChild(a),t.appendChild(i),t.appendChild(n),t.appendChild(r),t.appendChild(o),vi){var u=document.getElementById("dg-local-explain"),f=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block",localStorage.getItem(Kt(e,"isLocal"))==="true"&&f.setAttribute("checked","checked"),fa(e,u),S.bind(f,"change",function(){e.useLocalStorage=!e.useLocalStorage,fa(e,u)})}var d=document.getElementById("dg-new-constructor");S.bind(d,"keydown",function(s){s.metaKey&&(s.which===67||s.keyCode===67)&&Ei.hide()}),S.bind(i,"click",function(){d.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Ei.show(),d.focus(),d.select()}),S.bind(n,"click",function(){e.save()}),S.bind(r,"click",function(){var s=prompt("Enter a new preset name.");s&&e.saveAs(s)}),S.bind(o,"click",function(){e.revert()})}function ff(e){var t=void 0;e.__resize_handle=document.createElement("div"),M.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function i(o){return o.preventDefault(),e.width+=t-o.clientX,e.onResize(),t=o.clientX,!1}function n(){S.removeClass(e.__closeButton,Q.CLASS_DRAG),S.unbind(window,"mousemove",i),S.unbind(window,"mouseup",n)}function r(o){return o.preventDefault(),t=o.clientX,S.addClass(e.__closeButton,Q.CLASS_DRAG),S.bind(window,"mousemove",i),S.bind(window,"mouseup",n),!1}S.bind(e.__resize_handle,"mousedown",r),S.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function Yr(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Wi(e,t){var i={};return M.each(e.__rememberedObjects,function(n,r){var o={},a=e.__rememberedObjectIndecesToControllers[r];M.each(a,function(u,f){o[f]=t?u.initialValue:u.getValue()}),i[r]=o}),i}function hf(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function nu(e){e.length!==0&&of.call(window,function(){nu(e)}),M.each(e,function(t){t.updateDisplay()})}var cf=Q,B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function En(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var o=Function.bind.apply(t,r);return new o}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),i}var wi={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var t=function(){this.init()};t.prototype={init:function(){var s=this||i;return s._counter=1e3,s._html5AudioPool=[],s.html5PoolSize=10,s._codecs={},s._howls=[],s._muted=!1,s._volume=1,s._canPlayEvent="canplaythrough",s._navigator=typeof window<"u"&&window.navigator?window.navigator:null,s.masterGain=null,s.noAudio=!1,s.usingWebAudio=!0,s.autoSuspend=!0,s.ctx=null,s.autoUnlock=!0,s._setup(),s},volume:function(s){var l=this||i;if(s=parseFloat(s),l.ctx||d(),typeof s<"u"&&s>=0&&s<=1){if(l._volume=s,l._muted)return l;l.usingWebAudio&&l.masterGain.gain.setValueAtTime(s,i.ctx.currentTime);for(var h=0;h<l._howls.length;h++)if(!l._howls[h]._webAudio)for(var p=l._howls[h]._getSoundIds(),y=0;y<p.length;y++){var E=l._howls[h]._soundById(p[y]);E&&E._node&&(E._node.volume=E._volume*s)}return l}return l._volume},mute:function(s){var l=this||i;l.ctx||d(),l._muted=s,l.usingWebAudio&&l.masterGain.gain.setValueAtTime(s?0:l._volume,i.ctx.currentTime);for(var h=0;h<l._howls.length;h++)if(!l._howls[h]._webAudio)for(var p=l._howls[h]._getSoundIds(),y=0;y<p.length;y++){var E=l._howls[h]._soundById(p[y]);E&&E._node&&(E._node.muted=s?!0:E._muted)}return l},stop:function(){for(var s=this||i,l=0;l<s._howls.length;l++)s._howls[l].stop();return s},unload:function(){for(var s=this||i,l=s._howls.length-1;l>=0;l--)s._howls[l].unload();return s.usingWebAudio&&s.ctx&&typeof s.ctx.close<"u"&&(s.ctx.close(),s.ctx=null,d()),s},codecs:function(s){return(this||i)._codecs[s.replace(/^x-/,"")]},_setup:function(){var s=this||i;if(s.state=s.ctx&&s.ctx.state||"suspended",s._autoSuspend(),!s.usingWebAudio)if(typeof Audio<"u")try{var l=new Audio;typeof l.oncanplaythrough>"u"&&(s._canPlayEvent="canplay")}catch{s.noAudio=!0}else s.noAudio=!0;try{var l=new Audio;l.muted&&(s.noAudio=!0)}catch{}return s.noAudio||s._setupCodecs(),s},_setupCodecs:function(){var s=this||i,l=null;try{l=typeof Audio<"u"?new Audio:null}catch{return s}if(!l||typeof l.canPlayType!="function")return s;var h=l.canPlayType("audio/mpeg;").replace(/^no$/,""),p=s._navigator?s._navigator.userAgent:"",y=p.match(/OPR\/([0-6].)/g),E=y&&parseInt(y[0].split("/")[1],10)<33,w=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,v=p.match(/Version\/(.*?) /),m=w&&v&&parseInt(v[1],10)<15;return s._codecs={mp3:!!(!E&&(h||l.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!h,opus:!!l.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(l.canPlayType('audio/wav; codecs="1"')||l.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!l.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!l.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(l.canPlayType("audio/x-m4a;")||l.canPlayType("audio/m4a;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(l.canPlayType("audio/x-m4b;")||l.canPlayType("audio/m4b;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(l.canPlayType("audio/x-mp4;")||l.canPlayType("audio/mp4;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!m&&l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!m&&l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!l.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(l.canPlayType("audio/x-flac;")||l.canPlayType("audio/flac;")).replace(/^no$/,"")},s},_unlockAudio:function(){var s=this||i;if(!(s._audioUnlocked||!s.ctx)){s._audioUnlocked=!1,s.autoUnlock=!1,!s._mobileUnloaded&&s.ctx.sampleRate!==44100&&(s._mobileUnloaded=!0,s.unload()),s._scratchBuffer=s.ctx.createBuffer(1,1,22050);var l=function(h){for(;s._html5AudioPool.length<s.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,s._releaseHtml5Audio(p)}catch{s.noAudio=!0;break}for(var y=0;y<s._howls.length;y++)if(!s._howls[y]._webAudio)for(var E=s._howls[y]._getSoundIds(),w=0;w<E.length;w++){var v=s._howls[y]._soundById(E[w]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}s._autoResume();var m=s.ctx.createBufferSource();m.buffer=s._scratchBuffer,m.connect(s.ctx.destination),typeof m.start>"u"?m.noteOn(0):m.start(0),typeof s.ctx.resume=="function"&&s.ctx.resume(),m.onended=function(){m.disconnect(0),s._audioUnlocked=!0,document.removeEventListener("touchstart",l,!0),document.removeEventListener("touchend",l,!0),document.removeEventListener("click",l,!0),document.removeEventListener("keydown",l,!0);for(var b=0;b<s._howls.length;b++)s._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",l,!0),document.addEventListener("touchend",l,!0),document.addEventListener("click",l,!0),document.addEventListener("keydown",l,!0),s}},_obtainHtml5Audio:function(){var s=this||i;if(s._html5AudioPool.length)return s._html5AudioPool.pop();var l=new Audio().play();return l&&typeof Promise<"u"&&(l instanceof Promise||typeof l.then=="function")&&l.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(s){var l=this||i;return s._unlocked&&l._html5AudioPool.push(s),l},_autoSuspend:function(){var s=this;if(!(!s.autoSuspend||!s.ctx||typeof s.ctx.suspend>"u"||!i.usingWebAudio)){for(var l=0;l<s._howls.length;l++)if(s._howls[l]._webAudio){for(var h=0;h<s._howls[l]._sounds.length;h++)if(!s._howls[l]._sounds[h]._paused)return s}return s._suspendTimer&&clearTimeout(s._suspendTimer),s._suspendTimer=setTimeout(function(){if(s.autoSuspend){s._suspendTimer=null,s.state="suspending";var p=function(){s.state="suspended",s._resumeAfterSuspend&&(delete s._resumeAfterSuspend,s._autoResume())};s.ctx.suspend().then(p,p)}},3e4),s}},_autoResume:function(){var s=this;if(!(!s.ctx||typeof s.ctx.resume>"u"||!i.usingWebAudio))return s.state==="running"&&s.ctx.state!=="interrupted"&&s._suspendTimer?(clearTimeout(s._suspendTimer),s._suspendTimer=null):s.state==="suspended"||s.state==="running"&&s.ctx.state==="interrupted"?(s.ctx.resume().then(function(){s.state="running";for(var l=0;l<s._howls.length;l++)s._howls[l]._emit("resume")}),s._suspendTimer&&(clearTimeout(s._suspendTimer),s._suspendTimer=null)):s.state==="suspending"&&(s._resumeAfterSuspend=!0),s}};var i=new t,n=function(s){var l=this;if(!s.src||s.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}l.init(s)};n.prototype={init:function(s){var l=this;return i.ctx||d(),l._autoplay=s.autoplay||!1,l._format=typeof s.format!="string"?s.format:[s.format],l._html5=s.html5||!1,l._muted=s.mute||!1,l._loop=s.loop||!1,l._pool=s.pool||5,l._preload=typeof s.preload=="boolean"||s.preload==="metadata"?s.preload:!0,l._rate=s.rate||1,l._sprite=s.sprite||{},l._src=typeof s.src!="string"?s.src:[s.src],l._volume=s.volume!==void 0?s.volume:1,l._xhr={method:s.xhr&&s.xhr.method?s.xhr.method:"GET",headers:s.xhr&&s.xhr.headers?s.xhr.headers:null,withCredentials:s.xhr&&s.xhr.withCredentials?s.xhr.withCredentials:!1},l._duration=0,l._state="unloaded",l._sounds=[],l._endTimers={},l._queue=[],l._playLock=!1,l._onend=s.onend?[{fn:s.onend}]:[],l._onfade=s.onfade?[{fn:s.onfade}]:[],l._onload=s.onload?[{fn:s.onload}]:[],l._onloaderror=s.onloaderror?[{fn:s.onloaderror}]:[],l._onplayerror=s.onplayerror?[{fn:s.onplayerror}]:[],l._onpause=s.onpause?[{fn:s.onpause}]:[],l._onplay=s.onplay?[{fn:s.onplay}]:[],l._onstop=s.onstop?[{fn:s.onstop}]:[],l._onmute=s.onmute?[{fn:s.onmute}]:[],l._onvolume=s.onvolume?[{fn:s.onvolume}]:[],l._onrate=s.onrate?[{fn:s.onrate}]:[],l._onseek=s.onseek?[{fn:s.onseek}]:[],l._onunlock=s.onunlock?[{fn:s.onunlock}]:[],l._onresume=[],l._webAudio=i.usingWebAudio&&!l._html5,typeof i.ctx<"u"&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(l),l._autoplay&&l._queue.push({event:"play",action:function(){l.play()}}),l._preload&&l._preload!=="none"&&l.load(),l},load:function(){var s=this,l=null;if(i.noAudio){s._emit("loaderror",null,"No audio support.");return}typeof s._src=="string"&&(s._src=[s._src]);for(var h=0;h<s._src.length;h++){var p,y;if(s._format&&s._format[h])p=s._format[h];else{if(y=s._src[h],typeof y!="string"){s._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(y),p||(p=/\.([^.]+)$/.exec(y.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&i.codecs(p)){l=s._src[h];break}}if(!l){s._emit("loaderror",null,"No codec support for selected audio sources.");return}return s._src=l,s._state="loading",window.location.protocol==="https:"&&l.slice(0,5)==="http:"&&(s._html5=!0,s._webAudio=!1),new r(s),s._webAudio&&a(s),s},play:function(s,l){var h=this,p=null;if(typeof s=="number")p=s,s=null;else{if(typeof s=="string"&&h._state==="loaded"&&!h._sprite[s])return null;if(typeof s>"u"&&(s="__default",!h._playLock)){for(var y=0,E=0;E<h._sounds.length;E++)h._sounds[E]._paused&&!h._sounds[E]._ended&&(y++,p=h._sounds[E]._id);y===1?s=null:p=null}}var w=p?h._soundById(p):h._inactiveSound();if(!w)return null;if(p&&!s&&(s=w._sprite||"__default"),h._state!=="loaded"){w._sprite=s,w._ended=!1;var v=w._id;return h._queue.push({event:"play",action:function(){h.play(v)}}),v}if(p&&!w._paused)return l||h._loadQueue("play"),w._id;h._webAudio&&i._autoResume();var m=Math.max(0,w._seek>0?w._seek:h._sprite[s][0]/1e3),b=Math.max(0,(h._sprite[s][0]+h._sprite[s][1])/1e3-m),T=b*1e3/Math.abs(w._rate),N=h._sprite[s][0]/1e3,L=(h._sprite[s][0]+h._sprite[s][1])/1e3;w._sprite=s,w._ended=!1;var A=function(){w._paused=!1,w._seek=m,w._start=N,w._stop=L,w._loop=!!(w._loop||h._sprite[s][2])};if(m>=L){h._ended(w);return}var _=w._node;if(h._webAudio){var O=function(){h._playLock=!1,A(),h._refreshBuffer(w);var X=w._muted||h._muted?0:w._volume;_.gain.setValueAtTime(X,i.ctx.currentTime),w._playStart=i.ctx.currentTime,typeof _.bufferSource.start>"u"?w._loop?_.bufferSource.noteGrainOn(0,m,86400):_.bufferSource.noteGrainOn(0,m,b):w._loop?_.bufferSource.start(0,m,86400):_.bufferSource.start(0,m,b),T!==1/0&&(h._endTimers[w._id]=setTimeout(h._ended.bind(h,w),T)),l||setTimeout(function(){h._emit("play",w._id),h._loadQueue()},0)};i.state==="running"&&i.ctx.state!=="interrupted"?O():(h._playLock=!0,h.once("resume",O),h._clearTimer(w._id))}else{var D=function(){_.currentTime=m,_.muted=w._muted||h._muted||i._muted||_.muted,_.volume=w._volume*i.volume(),_.playbackRate=w._rate;try{var X=_.play();if(X&&typeof Promise<"u"&&(X instanceof Promise||typeof X.then=="function")?(h._playLock=!0,A(),X.then(function(){h._playLock=!1,_._unlocked=!0,l?h._loadQueue():h._emit("play",w._id)}).catch(function(){h._playLock=!1,h._emit("playerror",w._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),w._ended=!0,w._paused=!0})):l||(h._playLock=!1,A(),h._emit("play",w._id)),_.playbackRate=w._rate,_.paused){h._emit("playerror",w._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}s!=="__default"||w._loop?h._endTimers[w._id]=setTimeout(h._ended.bind(h,w),T):(h._endTimers[w._id]=function(){h._ended(w),_.removeEventListener("ended",h._endTimers[w._id],!1)},_.addEventListener("ended",h._endTimers[w._id],!1))}catch(K){h._emit("playerror",w._id,K)}};_.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(_.src=h._src,_.load());var k=window&&window.ejecta||!_.readyState&&i._navigator.isCocoonJS;if(_.readyState>=3||k)D();else{h._playLock=!0,h._state="loading";var F=function(){h._state="loaded",D(),_.removeEventListener(i._canPlayEvent,F,!1)};_.addEventListener(i._canPlayEvent,F,!1),h._clearTimer(w._id)}}return w._id},pause:function(s){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"pause",action:function(){l.pause(s)}}),l;for(var h=l._getSoundIds(s),p=0;p<h.length;p++){l._clearTimer(h[p]);var y=l._soundById(h[p]);if(y&&!y._paused&&(y._seek=l.seek(h[p]),y._rateSeek=0,y._paused=!0,l._stopFade(h[p]),y._node))if(l._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),l._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||l._emit("pause",y?y._id:null)}return l},stop:function(s,l){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"stop",action:function(){h.stop(s)}}),h;for(var p=h._getSoundIds(s),y=0;y<p.length;y++){h._clearTimer(p[y]);var E=h._soundById(p[y]);E&&(E._seek=E._start||0,E._rateSeek=0,E._paused=!0,E._ended=!0,h._stopFade(p[y]),E._node&&(h._webAudio?E._node.bufferSource&&(typeof E._node.bufferSource.stop>"u"?E._node.bufferSource.noteOff(0):E._node.bufferSource.stop(0),h._cleanBuffer(E._node)):(!isNaN(E._node.duration)||E._node.duration===1/0)&&(E._node.currentTime=E._start||0,E._node.pause(),E._node.duration===1/0&&h._clearSound(E._node))),l||h._emit("stop",E._id))}return h},mute:function(s,l){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"mute",action:function(){h.mute(s,l)}}),h;if(typeof l>"u")if(typeof s=="boolean")h._muted=s;else return h._muted;for(var p=h._getSoundIds(l),y=0;y<p.length;y++){var E=h._soundById(p[y]);E&&(E._muted=s,E._interval&&h._stopFade(E._id),h._webAudio&&E._node?E._node.gain.setValueAtTime(s?0:E._volume,i.ctx.currentTime):E._node&&(E._node.muted=i._muted?!0:s),h._emit("mute",E._id))}return h},volume:function(){var s=this,l=arguments,h,p;if(l.length===0)return s._volume;if(l.length===1||l.length===2&&typeof l[1]>"u"){var y=s._getSoundIds(),E=y.indexOf(l[0]);E>=0?p=parseInt(l[0],10):h=parseFloat(l[0])}else l.length>=2&&(h=parseFloat(l[0]),p=parseInt(l[1],10));var w;if(typeof h<"u"&&h>=0&&h<=1){if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"volume",action:function(){s.volume.apply(s,l)}}),s;typeof p>"u"&&(s._volume=h),p=s._getSoundIds(p);for(var v=0;v<p.length;v++)w=s._soundById(p[v]),w&&(w._volume=h,l[2]||s._stopFade(p[v]),s._webAudio&&w._node&&!w._muted?w._node.gain.setValueAtTime(h,i.ctx.currentTime):w._node&&!w._muted&&(w._node.volume=h*i.volume()),s._emit("volume",w._id))}else return w=p?s._soundById(p):s._sounds[0],w?w._volume:0;return s},fade:function(s,l,h,p){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(s,l,h,p)}}),y;s=Math.min(Math.max(0,parseFloat(s)),1),l=Math.min(Math.max(0,parseFloat(l)),1),h=parseFloat(h),y.volume(s,p);for(var E=y._getSoundIds(p),w=0;w<E.length;w++){var v=y._soundById(E[w]);if(v){if(p||y._stopFade(E[w]),y._webAudio&&!v._muted){var m=i.ctx.currentTime,b=m+h/1e3;v._volume=s,v._node.gain.setValueAtTime(s,m),v._node.gain.linearRampToValueAtTime(l,b)}y._startFadeInterval(v,s,l,h,E[w],typeof p>"u")}}return y},_startFadeInterval:function(s,l,h,p,y,E){var w=this,v=l,m=h-l,b=Math.abs(m/.01),T=Math.max(4,b>0?p/b:p),N=Date.now();s._fadeTo=h,s._interval=setInterval(function(){var L=(Date.now()-N)/p;N=Date.now(),v+=m*L,v=Math.round(v*100)/100,m<0?v=Math.max(h,v):v=Math.min(h,v),w._webAudio?s._volume=v:w.volume(v,s._id,!0),E&&(w._volume=v),(h<l&&v<=h||h>l&&v>=h)&&(clearInterval(s._interval),s._interval=null,s._fadeTo=null,w.volume(h,s._id),w._emit("fade",s._id))},T)},_stopFade:function(s){var l=this,h=l._soundById(s);return h&&h._interval&&(l._webAudio&&h._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(h._interval),h._interval=null,l.volume(h._fadeTo,s),h._fadeTo=null,l._emit("fade",s)),l},loop:function(){var s=this,l=arguments,h,p,y;if(l.length===0)return s._loop;if(l.length===1)if(typeof l[0]=="boolean")h=l[0],s._loop=h;else return y=s._soundById(parseInt(l[0],10)),y?y._loop:!1;else l.length===2&&(h=l[0],p=parseInt(l[1],10));for(var E=s._getSoundIds(p),w=0;w<E.length;w++)y=s._soundById(E[w]),y&&(y._loop=h,s._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=h,h&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,s.playing(E[w])&&(s.pause(E[w],!0),s.play(E[w],!0)))));return s},rate:function(){var s=this,l=arguments,h,p;if(l.length===0)p=s._sounds[0]._id;else if(l.length===1){var y=s._getSoundIds(),E=y.indexOf(l[0]);E>=0?p=parseInt(l[0],10):h=parseFloat(l[0])}else l.length===2&&(h=parseFloat(l[0]),p=parseInt(l[1],10));var w;if(typeof h=="number"){if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"rate",action:function(){s.rate.apply(s,l)}}),s;typeof p>"u"&&(s._rate=h),p=s._getSoundIds(p);for(var v=0;v<p.length;v++)if(w=s._soundById(p[v]),w){s.playing(p[v])&&(w._rateSeek=s.seek(p[v]),w._playStart=s._webAudio?i.ctx.currentTime:w._playStart),w._rate=h,s._webAudio&&w._node&&w._node.bufferSource?w._node.bufferSource.playbackRate.setValueAtTime(h,i.ctx.currentTime):w._node&&(w._node.playbackRate=h);var m=s.seek(p[v]),b=(s._sprite[w._sprite][0]+s._sprite[w._sprite][1])/1e3-m,T=b*1e3/Math.abs(w._rate);(s._endTimers[p[v]]||!w._paused)&&(s._clearTimer(p[v]),s._endTimers[p[v]]=setTimeout(s._ended.bind(s,w),T)),s._emit("rate",w._id)}}else return w=s._soundById(p),w?w._rate:s._rate;return s},seek:function(){var s=this,l=arguments,h,p;if(l.length===0)s._sounds.length&&(p=s._sounds[0]._id);else if(l.length===1){var y=s._getSoundIds(),E=y.indexOf(l[0]);E>=0?p=parseInt(l[0],10):s._sounds.length&&(p=s._sounds[0]._id,h=parseFloat(l[0]))}else l.length===2&&(h=parseFloat(l[0]),p=parseInt(l[1],10));if(typeof p>"u")return 0;if(typeof h=="number"&&(s._state!=="loaded"||s._playLock))return s._queue.push({event:"seek",action:function(){s.seek.apply(s,l)}}),s;var w=s._soundById(p);if(w)if(typeof h=="number"&&h>=0){var v=s.playing(p);v&&s.pause(p,!0),w._seek=h,w._ended=!1,s._clearTimer(p),!s._webAudio&&w._node&&!isNaN(w._node.duration)&&(w._node.currentTime=h);var m=function(){v&&s.play(p,!0),s._emit("seek",p)};if(v&&!s._webAudio){var b=function(){s._playLock?setTimeout(b,0):m()};setTimeout(b,0)}else m()}else if(s._webAudio){var T=s.playing(p)?i.ctx.currentTime-w._playStart:0,N=w._rateSeek?w._rateSeek-w._seek:0;return w._seek+(N+T*Math.abs(w._rate))}else return w._node.currentTime;return s},playing:function(s){var l=this;if(typeof s=="number"){var h=l._soundById(s);return h?!h._paused:!1}for(var p=0;p<l._sounds.length;p++)if(!l._sounds[p]._paused)return!0;return!1},duration:function(s){var l=this,h=l._duration,p=l._soundById(s);return p&&(h=l._sprite[p._sprite][1]/1e3),h},state:function(){return this._state},unload:function(){for(var s=this,l=s._sounds,h=0;h<l.length;h++)l[h]._paused||s.stop(l[h]._id),s._webAudio||(s._clearSound(l[h]._node),l[h]._node.removeEventListener("error",l[h]._errorFn,!1),l[h]._node.removeEventListener(i._canPlayEvent,l[h]._loadFn,!1),l[h]._node.removeEventListener("ended",l[h]._endFn,!1),i._releaseHtml5Audio(l[h]._node)),delete l[h]._node,s._clearTimer(l[h]._id);var p=i._howls.indexOf(s);p>=0&&i._howls.splice(p,1);var y=!0;for(h=0;h<i._howls.length;h++)if(i._howls[h]._src===s._src||s._src.indexOf(i._howls[h]._src)>=0){y=!1;break}return o&&y&&delete o[s._src],i.noAudio=!1,s._state="unloaded",s._sounds=[],s=null,null},on:function(s,l,h,p){var y=this,E=y["_on"+s];return typeof l=="function"&&E.push(p?{id:h,fn:l,once:p}:{id:h,fn:l}),y},off:function(s,l,h){var p=this,y=p["_on"+s],E=0;if(typeof l=="number"&&(h=l,l=null),l||h)for(E=0;E<y.length;E++){var w=h===y[E].id;if(l===y[E].fn&&w||!l&&w){y.splice(E,1);break}}else if(s)p["_on"+s]=[];else{var v=Object.keys(p);for(E=0;E<v.length;E++)v[E].indexOf("_on")===0&&Array.isArray(p[v[E]])&&(p[v[E]]=[])}return p},once:function(s,l,h){var p=this;return p.on(s,l,h,1),p},_emit:function(s,l,h){for(var p=this,y=p["_on"+s],E=y.length-1;E>=0;E--)(!y[E].id||y[E].id===l||s==="load")&&(setTimeout(function(w){w.call(this,l,h)}.bind(p,y[E].fn),0),y[E].once&&p.off(s,y[E].fn,y[E].id));return p._loadQueue(s),p},_loadQueue:function(s){var l=this;if(l._queue.length>0){var h=l._queue[0];h.event===s&&(l._queue.shift(),l._loadQueue()),s||h.action()}return l},_ended:function(s){var l=this,h=s._sprite;if(!l._webAudio&&s._node&&!s._node.paused&&!s._node.ended&&s._node.currentTime<s._stop)return setTimeout(l._ended.bind(l,s),100),l;var p=!!(s._loop||l._sprite[h][2]);if(l._emit("end",s._id),!l._webAudio&&p&&l.stop(s._id,!0).play(s._id),l._webAudio&&p){l._emit("play",s._id),s._seek=s._start||0,s._rateSeek=0,s._playStart=i.ctx.currentTime;var y=(s._stop-s._start)*1e3/Math.abs(s._rate);l._endTimers[s._id]=setTimeout(l._ended.bind(l,s),y)}return l._webAudio&&!p&&(s._paused=!0,s._ended=!0,s._seek=s._start||0,s._rateSeek=0,l._clearTimer(s._id),l._cleanBuffer(s._node),i._autoSuspend()),!l._webAudio&&!p&&l.stop(s._id,!0),l},_clearTimer:function(s){var l=this;if(l._endTimers[s]){if(typeof l._endTimers[s]!="function")clearTimeout(l._endTimers[s]);else{var h=l._soundById(s);h&&h._node&&h._node.removeEventListener("ended",l._endTimers[s],!1)}delete l._endTimers[s]}return l},_soundById:function(s){for(var l=this,h=0;h<l._sounds.length;h++)if(s===l._sounds[h]._id)return l._sounds[h];return null},_inactiveSound:function(){var s=this;s._drain();for(var l=0;l<s._sounds.length;l++)if(s._sounds[l]._ended)return s._sounds[l].reset();return new r(s)},_drain:function(){var s=this,l=s._pool,h=0,p=0;if(!(s._sounds.length<l)){for(p=0;p<s._sounds.length;p++)s._sounds[p]._ended&&h++;for(p=s._sounds.length-1;p>=0;p--){if(h<=l)return;s._sounds[p]._ended&&(s._webAudio&&s._sounds[p]._node&&s._sounds[p]._node.disconnect(0),s._sounds.splice(p,1),h--)}}},_getSoundIds:function(s){var l=this;if(typeof s>"u"){for(var h=[],p=0;p<l._sounds.length;p++)h.push(l._sounds[p]._id);return h}else return[s]},_refreshBuffer:function(s){var l=this;return s._node.bufferSource=i.ctx.createBufferSource(),s._node.bufferSource.buffer=o[l._src],s._panner?s._node.bufferSource.connect(s._panner):s._node.bufferSource.connect(s._node),s._node.bufferSource.loop=s._loop,s._loop&&(s._node.bufferSource.loopStart=s._start||0,s._node.bufferSource.loopEnd=s._stop||0),s._node.bufferSource.playbackRate.setValueAtTime(s._rate,i.ctx.currentTime),l},_cleanBuffer:function(s){var l=this,h=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&s.bufferSource&&(s.bufferSource.onended=null,s.bufferSource.disconnect(0),h))try{s.bufferSource.buffer=i._scratchBuffer}catch{}return s.bufferSource=null,l},_clearSound:function(s){var l=/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent);l||(s.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(s){this._parent=s,this.init()};r.prototype={init:function(){var s=this,l=s._parent;return s._muted=l._muted,s._loop=l._loop,s._volume=l._volume,s._rate=l._rate,s._seek=0,s._paused=!0,s._ended=!0,s._sprite="__default",s._id=++i._counter,l._sounds.push(s),s.create(),s},create:function(){var s=this,l=s._parent,h=i._muted||s._muted||s._parent._muted?0:s._volume;return l._webAudio?(s._node=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),s._node.gain.setValueAtTime(h,i.ctx.currentTime),s._node.paused=!0,s._node.connect(i.masterGain)):i.noAudio||(s._node=i._obtainHtml5Audio(),s._errorFn=s._errorListener.bind(s),s._node.addEventListener("error",s._errorFn,!1),s._loadFn=s._loadListener.bind(s),s._node.addEventListener(i._canPlayEvent,s._loadFn,!1),s._endFn=s._endListener.bind(s),s._node.addEventListener("ended",s._endFn,!1),s._node.src=l._src,s._node.preload=l._preload===!0?"auto":l._preload,s._node.volume=h*i.volume(),s._node.load()),s},reset:function(){var s=this,l=s._parent;return s._muted=l._muted,s._loop=l._loop,s._volume=l._volume,s._rate=l._rate,s._seek=0,s._rateSeek=0,s._paused=!0,s._ended=!0,s._sprite="__default",s._id=++i._counter,s},_errorListener:function(){var s=this;s._parent._emit("loaderror",s._id,s._node.error?s._node.error.code:0),s._node.removeEventListener("error",s._errorFn,!1)},_loadListener:function(){var s=this,l=s._parent;l._duration=Math.ceil(s._node.duration*10)/10,Object.keys(l._sprite).length===0&&(l._sprite={__default:[0,l._duration*1e3]}),l._state!=="loaded"&&(l._state="loaded",l._emit("load"),l._loadQueue()),s._node.removeEventListener(i._canPlayEvent,s._loadFn,!1)},_endListener:function(){var s=this,l=s._parent;l._duration===1/0&&(l._duration=Math.ceil(s._node.duration*10)/10,l._sprite.__default[1]===1/0&&(l._sprite.__default[1]=l._duration*1e3),l._ended(s)),s._node.removeEventListener("ended",s._endFn,!1)}};var o={},a=function(s){var l=s._src;if(o[l]){s._duration=o[l].duration,c(s);return}if(/^data:[^;]+;base64,/.test(l)){for(var h=atob(l.split(",")[1]),p=new Uint8Array(h.length),y=0;y<h.length;++y)p[y]=h.charCodeAt(y);f(p.buffer,s)}else{var E=new XMLHttpRequest;E.open(s._xhr.method,l,!0),E.withCredentials=s._xhr.withCredentials,E.responseType="arraybuffer",s._xhr.headers&&Object.keys(s._xhr.headers).forEach(function(w){E.setRequestHeader(w,s._xhr.headers[w])}),E.onload=function(){var w=(E.status+"")[0];if(w!=="0"&&w!=="2"&&w!=="3"){s._emit("loaderror",null,"Failed loading audio file with status: "+E.status+".");return}f(E.response,s)},E.onerror=function(){s._webAudio&&(s._html5=!0,s._webAudio=!1,s._sounds=[],delete o[l],s.load())},u(E)}},u=function(s){try{s.send()}catch{s.onerror()}},f=function(s,l){var h=function(){l._emit("loaderror",null,"Decoding audio data failed.")},p=function(y){y&&l._sounds.length>0?(o[l._src]=y,c(l,y)):h()};typeof Promise<"u"&&i.ctx.decodeAudioData.length===1?i.ctx.decodeAudioData(s).then(p).catch(h):i.ctx.decodeAudioData(s,p,h)},c=function(s,l){l&&!s._duration&&(s._duration=l.duration),Object.keys(s._sprite).length===0&&(s._sprite={__default:[0,s._duration*1e3]}),s._state!=="loaded"&&(s._state="loaded",s._emit("load"),s._loadQueue())},d=function(){if(i.usingWebAudio){try{typeof AudioContext<"u"?i.ctx=new AudioContext:typeof webkitAudioContext<"u"?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch{i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var s=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),l=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),h=l?parseInt(l[1],10):null;if(s&&h&&h<9){var p=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!p&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};e.Howler=i,e.Howl=n,typeof B<"u"?(B.HowlerGlobal=t,B.Howler=i,B.Howl=n,B.Sound=r):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=i,window.Howl=n,window.Sound=r)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(i){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var r=n._howls.length-1;r>=0;r--)n._howls[r].stereo(i);return n},HowlerGlobal.prototype.pos=function(i,n,r){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(n=typeof n!="number"?o._pos[1]:n,r=typeof r!="number"?o._pos[2]:r,typeof i=="number")o._pos=[i,n,r],typeof o.ctx.listener.positionX<"u"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(i,n,r,o,a,u){var f=this;if(!f.ctx||!f.ctx.listener)return f;var c=f._orientation;if(n=typeof n!="number"?c[1]:n,r=typeof r!="number"?c[2]:r,o=typeof o!="number"?c[3]:o,a=typeof a!="number"?c[4]:a,u=typeof u!="number"?c[5]:u,typeof i=="number")f._orientation=[i,n,r,o,a,u],typeof f.ctx.listener.forwardX<"u"?(f.ctx.listener.forwardX.setTargetAtTime(i,Howler.ctx.currentTime,.1),f.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),f.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),f.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),f.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),f.ctx.listener.upZ.setTargetAtTime(u,Howler.ctx.currentTime,.1)):f.ctx.listener.setOrientation(i,n,r,o,a,u);else return c;return f},Howl.prototype.init=function(i){return function(n){var r=this;return r._orientation=n.orientation||[1,0,0],r._stereo=n.stereo||null,r._pos=n.pos||null,r._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},r._onstereo=n.onstereo?[{fn:n.onstereo}]:[],r._onpos=n.onpos?[{fn:n.onpos}]:[],r._onorientation=n.onorientation?[{fn:n.onorientation}]:[],i.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(i,n){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(i,n)}}),r;var o=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof i=="number")r._stereo=i,r._pos=[i,0,0];else return r._stereo;for(var a=r._getSoundIds(n),u=0;u<a.length;u++){var f=r._soundById(a[u]);if(f)if(typeof i=="number")f._stereo=i,f._pos=[i,0,0],f._node&&(f._pannerAttr.panningModel="equalpower",(!f._panner||!f._panner.pan)&&t(f,o),o==="spatial"?typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):f._panner.setPosition(i,0,0):f._panner.pan.setValueAtTime(i,Howler.ctx.currentTime)),r._emit("stereo",f._id);else return f._stereo}return r},Howl.prototype.pos=function(i,n,r,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(i,n,r,o)}}),a;if(n=typeof n!="number"?0:n,r=typeof r!="number"?-.5:r,typeof o>"u")if(typeof i=="number")a._pos=[i,n,r];else return a._pos;for(var u=a._getSoundIds(o),f=0;f<u.length;f++){var c=a._soundById(u[f]);if(c)if(typeof i=="number")c._pos=[i,n,r],c._node&&((!c._panner||c._panner.pan)&&t(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(i,n,r)),a._emit("pos",c._id);else return c._pos}return a},Howl.prototype.orientation=function(i,n,r,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(i,n,r,o)}}),a;if(n=typeof n!="number"?a._orientation[1]:n,r=typeof r!="number"?a._orientation[2]:r,typeof o>"u")if(typeof i=="number")a._orientation=[i,n,r];else return a._orientation;for(var u=a._getSoundIds(o),f=0;f<u.length;f++){var c=a._soundById(u[f]);if(c)if(typeof i=="number")c._orientation=[i,n,r],c._node&&(c._panner||(c._pos||(c._pos=a._pos||[0,0,-.5]),t(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(i,n,r)),a._emit("orientation",c._id);else return c._orientation}return a},Howl.prototype.pannerAttr=function(){var i=this,n=arguments,r,o,a;if(!i._webAudio)return i;if(n.length===0)return i._pannerAttr;if(n.length===1)if(typeof n[0]=="object")r=n[0],typeof o>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),i._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:i._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:i._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:i._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:i._panningModel});else return a=i._soundById(parseInt(n[0],10)),a?a._pannerAttr:i._pannerAttr;else n.length===2&&(r=n[0],o=parseInt(n[1],10));for(var u=i._getSoundIds(o),f=0;f<u.length;f++)if(a=i._soundById(u[f]),a){var c=a._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var d=a._panner;d?(d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel):(a._pos||(a._pos=i._pos||[0,0,-.5]),t(a,"spatial"))}return i},Sound.prototype.init=function(i){return function(){var n=this,r=n._parent;n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,i.call(this),n._stereo?r.stereo(n._stereo):n._pos&&r.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(i){return function(){var n=this,r=n._parent;return n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,n._stereo?r.stereo(n._stereo):n._pos?r.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,r._refreshBuffer(n)),i.call(this)}}(Sound.prototype.reset);var t=function(i,n){n=n||"spatial",n==="spatial"?(i._panner=Howler.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,typeof i._panner.positionX<"u"?(i._panner.positionX.setValueAtTime(i._pos[0],Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],Howler.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),typeof i._panner.orientationX<"u"?(i._panner.orientationX.setValueAtTime(i._orientation[0],Howler.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],Howler.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],Howler.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=Howler.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,Howler.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}})()})(wi);class U{constructor(t=0,i=t){this.x=t,this.y=i,this.set=(n,r=n)=>(this.x=n,this.y=r,this),this.clone=()=>new U(this.x,this.y),this.add=n=>new U(this.x+n.x,this.y+n.y),this.sub=n=>new U(this.x-n.x,this.y-n.y),this.scale=n=>new U(this.x*n.x,this.y*n.y),this.dist=n=>Math.sqrt((this.x-n.x)*(this.x-n.x)+(this.y-n.y)*(this.y-n.y)),this.len=()=>this.dist(new U),this.len2=()=>this.x*this.x+this.y*this.y,this.normal=()=>new U(this.y,-this.x),this.dot=n=>this.x*n.x+this.y*n.y,this.angle=n=>df(Math.atan2(this.y-n.y,this.x-n.x)),this.lerp=(n,r)=>new U(ha(this.x,n.x,r),ha(this.y,n.y,r)),this.toFixed=n=>new U(Number(this.x.toFixed(n)),Number(this.y.toFixed(n))),this.eq=n=>this.x===n.x&&this.y===n.y}}class Ze{constructor(t,i,n){this.pos=t,this.width=i,this.height=n}}function df(e){return e*180/Math.PI}function ha(e,t,i){return e+(t-e)*i}function pf(e,t,i){return Math.max(t,Math.min(i,e))}function ru(e,t,i){for(;e<t;)e+=i-t;for(;e>=i;)e-=i-t;return e}function mi(e,t){return e.pos.x<t.pos.x+t.width&&e.pos.x+e.width>t.pos.x&&e.pos.y<t.pos.y+t.height&&e.pos.y+e.height>t.pos.y}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bi(e,t,i,n){function r(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function u(d){try{c(n.next(d))}catch(s){a(s)}}function f(d){try{c(n.throw(d))}catch(s){a(s)}}function c(d){d.done?o(d.value):r(d.value).then(u,f)}c((n=n.apply(e,t||[])).next())})}function je(e,t,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(e):n?n.value:t.get(e)}function _f(e,t,i,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(e,i):r?r.value=i:t.set(e,i),i}var at;(function(e){e.CUSTOM="custom",e.IMAGE_LAYER="imagelayer",e.LAYER="layer",e.OBJECT_GROUP="objectgroup",e.PROPERTIES="properties",e.TILESET="tileset"})(at||(at={}));var Ai;(function(e){e.NON_COLLIDING="noCollide",e.INVISIBLE="invisible",e.ONE_WAY="oneWay"})(Ai||(Ai={}));var ce;(function(e){e.BLACK="#000",e.BLACK1="#000000FF",e.BLACK0="#00000000",e.LIGHT="#FADC96CC",e.BLUE="#7CF",e.DARK_GREY="#222",e.DARK_RED="#D00",e.GREEN="#0F0",e.LIGHT_RED="#F00",e.PURPLE="#F0F",e.WHITE="#FFF",e.WHITE_25="#FFFFFF19",e.WHITE_50="#FFFFFF80"})(ce||(ce={}));var Kr;(function(e){e.BOX="box",e.POLYGON="polygon"})(Kr||(Kr={}));var ft;(function(e){e[e.DIAGONALLY=536870912]="DIAGONALLY",e[e.HORIZONTALLY=2147483648]="HORIZONTALLY",e[e.VERTICALLY=1073741824]="VERTICALLY"})(ft||(ft={}));const Qr=()=>{};function mf(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Fe(){return typeof performance<"u"&&performance.now()||0}function dn(e){return!!(e&&e.length)}function gf(e){return{H:!!(e&ft.HORIZONTALLY),V:!!(e&ft.VERTICALLY),D:!!(e&ft.DIAGONALLY)}}class yf{constructor(t){this.game=t,this.isRunning=!1,this.duration=0,this.progress=0,this.elapsed=0,this.intensity=new U,this.offset=new U}start(t,i){this.isRunning=!0,this.duration=t,this.intensity.set(i.x,i.y),this.offset.set(0),this.progress=0,this.elapsed=0}update(){if(!this.isRunning)return;const{delta:t,resolution:i}=this.game;this.elapsed+=t*1e3,this.progress=pf(this.elapsed/this.duration,0,1),this.elapsed<this.duration?this.offset.set(Math.random()*this.intensity.x*i.x*2-this.intensity.x*i.x,Math.random()*this.intensity.y*i.y*2-this.intensity.y*i.y):this.reset()}reset(){this.isRunning=!1,this.offset.set(0)}}class vf{constructor(t){this.game=t,this.pos=new U,this.offset=new U,this.anchor=new U,this.speed=new U(1),this.shaker=new yf(t)}moveTo(t,i){this.pos=new U(-t,-i),this.anchor=this.pos.clone()}center(){this.follow?this.moveTo(this.follow.pos.x+this.follow.width/2,this.follow.pos.y+this.follow.height/2):this.moveTo(this.game.resolution.x/2,this.game.resolution.y/2)}getBounds(){return this.bounds||this.setBounds(0,0,this.game.resolution.x,this.game.resolution.y),this.bounds}setBounds(t,i,n,r){this.bounds=new Ze(new U(t,i),n,r)}setSpeed(t,i=t){this.speed=new U(t,i)}setOffset(t,i){this.offset=new U(-t,-i)}setFollow(t,i=!0){this.follow=t,i&&this.center()}shake(t,i){this.shaker.start(t,i)}update(){if(this.follow){const{speed:t,follow:i}=this,{x:n,y:r}=this.game.resolution,{width:o,height:a}=this.getBounds(),u=new U(-n/2+i.pos.x+i.force.x+i.width/2,-r/2+i.pos.y+i.force.y+i.height/2),f=new U((u.x+this.pos.x-this.offset.x-this.shaker.offset.x)*t.x,(u.y+this.pos.y-this.offset.y-this.shaker.offset.y)*t.y);this.pos=this.pos.sub(new U(Math.round(f.x/this.game.scale),Math.round(f.y/this.game.scale))),this.pos.x-n<-o&&(this.pos.x=-o+n),this.pos.y-r<-a&&(this.pos.y=-a+r),this.pos.x>0&&(this.pos.x=0),this.pos.y>0&&(this.pos.y=0)}else this.pos.x=this.anchor.x-Math.round(this.offset.x-this.shaker.offset.x),this.pos.y=this.anchor.y-Math.round(this.offset.y-this.shaker.offset.y);this.shaker.update()}}var xe;class Ce{constructor(t,i){this.game=i,this.width=0,this.height=0,this.pos=new U,this.expectedPos=new U,this.initialPos=new U,this.force=new U,this.shape=Kr.BOX,this.collisionLayers=[],this.collisions=!1,this.solid=!1,this.visible=!0,this.active=!0,this.dead=!1,xe.set(this,void 0),this.onGround=()=>this.pos.y<this.expectedPos.y,this.onCeiling=()=>this.pos.y>this.expectedPos.y,this.onRightWall=()=>this.pos.x<this.expectedPos.x,this.onLeftWall=()=>this.pos.x>this.expectedPos.x,this.id=t.id&&`${t.id}`||mf(),this.gid=t.gid,this.pos=new U(t.x,t.y-(t.gid?t.height:0)),this.color=t.color,this.type=t.type,this.width=t.width||this.width,this.height=t.height||this.height,this.properties=t.properties,this.rotatation=t.rotation,this.layerId=t.layerId,this.visible=t.visible!==void 0?t.visible:!0,this.initialPos=this.pos.clone()}collide(t){}setCollisionArea(...t){if(t.length===4){const[i,n,r,o]=t;this.bounds=new Ze(new U(i,n),r,o)}else this.bounds=new Ze(new U,this.width,this.height)}getCollisionArea(){return this.bounds||new Ze(new U,this.width,this.height)}getBoundingBox(t=this.pos.x,i=this.pos.y){if(this.bounds){const{pos:n,width:r,height:o}=this.bounds;return new Ze(new U(n.x+t,n.y+i),r,o)}else return new Ze(new U(t,i),this.width,this.height)}draw(){if(this.visible){const{ctx:t}=this.game,{camera:i,debug:n}=this.game.getCurrentScene(),r=new U(Math.floor(this.pos.x+i.pos.x),Math.floor(this.pos.y+i.pos.y));je(this,xe,"f")?je(this,xe,"f").draw(r,this.flips):this.color&&(t.save(),t.fillStyle=this.color,t.beginPath(),t.rect(this.pos.x+i.pos.x,this.pos.y+i.pos.y,this.width,this.height),t.fill(),t.closePath(),t.restore()),n&&this.displayDebug()}}addSprite(t){_f(this,xe,t,"f")}animate(t,i,n=Qr){je(this,xe,"f")&&je(this,xe,"f").animate&&(this.flips=i,je(this,xe,"f").animate(t),n(je(this,xe,"f").animFrame)),t!==this.animation&&t.bounds&&dn(t.bounds)&&this.setCollisionArea(...t.bounds),this.animation=t}getAnimationFrame(){var t;return((t=je(this,xe,"f"))===null||t===void 0?void 0:t.animFrame)||0}setAnimationFrame(t){je(this,xe,"f")&&(je(this,xe,"f").animFrame=t)}kill(){this.dead=!0}show(){this.visible=!0}hide(){this.visible=!1}approach(t,i,n,r=1){return t<i?Math.min(t+n*r,i*r):Math.max(t-n*r,i*r)}update(){if(this.expectedPos=new U(this.pos.x+this.force.x,this.pos.y+this.force.y),this.collisions&&(this.force.x!==0||this.force.y!==0)){const t=this.game.getCurrentScene(),i=this.getCollisionArea(),n=t.camera.getBounds(),{tilewidth:r,tileheight:o}=t;(this.expectedPos.x+i.pos.x<=n.pos.x||this.expectedPos.x+i.pos.x+i.width>=n.pos.x+n.width)&&(this.force.x=0),(this.expectedPos.y+i.pos.y<=n.pos.y||this.expectedPos.y+i.pos.y+i.height>=n.pos.y+n.height)&&(this.force.y=0);const a=this.pos.x+i.pos.x,u=this.pos.y+i.pos.y,f=Math.ceil((this.expectedPos.x+i.pos.x)/r)-1,c=Math.ceil((this.expectedPos.y+i.pos.y)/o)-1,d=Math.ceil((this.expectedPos.x+i.pos.x+i.width)/r),s=Math.ceil((this.expectedPos.y+i.pos.y+i.height)/o),l=this.getBoundingBox(this.expectedPos.x,this.pos.y),h=this.getBoundingBox(this.pos.x,this.expectedPos.y);if(dn(this.collisionLayers))for(const p of this.collisionLayers){const y=t.getLayer(p);switch(y.type){case at.LAYER:for(let E=c;E<s;E++)for(let w=f;w<d;w++){const v=t.getTile(w,E,y.id);if(v&&v.isSolid()){const m=v.getBounds(w,E);mi(m,l)&&Math.abs(this.force.x)>0&&!v.isOneWay()&&(this.force.x=this.force.x<0?m.pos.x+v.width-a:m.pos.x-i.width-a),mi(m,h)&&(!v.isOneWay()&&Math.abs(this.force.y)>0?this.force.y=this.force.y<0?m.pos.y+v.height-u:m.pos.y-i.height-u:this.force.y>=0&&v.isOneWay()&&this.pos.y+i.pos.y+i.height<=m.pos.y&&(this.force.y=m.pos.y-i.height-u))}}break;case at.OBJECT_GROUP:t.objects.forEach(E=>{const w=E.getBoundingBox(E.pos.x,E.pos.y);E.id!==this.id&&E.collisions&&E.layerId===p&&E.collisionLayers.includes(this.layerId)&&(E.solid&&(mi(w,h)&&Math.abs(this.force.y)>0&&(this.force.y=this.force.y<0?w.pos.y+E.height-u:w.pos.y-i.height-u),mi(w,l)&&Math.abs(this.force.x)>0&&(this.force.x=this.force.x<0?w.pos.x+E.width-a:w.pos.x-i.width-a)),mi(w,this.getBoundingBox(this.expectedPos.x,this.expectedPos.y))&&(this.collide(E),E.collide(this)))});break}}}this.pos.x+=this.force.x,this.pos.y+=this.force.y}onScreen(){const t=this.game.getCurrentScene(),{camera:i,tilewidth:n,tileheight:r}=t,{pos:o,width:a,height:u}=this.getCollisionArea(),{x:f,y:c}=this.game.resolution,d=this.pos.x+o.x,s=this.pos.y+o.y;return d+a+n>-i.pos.x&&s+u+r>-i.pos.y&&d-n<-i.pos.x+f&&s-r<-i.pos.y+c}displayDebug(){const{draw:t}=this.game,{camera:i}=this.game.getCurrentScene(),{width:n,height:r,type:o,visible:a,force:u}=this,[f,c]=[Math.floor(this.pos.x+i.pos.x),Math.floor(this.pos.y+i.pos.y)],[d,s]=[f+n+4,c+r/2];t.outline(new Ze(new U(f,c),n,r),a?ce.WHITE_50:ce.PURPLE,.25),t.outline(this.getBoundingBox(f,c),a?ce.GREEN:ce.PURPLE,.5),t.fillText(`${o}`,f,c-10,ce.WHITE),t.fillText(`x:${Math.floor(this.pos.x)}`,f,c-6,ce.LIGHT_RED),t.fillText(`y:${Math.floor(this.pos.y)}`,f,c-2,ce.LIGHT_RED),u.x!==0&&t.fillText(`${u.x.toFixed(2)}`,d,s-2,ce.LIGHT_RED),u.y!==0&&t.fillText(`${u.y.toFixed(2)}`,d,s+2,ce.LIGHT_RED)}}xe=new WeakMap;class ii{constructor(t,i){this.game=i,this.type=at.CUSTOM,this.properties={},this.data=[],this.objects=[],this.visible=!0,this.id=t?.id||0,this.name=t?.name,this.type=t?.type||at.CUSTOM,this.width=t?.width,this.height=t?.height,this.visible=t?.visible===void 0?!0:!!t.visible,this.properties=t?.properties||{},this.data=t?.data||[]}update(){}isInRange(t,i){return t>=0&&i>=0&&t<this.width&&i<this.height}get(t,i){return this.isInRange(t,i)&&this.data[t+this.width*i]||null}put(t,i,n){this.isInRange(t,i)&&(this.data[t+this.width*i]=n)}clear(t,i){this.isInRange(t,i)&&(this.data[t+this.width*i]=null)}toggleVisibility(t){this.visible=t}draw(){const t=this.game.getCurrentScene();if(this.visible)switch(this.type){case at.LAYER:t.forEachVisibleTile(this,(i,n,r)=>i?.draw(n,r));break;case at.OBJECT_GROUP:t.forEachVisibleObject(i=>i.visible&&i.draw(),this.id);break}}}class wf{constructor(t,i,n,r){this.id=t,this.width=i,this.height=n,this.game=r,this.animFrame=0,this.then=Fe(),this.frameStart=Fe()}animate(t=this.animation){if(t){this.animFrame=this.animFrame||0,this.frameStart=Fe(),this.animation!==t&&(this.animation=t,this.animFrame=0);const i=t.strip?t.strip.duration:t.frames&&t.frames[this.animFrame][2]||0,n=t.strip?t.strip.frames:t.frames&&t.frames.length||0;this.frameStart-this.then>i&&(this.animFrame<=n&&t.loop?this.animFrame=ru(this.animFrame+1,0,n):this.animFrame<n-1&&!t.loop&&(this.animFrame+=1),this.then=Fe())}}draw(t,i){const{id:n,animation:r,animFrame:o,width:a,height:u}=this,{ctx:f}=this.game,c=this.game.getImage(n),d=i?.H?-1:1,s=i?.V?-1:1,l=i?.H?a*-1:0,h=i?.V?u*-1:0,p=i?.H||i?.V,[y,E]=[(t.x-l)*d,(t.y-h)*s];if(f.save(),p&&f.scale(d,s),r){const{frames:w,strip:v}=r,m=w&&w[o]||[0,0],b=v?v.x+o*r.width:m[0],T=v?v.y:m[1];f.drawImage(c,b,T,r.width,r.height,y,E,r.width,r.height)}else c&&f.drawImage(c,0,0,a,u,y,E,a,u);f.restore()}}class bf{constructor(t,i,n){this.id=t,this.tileset=i,this.game=n,this.animFrame=0,this.then=Fe(),this.frameStart=Fe(),this.isSolid=()=>this.type!==Ai.NON_COLLIDING,this.isOneWay=()=>this.type===Ai.ONE_WAY,this.isInvisible=()=>this.type===Ai.INVISIBLE,this.properties=this.getTileProperties(t,this.tileset),this.type=this.properties&&this.properties.type||null,this.width=this.tileset.tilewidth,this.height=this.tileset.tileheight,this.terrain=this.getTerrain()}getTileProperties(t,i){const{firstgid:n,tiles:r}=i;return dn(r)&&r.filter(o=>o.id===t-n)[0]||{}}getBounds(t,i){return new Ze(new U(t*this.width,i*this.height),this.width,this.height)}getTerrain(){const{terrain:t}=this.properties;return t&&t.split(",").map(i=>i?parseInt(i):null)}getNextGid(){if(this.properties&&this.properties.animation){this.frameStart=Fe();const{frames:t}=this.properties.animation;return this.frameStart-this.then>t[this.animFrame].duration&&(this.animFrame<=t.length&&(this.animFrame=ru(this.animFrame+1,0,t.length)),this.then=Fe()),t[this.animFrame].tileid+this.tileset.firstgid}else return this.id}draw(t,i){if(!this.isInvisible()){const{ctx:n,draw:r}=this.game,{image:o,columns:a,firstgid:u,tilewidth:f,tileheight:c}=this.tileset,d=this.getNextGid(),s=(d-u)%a*f,l=(Math.ceil((d-u+1)/a)-1)*c,h=i?.H?-1:1,p=i?.V?-1:1,y=i?.H?f*-1:0,E=i?.V?c*-1:0,w=i?.H||i?.V,[v,m]=[(t.x-y)*h,(t.y-E)*p];n.save(),w&&n.scale(h,p),n.drawImage(this.game.getImage(o),s,l,f,c,v,m,f,c),n.restore(),this.game.getCurrentScene().debug&&(r.fillText(`${this.id}`,t.x+2,t.y+6,ce.WHITE_50),r.outline(new Ze(t,f,c),ce.WHITE_25,.1))}}}class Jr{constructor(t){this.entities={},this.layers=[],this.tiles={},this.objects=[],this.tilewidth=0,this.tileheight=0,this.width=0,this.height=0,this.debug=!1,this.game=t,this.camera=new vf(t),t.debug&&t.gui&&t.gui.add(this,"debug").listen()}init(){return bi(this,void 0,void 0,function*(){})}update(){for(const t of this.layers)t instanceof ii&&t.update();for(const t of this.objects)t.active&&(t.update(),t.dead&&this.removeObject(t));this.camera.update()}draw(){const{ctx:t,colors:i,draw:n,width:r,height:o,scale:a}=this.game;t.imageSmoothingEnabled=!1,t.save(),t.scale(a,a),t.clearRect(0,0,r/a,o/a),i.backgroundColor&&(t.fillStyle=i.backgroundColor,t.fillRect(0,0,r/a,o/a));for(const u of this.layers)u instanceof ii&&u.draw();this.debug&&(n.fillText("CAMERA",4,8,ce.WHITE),n.fillText(`x:${Math.floor(this.camera.pos.x)}`,4,12,ce.LIGHT_RED),n.fillText(`y:${Math.floor(this.camera.pos.y)}`,4,16,ce.LIGHT_RED)),t.restore()}setDimensions(t,i,n,r){this.tilewidth=n,this.tileheight=r,this.width=t,this.height=i,this.camera.setBounds(0,0,t*n,i*r)}createLayers(t){this.layers=[],t.forEach(i=>this.addLayer(i))}addLayer(t){typeof t=="function"?this.layers.push(new t(null,this.game)):(this.layers.push(new ii(t,this.game)),t.objects&&t.objects.forEach(i=>this.addObject(i.type,Object.assign(Object.assign({},i),{layerId:t.id}))))}addObject(t,i,n){const r=this.game.objectClasses[t],o=r?new r(i,this.game):new Ce(i,this.game);return o.image?o.addSprite(this.createSprite(o.image,o.width,o.height)):o.gid&&o.addSprite(this.tiles[o.gid]),n!==void 0?this.objects.splice(n,0,o):this.objects.push(o),o}removeObject(t){this.objects.splice(this.objects.indexOf(t),1)}addTileset(t,i){const n=Object.assign(Object.assign({},t),{image:i});for(let r=0;r<n.tilecount;r++)this.tiles[r+n.firstgid]=new bf(r+n.firstgid,n,this.game)}forEachVisibleObject(t=Qr,i){for(const n of this.objects)(i===void 0||n.layerId===i)&&n.visible&&t(n)}forEachVisibleTile(t,i=Qr){const{camera:n,tilewidth:r,tileheight:o}=this,{resolution:a}=this.game;let u=Math.floor(n.pos.y%o),f=Math.floor(-n.pos.y/o);for(;u<=a.y;){let c=Math.floor(n.pos.x%r),d=Math.floor(-n.pos.x/r);for(;c<=a.x;){const s=t?.get(d,f);s&&i(this.getTileObject(s),new U(c,u),gf(s)),c+=r,d++}u+=o,f++}}createSprite(t,i,n){return new wf(t,i,n,this.game)}getLayer(t){return this.layers.find(i=>i.id===t)||{}}getObjects(){return this.objects}getObjectById(t){return this.objects.find(i=>i.id===t)}getObjectByType(t){return this.objects.find(i=>i.type===t)}getObjectsByType(t){return this.objects.filter(i=>i.type===t)}getObjectLayers(){return this.layers.filter(t=>dn(t.objects))}getObjectGridPos(t){return new U(Math.round(t.pos.x/this.tilewidth),Math.round(t.pos.y/this.tileheight))}getTile(t,i,n){return this.getTileObject(this.getLayer(n).get(t,i)||0)}getTileObject(t){const i=t&=~(ft.HORIZONTALLY|ft.VERTICALLY|ft.DIAGONALLY);return this.tiles[i]}removeLayer(t){this.layers.splice(t,1)}showLayer(t){this.getLayer(t).toggleVisibility(!0)}hideLayer(t){this.getLayer(t).toggleVisibility(!1)}}class xf{constructor(t){this.ctx=t}preloader(t,i,n,r){const{ctx:o}=this,a=.15,u=Math.round(i.x*n)*a,f=Math.round(i.x*n-u*2),c=Math.round(i.y/2*n);o.fillStyle=r.backgroundColor,o.fillRect(0,0,i.x*n,i.y*n),o.fillStyle=r.preloaderColor,o.fillRect(u,c-5*n,f,10*n),o.fillStyle=r.backgroundColor,o.fillRect(u+1*n,c-4*n,f-2*n,8*n),o.fillStyle=r.preloaderColor,o.fillRect(u+2*n,c-3*n,(f-4*n)*t,6*n)}outline(t,i,n=1){const{ctx:r}=this,{pos:o,width:a,height:u}=t;r.save(),r.strokeStyle=i,r.lineWidth=n,r.beginPath(),r.moveTo(o.x,o.y),r.lineTo(o.x+a,o.y),r.lineTo(o.x+a,o.y+u),r.lineTo(o.x,o.y+u),r.lineTo(o.x,o.y),r.stroke(),r.restore()}stroke(t,i,n,r){const{ctx:o}=this;o.save(),o.strokeStyle=r,o.beginPath(),o.moveTo(n[0].x+t,n[0].y+i),n.map(a=>o.lineTo(t+a.x,i+a.y)),o.lineTo(n[0].x+t,n[0].y+i),o.stroke(),o.restore()}fillText(t,i,n,r){const{ctx:o}=this;o.font="4px Courier",o.fillStyle=r,o.fillText(t,i,n)}createPixelFontRenderer(t,i,n){return(r,o,a)=>{r.split(`
`).reverse().map((u,f)=>{for(let c=0;c<u.length;c++){const d=u.charCodeAt(c);this.ctx.drawImage(t,d%n*i,Math.ceil((d+1)/n-1)*i,i,i,Math.floor(o+c*i),Math.floor(a-f*(i+1)),i,i)}})}}}class Ef{constructor(t){this.resolution=new U,this.then=Fe(),this.assets={},this.soundFiles={},this.sounds={},this.objectClasses={},this.sceneClasses=[],this.scenes=[],this.events={},this.keyStates={},this.timeouts={},this.debug=!1,this.paused=!1,this.loaded=!1,this.stoped=!0,this.currentScene=0,this.lastFrameTime=0,this.frameTime=0,this.lastLoop=0,this.delta=0,this.fps=60,this.ctx=t.canvas.getContext("2d"),this.sceneClasses=t.scenes,this.objectClasses=t.entities,this.width=t?.width||t.canvas.width,this.height=t?.height||t.canvas.height,this.scale=t.scale||1,this.debug=!!t.debug,this.colors={backgroundColor:t?.backgroundColor||"#000",preloaderColor:t?.preloaderColor||"#222"},this.draw=new xf(this.ctx),this.debug&&this.datGui(),document.addEventListener("keydown",i=>this.onKey(!0,i),!1),document.addEventListener("keyup",i=>this.onKey(!1,i),!1),t.global&&(window.Platfuse=this)}onLoad(t){return bi(this,void 0,void 0,function*(){this.assets=t,this.scenes=yield Promise.all(this.sceneClasses.map(i=>bi(this,void 0,void 0,function*(){const n=new i(this);return yield n.init(),n}))),this.loaded=!0})}preload(t){return bi(this,void 0,void 0,function*(){this.loaded=!1;let i=0;const n=Object.keys(t).length,r=f=>this.draw.preloader(f,this.resolution,this.scale,this.colors),o=f=>{const c=t[f];return new Promise(d=>{if(/\.(gif|jpe?g|png|webp|bmp)$/i.test(c)){const s=new Image;s.src=c,s.onload=()=>(r(++i/n),d(s))}else if(/\.(webm|mp3|wav)$/i.test(c)){const s=new Audio;s.addEventListener("canplaythrough",()=>(r(++i/n),this.soundFiles[f]=c,d(s)),!1),s.src=c}else return Promise.resolve()})},a=Object.keys(t).map(f=>bi(this,void 0,void 0,function*(){return{[f]:yield o(f)}})),u=Object.assign({},...yield Promise.all(a));return yield this.onLoad(u),u})}frame(t){if(this.loaded&&!this.stoped){const i=Fe();this.delta=(t-this.lastFrameTime)/1e3,this.frameTime+=(i-this.lastLoop-this.frameTime)/100,this.fps=1e3/this.frameTime,this.lastLoop=i,!this.paused&&this.delta<.2&&this.loop(),this.lastFrameTime=t,this.animationFrame=requestAnimationFrame(n=>this.frame(n))}}loop(){const t=this.getCurrentScene();t instanceof Jr&&(this.fireEvents(),t.update(),t.draw())}start(){this.stoped=!1,this.animationFrame=requestAnimationFrame(t=>this.frame(t))}stop(){this.stoped=!0,this.animationFrame&&cancelAnimationFrame(this.animationFrame)}restart(){this.stop(),this.start()}fireEvents(){Object.keys(this.keyStates).map(t=>{typeof this.events[t]=="function"&&this.events[t]()})}onKey(t,i){t?this.keyStates[i.code]=t:delete this.keyStates[i.code],i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation()}isKeyDown(t){return this.keyStates[t]||!1}onKeyDown(t,i){this.events=Array.isArray(t)?Object.assign({},this.events,...t.map(n=>({[n]:i}))):Object.assign(Object.assign({},this.events),{[t]:i})}getCurrentScene(){if(this.scenes[this.currentScene]instanceof Jr)return this.scenes[this.currentScene];throw new Error("No current scene!")}getImage(t){if(this.assets[t]instanceof HTMLImageElement)return this.assets[t];throw new Error("Invalid image!")}playScene(t){this.currentScene=t,this.restart()}setScale(t){this.scale=t,this.resolution.x=Math.round(this.width/this.scale),this.resolution.y=Math.round(this.height/this.scale)}setSize(t,i,n){this.width=t,this.height=i,this.setScale(n||this.scale)}wait(t,i,n){this.timeouts[t]||(this.timeouts[t]=setTimeout(()=>{this.cancelWait(t),typeof i=="function"&&i()},n))}cancelWait(t){this.timeouts[t]&&(clearTimeout(this.timeouts[t]),delete this.timeouts[t])}datGui(){this.gui&&this.gui.destroy(),this.gui=new cf,this.gui.add(this,"fps").listen()}setAudioVolume(t){wi.Howler.volume(t)}playSound(t){if(this.sounds[t]instanceof wi.Howl)this.sounds[t].play();else if(this.soundFiles[t])this.sounds[t]=new wi.Howl({src:this.soundFiles[t]}),this.sounds[t].play();else throw new Error("Invalid sound!")}loopSound(t,i=1){if(this.soundFiles[t])this.sounds[t]=new wi.Howl({src:this.soundFiles[t],loop:!0,volume:i}),this.sounds[t].play();else throw new Error("Invalid sound!")}}var q=(e=>(e[e.CUSTOM_BACKGROUND=0]="CUSTOM_BACKGROUND",e[e.BACKGROUND=1]="BACKGROUND",e[e.MAIN=2]="MAIN",e[e.OBJECTS=3]="OBJECTS",e[e.FOREGROUND=4]="FOREGROUND",e[e.FLASH=5]="FLASH",e[e.DARKNESS=6]="DARKNESS",e[e.CUSTOM_OVERLAY=7]="CUSTOM_OVERLAY",e))(q||{}),Ae=(e=>(e.UP="up",e.RIGHT="right",e.DOWN="down",e.LEFT="left",e))(Ae||{}),xt=(e=>(e.ENEMIES="enemies",e.PARTICLES="particles",e.TRAPS="traps",e))(xt||{}),j=(e=>(e.AMMO="ammo",e.BAT="bat",e.BULLET="bullet",e.COIN="coin",e.DUST="dust",e.PARTICLE="particle",e.EMITTER="emitter",e.HEALTH="health",e.PLAYER="player",e.ITEM="item",e.SPIDER="spider",e.SPIKES="spikes",e.ZOMBIE="zombie",e))(j||{}),Tn=(e=>(e.BLACK="#000",e.BLUE_SKY="#7CF",e.BONUS="rgba(255,32,32,0.2)",e.DARK_GREY="#222",e.DARK_RED="#D00",e.GREEN="#0F0",e.LIGHT_RED="#F00",e.PURPLE="#F0F",e.FLASH="rgba(255,255,255,0.6)",e.SPIDER_WEB="rgba(255,255,255,0.5)",e.TORCH="rgba(255,243,115,0.1)",e.TRANS_WHITE="rgba(255,255,255,0.15)",e.WATER="rgba(66,100,245,0.1)",e))(Tn||{});const Zi={IDLE:{strip:{x:168,y:0,frames:1,duration:0},width:28,height:20,bounds:[5,0,18,14],loop:!1},RIGHT:{strip:{x:0,y:0,frames:6,duration:60},width:28,height:20,bounds:[5,0,18,14],loop:!0},LEFT:{strip:{x:0,y:20,frames:6,duration:60},width:28,height:20,bounds:[5,0,18,14],loop:!0},FALL:{strip:{x:168,y:20,frames:1,duration:0},width:28,height:20,bounds:[5,0,18,14],loop:!1}},ni={AMMO:187,COIN:182,HEALTH:177};let Tf=class extends Ce{type=j.ITEM;layerId=q.OBJECTS;collisionLayers=[q.MAIN,q.OBJECTS];collisions=!0;constructor(t,i){super({...t,width:16,height:16},i)}collide(t){if(t.type===j.PLAYER&&!this.dead){const i=t;switch(this.gid){case ni.AMMO:i.ammo[1]++;break;case ni.COIN:i.points+=100;break;case ni.HEALTH:i.energy[0]=i.energy[1];break}this.game.playSound("powerup.mp3"),this.kill()}}update(){if(super.update(),this.onGround())Math.abs(this.force.y)>.1&&(this.force.y*=-.6);else{const{gravity:t}=this.game.getCurrentScene();this.force.y+=this.force.y>0?t:t/2}this.force.x=this.approach(this.force.x,0,.2)}};function ou(e,t){const i=e.getCurrentScene(),n=[0,0,0,0,0,0,0,0,0,0,1,1,1,1,2],r=Math.floor(Math.random()*n.length),o=[ni.COIN,ni.AMMO,ni.HEALTH][n[r]];i.addObject(j.ITEM,{x:t.x,y:t.y,gid:o})}const{LEFT:$i,RIGHT:qi}=Ae;class Af extends Ce{image="bat.png";family=xt.ENEMIES;layerId=q.OBJECTS;collisionLayers=[q.MAIN,q.OBJECTS];direction=$i;activated=!1;collisions=!0;turning=!1;damage=0;energy=[10,10];state=0;update(){super.update();const t=this.game.getCurrentScene(),i=t.getObjectByType(j.PLAYER);switch(this.state){case 0:this.onScreen()&&(this.activated=!0,this.animate(Zi.IDLE),this.game.wait(`bat-${this.id}-awake`,()=>this.state=1,1e3));break;case 1:this.damage=10,this.force.y+=this.pos.y>i.pos.y+24?-.1:.02,this.force.x=this.approach(this.force.x,this.direction===$i?-1:1,.1),(this.expectedPos.x!==this.pos.x||this.pos.x<=Math.abs(t.camera.pos.x)&&this.direction===$i||this.pos.x>=Math.abs(t.camera.pos.x-this.game.resolution.x)&&this.direction===qi)&&this.turnAround(),this.animate(this.direction===qi?Zi.RIGHT:Zi.LEFT);break;case 2:this.damage=0,this.force.x=0,this.force.y+=.2,this.animate(Zi.FALL),this.onGround()&&(ou(this.game,new U(this.pos.x+this.width/2,this.pos.y-16)),this.kill());break}}hit(t){this.energy[0]-=t,this.force.x*=-1,this.energy[0]<=0&&(this.state=2)}collide(t){if(t.collisions)switch(t.type){case j.BULLET:const i=t;this.hit(i.damage);break;case j.PLAYER:t.hit(this.damage);break}}turnAround(){this.turning||(this.turning=!0,this.force.x*=-.6,this.force.y-=.05,this.direction=this.direction===qi?$i:qi,this.game.wait(`bat-${this.id}-turn`,()=>this.turning=!1,500))}}function We(e,t){return e+Math.random()*(t-e)}function de(e,t){return Math.round(We(e,t))}class If extends Ce{family=xt.PARTICLES;collisionLayers=[q.MAIN];collisions=!0;mass;life;constructor(t,i){super(t,i);const n=de(0,2)*Math.PI,r=de(.5,1);this.mass=t.mass||de(.3,1),this.life=t.life||de(60,120),this.force=t.force||{x:Math.cos(n)*r,y:Math.sin(n)*r}}update(){this.dead||(super.update(),(this.pos.y!==this.expectedPos.y||this.pos.x!==this.expectedPos.x)&&(this.force.y*=-.8,this.force.x*=.9),this.force.y+=this.mass,this.life--),this.life<0&&this.kill()}}function au(e,t,i){const n=e.getCurrentScene(),{count:r,radius:o}=i;for(let a=0;a<r;a++)n.addObject(j.PARTICLE,{x:t.x-o/2+de(0,o),y:t.y-o/2+de(0,o),force:i.forceVector(),life:i.ttl(),...i})}const eo={BLOOD:{type:j.PARTICLE,layerId:q.OBJECTS,width:1,height:1,mass:.5,count:10,radius:8,color:`rgb(${128+de(0,32)*4}, 0, 0)`,ttl:()=>de(60,120),forceVector:()=>({x:Math.cos(We(0,2)*Math.PI)*.5+We(0,1),y:Math.cos(We(0,2)*Math.PI)*.5+We(0,1)})},DIRT:{type:j.PARTICLE,layerId:q.OBJECTS,mass:.3,width:2,height:2,count:10,radius:8,color:"#000",ttl:()=>de(60,120),forceVector:()=>({x:Math.cos(de(0,2)*Math.PI)*.8+de(0,1),y:de(-1,-4)})},RUBBLE:{type:j.PARTICLE,layerId:q.OBJECTS,width:2,height:2,mass:.5,count:10,radius:8,color:"#000",ttl:()=>de(60,120),forceVector:()=>({x:Math.cos(We(0,2)*Math.PI)*.5+We(0,1),y:Math.cos(We(0,2)*Math.PI)*.5+We(0,1)})}},su={DUST:{strip:{x:0,y:0,frames:9,duration:60},width:16,height:16,loop:!1}};class Of extends Ce{image="bullet.png";animations=su;direction=Ae.RIGHT;type=j.BULLET;layerId=q.OBJECTS;particle=eo.RUBBLE;collisionLayers=[q.MAIN,q.OBJECTS];collisions=!0;width=8;height=8;damage=10;constructor(t,i){super(t,i),this.direction=t.direction,this.setCollisionArea(4,2,4,2)}collide(t){t.collisions&&t.family===xt.ENEMIES&&(this.particle=eo.BLOOD,this.explode())}explode(){au(this.game,this.pos,this.particle),this.kill()}update(){super.update(),this.force.x=this.approach(this.force.x,this.direction===Ae.LEFT?-10:10,5),this.flips={H:this.direction===Ae.LEFT},(!this.onScreen()||this.pos.x!==this.expectedPos.x)&&this.explode()}}class Sf extends Ce{image="dust.png";layerId=q.OBJECTS;type=j.DUST;direction=Ae.RIGHT;width=16;height=16;constructor(t,i){super(t,i),this.direction=t.direction}update(){this.animate(su.DUST,{H:this.direction===Ae.LEFT},t=>{t===8&&this.kill()})}}class Lf extends Ce{family=xt.ENEMIES;count=0;emitted=0;emit(){const t=this.game.getCurrentScene(),i=de(0,(this.width-50)/50)*50;t.addObject(j.ZOMBIE,{x:this.pos.x+i,y:this.pos.y-52,pid:this.id}),this.emitted++}update(){super.update();const i=this.game.getCurrentScene().getObjectsByType(j.ZOMBIE);this.count=i?i.filter(n=>n.pid===this.id).length:0,this.emitted>=this.properties.max&&this.kill(),this.onScreen()&&this.count<this.properties.volume&&this.game.wait(`emmiter--${this.id}`,()=>this.emit(),1e3)}}const Tt={IDLE:{strip:{x:0,y:0,frames:4,duration:200},width:53,height:53,bounds:[18,16,18,37],loop:!0},WALK:{strip:{x:212,y:0,frames:8,duration:80},width:53,height:53,bounds:[18,16,18,37],loop:!0},JUMP:{strip:{x:636,y:0,frames:5,duration:100},width:53,height:53,bounds:[18,16,18,37],loop:!1},FALL:{strip:{x:848,y:0,frames:1,duration:0},width:53,height:53,bounds:[18,16,18,37],loop:!1},SHOOT:{strip:{x:901,y:0,frames:5,duration:80},width:53,height:53,bounds:[18,16,18,37],loop:!1},HURT:{strip:{x:1325,y:0,frames:3,duration:100},width:53,height:53,bounds:[18,16,18,37],loop:!0},RELOAD:{strip:{x:1484,y:0,frames:3,duration:300},width:53,height:53,bounds:[18,16,18,37],loop:!0}},{UP:Df,LEFT:Hn,RIGHT:Zt}=Ae;class Cf extends Ce{image="player.png";collisionLayers=[q.MAIN,q.OBJECTS];facing=Zt;energy=[100,100];ammo=[5,5];points=0;collisions=!0;invincible=!1;isJumping=!1;isShooting=!1;isReloading=!1;isHurt=!1;update(){const t=this.game,{gravity:i}=t.getCurrentScene();this.isJumping&&this.onGround()&&(this.isJumping=!1,this.dust(Hn),this.dust(Zt)),this.onGround()||(this.force.y+=this.force.y>0?i:i/2),this.energy[0]>0&&!this.isShooting&&(this.force.x!==0&&(this.force.x=this.approach(this.force.x,0,.2)),this.force.x===0&&!this.isJumping&&this.ammo[0]<this.ammo[1]?t.wait("countToReload",()=>this.countToReload(),1e3):this.cancelReloading()),super.update();let n=Tt.IDLE;this.isHurt?n=Tt.HURT:this.isJumping?n=this.force.y<=0?Tt.JUMP:Tt.FALL:this.isShooting?n=Tt.SHOOT:Math.abs(this.force.x)>0?n=Tt.WALK:this.isReloading&&(n=Tt.RELOAD),this.animate(n,{H:this.facing===Hn})}moveTo(t){if(!this.isShooting&&this.energy[0]>0)switch(t){case Df:!this.isJumping&&this.onGround()&&(this.isJumping=!0,this.force.y=-6);break;case Hn:case Zt:t!==this.facing&&this.onGround()&&this.dust(t),this.force.x=this.approach(this.force.x,t===Zt?2:-2,.3),this.facing=t;break}}shoot(){if(!this.isShooting&&!this.isHurt&&this.ammo[0]>0&&this.onGround()){const t=this.game.getCurrentScene();this.ammo[0]>this.ammo[1]&&(this.ammo[0]=this.ammo[1]),this.ammo[0]-=1,this.force.x=0,this.isShooting=!0,this.bullet(t),this.cancelReloading(),this.game.wait("shoot",()=>this.isShooting=!1,500),this.game.wait("shootDelay",()=>{t.flash=!0,this.game.wait("shootFlash",()=>t.flash=!1,60)},30),this.setAnimationFrame(0),this.game.playSound("shoot.mp3")}}reloading(){this.isReloading=!0,this.ammo[0]+=1,this.game.playSound("reload.mp3")}countToReload(){this.isReloading=!0,this.game.wait("reloading",()=>this.reloading(),600)}cancelReloading(){this.game.cancelWait("countToReload"),this.game.cancelWait("reloading"),this.isReloading=!1}bullet(t){const i=this.facing===Zt?this.pos.x+this.width-4:this.pos.x+8,n=this.pos.y+31;t.addObject(j.BULLET,{x:i,y:n,direction:this.facing})}dust(t){if(this.onGround()){const i=this.game.getCurrentScene(),n=t===Zt?this.pos.x+8:this.pos.x+this.width-24,r=this.pos.y+this.height-16;i.addObject(j.DUST,{x:n,y:r,direction:t})}}respawn(){const t=this.game.getCurrentScene(),i=t.getLayer(q.CUSTOM_OVERLAY);this.isHurt=!1,this.visible=!0,this.energy[0]=this.energy[1],this.pos=this.initialPos.clone(),t.camera.moveTo(0,0),i.fadeIn()}hit(t){const n=this.game.getCurrentScene().getLayer(q.CUSTOM_OVERLAY);this.energy[0]>0&&!this.isHurt&&(this.invincible||(this.energy[0]-=t,this.isHurt=!0,this.force.x=0,this.game.cancelWait("countToReload"),this.energy[0]<=0?(this.visible=!1,n.fadeOut(),this.game.wait("playerRespawn",()=>this.respawn(),3e3)):this.game.wait("playerHurt",()=>this.isHurt=!1,500),au(this.game,new U(this.pos.x+this.width/2,this.pos.y+18),eo.BLOOD)))}}const Nf={DEFAULT:{strip:{x:0,y:0,frames:2,duration:500},width:16,height:23,bounds:[4,0,8,18],loop:!0}};class Mf extends Ce{image="spider.png";family=xt.ENEMIES;collisionLayers=[q.MAIN,q.OBJECTS];collisions=!0;fall=!1;rise=!1;startPos;energy=[20,20];damage=10;constructor(t,i){super(t,i),this.startPos=new U(t.x+t.width/2,t.y)}draw(){const{camera:t}=this.game.getCurrentScene(),{ctx:i}=this.game;i.beginPath(),i.strokeStyle=Tn.SPIDER_WEB,i.moveTo(this.startPos.x+t.pos.x,this.startPos.y+t.pos.y),i.lineTo(this.startPos.x+t.pos.x,this.pos.y+t.pos.y),i.stroke(),this.collisions&&super.draw()}update(){if(this.onScreen()){super.update();const{gravity:t}=this.game.getCurrentScene();this.rise?this.force.y=-1:this.fall?this.force.y+=t:this.force.y=0,this.energy[0]<=0?(this.damage=0,this.rise=!1,this.fall=!1,this.collisions=!1,this.game.cancelWait(`spider-${this.id}-fall`)):(this.onGround()&&this.fall&&(this.fall=!1,this.rise=!0),this.pos.y<=this.startPos.y&&(this.rise=!1,this.fall=!1,this.game.wait(`spider-${this.id}-fall`,()=>this.fall=!0,500))),this.animate(Nf.DEFAULT)}}hit(t){this.energy[0]-=t}collide(t){switch(t.type){case j.BULLET:const i=t;this.hit(i.damage);break;case j.PLAYER:t.hit(this.damage);break}}}const Rf={DEFAULT:{strip:{x:0,y:0,frames:5,duration:40},width:8,height:8,loop:!1}};class kf extends Ce{image="shine.png";animation=Rf.DEFAULT;family=xt.TRAPS;collisionLayers=[q.MAIN,q.OBJECTS];collisions=!0;canAnimate=!0;damage=1e3;shineX=0;draw(){const{ctx:t}=this.game,{camera:i}=this.game.getCurrentScene(),{width:n,height:r,strip:{x:o,y:a}}=this.animation;t.drawImage(this.game.getImage(this.image),o+this.getAnimationFrame()*n,a,n,r,this.pos.x+this.shineX+i.pos.x,this.pos.y+i.pos.y-10,n,r)}update(){this.onScreen()&&(this.canAnimate&&this.getAnimationFrame()===this.animation.strip.frames-1&&(this.canAnimate=!1,this.game.wait(`spikes-${this.id}-shine`,()=>{this.canAnimate=!0,this.setAnimationFrame(0),this.shineX=de(0,(this.width-8)/8)*8},1e3)),this.animate(this.animation))}collide(t){switch(t.type){case j.PLAYER:t.hit(this.damage);break}}}const tt={IDLE:{strip:{x:0,y:0,frames:9,duration:100},width:58,height:46,bounds:[24,12,10,30],loop:!0},WALK:{strip:{x:522,y:0,frames:12,duration:100},width:58,height:46,bounds:[24,12,10,30],loop:!0},RUN:{strip:{x:1218,y:0,frames:8,duration:100},width:58,height:46,bounds:[24,12,10,30],loop:!0},ATTACK:{strip:{x:1682,y:0,frames:11,duration:100},width:58,height:46,bounds:[24,12,10,30],loop:!0},HURT1:{strip:{x:2320,y:0,frames:13,duration:100},width:58,height:46,bounds:[24,32,10,10],loop:!1},HURT2:{strip:{x:3074,y:0,frames:15,duration:100},width:58,height:46,bounds:[24,32,10,10],loop:!1},RISE:{strip:{x:3944,y:0,frames:9,duration:100},width:58,height:46,bounds:[24,32,10,10],loop:!1}},{LEFT:At,RIGHT:gi}=Ae;var uu=(e=>(e[e.RISE=0]="RISE",e[e.IDLE=1]="IDLE",e[e.WALK=2]="WALK",e[e.RUN=3]="RUN",e[e.ATTACK=4]="ATTACK",e[e.HURT=5]="HURT",e[e.DEFEAT=6]="DEFEAT",e))(uu||{});class Pf extends Ce{image="zombie.png";state=0;family=xt.ENEMIES;type=j.ZOMBIE;layerId=q.OBJECTS;collisionLayers=[q.MAIN,q.OBJECTS];collisions=!0;direction=At;pid;damage=0;energy=[20,20];speed={a:.1,d:.1,m:.4};activated=!1;turning=!1;constructor(t,i){super({...t,width:58,height:46},i),this.pid=t.pid}update(){super.update();const t=this.game.getCurrentScene(),{a:i,d:n,m:r}=this.speed,{RISE:o,IDLE:a,WALK:u,RUN:f,ATTACK:c,HURT:d,DEFEAT:s}=uu,l=t.getObjectByType(j.PLAYER);let h=tt.IDLE;switch(this.state){case o:h=tt.RISE,this.direction=this.pos.x>l.pos.x?At:gi,this.onScreen()&&this.getAnimationFrame()===h.strip.frames-1&&(this.activated=!0,this.state=a);break;case a:h=tt.IDLE,this.onScreen()&&this.game.wait(`zombie-${this.id}-awake`,()=>this.state=u,1500);break;case u:h=tt.WALK,this.speed.m=.4,this.game.wait(`zombie-${this.id}-run`,()=>{this.onScreen()&&this.isFacingPlayer(l)&&(this.state=f)},2e3);break;case f:h=tt.RUN,this.speed.m=1,this.isFacingPlayer(l)||(this.state=u);break;case c:h=tt.ATTACK,this.direction=this.pos.x>l.pos.x?At:gi,this.game.wait(`zombie-${this.id}-run`,()=>this.state=u,1e3);break;case d:const p=this.energy[0]<=0;this.game.cancelWait(`zombie-${this.id}-awake`),this.game.cancelWait(`zombie-${this.id}-run`),h=!this.isFacingPlayer(l)||p?tt.HURT1:tt.HURT2,p&&this.getAnimationFrame()===5?(ou(this.game,new U(this.pos.x+this.width/2,this.pos.y)),this.state=s):this.getAnimationFrame()===h.strip.frames-1&&(!this.isFacingPlayer(l)&&this.turnAround(),this.state=f);break;case s:this.game.wait(`zombie-${this.id}-defeat`,()=>this.kill(),500),this.activated=!1;break}this.onGround()?Math.abs(this.force.y)<=.2&&(this.force.y=0):this.force.y+=this.force.y>0?t.gravity:t.gravity/2,this.force.x=this.state===u||this.state===f?this.approach(this.force.x,this.direction===At?-r:r,i):this.approach(this.force.x,0,n),(this.expectedPos.x!==this.pos.x||Math.abs(this.pos.x-this.initialPos.x)>100&&!this.isFacingPlayer(l))&&this.turnAround(),this.state!==s&&this.animate(h,{H:this.direction===At})}hit(t){this.state!==5&&this.state!==6&&(this.setAnimationFrame(0),this.state=5),this.energy[0]-=t}collide(t){if(this.activated&&t.visible)switch(t.type){case j.BULLET:const i=t;this.hit(i.damage);break;case j.PLAYER:const n=t;this.state=4,this.damage=this.getAnimationFrame()===3?20:10,n.hit(this.damage);break}}isFacingPlayer(t){return this.direction===At&&this.pos.x>t.pos.x||this.direction===gi&&this.pos.x<t.pos.x}turnAround(){this.turning||(this.direction=this.direction===gi?At:gi,this.force.x*=-.6,this.turning=!0),this.game.wait(`zombie-${this.id}-turn`,()=>this.turning=!1,500)}}const Ff=""+new URL("assets/shoot-ec31e1fc.mp3",import.meta.url).href,Bf=""+new URL("assets/powerup-8f187977.mp3",import.meta.url).href,Uf=""+new URL("assets/reload-83318706.mp3",import.meta.url).href,Hf=""+new URL("assets/images/ammo-247d84a5.png",import.meta.url).href,Xf=""+new URL("assets/images/bat-867ece5e.png",import.meta.url).href,jf=""+new URL("assets/images/bullet-7c0ba6f1.png",import.meta.url).href,zf=""+new URL("assets/images/bg1-20e1ce46.png",import.meta.url).href,Gf=""+new URL("assets/images/bg2-6557f552.png",import.meta.url).href,Vf=""+new URL("assets/images/clouds-b9584007.png",import.meta.url).href,Wf=""+new URL("assets/images/dust-ee6b80b9.png",import.meta.url).href,Zf=""+new URL("assets/images/energy-dd635cc9.png",import.meta.url).href,$f=""+new URL("assets/images/energy_strip-f3ec2c88.png",import.meta.url).href,qf=""+new URL("assets/images/font_small-c405d69c.png",import.meta.url).href,Yf=""+new URL("assets/images/moon-c503ca1e.png",import.meta.url).href,Kf=""+new URL("assets/images/player-a8bc3359.png",import.meta.url).href,Qf=""+new URL("assets/images/spider-ff346ed6.png",import.meta.url).href,Jf=""+new URL("assets/images/shine-7704f2f3.png",import.meta.url).href,eh=""+new URL("assets/images/zombie-b87103f8.png",import.meta.url).href,th=""+new URL("assets/images/tileset-d74d6f5e.png",import.meta.url).href,ih={"ammo.png":Hf,"bat.png":Xf,"bg1.png":zf,"bg2.png":Gf,"dust.png":Wf,"bullet.png":jf,"clouds.png":Vf,"energy.png":Zf,"estrip.png":$f,"font.png":qf,"moon.png":Yf,"player.png":Kf,"spider.png":Qf,"shine.png":Jf,"tileset.png":th,"zombie.png":eh,"shoot.mp3":Ff,"powerup.mp3":Bf,"reload.mp3":Uf},Y=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};var ke=[],Ee=[],nh=typeof Uint8Array<"u"?Uint8Array:Array,_o=!1;function lu(){_o=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=e.length;t<i;++t)ke[t]=e[t],Ee[e.charCodeAt(t)]=t;Ee["-".charCodeAt(0)]=62,Ee["_".charCodeAt(0)]=63}function rh(e){_o||lu();var t,i,n,r,o,a,u=e.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[u-2]==="="?2:e[u-1]==="="?1:0,a=new nh(u*3/4-o),n=o>0?u-4:u;var f=0;for(t=0,i=0;t<n;t+=4,i+=3)r=Ee[e.charCodeAt(t)]<<18|Ee[e.charCodeAt(t+1)]<<12|Ee[e.charCodeAt(t+2)]<<6|Ee[e.charCodeAt(t+3)],a[f++]=r>>16&255,a[f++]=r>>8&255,a[f++]=r&255;return o===2?(r=Ee[e.charCodeAt(t)]<<2|Ee[e.charCodeAt(t+1)]>>4,a[f++]=r&255):o===1&&(r=Ee[e.charCodeAt(t)]<<10|Ee[e.charCodeAt(t+1)]<<4|Ee[e.charCodeAt(t+2)]>>2,a[f++]=r>>8&255,a[f++]=r&255),a}function oh(e){return ke[e>>18&63]+ke[e>>12&63]+ke[e>>6&63]+ke[e&63]}function ah(e,t,i){for(var n,r=[],o=t;o<i;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],r.push(oh(n));return r.join("")}function ca(e){_o||lu();for(var t,i=e.length,n=i%3,r="",o=[],a=16383,u=0,f=i-n;u<f;u+=a)o.push(ah(e,u,u+a>f?f:u+a));return n===1?(t=e[i-1],r+=ke[t>>2],r+=ke[t<<4&63],r+="=="):n===2&&(t=(e[i-2]<<8)+e[i-1],r+=ke[t>>10],r+=ke[t>>4&63],r+=ke[t<<2&63],r+="="),o.push(r),o.join("")}function An(e,t,i,n,r){var o,a,u=r*8-n-1,f=(1<<u)-1,c=f>>1,d=-7,s=i?r-1:0,l=i?-1:1,h=e[t+s];for(s+=l,o=h&(1<<-d)-1,h>>=-d,d+=u;d>0;o=o*256+e[t+s],s+=l,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=n;d>0;a=a*256+e[t+s],s+=l,d-=8);if(o===0)o=1-c;else{if(o===f)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-c}return(h?-1:1)*a*Math.pow(2,o-n)}function fu(e,t,i,n,r,o){var a,u,f,c=o*8-r-1,d=(1<<c)-1,s=d>>1,l=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+s>=1?t+=l/f:t+=l*Math.pow(2,1-s),t*f>=2&&(a++,f/=2),a+s>=d?(u=0,a=d):a+s>=1?(u=(t*f-1)*Math.pow(2,r),a=a+s):(u=t*Math.pow(2,s-1)*Math.pow(2,r),a=0));r>=8;e[i+h]=u&255,h+=p,u/=256,r-=8);for(a=a<<r|u,c+=r;c>0;e[i+h]=a&255,h+=p,a/=256,c-=8);e[i+h-p]|=y*128}var sh={}.toString,hu=Array.isArray||function(e){return sh.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var uh=50;C.TYPED_ARRAY_SUPPORT=Y.TYPED_ARRAY_SUPPORT!==void 0?Y.TYPED_ARRAY_SUPPORT:!0;pn();function pn(){return C.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function qe(e,t){if(pn()<t)throw new RangeError("Invalid typed array length");return C.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=C.prototype):(e===null&&(e=new C(t)),e.length=t),e}function C(e,t,i){if(!C.TYPED_ARRAY_SUPPORT&&!(this instanceof C))return new C(e,t,i);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return mo(this,e)}return cu(this,e,t,i)}C.poolSize=8192;C._augment=function(e){return e.__proto__=C.prototype,e};function cu(e,t,i,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?hh(e,t,i,n):typeof t=="string"?fh(e,t,i):ch(e,t)}C.from=function(e,t,i){return cu(null,e,t,i)};C.TYPED_ARRAY_SUPPORT&&(C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array);function du(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function lh(e,t,i,n){return du(t),t<=0?qe(e,t):i!==void 0?typeof n=="string"?qe(e,t).fill(i,n):qe(e,t).fill(i):qe(e,t)}C.alloc=function(e,t,i){return lh(null,e,t,i)};function mo(e,t){if(du(t),e=qe(e,t<0?0:go(t)|0),!C.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}C.allocUnsafe=function(e){return mo(null,e)};C.allocUnsafeSlow=function(e){return mo(null,e)};function fh(e,t,i){if((typeof i!="string"||i==="")&&(i="utf8"),!C.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=pu(t,i)|0;e=qe(e,n);var r=e.write(t,i);return r!==n&&(e=e.slice(0,r)),e}function to(e,t){var i=t.length<0?0:go(t.length)|0;e=qe(e,i);for(var n=0;n<i;n+=1)e[n]=t[n]&255;return e}function hh(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return i===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,i):t=new Uint8Array(t,i,n),C.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=C.prototype):e=to(e,t),e}function ch(e,t){if(Be(t)){var i=go(t.length)|0;return e=qe(e,i),e.length===0||t.copy(e,0,0,i),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Ch(t.length)?qe(e,0):to(e,t);if(t.type==="Buffer"&&hu(t.data))return to(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function go(e){if(e>=pn())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pn().toString(16)+" bytes");return e|0}C.isBuffer=Nh;function Be(e){return!!(e!=null&&e._isBuffer)}C.compare=function(t,i){if(!Be(t)||!Be(i))throw new TypeError("Arguments must be Buffers");if(t===i)return 0;for(var n=t.length,r=i.length,o=0,a=Math.min(n,r);o<a;++o)if(t[o]!==i[o]){n=t[o],r=i[o];break}return n<r?-1:r<n?1:0};C.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};C.concat=function(t,i){if(!hu(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return C.alloc(0);var n;if(i===void 0)for(i=0,n=0;n<t.length;++n)i+=t[n].length;var r=C.allocUnsafe(i),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!Be(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r};function pu(e,t){if(Be(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var i=e.length;if(i===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return _n(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return bu(e).length;default:if(n)return _n(e).length;t=(""+t).toLowerCase(),n=!0}}C.byteLength=pu;function dh(e,t,i){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Eh(this,t,i);case"utf8":case"utf-8":return gu(this,t,i);case"ascii":return bh(this,t,i);case"latin1":case"binary":return xh(this,t,i);case"base64":return vh(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Th(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}C.prototype._isBuffer=!0;function St(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}C.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)St(this,i,i+1);return this};C.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)St(this,i,i+3),St(this,i+1,i+2);return this};C.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)St(this,i,i+7),St(this,i+1,i+6),St(this,i+2,i+5),St(this,i+3,i+4);return this};C.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?gu(this,0,t):dh.apply(this,arguments)};C.prototype.equals=function(t){if(!Be(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:C.compare(this,t)===0};C.prototype.inspect=function(){var t="",i=uh;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"};C.prototype.compare=function(t,i,n,r,o){if(!Be(t))throw new TypeError("Argument must be a Buffer");if(i===void 0&&(i=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),o===void 0&&(o=this.length),i<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&i>=n)return 0;if(r>=o)return-1;if(i>=n)return 1;if(i>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var a=o-r,u=n-i,f=Math.min(a,u),c=this.slice(r,o),d=t.slice(i,n),s=0;s<f;++s)if(c[s]!==d[s]){a=c[s],u=d[s];break}return a<u?-1:u<a?1:0};function _u(e,t,i,n,r){if(e.length===0)return-1;if(typeof i=="string"?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0)if(r)i=0;else return-1;if(typeof t=="string"&&(t=C.from(t,n)),Be(t))return t.length===0?-1:da(e,t,i,n,r);if(typeof t=="number")return t=t&255,C.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):da(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function da(e,t,i,n,r){var o=1,a=e.length,u=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,i/=2}function f(h,p){return o===1?h[p]:h.readUInt16BE(p*o)}var c;if(r){var d=-1;for(c=i;c<a;c++)if(f(e,c)===f(t,d===-1?0:c-d)){if(d===-1&&(d=c),c-d+1===u)return d*o}else d!==-1&&(c-=c-d),d=-1}else for(i+u>a&&(i=a-u),c=i;c>=0;c--){for(var s=!0,l=0;l<u;l++)if(f(e,c+l)!==f(t,l)){s=!1;break}if(s)return c}return-1}C.prototype.includes=function(t,i,n){return this.indexOf(t,i,n)!==-1};C.prototype.indexOf=function(t,i,n){return _u(this,t,i,n,!0)};C.prototype.lastIndexOf=function(t,i,n){return _u(this,t,i,n,!1)};function ph(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(a*2,2),16);if(isNaN(u))return a;e[i+a]=u}return a}function _h(e,t,i,n){return Sn(_n(t,e.length-i),e,i,n)}function mu(e,t,i,n){return Sn(Lh(t),e,i,n)}function mh(e,t,i,n){return mu(e,t,i,n)}function gh(e,t,i,n){return Sn(bu(t),e,i,n)}function yh(e,t,i,n){return Sn(Dh(t,e.length-i),e,i,n)}C.prototype.write=function(t,i,n,r){if(i===void 0)r="utf8",n=this.length,i=0;else if(n===void 0&&typeof i=="string")r=i,n=this.length,i=0;else if(isFinite(i))i=i|0,isFinite(n)?(n=n|0,r===void 0&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-i;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return ph(this,t,i,n);case"utf8":case"utf-8":return _h(this,t,i,n);case"ascii":return mu(this,t,i,n);case"latin1":case"binary":return mh(this,t,i,n);case"base64":return gh(this,t,i,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yh(this,t,i,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}};C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function vh(e,t,i){return t===0&&i===e.length?ca(e):ca(e.slice(t,i))}function gu(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var o=e[r],a=null,u=o>239?4:o>223?3:o>191?2:1;if(r+u<=i){var f,c,d,s;switch(u){case 1:o<128&&(a=o);break;case 2:f=e[r+1],(f&192)===128&&(s=(o&31)<<6|f&63,s>127&&(a=s));break;case 3:f=e[r+1],c=e[r+2],(f&192)===128&&(c&192)===128&&(s=(o&15)<<12|(f&63)<<6|c&63,s>2047&&(s<55296||s>57343)&&(a=s));break;case 4:f=e[r+1],c=e[r+2],d=e[r+3],(f&192)===128&&(c&192)===128&&(d&192)===128&&(s=(o&15)<<18|(f&63)<<12|(c&63)<<6|d&63,s>65535&&s<1114112&&(a=s))}}a===null?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),r+=u}return wh(n)}var pa=4096;function wh(e){var t=e.length;if(t<=pa)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=pa));return i}function bh(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]&127);return n}function xh(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function Eh(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=t;o<i;++o)r+=Sh(e[o]);return r}function Th(e,t,i){for(var n=e.slice(t,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+n[o+1]*256);return r}C.prototype.slice=function(t,i){var n=this.length;t=~~t,i=i===void 0?n:~~i,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),i<0?(i+=n,i<0&&(i=0)):i>n&&(i=n),i<t&&(i=t);var r;if(C.TYPED_ARRAY_SUPPORT)r=this.subarray(t,i),r.__proto__=C.prototype;else{var o=i-t;r=new C(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+t]}return r};function ue(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUIntLE=function(t,i,n){t=t|0,i=i|0,n||ue(t,i,this.length);for(var r=this[t],o=1,a=0;++a<i&&(o*=256);)r+=this[t+a]*o;return r};C.prototype.readUIntBE=function(t,i,n){t=t|0,i=i|0,n||ue(t,i,this.length);for(var r=this[t+--i],o=1;i>0&&(o*=256);)r+=this[t+--i]*o;return r};C.prototype.readUInt8=function(t,i){return i||ue(t,1,this.length),this[t]};C.prototype.readUInt16LE=function(t,i){return i||ue(t,2,this.length),this[t]|this[t+1]<<8};C.prototype.readUInt16BE=function(t,i){return i||ue(t,2,this.length),this[t]<<8|this[t+1]};C.prototype.readUInt32LE=function(t,i){return i||ue(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};C.prototype.readUInt32BE=function(t,i){return i||ue(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};C.prototype.readIntLE=function(t,i,n){t=t|0,i=i|0,n||ue(t,i,this.length);for(var r=this[t],o=1,a=0;++a<i&&(o*=256);)r+=this[t+a]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*i)),r};C.prototype.readIntBE=function(t,i,n){t=t|0,i=i|0,n||ue(t,i,this.length);for(var r=i,o=1,a=this[t+--r];r>0&&(o*=256);)a+=this[t+--r]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*i)),a};C.prototype.readInt8=function(t,i){return i||ue(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};C.prototype.readInt16LE=function(t,i){i||ue(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};C.prototype.readInt16BE=function(t,i){i||ue(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};C.prototype.readInt32LE=function(t,i){return i||ue(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};C.prototype.readInt32BE=function(t,i){return i||ue(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};C.prototype.readFloatLE=function(t,i){return i||ue(t,4,this.length),An(this,t,!0,23,4)};C.prototype.readFloatBE=function(t,i){return i||ue(t,4,this.length),An(this,t,!1,23,4)};C.prototype.readDoubleLE=function(t,i){return i||ue(t,8,this.length),An(this,t,!0,52,8)};C.prototype.readDoubleBE=function(t,i){return i||ue(t,8,this.length),An(this,t,!1,52,8)};function me(e,t,i,n,r,o){if(!Be(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}C.prototype.writeUIntLE=function(t,i,n,r){if(t=+t,i=i|0,n=n|0,!r){var o=Math.pow(2,8*n)-1;me(this,t,i,n,o,0)}var a=1,u=0;for(this[i]=t&255;++u<n&&(a*=256);)this[i+u]=t/a&255;return i+n};C.prototype.writeUIntBE=function(t,i,n,r){if(t=+t,i=i|0,n=n|0,!r){var o=Math.pow(2,8*n)-1;me(this,t,i,n,o,0)}var a=n-1,u=1;for(this[i+a]=t&255;--a>=0&&(u*=256);)this[i+a]=t/u&255;return i+n};C.prototype.writeUInt8=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,1,255,0),C.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=t&255,i+1};function In(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-i,2);r<o;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>(n?r:1-r)*8}C.prototype.writeUInt16LE=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,2,65535,0),C.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8):In(this,t,i,!0),i+2};C.prototype.writeUInt16BE=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,2,65535,0),C.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=t&255):In(this,t,i,!1),i+2};function On(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-i,4);r<o;++r)e[i+r]=t>>>(n?r:3-r)*8&255}C.prototype.writeUInt32LE=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,4,4294967295,0),C.TYPED_ARRAY_SUPPORT?(this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=t&255):On(this,t,i,!0),i+4};C.prototype.writeUInt32BE=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,4,4294967295,0),C.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255):On(this,t,i,!1),i+4};C.prototype.writeIntLE=function(t,i,n,r){if(t=+t,i=i|0,!r){var o=Math.pow(2,8*n-1);me(this,t,i,n,o-1,-o)}var a=0,u=1,f=0;for(this[i]=t&255;++a<n&&(u*=256);)t<0&&f===0&&this[i+a-1]!==0&&(f=1),this[i+a]=(t/u>>0)-f&255;return i+n};C.prototype.writeIntBE=function(t,i,n,r){if(t=+t,i=i|0,!r){var o=Math.pow(2,8*n-1);me(this,t,i,n,o-1,-o)}var a=n-1,u=1,f=0;for(this[i+a]=t&255;--a>=0&&(u*=256);)t<0&&f===0&&this[i+a+1]!==0&&(f=1),this[i+a]=(t/u>>0)-f&255;return i+n};C.prototype.writeInt8=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,1,127,-128),C.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[i]=t&255,i+1};C.prototype.writeInt16LE=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,2,32767,-32768),C.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8):In(this,t,i,!0),i+2};C.prototype.writeInt16BE=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,2,32767,-32768),C.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=t&255):In(this,t,i,!1),i+2};C.prototype.writeInt32LE=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,4,2147483647,-2147483648),C.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24):On(this,t,i,!0),i+4};C.prototype.writeInt32BE=function(t,i,n){return t=+t,i=i|0,n||me(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),C.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255):On(this,t,i,!1),i+4};function yu(e,t,i,n,r,o){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function vu(e,t,i,n,r){return r||yu(e,t,i,4),fu(e,t,i,n,23,4),i+4}C.prototype.writeFloatLE=function(t,i,n){return vu(this,t,i,!0,n)};C.prototype.writeFloatBE=function(t,i,n){return vu(this,t,i,!1,n)};function wu(e,t,i,n,r){return r||yu(e,t,i,8),fu(e,t,i,n,52,8),i+8}C.prototype.writeDoubleLE=function(t,i,n){return wu(this,t,i,!0,n)};C.prototype.writeDoubleBE=function(t,i,n){return wu(this,t,i,!1,n)};C.prototype.copy=function(t,i,n,r){if(n||(n=0),!r&&r!==0&&(r=this.length),i>=t.length&&(i=t.length),i||(i=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-i<r-n&&(r=t.length-i+n);var o=r-n,a;if(this===t&&n<i&&i<r)for(a=o-1;a>=0;--a)t[a+i]=this[a+n];else if(o<1e3||!C.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+i]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),i);return o};C.prototype.fill=function(t,i,n,r){if(typeof t=="string"){if(typeof i=="string"?(r=i,i=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var o=t.charCodeAt(0);o<256&&(t=o)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!C.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t=t&255);if(i<0||this.length<i||this.length<n)throw new RangeError("Out of range index");if(n<=i)return this;i=i>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var a;if(typeof t=="number")for(a=i;a<n;++a)this[a]=t;else{var u=Be(t)?t:_n(new C(t,r).toString()),f=u.length;for(a=0;a<n-i;++a)this[a+i]=u[a%f]}return this};var Ah=/[^+\/0-9A-Za-z-_]/g;function Ih(e){if(e=Oh(e).replace(Ah,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Oh(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Sh(e){return e<16?"0"+e.toString(16):e.toString(16)}function _n(e,t){t=t||1/0;for(var i,n=e.length,r=null,o=[],a=0;a<n;++a){if(i=e.charCodeAt(a),i>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&o.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return o}function Lh(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i)&255);return t}function Dh(e,t){for(var i,n,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=e.charCodeAt(a),n=i>>8,r=i%256,o.push(r),o.push(n);return o}function bu(e){return rh(Ih(e))}function Sn(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function Ch(e){return e!==e}function Nh(e){return e!=null&&(!!e._isBuffer||xu(e)||Mh(e))}function xu(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Mh(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&xu(e.slice(0,0))}function Eu(){throw new Error("setTimeout has not been defined")}function Tu(){throw new Error("clearTimeout has not been defined")}var it=Eu,nt=Tu;typeof Y.setTimeout=="function"&&(it=setTimeout);typeof Y.clearTimeout=="function"&&(nt=clearTimeout);function Au(e){if(it===setTimeout)return setTimeout(e,0);if((it===Eu||!it)&&setTimeout)return it=setTimeout,setTimeout(e,0);try{return it(e,0)}catch{try{return it.call(null,e,0)}catch{return it.call(this,e,0)}}}function Rh(e){if(nt===clearTimeout)return clearTimeout(e);if((nt===Tu||!nt)&&clearTimeout)return nt=clearTimeout,clearTimeout(e);try{return nt(e)}catch{try{return nt.call(null,e)}catch{return nt.call(this,e)}}}var Ye=[],ri=!1,Lt,on=-1;function kh(){!ri||!Lt||(ri=!1,Lt.length?Ye=Lt.concat(Ye):on=-1,Ye.length&&Iu())}function Iu(){if(!ri){var e=Au(kh);ri=!0;for(var t=Ye.length;t;){for(Lt=Ye,Ye=[];++on<t;)Lt&&Lt[on].run();on=-1,t=Ye.length}Lt=null,ri=!1,Rh(e)}}function be(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Ye.push(new Ou(e,t)),Ye.length===1&&!ri&&Au(Iu)}function Ou(e,t){this.fun=e,this.array=t}Ou.prototype.run=function(){this.fun.apply(null,this.array)};var Ph="browser",Fh="browser",Bh=!0,Uh={},Hh=[],Xh="",jh={},zh={},Gh={};function Xt(){}var Vh=Xt,Wh=Xt,Zh=Xt,$h=Xt,qh=Xt,Yh=Xt,Kh=Xt;function Qh(e){throw new Error("process.binding is not supported")}function Jh(){return"/"}function ec(e){throw new Error("process.chdir is not supported")}function tc(){return 0}var Qt=Y.performance||{},ic=Qt.now||Qt.mozNow||Qt.msNow||Qt.oNow||Qt.webkitNow||function(){return new Date().getTime()};function nc(e){var t=ic.call(Qt)*.001,i=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(i=i-e[0],n=n-e[1],n<0&&(i--,n+=1e9)),[i,n]}var rc=new Date;function oc(){var e=new Date,t=e-rc;return t/1e3}var Ke={nextTick:be,title:Ph,browser:Bh,env:Uh,argv:Hh,version:Xh,versions:jh,on:Vh,addListener:Wh,once:Zh,off:$h,removeListener:qh,removeAllListeners:Yh,emit:Kh,binding:Qh,cwd:Jh,chdir:ec,umask:tc,hrtime:nc,platform:Fh,release:zh,config:Gh,uptime:oc},ac;function ht(){}ht.prototype=Object.create(null);function z(){z.init.call(this)}z.EventEmitter=z;z.usingDomains=!1;z.prototype.domain=void 0;z.prototype._events=void 0;z.prototype._maxListeners=void 0;z.defaultMaxListeners=10;z.init=function(){this.domain=null,z.usingDomains&&ac.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new ht,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};z.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function Su(e){return e._maxListeners===void 0?z.defaultMaxListeners:e._maxListeners}z.prototype.getMaxListeners=function(){return Su(this)};function sc(e,t,i){if(t)e.call(i);else for(var n=e.length,r=Ui(e,n),o=0;o<n;++o)r[o].call(i)}function uc(e,t,i,n){if(t)e.call(i,n);else for(var r=e.length,o=Ui(e,r),a=0;a<r;++a)o[a].call(i,n)}function lc(e,t,i,n,r){if(t)e.call(i,n,r);else for(var o=e.length,a=Ui(e,o),u=0;u<o;++u)a[u].call(i,n,r)}function fc(e,t,i,n,r,o){if(t)e.call(i,n,r,o);else for(var a=e.length,u=Ui(e,a),f=0;f<a;++f)u[f].call(i,n,r,o)}function hc(e,t,i,n){if(t)e.apply(i,n);else for(var r=e.length,o=Ui(e,r),a=0;a<r;++a)o[a].apply(i,n)}z.prototype.emit=function(t){var i,n,r,o,a,u,f,c=t==="error";if(u=this._events,u)c=c&&u.error==null;else if(!c)return!1;if(f=this.domain,c){if(i=arguments[1],f)i||(i=new Error('Uncaught, unspecified "error" event')),i.domainEmitter=this,i.domain=f,i.domainThrown=!1,f.emit("error",i);else{if(i instanceof Error)throw i;var d=new Error('Uncaught, unspecified "error" event. ('+i+")");throw d.context=i,d}return!1}if(n=u[t],!n)return!1;var s=typeof n=="function";switch(r=arguments.length,r){case 1:sc(n,s,this);break;case 2:uc(n,s,this,arguments[1]);break;case 3:lc(n,s,this,arguments[1],arguments[2]);break;case 4:fc(n,s,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),a=1;a<r;a++)o[a-1]=arguments[a];hc(n,s,this,o)}return!0};function Lu(e,t,i,n){var r,o,a;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(o=e._events,o?(o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),a=o[t]):(o=e._events=new ht,e._eventsCount=0),!a)a=o[t]=i,++e._eventsCount;else if(typeof a=="function"?a=o[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),!a.warned&&(r=Su(e),r&&r>0&&a.length>r)){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,cc(u)}return e}function cc(e){typeof console.warn=="function"?console.warn(e):console.log(e)}z.prototype.addListener=function(t,i){return Lu(this,t,i,!1)};z.prototype.on=z.prototype.addListener;z.prototype.prependListener=function(t,i){return Lu(this,t,i,!0)};function Du(e,t,i){var n=!1;function r(){e.removeListener(t,r),n||(n=!0,i.apply(e,arguments))}return r.listener=i,r}z.prototype.once=function(t,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,Du(this,t,i)),this};z.prototype.prependOnceListener=function(t,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Du(this,t,i)),this};z.prototype.removeListener=function(t,i){var n,r,o,a,u;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(n=r[t],!n)return this;if(n===i||n.listener&&n.listener===i)--this._eventsCount===0?this._events=new ht:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||i));else if(typeof n!="function"){for(o=-1,a=n.length;a-- >0;)if(n[a]===i||n[a].listener&&n[a].listener===i){u=n[a].listener,o=a;break}if(o<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new ht,this;delete r[t]}else dc(n,o);r.removeListener&&this.emit("removeListener",t,u||i)}return this};z.prototype.removeAllListeners=function(t){var i,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new ht,this._eventsCount=0):n[t]&&(--this._eventsCount===0?this._events=new ht:delete n[t]),this;if(arguments.length===0){for(var r=Object.keys(n),o=0,a;o<r.length;++o)a=r[o],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new ht,this._eventsCount=0,this}if(i=n[t],typeof i=="function")this.removeListener(t,i);else if(i)do this.removeListener(t,i[i.length-1]);while(i[0]);return this};z.prototype.listeners=function(t){var i,n,r=this._events;return r?(i=r[t],i?typeof i=="function"?n=[i.listener||i]:n=pc(i):n=[]):n=[],n};z.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Cu.call(e,t)};z.prototype.listenerCount=Cu;function Cu(e){var t=this._events;if(t){var i=t[e];if(typeof i=="function")return 1;if(i)return i.length}return 0}z.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function dc(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}function Ui(e,t){for(var i=new Array(t);t--;)i[t]=e[t];return i}function pc(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}const _c=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter:z,default:z},Symbol.toStringTag,{value:"Module"}));var io;typeof Object.create=="function"?io=function(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:io=function(t,i){t.super_=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t};const ge=io;var mc=/%[sdj%]/g;function gc(e){if(!vo(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(ct(arguments[i]));return t.join(" ")}for(var i=1,n=arguments,r=n.length,o=String(e).replace(mc,function(u){if(u==="%%")return"%";if(i>=r)return u;switch(u){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}default:return u}}),a=n[i];i<r;a=n[++i])yo(a)||!Hi(a)?o+=" "+a:o+=" "+ct(a);return o}function Nu(e,t){if(st(Y.process))return function(){return Nu(e,t).apply(this,arguments)};if(Ke.noDeprecation===!0)return e;var i=!1;function n(){if(!i){if(Ke.throwDeprecation)throw new Error(t);Ke.traceDeprecation?console.trace(t):console.error(t),i=!0}return e.apply(this,arguments)}return n}var Yi={},Xn;function yc(e){if(st(Xn)&&(Xn={}.NODE_DEBUG||""),e=e.toUpperCase(),!Yi[e])if(new RegExp("\\b"+e+"\\b","i").test(Xn)){var t=0;Yi[e]=function(){var i=gc.apply(null,arguments);console.error("%s %d: %s",e,t,i)}}else Yi[e]=function(){};return Yi[e]}function ct(e,t){var i={seen:[],stylize:wc};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),Mu(t)?i.showHidden=t:t&&Oc(i,t),st(i.showHidden)&&(i.showHidden=!1),st(i.depth)&&(i.depth=2),st(i.colors)&&(i.colors=!1),st(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=vc),mn(i,e,i.depth)}ct.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};ct.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function vc(e,t){var i=ct.styles[t];return i?"\x1B["+ct.colors[i][0]+"m"+e+"\x1B["+ct.colors[i][1]+"m":e}function wc(e,t){return e}function bc(e){var t={};return e.forEach(function(i,n){t[i]=!0}),t}function mn(e,t,i){if(e.customInspect&&t&&Vn(t.inspect)&&t.inspect!==ct&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(i,e);return vo(n)||(n=mn(e,n,i)),n}var r=xc(e,t);if(r)return r;var o=Object.keys(t),a=bc(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Gn(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return jn(t);if(o.length===0){if(Vn(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(zn(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(_a(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Gn(t))return jn(t)}var f="",c=!1,d=["{","}"];if(Ac(t)&&(c=!0,d=["[","]"]),Vn(t)){var s=t.name?": "+t.name:"";f=" [Function"+s+"]"}if(zn(t)&&(f=" "+RegExp.prototype.toString.call(t)),_a(t)&&(f=" "+Date.prototype.toUTCString.call(t)),Gn(t)&&(f=" "+jn(t)),o.length===0&&(!c||t.length==0))return d[0]+f+d[1];if(i<0)return zn(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var l;return c?l=Ec(e,t,i,a,o):l=o.map(function(h){return no(e,t,i,a,h,c)}),e.seen.pop(),Tc(l,f,d)}function xc(e,t){if(st(t))return e.stylize("undefined","undefined");if(vo(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(Ic(t))return e.stylize(""+t,"number");if(Mu(t))return e.stylize(""+t,"boolean");if(yo(t))return e.stylize("null","null")}function jn(e){return"["+Error.prototype.toString.call(e)+"]"}function Ec(e,t,i,n,r){for(var o=[],a=0,u=t.length;a<u;++a)Ru(t,String(a))?o.push(no(e,t,i,n,String(a),!0)):o.push("");return r.forEach(function(f){f.match(/^\d+$/)||o.push(no(e,t,i,n,f,!0))}),o}function no(e,t,i,n,r,o){var a,u,f;if(f=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},f.get?f.set?u=e.stylize("[Getter/Setter]","special"):u=e.stylize("[Getter]","special"):f.set&&(u=e.stylize("[Setter]","special")),Ru(n,r)||(a="["+r+"]"),u||(e.seen.indexOf(f.value)<0?(yo(i)?u=mn(e,f.value,null):u=mn(e,f.value,i-1),u.indexOf(`
`)>-1&&(o?u=u.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(c){return"   "+c}).join(`
`))):u=e.stylize("[Circular]","special")),st(a)){if(o&&r.match(/^\d+$/))return u;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function Tc(e,t,i){var n=e.reduce(function(r,o){return o.indexOf(`
`)>=0,r+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?i[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function Ac(e){return Array.isArray(e)}function Mu(e){return typeof e=="boolean"}function yo(e){return e===null}function Ic(e){return typeof e=="number"}function vo(e){return typeof e=="string"}function st(e){return e===void 0}function zn(e){return Hi(e)&&wo(e)==="[object RegExp]"}function Hi(e){return typeof e=="object"&&e!==null}function _a(e){return Hi(e)&&wo(e)==="[object Date]"}function Gn(e){return Hi(e)&&(wo(e)==="[object Error]"||e instanceof Error)}function Vn(e){return typeof e=="function"}function wo(e){return Object.prototype.toString.call(e)}function Oc(e,t){if(!t||!Hi(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e}function Ru(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jt(){this.head=null,this.tail=null,this.length=0}jt.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};jt.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};jt.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};jt.prototype.clear=function(){this.head=this.tail=null,this.length=0};jt.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i};jt.prototype.concat=function(e){if(this.length===0)return C.alloc(0);if(this.length===1)return this.head.data;for(var t=C.allocUnsafe(e>>>0),i=this.head,n=0;i;)i.data.copy(t,n),n+=i.data.length,i=i.next;return t};var Sc=C.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Lc(e){if(e&&!Sc(e))throw new Error("Unknown encoding: "+e)}function ui(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),Lc(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Cc;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Nc;break;default:this.write=Dc;return}this.charBuffer=new C(6),this.charReceived=0,this.charLength=0}ui.prototype.write=function(e){for(var t="";this.charLength;){var i=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";e=e.slice(i,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived),t+=e.toString(this.encoding,0,n);var n=t.length-1,r=t.charCodeAt(n);if(r>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t};ui.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var i=e[e.length-t];if(t==1&&i>>5==6){this.charLength=2;break}if(t<=2&&i>>4==14){this.charLength=3;break}if(t<=3&&i>>3==30){this.charLength=4;break}}this.charReceived=t};ui.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var i=this.charReceived,n=this.charBuffer,r=this.encoding;t+=n.slice(0,i).toString(r)}return t};function Dc(e){return e.toString(this.encoding)}function Cc(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Nc(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}const Mc=Object.freeze(Object.defineProperty({__proto__:null,StringDecoder:ui},Symbol.toStringTag,{value:"Module"}));ee.ReadableState=ku;var $=yc("stream");ge(ee,z);function Rc(e,t,i){if(typeof e.prependListener=="function")return e.prependListener(t,i);!e._events||!e._events[t]?e.on(t,i):Array.isArray(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]}function kc(e,t){return e.listeners(t).length}function ku(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof ve&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new jt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new ui(e.encoding),this.encoding=e.encoding)}function ee(e){if(!(this instanceof ee))return new ee(e);this._readableState=new ku(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),z.call(this)}ee.prototype.push=function(e,t){var i=this._readableState;return!i.objectMode&&typeof e=="string"&&(t=t||i.defaultEncoding,t!==i.encoding&&(e=C.from(e,t),t="")),Pu(this,i,e,t,!1)};ee.prototype.unshift=function(e){var t=this._readableState;return Pu(this,t,e,"",!0)};ee.prototype.isPaused=function(){return this._readableState.flowing===!1};function Pu(e,t,i,n,r){var o=Bc(t,i);if(o)e.emit("error",o);else if(i===null)t.reading=!1,Uc(e,t);else if(t.objectMode||i&&i.length>0)if(t.ended&&!r){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&r){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var f;t.decoder&&!r&&!n&&(i=t.decoder.write(i),f=!t.objectMode&&i.length===0),r||(t.reading=!1),f||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,r?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&Ln(e))),Hc(e,t)}else r||(t.reading=!1);return Pc(t)}function Pc(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}ee.prototype.setEncoding=function(e){return this._readableState.decoder=new ui(e),this._readableState.encoding=e,this};var ma=8388608;function Fc(e){return e>=ma?e=ma:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function ga(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Fc(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}ee.prototype.read=function(e){$("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return $("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Wn(this):Ln(this),null;if(e=ga(e,t),e===0&&t.ended)return t.length===0&&Wn(this),null;var n=t.needReadable;$("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,$("length less than watermark",n)),t.ended||t.reading?(n=!1,$("reading or ended",n)):n&&($("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=ga(i,t)));var r;return e>0?r=Fu(e,t):r=null,r===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&Wn(this)),r!==null&&this.emit("data",r),r};function Bc(e,t){var i=null;return!C.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i}function Uc(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,Ln(e)}}function Ln(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||($("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?be(ya,e):ya(e))}function ya(e){$("emit readable"),e.emit("readable"),bo(e)}function Hc(e,t){t.readingMore||(t.readingMore=!0,be(Xc,e,t))}function Xc(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&($("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}ee.prototype._read=function(e){this.emit("error",new Error("not implemented"))};ee.prototype.pipe=function(e,t){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,$("pipe count=%d opts=%j",n.pipesCount,t);var r=!t||t.end!==!1,o=r?u:d;n.endEmitted?be(o):i.once("end",o),e.on("unpipe",a);function a(w){$("onunpipe"),w===i&&d()}function u(){$("onend"),e.end()}var f=jc(i);e.on("drain",f);var c=!1;function d(){$("cleanup"),e.removeListener("close",p),e.removeListener("finish",y),e.removeListener("drain",f),e.removeListener("error",h),e.removeListener("unpipe",a),i.removeListener("end",u),i.removeListener("end",d),i.removeListener("data",l),c=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}var s=!1;i.on("data",l);function l(w){$("ondata"),s=!1;var v=e.write(w);v===!1&&!s&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Bu(n.pipes,e)!==-1)&&!c&&($("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,s=!0),i.pause())}function h(w){$("onerror",w),E(),e.removeListener("error",h),kc(e,"error")===0&&e.emit("error",w)}Rc(e,"error",h);function p(){e.removeListener("finish",y),E()}e.once("close",p);function y(){$("onfinish"),e.removeListener("close",p),E()}e.once("finish",y);function E(){$("unpipe"),i.unpipe(e)}return e.emit("pipe",i),n.flowing||($("pipe resume"),i.resume()),e};function jc(e){return function(){var t=e._readableState;$("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,bo(e))}}ee.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<n;r++)i[r].emit("unpipe",this);return this}var o=Bu(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};ee.prototype.on=function(e,t){var i=z.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Ln(this):be(zc,this))}return i};ee.prototype.addListener=ee.prototype.on;function zc(e){$("readable nexttick read 0"),e.read(0)}ee.prototype.resume=function(){var e=this._readableState;return e.flowing||($("resume"),e.flowing=!0,Gc(this,e)),this};function Gc(e,t){t.resumeScheduled||(t.resumeScheduled=!0,be(Vc,e,t))}function Vc(e,t){t.reading||($("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),bo(e),t.flowing&&!t.reading&&e.read(0)}ee.prototype.pause=function(){return $("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&($("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function bo(e){var t=e._readableState;for($("flow",t.flowing);t.flowing&&e.read()!==null;);}ee.prototype.wrap=function(e){var t=this._readableState,i=!1,n=this;e.on("end",function(){if($("wrapped end"),t.decoder&&!t.ended){var a=t.decoder.end();a&&a.length&&n.push(a)}n.push(null)}),e.on("data",function(a){if($("wrapped data"),t.decoder&&(a=t.decoder.write(a)),!(t.objectMode&&a==null)&&!(!t.objectMode&&(!a||!a.length))){var u=n.push(a);u||(i=!0,e.pause())}});for(var r in e)this[r]===void 0&&typeof e[r]=="function"&&(this[r]=function(a){return function(){return e[a].apply(e,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return Yc(o,function(a){e.on(a,n.emit.bind(n,a))}),n._read=function(a){$("wrapped _read",a),i&&(i=!1,e.resume())},n};ee._fromList=Fu;function Fu(e,t){if(t.length===0)return null;var i;return t.objectMode?i=t.buffer.shift():!e||e>=t.length?(t.decoder?i=t.buffer.join(""):t.buffer.length===1?i=t.buffer.head.data:i=t.buffer.concat(t.length),t.buffer.clear()):i=Wc(e,t.buffer,t.decoder),i}function Wc(e,t,i){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=i?Zc(e,t):$c(e,t),n}function Zc(e,t){var i=t.head,n=1,r=i.data;for(e-=r.length;i=i.next;){var o=i.data,a=e>o.length?o.length:e;if(a===o.length?r+=o:r+=o.slice(0,e),e-=a,e===0){a===o.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(a));break}++n}return t.length-=n,r}function $c(e,t){var i=C.allocUnsafe(e),n=t.head,r=1;for(n.data.copy(i),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(i,i.length-e,0,a),e-=a,e===0){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function Wn(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,be(qc,t,e))}function qc(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Yc(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)}function Bu(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}he.WritableState=xo;ge(he,z);function Kc(){}function Qc(e,t,i){this.chunk=e,this.encoding=t,this.callback=i,this.next=null}function xo(e,t){Object.defineProperty(this,"buffer",{get:Nu(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof ve&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){od(t,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ju(this)}xo.prototype.getBuffer=function(){for(var t=this.bufferedRequest,i=[];t;)i.push(t),t=t.next;return i};function he(e){if(!(this instanceof he)&&!(this instanceof ve))return new he(e);this._writableState=new xo(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),z.call(this)}he.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Jc(e,t){var i=new Error("write after end");e.emit("error",i),be(t,i)}function ed(e,t,i,n){var r=!0,o=!1;return i===null?o=new TypeError("May not write null values to stream"):!C.isBuffer(i)&&typeof i!="string"&&i!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),be(n,o),r=!1),r}he.prototype.write=function(e,t,i){var n=this._writableState,r=!1;return typeof t=="function"&&(i=t,t=null),C.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),typeof i!="function"&&(i=Kc),n.ended?Jc(this,i):ed(this,n,e,i)&&(n.pendingcb++,r=id(this,n,e,t,i)),r};he.prototype.cork=function(){var e=this._writableState;e.corked++};he.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Uu(this,e))};he.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function td(e,t,i){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=C.from(t,i)),t}function id(e,t,i,n,r){i=td(t,i,n),C.isBuffer(i)&&(n="buffer");var o=t.objectMode?1:i.length;t.length+=o;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new Qc(i,n,r),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else ro(e,t,!1,o,i,n,r);return a}function ro(e,t,i,n,r,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,i?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function nd(e,t,i,n,r){--t.pendingcb,i?be(r,n):r(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function rd(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function od(e,t){var i=e._writableState,n=i.sync,r=i.writecb;if(rd(i),t)nd(e,i,n,t,r);else{var o=Hu(i);!o&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&Uu(e,i),n?be(va,e,i,o,r):va(e,i,o,r)}}function va(e,t,i,n){i||ad(e,t),t.pendingcb--,n(),Xu(e,t)}function ad(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Uu(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,r=new Array(n),o=t.corkedRequestsFree;o.entry=i;for(var a=0;i;)r[a]=i,i=i.next,a+=1;ro(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new ju(t)}else{for(;i;){var u=i.chunk,f=i.encoding,c=i.callback,d=t.objectMode?1:u.length;if(ro(e,t,!1,d,u,f,c),i=i.next,t.writing)break}i===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=i,t.bufferProcessing=!1}he.prototype._write=function(e,t,i){i(new Error("not implemented"))};he.prototype._writev=null;he.prototype.end=function(e,t,i){var n=this._writableState;typeof e=="function"?(i=e,e=null,t=null):typeof t=="function"&&(i=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&sd(this,n,i)};function Hu(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function wa(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Xu(e,t){var i=Hu(t);return i&&(t.pendingcb===0?(wa(e,t),t.finished=!0,e.emit("finish")):wa(e,t)),i}function sd(e,t,i){t.ending=!0,Xu(e,t),i&&(t.finished?be(i):e.once("finish",i)),t.ended=!0,e.writable=!1}function ju(e){var t=this;this.next=null,this.entry=null,this.finish=function(i){var n=t.entry;for(t.entry=null;n;){var r=n.callback;e.pendingcb--,r(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}ge(ve,ee);var ba=Object.keys(he.prototype);for(var Zn=0;Zn<ba.length;Zn++){var $n=ba[Zn];ve.prototype[$n]||(ve.prototype[$n]=he.prototype[$n])}function ve(e){if(!(this instanceof ve))return new ve(e);ee.call(this,e),he.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ud)}function ud(){this.allowHalfOpen||this._writableState.ended||be(ld,this)}function ld(e){e.end()}ge(we,ve);function fd(e){this.afterTransform=function(t,i){return hd(e,t,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function hd(e,t,i){var n=e._transformState;n.transforming=!1;var r=n.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,i!=null&&e.push(i),r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function we(e){if(!(this instanceof we))return new we(e);ve.call(this,e),this._transformState=new fd(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(i){xa(t,i)}):xa(t)})}we.prototype.push=function(e,t){return this._transformState.needTransform=!1,ve.prototype.push.call(this,e,t)};we.prototype._transform=function(e,t,i){throw new Error("Not implemented")};we.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}};we.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function xa(e,t){if(t)return e.emit("error",t);var i=e._writableState,n=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}ge(ai,we);function ai(e){if(!(this instanceof ai))return new ai(e);we.call(this,e)}ai.prototype._transform=function(e,t,i){i(null,e)};ge(Se,z);Se.Readable=ee;Se.Writable=he;Se.Duplex=ve;Se.Transform=we;Se.PassThrough=ai;Se.Stream=Se;function Se(){z.call(this)}Se.prototype.pipe=function(e,t){var i=this;function n(d){e.writable&&e.write(d)===!1&&i.pause&&i.pause()}i.on("data",n);function r(){i.readable&&i.resume&&i.resume()}e.on("drain",r),!e._isStdio&&(!t||t.end!==!1)&&(i.on("end",a),i.on("close",u));var o=!1;function a(){o||(o=!0,e.end())}function u(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function f(d){if(c(),z.listenerCount(this,"error")===0)throw d}i.on("error",f),e.on("error",f);function c(){i.removeListener("data",n),e.removeListener("drain",r),i.removeListener("end",a),i.removeListener("close",u),i.removeListener("error",f),e.removeListener("error",f),i.removeListener("end",c),i.removeListener("close",c),e.removeListener("close",c)}return i.on("end",c),i.on("close",c),e.on("close",c),e.emit("pipe",i),e};const cd=Object.freeze(Object.defineProperty({__proto__:null,Duplex:ve,PassThrough:ai,Readable:ee,Stream:Se,Transform:we,Writable:he,default:Se},Symbol.toStringTag,{value:"Module"})),zu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function dd(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Qe(e,t,i,n,r){if(t.subarray&&e.subarray){e.set(t.subarray(i,i+n),r);return}for(var o=0;o<n;o++)e[r+o]=t[i+o]}var gn=Uint8Array,Te=Uint16Array,yn=Int32Array,pd=4,Ea=0,Ta=1,_d=2;function li(e){for(var t=e.length;--t>=0;)e[t]=0}var md=0,Gu=1,gd=2,yd=3,vd=258,Eo=29,Xi=256,Di=Xi+1+Eo,oi=30,To=19,Vu=2*Di+1,Dt=15,qn=16,wd=7,Ao=256,Wu=16,Zu=17,$u=18,oo=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],an=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],bd=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],qu=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],xd=512,$e=new Array((Di+2)*2);li($e);var Ii=new Array(oi*2);li(Ii);var Ci=new Array(xd);li(Ci);var Ni=new Array(vd-yd+1);li(Ni);var Io=new Array(Eo);li(Io);var vn=new Array(oi);li(vn);function Yn(e,t,i,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}var Yu,Ku,Qu;function Kn(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Ju(e){return e<256?Ci[e]:Ci[256+(e>>>7)]}function Mi(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function _e(e,t,i){e.bi_valid>qn-i?(e.bi_buf|=t<<e.bi_valid&65535,Mi(e,e.bi_buf),e.bi_buf=t>>qn-e.bi_valid,e.bi_valid+=i-qn):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function Pe(e,t,i){_e(e,i[t*2],i[t*2+1])}function el(e,t){var i=0;do i|=e&1,e>>>=1,i<<=1;while(--t>0);return i>>>1}function Ed(e){e.bi_valid===16?(Mi(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function Td(e,t){var i=t.dyn_tree,n=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,f=t.stat_desc.max_length,c,d,s,l,h,p,y=0;for(l=0;l<=Dt;l++)e.bl_count[l]=0;for(i[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<Vu;c++)d=e.heap[c],l=i[i[d*2+1]*2+1]+1,l>f&&(l=f,y++),i[d*2+1]=l,!(d>n)&&(e.bl_count[l]++,h=0,d>=u&&(h=a[d-u]),p=i[d*2],e.opt_len+=p*(l+h),o&&(e.static_len+=p*(r[d*2+1]+h)));if(y!==0){do{for(l=f-1;e.bl_count[l]===0;)l--;e.bl_count[l]--,e.bl_count[l+1]+=2,e.bl_count[f]--,y-=2}while(y>0);for(l=f;l!==0;l--)for(d=e.bl_count[l];d!==0;)s=e.heap[--c],!(s>n)&&(i[s*2+1]!==l&&(e.opt_len+=(l-i[s*2+1])*i[s*2],i[s*2+1]=l),d--)}}function tl(e,t,i){var n=new Array(Dt+1),r=0,o,a;for(o=1;o<=Dt;o++)n[o]=r=r+i[o-1]<<1;for(a=0;a<=t;a++){var u=e[a*2+1];u!==0&&(e[a*2]=el(n[u]++,u))}}function Ad(){var e,t,i,n,r,o=new Array(Dt+1);for(i=0,n=0;n<Eo-1;n++)for(Io[n]=i,e=0;e<1<<oo[n];e++)Ni[i++]=n;for(Ni[i-1]=n,r=0,n=0;n<16;n++)for(vn[n]=r,e=0;e<1<<an[n];e++)Ci[r++]=n;for(r>>=7;n<oi;n++)for(vn[n]=r<<7,e=0;e<1<<an[n]-7;e++)Ci[256+r++]=n;for(t=0;t<=Dt;t++)o[t]=0;for(e=0;e<=143;)$e[e*2+1]=8,e++,o[8]++;for(;e<=255;)$e[e*2+1]=9,e++,o[9]++;for(;e<=279;)$e[e*2+1]=7,e++,o[7]++;for(;e<=287;)$e[e*2+1]=8,e++,o[8]++;for(tl($e,Di+1,o),e=0;e<oi;e++)Ii[e*2+1]=5,Ii[e*2]=el(e,5);Yu=new Yn($e,oo,Xi+1,Di,Dt),Ku=new Yn(Ii,an,0,oi,Dt),Qu=new Yn(new Array(0),bd,0,To,wd)}function il(e){var t;for(t=0;t<Di;t++)e.dyn_ltree[t*2]=0;for(t=0;t<oi;t++)e.dyn_dtree[t*2]=0;for(t=0;t<To;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Ao*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function nl(e){e.bi_valid>8?Mi(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Id(e,t,i,n){nl(e),n&&(Mi(e,i),Mi(e,~i)),Qe(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function Aa(e,t,i,n){var r=t*2,o=i*2;return e[r]<e[o]||e[r]===e[o]&&n[t]<=n[i]}function Qn(e,t,i){for(var n=e.heap[i],r=i<<1;r<=e.heap_len&&(r<e.heap_len&&Aa(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Aa(t,n,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=n}function Ia(e,t,i){var n,r,o=0,a,u;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],r=e.pending_buf[e.l_buf+o],o++,n===0?Pe(e,r,t):(a=Ni[r],Pe(e,a+Xi+1,t),u=oo[a],u!==0&&(r-=Io[a],_e(e,r,u)),n--,a=Ju(n),Pe(e,a,i),u=an[a],u!==0&&(n-=vn[a],_e(e,n,u)));while(o<e.last_lit);Pe(e,Ao,t)}function ao(e,t){var i=t.dyn_tree,n=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems,a,u,f=-1,c;for(e.heap_len=0,e.heap_max=Vu,a=0;a<o;a++)i[a*2]!==0?(e.heap[++e.heap_len]=f=a,e.depth[a]=0):i[a*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=f<2?++f:0,i[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=n[c*2+1]);for(t.max_code=f,a=e.heap_len>>1;a>=1;a--)Qn(e,i,a);c=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Qn(e,i,1),u=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=u,i[c*2]=i[a*2]+i[u*2],e.depth[c]=(e.depth[a]>=e.depth[u]?e.depth[a]:e.depth[u])+1,i[a*2+1]=i[u*2+1]=c,e.heap[1]=c++,Qn(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Td(e,t),tl(i,f,e.bl_count)}function Oa(e,t,i){var n,r=-1,o,a=t[0*2+1],u=0,f=7,c=4;for(a===0&&(f=138,c=3),t[(i+1)*2+1]=65535,n=0;n<=i;n++)o=a,a=t[(n+1)*2+1],!(++u<f&&o===a)&&(u<c?e.bl_tree[o*2]+=u:o!==0?(o!==r&&e.bl_tree[o*2]++,e.bl_tree[Wu*2]++):u<=10?e.bl_tree[Zu*2]++:e.bl_tree[$u*2]++,u=0,r=o,a===0?(f=138,c=3):o===a?(f=6,c=3):(f=7,c=4))}function Sa(e,t,i){var n,r=-1,o,a=t[0*2+1],u=0,f=7,c=4;for(a===0&&(f=138,c=3),n=0;n<=i;n++)if(o=a,a=t[(n+1)*2+1],!(++u<f&&o===a)){if(u<c)do Pe(e,o,e.bl_tree);while(--u!==0);else o!==0?(o!==r&&(Pe(e,o,e.bl_tree),u--),Pe(e,Wu,e.bl_tree),_e(e,u-3,2)):u<=10?(Pe(e,Zu,e.bl_tree),_e(e,u-3,3)):(Pe(e,$u,e.bl_tree),_e(e,u-11,7));u=0,r=o,a===0?(f=138,c=3):o===a?(f=6,c=3):(f=7,c=4)}}function Od(e){var t;for(Oa(e,e.dyn_ltree,e.l_desc.max_code),Oa(e,e.dyn_dtree,e.d_desc.max_code),ao(e,e.bl_desc),t=To-1;t>=3&&e.bl_tree[qu[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Sd(e,t,i,n){var r;for(_e(e,t-257,5),_e(e,i-1,5),_e(e,n-4,4),r=0;r<n;r++)_e(e,e.bl_tree[qu[r]*2+1],3);Sa(e,e.dyn_ltree,t-1),Sa(e,e.dyn_dtree,i-1)}function Ld(e){var t=4093624447,i;for(i=0;i<=31;i++,t>>>=1)if(t&1&&e.dyn_ltree[i*2]!==0)return Ea;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Ta;for(i=32;i<Xi;i++)if(e.dyn_ltree[i*2]!==0)return Ta;return Ea}var La=!1;function Dd(e){La||(Ad(),La=!0),e.l_desc=new Kn(e.dyn_ltree,Yu),e.d_desc=new Kn(e.dyn_dtree,Ku),e.bl_desc=new Kn(e.bl_tree,Qu),e.bi_buf=0,e.bi_valid=0,il(e)}function rl(e,t,i,n){_e(e,(md<<1)+(n?1:0),3),Id(e,t,i,!0)}function Cd(e){_e(e,Gu<<1,3),Pe(e,Ao,$e),Ed(e)}function Nd(e,t,i,n){var r,o,a=0;e.level>0?(e.strm.data_type===_d&&(e.strm.data_type=Ld(e)),ao(e,e.l_desc),ao(e,e.d_desc),a=Od(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=i+5,i+4<=r&&t!==-1?rl(e,t,i,n):e.strategy===pd||o===r?(_e(e,(Gu<<1)+(n?1:0),3),Ia(e,$e,Ii)):(_e(e,(gd<<1)+(n?1:0),3),Sd(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),Ia(e,e.dyn_ltree,e.dyn_dtree)),il(e),n&&nl(e)}function dt(e,t,i){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=i&255,e.last_lit++,t===0?e.dyn_ltree[i*2]++:(e.matches++,t--,e.dyn_ltree[(Ni[i]+Xi+1)*2]++,e.dyn_dtree[Ju(t)*2]++),e.last_lit===e.lit_bufsize-1}function so(e,t,i,n){for(var r=e&65535|0,o=e>>>16&65535|0,a=0;i!==0;){a=i>2e3?2e3:i,i-=a;do r=r+t[n++]|0,o=o+r|0;while(--a);r%=65521,o%=65521}return r|o<<16|0}function Md(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[i]=e}return t}var Rd=Md();function ae(e,t,i,n){var r=Rd,o=n+i;e^=-1;for(var a=n;a<o;a++)e=e>>>8^r[(e^t[a])&255];return e^-1}var zt=0,kd=1,Pd=3,pt=4,Da=5,ot=0,Ca=1,_t=-2,Fd=-3,Jn=-5,Bd=-1,Ud=1,Ki=2,Hd=3,Xd=4,jd=2,Oo=8,zd=9,Gd=29,Vd=256,uo=Vd+1+Gd,Wd=30,Zd=19,$d=2*uo+1,qd=15,W=3,ut=258,Oe=ut+W+1,Yd=32,So=42,lo=69,sn=73,un=91,ln=103,Ct=113,xi=666,re=1,ji=2,Nt=3,fi=4,Kd=3;function lt(e,t){return e.msg=zu[t],t}function Na(e){return(e<<1)-(e>4?9:0)}function Ot(e){for(var t=e.length;--t>=0;)e[t]=0}function rt(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),i!==0&&(Qe(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,t.pending===0&&(t.pending_out=0))}function fe(e,t){Nd(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,rt(e.strm)}function V(e,t){e.pending_buf[e.pending++]=t}function yi(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function Qd(e,t,i,n){var r=e.avail_in;return r>n&&(r=n),r===0?0:(e.avail_in-=r,Qe(t,e.input,e.next_in,r,i),e.state.wrap===1?e.adler=so(e.adler,t,r,i):e.state.wrap===2&&(e.adler=ae(e.adler,t,r,i)),e.next_in+=r,e.total_in+=r,r)}function ol(e,t){var i=e.max_chain_length,n=e.strstart,r,o,a=e.prev_length,u=e.nice_match,f=e.strstart>e.w_size-Oe?e.strstart-(e.w_size-Oe):0,c=e.window,d=e.w_mask,s=e.prev,l=e.strstart+ut,h=c[n+a-1],p=c[n+a];e.prev_length>=e.good_match&&(i>>=2),u>e.lookahead&&(u=e.lookahead);do if(r=t,!(c[r+a]!==p||c[r+a-1]!==h||c[r]!==c[n]||c[++r]!==c[n+1])){n+=2,r++;do;while(c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&n<l);if(o=ut-(l-n),n=l-ut,o>a){if(e.match_start=t,a=o,o>=u)break;h=c[n+a-1],p=c[n+a]}}while((t=s[t&d])>f&&--i!==0);return a<=e.lookahead?a:e.lookahead}function zi(e){var t=e.w_size,i,n,r,o,a;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Oe)){Qe(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,i=n;do r=e.head[--i],e.head[i]=r>=t?r-t:0;while(--n);n=t,i=n;do r=e.prev[--i],e.prev[i]=r>=t?r-t:0;while(--n);o+=t}if(e.strm.avail_in===0)break;if(n=Qd(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=W)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+W-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<W)););}while(e.lookahead<Oe&&e.strm.avail_in!==0)}function Jd(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(zi(e),e.lookahead===0&&t===zt)return re;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,fe(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Oe&&(fe(e,!1),e.strm.avail_out===0))return re}return e.insert=0,t===pt?(fe(e,!0),e.strm.avail_out===0?Nt:fi):(e.strstart>e.block_start&&(fe(e,!1),e.strm.avail_out===0),re)}function er(e,t){for(var i,n;;){if(e.lookahead<Oe){if(zi(e),e.lookahead<Oe&&t===zt)return re;if(e.lookahead===0)break}if(i=0,e.lookahead>=W&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+W-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),i!==0&&e.strstart-i<=e.w_size-Oe&&(e.match_length=ol(e,i)),e.match_length>=W)if(n=dt(e,e.strstart-e.match_start,e.match_length-W),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=W){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+W-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=dt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(fe(e,!1),e.strm.avail_out===0))return re}return e.insert=e.strstart<W-1?e.strstart:W-1,t===pt?(fe(e,!0),e.strm.avail_out===0?Nt:fi):e.last_lit&&(fe(e,!1),e.strm.avail_out===0)?re:ji}function $t(e,t){for(var i,n,r;;){if(e.lookahead<Oe){if(zi(e),e.lookahead<Oe&&t===zt)return re;if(e.lookahead===0)break}if(i=0,e.lookahead>=W&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+W-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=W-1,i!==0&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-Oe&&(e.match_length=ol(e,i),e.match_length<=5&&(e.strategy===Ud||e.match_length===W&&e.strstart-e.match_start>4096)&&(e.match_length=W-1)),e.prev_length>=W&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-W,n=dt(e,e.strstart-1-e.prev_match,e.prev_length-W),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+W-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=W-1,e.strstart++,n&&(fe(e,!1),e.strm.avail_out===0))return re}else if(e.match_available){if(n=dt(e,0,e.window[e.strstart-1]),n&&fe(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return re}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=dt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<W-1?e.strstart:W-1,t===pt?(fe(e,!0),e.strm.avail_out===0?Nt:fi):e.last_lit&&(fe(e,!1),e.strm.avail_out===0)?re:ji}function ep(e,t){for(var i,n,r,o,a=e.window;;){if(e.lookahead<=ut){if(zi(e),e.lookahead<=ut&&t===zt)return re;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=W&&e.strstart>0&&(r=e.strstart-1,n=a[r],n===a[++r]&&n===a[++r]&&n===a[++r])){o=e.strstart+ut;do;while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<o);e.match_length=ut-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=W?(i=dt(e,1,e.match_length-W),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=dt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(fe(e,!1),e.strm.avail_out===0))return re}return e.insert=0,t===pt?(fe(e,!0),e.strm.avail_out===0?Nt:fi):e.last_lit&&(fe(e,!1),e.strm.avail_out===0)?re:ji}function tp(e,t){for(var i;;){if(e.lookahead===0&&(zi(e),e.lookahead===0)){if(t===zt)return re;break}if(e.match_length=0,i=dt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(fe(e,!1),e.strm.avail_out===0))return re}return e.insert=0,t===pt?(fe(e,!0),e.strm.avail_out===0?Nt:fi):e.last_lit&&(fe(e,!1),e.strm.avail_out===0)?re:ji}function Re(e,t,i,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=r}var ei;ei=[new Re(0,0,0,0,Jd),new Re(4,4,8,4,er),new Re(4,5,16,8,er),new Re(4,6,32,32,er),new Re(4,4,16,16,$t),new Re(8,16,32,32,$t),new Re(8,16,128,128,$t),new Re(8,32,128,256,$t),new Re(32,128,258,1024,$t),new Re(32,258,258,4096,$t)];function ip(e){e.window_size=2*e.w_size,Ot(e.head),e.max_lazy_match=ei[e.level].max_lazy,e.good_match=ei[e.level].good_length,e.nice_match=ei[e.level].nice_length,e.max_chain_length=ei[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=W-1,e.match_available=0,e.ins_h=0}function np(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Oo,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Te($d*2),this.dyn_dtree=new Te((2*Wd+1)*2),this.bl_tree=new Te((2*Zd+1)*2),Ot(this.dyn_ltree),Ot(this.dyn_dtree),Ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Te(qd+1),this.heap=new Te(2*uo+1),Ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Te(2*uo+1),Ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function rp(e){var t;return!e||!e.state?lt(e,_t):(e.total_in=e.total_out=0,e.data_type=jd,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?So:Ct,e.adler=t.wrap===2?0:1,t.last_flush=zt,Dd(t),ot)}function al(e){var t=rp(e);return t===ot&&ip(e.state),t}function op(e,t,i,n,r,o){if(!e)return _t;var a=1;if(t===Bd&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),r<1||r>zd||i!==Oo||n<8||n>15||t<0||t>9||o<0||o>Xd)return lt(e,_t);n===8&&(n=9);var u=new np;return e.state=u,u.strm=e,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=r+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+W-1)/W),u.window=new gn(u.w_size*2),u.head=new Te(u.hash_size),u.prev=new Te(u.w_size),u.lit_bufsize=1<<r+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new gn(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=(1+2)*u.lit_bufsize,u.level=t,u.strategy=o,u.method=i,al(e)}function ap(e,t){var i,n,r,o;if(!e||!e.state||t>Da||t<0)return e?lt(e,_t):_t;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===xi&&t!==pt)return lt(e,e.avail_out===0?Jn:_t);if(n.strm=e,i=n.last_flush,n.last_flush=t,n.status===So)if(n.wrap===2)e.adler=0,V(n,31),V(n,139),V(n,8),n.gzhead?(V(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),V(n,n.gzhead.time&255),V(n,n.gzhead.time>>8&255),V(n,n.gzhead.time>>16&255),V(n,n.gzhead.time>>24&255),V(n,n.level===9?2:n.strategy>=Ki||n.level<2?4:0),V(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(V(n,n.gzhead.extra.length&255),V(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ae(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=lo):(V(n,0),V(n,0),V(n,0),V(n,0),V(n,0),V(n,n.level===9?2:n.strategy>=Ki||n.level<2?4:0),V(n,Kd),n.status=Ct);else{var a=Oo+(n.w_bits-8<<4)<<8,u=-1;n.strategy>=Ki||n.level<2?u=0:n.level<6?u=1:n.level===6?u=2:u=3,a|=u<<6,n.strstart!==0&&(a|=Yd),a+=31-a%31,n.status=Ct,yi(n,a),n.strstart!==0&&(yi(n,e.adler>>>16),yi(n,e.adler&65535)),e.adler=1}if(n.status===lo)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=ae(e.adler,n.pending_buf,n.pending-r,r)),rt(e),r=n.pending,n.pending===n.pending_buf_size));)V(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(e.adler=ae(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=sn)}else n.status=sn;if(n.status===sn)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=ae(e.adler,n.pending_buf,n.pending-r,r)),rt(e),r=n.pending,n.pending===n.pending_buf_size)){o=1;break}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,V(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=ae(e.adler,n.pending_buf,n.pending-r,r)),o===0&&(n.gzindex=0,n.status=un)}else n.status=un;if(n.status===un)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=ae(e.adler,n.pending_buf,n.pending-r,r)),rt(e),r=n.pending,n.pending===n.pending_buf_size)){o=1;break}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,V(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=ae(e.adler,n.pending_buf,n.pending-r,r)),o===0&&(n.status=ln)}else n.status=ln;if(n.status===ln&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&rt(e),n.pending+2<=n.pending_buf_size&&(V(n,e.adler&255),V(n,e.adler>>8&255),e.adler=0,n.status=Ct)):n.status=Ct),n.pending!==0){if(rt(e),e.avail_out===0)return n.last_flush=-1,ot}else if(e.avail_in===0&&Na(t)<=Na(i)&&t!==pt)return lt(e,Jn);if(n.status===xi&&e.avail_in!==0)return lt(e,Jn);if(e.avail_in!==0||n.lookahead!==0||t!==zt&&n.status!==xi){var f=n.strategy===Ki?tp(n,t):n.strategy===Hd?ep(n,t):ei[n.level].func(n,t);if((f===Nt||f===fi)&&(n.status=xi),f===re||f===Nt)return e.avail_out===0&&(n.last_flush=-1),ot;if(f===ji&&(t===kd?Cd(n):t!==Da&&(rl(n,0,0,!1),t===Pd&&(Ot(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),rt(e),e.avail_out===0))return n.last_flush=-1,ot}return t!==pt?ot:n.wrap<=0?Ca:(n.wrap===2?(V(n,e.adler&255),V(n,e.adler>>8&255),V(n,e.adler>>16&255),V(n,e.adler>>24&255),V(n,e.total_in&255),V(n,e.total_in>>8&255),V(n,e.total_in>>16&255),V(n,e.total_in>>24&255)):(yi(n,e.adler>>>16),yi(n,e.adler&65535)),rt(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?ot:Ca)}function sp(e){var t;return!e||!e.state?_t:(t=e.state.status,t!==So&&t!==lo&&t!==sn&&t!==un&&t!==ln&&t!==Ct&&t!==xi?lt(e,_t):(e.state=null,t===Ct?lt(e,Fd):ot))}var Qi=30,up=12;function lp(e,t){var i,n,r,o,a,u,f,c,d,s,l,h,p,y,E,w,v,m,b,T,N,L,A,_,O;i=e.state,n=e.next_in,_=e.input,r=n+(e.avail_in-5),o=e.next_out,O=e.output,a=o-(t-e.avail_out),u=o+(e.avail_out-257),f=i.dmax,c=i.wsize,d=i.whave,s=i.wnext,l=i.window,h=i.hold,p=i.bits,y=i.lencode,E=i.distcode,w=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{p<15&&(h+=_[n++]<<p,p+=8,h+=_[n++]<<p,p+=8),m=y[h&w];t:for(;;){if(b=m>>>24,h>>>=b,p-=b,b=m>>>16&255,b===0)O[o++]=m&65535;else if(b&16){T=m&65535,b&=15,b&&(p<b&&(h+=_[n++]<<p,p+=8),T+=h&(1<<b)-1,h>>>=b,p-=b),p<15&&(h+=_[n++]<<p,p+=8,h+=_[n++]<<p,p+=8),m=E[h&v];i:for(;;){if(b=m>>>24,h>>>=b,p-=b,b=m>>>16&255,b&16){if(N=m&65535,b&=15,p<b&&(h+=_[n++]<<p,p+=8,p<b&&(h+=_[n++]<<p,p+=8)),N+=h&(1<<b)-1,N>f){e.msg="invalid distance too far back",i.mode=Qi;break e}if(h>>>=b,p-=b,b=o-a,N>b){if(b=N-b,b>d&&i.sane){e.msg="invalid distance too far back",i.mode=Qi;break e}if(L=0,A=l,s===0){if(L+=c-b,b<T){T-=b;do O[o++]=l[L++];while(--b);L=o-N,A=O}}else if(s<b){if(L+=c+s-b,b-=s,b<T){T-=b;do O[o++]=l[L++];while(--b);if(L=0,s<T){b=s,T-=b;do O[o++]=l[L++];while(--b);L=o-N,A=O}}}else if(L+=s-b,b<T){T-=b;do O[o++]=l[L++];while(--b);L=o-N,A=O}for(;T>2;)O[o++]=A[L++],O[o++]=A[L++],O[o++]=A[L++],T-=3;T&&(O[o++]=A[L++],T>1&&(O[o++]=A[L++]))}else{L=o-N;do O[o++]=O[L++],O[o++]=O[L++],O[o++]=O[L++],T-=3;while(T>2);T&&(O[o++]=O[L++],T>1&&(O[o++]=O[L++]))}}else if(b&64){e.msg="invalid distance code",i.mode=Qi;break e}else{m=E[(m&65535)+(h&(1<<b)-1)];continue i}break}}else if(b&64)if(b&32){i.mode=up;break e}else{e.msg="invalid literal/length code",i.mode=Qi;break e}else{m=y[(m&65535)+(h&(1<<b)-1)];continue t}break}}while(n<r&&o<u);T=p>>3,n-=T,p-=T<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=o,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=o<u?257+(u-o):257-(o-u),i.hold=h,i.bits=p}var qt=15,Ma=852,Ra=592,ka=0,tr=1,Pa=2,fp=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],hp=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],cp=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dp=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Oi(e,t,i,n,r,o,a,u){var f=u.bits,c=0,d=0,s=0,l=0,h=0,p=0,y=0,E=0,w=0,v=0,m,b,T,N,L,A=null,_=0,O,D=new Te(qt+1),k=new Te(qt+1),F=null,X=0,K,G,H;for(c=0;c<=qt;c++)D[c]=0;for(d=0;d<n;d++)D[t[i+d]]++;for(h=f,l=qt;l>=1&&D[l]===0;l--);if(h>l&&(h=l),l===0)return r[o++]=1<<24|64<<16|0,r[o++]=1<<24|64<<16|0,u.bits=1,0;for(s=1;s<l&&D[s]===0;s++);for(h<s&&(h=s),E=1,c=1;c<=qt;c++)if(E<<=1,E-=D[c],E<0)return-1;if(E>0&&(e===ka||l!==1))return-1;for(k[1]=0,c=1;c<qt;c++)k[c+1]=k[c]+D[c];for(d=0;d<n;d++)t[i+d]!==0&&(a[k[t[i+d]]++]=d);if(e===ka?(A=F=a,O=19):e===tr?(A=fp,_-=257,F=hp,X-=257,O=256):(A=cp,F=dp,O=-1),v=0,d=0,c=s,L=o,p=h,y=0,T=-1,w=1<<h,N=w-1,e===tr&&w>Ma||e===Pa&&w>Ra)return 1;for(;;){K=c-y,a[d]<O?(G=0,H=a[d]):a[d]>O?(G=F[X+a[d]],H=A[_+a[d]]):(G=32+64,H=0),m=1<<c-y,b=1<<p,s=b;do b-=m,r[L+(v>>y)+b]=K<<24|G<<16|H|0;while(b!==0);for(m=1<<c-1;v&m;)m>>=1;if(m!==0?(v&=m-1,v+=m):v=0,d++,--D[c]===0){if(c===l)break;c=t[i+a[d]]}if(c>h&&(v&N)!==T){for(y===0&&(y=h),L+=s,p=c-y,E=1<<p;p+y<l&&(E-=D[p+y],!(E<=0));)p++,E<<=1;if(w+=1<<p,e===tr&&w>Ma||e===Pa&&w>Ra)return 1;T=v&N,r[T]=h<<24|p<<16|L-o|0}}return v!==0&&(r[L+v]=c-y<<24|64<<16|0),u.bits=h,0}var pp=0,sl=1,ul=2,Fa=4,_p=5,Ji=6,Ri=0,mp=1,gp=2,yt=-2,yp=-3,vp=-4,wp=-5,Ba=8,ll=1,Ua=2,Ha=3,Xa=4,ja=5,za=6,Ga=7,Va=8,Wa=9,Za=10,$a=11,ze=12,ir=13,qa=14,nr=15,Ya=16,Ka=17,Qa=18,Ja=19,en=20,tn=21,es=22,ts=23,is=24,ns=25,rs=26,rr=27,os=28,as=29,J=30,bp=31,xp=32,Ep=852,Tp=592;function ss(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function Ap(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Te(320),this.work=new Te(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ip(e){var t;return!e||!e.state?yt:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=ll,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new yn(Ep),t.distcode=t.distdyn=new yn(Tp),t.sane=1,t.back=-1,Ri)}function fl(e){var t;return!e||!e.state?yt:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,Ip(e))}function Op(e,t){var i,n;return!e||!e.state||(n=e.state,t<0?(i=0,t=-t):(i=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?yt:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,fl(e))}function Sp(e,t){var i,n;return e?(n=new Ap,e.state=n,n.window=null,i=Op(e,t),i!==Ri&&(e.state=null),i):yt}var us=!0,or,ar;function Lp(e){if(us){var t;for(or=new yn(512),ar=new yn(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Oi(sl,e.lens,0,288,or,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Oi(ul,e.lens,0,32,ar,0,e.work,{bits:5}),us=!1}e.lencode=or,e.lenbits=9,e.distcode=ar,e.distbits=5}function Dp(e,t,i,n){var r,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new gn(o.wsize)),n>=o.wsize?(Qe(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>n&&(r=n),Qe(o.window,t,i-n,r,o.wnext),n-=r,n?(Qe(o.window,t,i-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function Cp(e,t){var i,n,r,o,a,u,f,c,d,s,l,h,p,y,E=0,w,v,m,b,T,N,L,A,_=new gn(4),O,D,k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return yt;i=e.state,i.mode===ze&&(i.mode=ir),a=e.next_out,r=e.output,f=e.avail_out,o=e.next_in,n=e.input,u=e.avail_in,c=i.hold,d=i.bits,s=u,l=f,A=Ri;e:for(;;)switch(i.mode){case ll:if(i.wrap===0){i.mode=ir;break}for(;d<16;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(i.wrap&2&&c===35615){i.check=0,_[0]=c&255,_[1]=c>>>8&255,i.check=ae(i.check,_,2,0),c=0,d=0,i.mode=Ua;break}if(i.flags=0,i.head&&(i.head.done=!1),!(i.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",i.mode=J;break}if((c&15)!==Ba){e.msg="unknown compression method",i.mode=J;break}if(c>>>=4,d-=4,L=(c&15)+8,i.wbits===0)i.wbits=L;else if(L>i.wbits){e.msg="invalid window size",i.mode=J;break}i.dmax=1<<L,e.adler=i.check=1,i.mode=c&512?Za:ze,c=0,d=0;break;case Ua:for(;d<16;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(i.flags=c,(i.flags&255)!==Ba){e.msg="unknown compression method",i.mode=J;break}if(i.flags&57344){e.msg="unknown header flags set",i.mode=J;break}i.head&&(i.head.text=c>>8&1),i.flags&512&&(_[0]=c&255,_[1]=c>>>8&255,i.check=ae(i.check,_,2,0)),c=0,d=0,i.mode=Ha;case Ha:for(;d<32;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}i.head&&(i.head.time=c),i.flags&512&&(_[0]=c&255,_[1]=c>>>8&255,_[2]=c>>>16&255,_[3]=c>>>24&255,i.check=ae(i.check,_,4,0)),c=0,d=0,i.mode=Xa;case Xa:for(;d<16;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}i.head&&(i.head.xflags=c&255,i.head.os=c>>8),i.flags&512&&(_[0]=c&255,_[1]=c>>>8&255,i.check=ae(i.check,_,2,0)),c=0,d=0,i.mode=ja;case ja:if(i.flags&1024){for(;d<16;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}i.length=c,i.head&&(i.head.extra_len=c),i.flags&512&&(_[0]=c&255,_[1]=c>>>8&255,i.check=ae(i.check,_,2,0)),c=0,d=0}else i.head&&(i.head.extra=null);i.mode=za;case za:if(i.flags&1024&&(h=i.length,h>u&&(h=u),h&&(i.head&&(L=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),Qe(i.head.extra,n,o,h,L)),i.flags&512&&(i.check=ae(i.check,n,h,o)),u-=h,o+=h,i.length-=h),i.length))break e;i.length=0,i.mode=Ga;case Ga:if(i.flags&2048){if(u===0)break e;h=0;do L=n[o+h++],i.head&&L&&i.length<65536&&(i.head.name+=String.fromCharCode(L));while(L&&h<u);if(i.flags&512&&(i.check=ae(i.check,n,h,o)),u-=h,o+=h,L)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=Va;case Va:if(i.flags&4096){if(u===0)break e;h=0;do L=n[o+h++],i.head&&L&&i.length<65536&&(i.head.comment+=String.fromCharCode(L));while(L&&h<u);if(i.flags&512&&(i.check=ae(i.check,n,h,o)),u-=h,o+=h,L)break e}else i.head&&(i.head.comment=null);i.mode=Wa;case Wa:if(i.flags&512){for(;d<16;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(c!==(i.check&65535)){e.msg="header crc mismatch",i.mode=J;break}c=0,d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=ze;break;case Za:for(;d<32;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}e.adler=i.check=ss(c),c=0,d=0,i.mode=$a;case $a:if(i.havedict===0)return e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=u,i.hold=c,i.bits=d,gp;e.adler=i.check=1,i.mode=ze;case ze:if(t===_p||t===Ji)break e;case ir:if(i.last){c>>>=d&7,d-=d&7,i.mode=rr;break}for(;d<3;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}switch(i.last=c&1,c>>>=1,d-=1,c&3){case 0:i.mode=qa;break;case 1:if(Lp(i),i.mode=en,t===Ji){c>>>=2,d-=2;break e}break;case 2:i.mode=Ka;break;case 3:e.msg="invalid block type",i.mode=J}c>>>=2,d-=2;break;case qa:for(c>>>=d&7,d-=d&7;d<32;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",i.mode=J;break}if(i.length=c&65535,c=0,d=0,i.mode=nr,t===Ji)break e;case nr:i.mode=Ya;case Ya:if(h=i.length,h){if(h>u&&(h=u),h>f&&(h=f),h===0)break e;Qe(r,n,o,h,a),u-=h,o+=h,f-=h,a+=h,i.length-=h;break}i.mode=ze;break;case Ka:for(;d<14;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(i.nlen=(c&31)+257,c>>>=5,d-=5,i.ndist=(c&31)+1,c>>>=5,d-=5,i.ncode=(c&15)+4,c>>>=4,d-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=J;break}i.have=0,i.mode=Qa;case Qa:for(;i.have<i.ncode;){for(;d<3;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}i.lens[k[i.have++]]=c&7,c>>>=3,d-=3}for(;i.have<19;)i.lens[k[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,O={bits:i.lenbits},A=Oi(pp,i.lens,0,19,i.lencode,0,i.work,O),i.lenbits=O.bits,A){e.msg="invalid code lengths set",i.mode=J;break}i.have=0,i.mode=Ja;case Ja:for(;i.have<i.nlen+i.ndist;){for(;E=i.lencode[c&(1<<i.lenbits)-1],w=E>>>24,v=E>>>16&255,m=E&65535,!(w<=d);){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(m<16)c>>>=w,d-=w,i.lens[i.have++]=m;else{if(m===16){for(D=w+2;d<D;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(c>>>=w,d-=w,i.have===0){e.msg="invalid bit length repeat",i.mode=J;break}L=i.lens[i.have-1],h=3+(c&3),c>>>=2,d-=2}else if(m===17){for(D=w+3;d<D;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}c>>>=w,d-=w,L=0,h=3+(c&7),c>>>=3,d-=3}else{for(D=w+7;d<D;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}c>>>=w,d-=w,L=0,h=11+(c&127),c>>>=7,d-=7}if(i.have+h>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=J;break}for(;h--;)i.lens[i.have++]=L}}if(i.mode===J)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=J;break}if(i.lenbits=9,O={bits:i.lenbits},A=Oi(sl,i.lens,0,i.nlen,i.lencode,0,i.work,O),i.lenbits=O.bits,A){e.msg="invalid literal/lengths set",i.mode=J;break}if(i.distbits=6,i.distcode=i.distdyn,O={bits:i.distbits},A=Oi(ul,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,O),i.distbits=O.bits,A){e.msg="invalid distances set",i.mode=J;break}if(i.mode=en,t===Ji)break e;case en:i.mode=tn;case tn:if(u>=6&&f>=258){e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=u,i.hold=c,i.bits=d,lp(e,l),a=e.next_out,r=e.output,f=e.avail_out,o=e.next_in,n=e.input,u=e.avail_in,c=i.hold,d=i.bits,i.mode===ze&&(i.back=-1);break}for(i.back=0;E=i.lencode[c&(1<<i.lenbits)-1],w=E>>>24,v=E>>>16&255,m=E&65535,!(w<=d);){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(v&&!(v&240)){for(b=w,T=v,N=m;E=i.lencode[N+((c&(1<<b+T)-1)>>b)],w=E>>>24,v=E>>>16&255,m=E&65535,!(b+w<=d);){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}c>>>=b,d-=b,i.back+=b}if(c>>>=w,d-=w,i.back+=w,i.length=m,v===0){i.mode=rs;break}if(v&32){i.back=-1,i.mode=ze;break}if(v&64){e.msg="invalid literal/length code",i.mode=J;break}i.extra=v&15,i.mode=es;case es:if(i.extra){for(D=i.extra;d<D;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=ts;case ts:for(;E=i.distcode[c&(1<<i.distbits)-1],w=E>>>24,v=E>>>16&255,m=E&65535,!(w<=d);){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(!(v&240)){for(b=w,T=v,N=m;E=i.distcode[N+((c&(1<<b+T)-1)>>b)],w=E>>>24,v=E>>>16&255,m=E&65535,!(b+w<=d);){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}c>>>=b,d-=b,i.back+=b}if(c>>>=w,d-=w,i.back+=w,v&64){e.msg="invalid distance code",i.mode=J;break}i.offset=m,i.extra=v&15,i.mode=is;case is:if(i.extra){for(D=i.extra;d<D;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=J;break}i.mode=ns;case ns:if(f===0)break e;if(h=l-f,i.offset>h){if(h=i.offset-h,h>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=J;break}h>i.wnext?(h-=i.wnext,p=i.wsize-h):p=i.wnext-h,h>i.length&&(h=i.length),y=i.window}else y=r,p=a-i.offset,h=i.length;h>f&&(h=f),f-=h,i.length-=h;do r[a++]=y[p++];while(--h);i.length===0&&(i.mode=tn);break;case rs:if(f===0)break e;r[a++]=i.length,f--,i.mode=tn;break;case rr:if(i.wrap){for(;d<32;){if(u===0)break e;u--,c|=n[o++]<<d,d+=8}if(l-=f,e.total_out+=l,i.total+=l,l&&(e.adler=i.check=i.flags?ae(i.check,r,l,a-l):so(i.check,r,l,a-l)),l=f,(i.flags?c:ss(c))!==i.check){e.msg="incorrect data check",i.mode=J;break}c=0,d=0}i.mode=os;case os:if(i.wrap&&i.flags){for(;d<32;){if(u===0)break e;u--,c+=n[o++]<<d,d+=8}if(c!==(i.total&4294967295)){e.msg="incorrect length check",i.mode=J;break}c=0,d=0}i.mode=as;case as:A=mp;break e;case J:A=yp;break e;case bp:return vp;case xp:default:return yt}return e.next_out=a,e.avail_out=f,e.next_in=o,e.avail_in=u,i.hold=c,i.bits=d,(i.wsize||l!==e.avail_out&&i.mode<J&&(i.mode<rr||t!==Fa))&&Dp(e,e.output,e.next_out,l-e.avail_out),s-=e.avail_in,l-=e.avail_out,e.total_in+=s,e.total_out+=l,i.total+=l,i.wrap&&l&&(e.adler=i.check=i.flags?ae(i.check,r,l,e.next_out-l):so(i.check,r,l,e.next_out-l)),e.data_type=i.bits+(i.last?64:0)+(i.mode===ze?128:0)+(i.mode===en||i.mode===nr?256:0),(s===0&&l===0||t===Fa)&&A===Ri&&(A=wp),A}function Np(e){if(!e||!e.state)return yt;var t=e.state;return t.window&&(t.window=null),e.state=null,Ri}var Lo=0,hi=1,Dn=2,ki=3,wn=4,si=5,Pi=6,Fi=7,hl=0,cl=1,dl=2,pl=3,_l=4,ml=5,Mp=6,Cn=0,gl=1,Rp=2,kp=-1,Pp=-2,Fp=-3,Bp=-5,Up=0,Hp=1,Xp=9,jp=-1,zp=1,Gp=2,Vp=3,Wp=4,Zp=0,$p=0,qp=1,Yp=2,yl=8;function He(e){if(e<hi||e>Fi)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}He.prototype.init=function(e,t,i,n,r){this.windowBits=e,this.level=t,this.memLevel=i,this.strategy=n,(this.mode===ki||this.mode===wn)&&(this.windowBits+=16),this.mode===Fi&&(this.windowBits+=32),(this.mode===si||this.mode===Pi)&&(this.windowBits=-this.windowBits),this.strm=new dd;var o;switch(this.mode){case hi:case ki:case si:o=op(this.strm,this.level,yl,this.windowBits,this.memLevel,this.strategy);break;case Dn:case wn:case Pi:case Fi:o=Sp(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(o!==Cn){this._error(o);return}this.write_in_progress=!1,this.init_done=!0};He.prototype.params=function(){throw new Error("deflateParams Not supported")};He.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===Lo)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};He.prototype.write=function(e,t,i,n,r,o,a){this._writeCheck(),this.write_in_progress=!0;var u=this;return Ke.nextTick(function(){u.write_in_progress=!1;var f=u._write(e,t,i,n,r,o,a);u.callback(f[0],f[1]),u.pending_close&&u.close()}),this};function Kp(e,t){for(var i=0;i<e.length;i++)this[t+i]=e[i]}He.prototype.writeSync=function(e,t,i,n,r,o,a){return this._writeCheck(),this._write(e,t,i,n,r,o,a)};He.prototype._write=function(e,t,i,n,r,o,a){if(this.write_in_progress=!0,e!==hl&&e!==cl&&e!==dl&&e!==pl&&e!==_l&&e!==ml)throw new Error("Invalid flush value");t==null&&(t=new C(0),n=0,i=0),r._set?r.set=r._set:r.set=Kp;var u=this.strm;u.avail_in=n,u.input=t,u.next_in=i,u.avail_out=a,u.output=r,u.next_out=o;var f;switch(this.mode){case hi:case ki:case si:f=ap(u,e);break;case Fi:case Dn:case wn:case Pi:f=Cp(u,e);break;default:throw new Error("Unknown mode "+this.mode)}return f!==gl&&f!==Cn&&this._error(f),this.write_in_progress=!1,[u.avail_in,u.avail_out]};He.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===hi||this.mode===ki||this.mode===si?sp(this.strm):Np(this.strm),this.mode=Lo};var nn;He.prototype.reset=function(){switch(this.mode){case hi:case si:nn=al(this.strm);break;case Dn:case Pi:nn=fl(this.strm);break}nn!==Cn&&this._error(nn)};He.prototype._error=function(e){this.onerror(zu[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};const ls=Object.freeze(Object.defineProperty({__proto__:null,DEFLATE:hi,DEFLATERAW:si,GUNZIP:wn,GZIP:ki,INFLATE:Dn,INFLATERAW:Pi,NONE:Lo,UNZIP:Fi,Z_BEST_COMPRESSION:Xp,Z_BEST_SPEED:Hp,Z_BINARY:$p,Z_BLOCK:ml,Z_BUF_ERROR:Bp,Z_DATA_ERROR:Fp,Z_DEFAULT_COMPRESSION:jp,Z_DEFAULT_STRATEGY:Zp,Z_DEFLATED:yl,Z_ERRNO:kp,Z_FILTERED:zp,Z_FINISH:_l,Z_FIXED:Wp,Z_FULL_FLUSH:pl,Z_HUFFMAN_ONLY:Gp,Z_NEED_DICT:Rp,Z_NO_COMPRESSION:Up,Z_NO_FLUSH:hl,Z_OK:Cn,Z_PARTIAL_FLUSH:cl,Z_RLE:Vp,Z_STREAM_END:gl,Z_STREAM_ERROR:Pp,Z_SYNC_FLUSH:dl,Z_TEXT:qp,Z_TREES:Mp,Z_UNKNOWN:Yp,Zlib:He},Symbol.toStringTag,{value:"Module"}));function Qp(e,t){if(!e)throw new Error(t)}var P={};Object.keys(ls).forEach(function(e){P[e]=ls[e]});P.Z_MIN_WINDOWBITS=8;P.Z_MAX_WINDOWBITS=15;P.Z_DEFAULT_WINDOWBITS=15;P.Z_MIN_CHUNK=64;P.Z_MAX_CHUNK=1/0;P.Z_DEFAULT_CHUNK=16*1024;P.Z_MIN_MEMLEVEL=1;P.Z_MAX_MEMLEVEL=9;P.Z_DEFAULT_MEMLEVEL=8;P.Z_MIN_LEVEL=-1;P.Z_MAX_LEVEL=9;P.Z_DEFAULT_LEVEL=P.Z_DEFAULT_COMPRESSION;var fn={Z_OK:P.Z_OK,Z_STREAM_END:P.Z_STREAM_END,Z_NEED_DICT:P.Z_NEED_DICT,Z_ERRNO:P.Z_ERRNO,Z_STREAM_ERROR:P.Z_STREAM_ERROR,Z_DATA_ERROR:P.Z_DATA_ERROR,Z_MEM_ERROR:P.Z_MEM_ERROR,Z_BUF_ERROR:P.Z_BUF_ERROR,Z_VERSION_ERROR:P.Z_VERSION_ERROR};Object.keys(fn).forEach(function(e){fn[fn[e]]=e});function Jp(e){return new Mt(e)}function e_(e){return new Rt(e)}function t_(e){return new Ft(e)}function i_(e){return new Bt(e)}function n_(e){return new kt(e)}function r_(e){return new Pt(e)}function o_(e){return new Ut(e)}function a_(e,t,i){return typeof t=="function"&&(i=t,t={}),Gt(new Mt(t),e,i)}function s_(e,t){return Vt(new Mt(t),e)}function u_(e,t,i){return typeof t=="function"&&(i=t,t={}),Gt(new kt(t),e,i)}function l_(e,t){return Vt(new kt(t),e)}function f_(e,t,i){return typeof t=="function"&&(i=t,t={}),Gt(new Ft(t),e,i)}function h_(e,t){return Vt(new Ft(t),e)}function c_(e,t,i){return typeof t=="function"&&(i=t,t={}),Gt(new Ut(t),e,i)}function d_(e,t){return Vt(new Ut(t),e)}function p_(e,t,i){return typeof t=="function"&&(i=t,t={}),Gt(new Rt(t),e,i)}function __(e,t){return Vt(new Rt(t),e)}function m_(e,t,i){return typeof t=="function"&&(i=t,t={}),Gt(new Pt(t),e,i)}function g_(e,t){return Vt(new Pt(t),e)}function y_(e,t,i){return typeof t=="function"&&(i=t,t={}),Gt(new Bt(t),e,i)}function v_(e,t){return Vt(new Bt(t),e)}function Gt(e,t,i){var n=[],r=0;e.on("error",a),e.on("end",u),e.end(t),o();function o(){for(var f;(f=e.read())!==null;)n.push(f),r+=f.length;e.once("readable",o)}function a(f){e.removeListener("end",u),e.removeListener("readable",o),i(f)}function u(){var f=C.concat(n,r);n=[],i(null,f),e.close()}}function Vt(e,t){if(typeof t=="string"&&(t=new C(t)),!C.isBuffer(t))throw new TypeError("Not a string or buffer");var i=P.Z_FINISH;return e._processChunk(t,i)}function Mt(e){if(!(this instanceof Mt))return new Mt(e);te.call(this,e,P.DEFLATE)}function Rt(e){if(!(this instanceof Rt))return new Rt(e);te.call(this,e,P.INFLATE)}function kt(e){if(!(this instanceof kt))return new kt(e);te.call(this,e,P.GZIP)}function Pt(e){if(!(this instanceof Pt))return new Pt(e);te.call(this,e,P.GUNZIP)}function Ft(e){if(!(this instanceof Ft))return new Ft(e);te.call(this,e,P.DEFLATERAW)}function Bt(e){if(!(this instanceof Bt))return new Bt(e);te.call(this,e,P.INFLATERAW)}function Ut(e){if(!(this instanceof Ut))return new Ut(e);te.call(this,e,P.UNZIP)}function te(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||P.Z_DEFAULT_CHUNK,we.call(this,e),e.flush&&e.flush!==P.Z_NO_FLUSH&&e.flush!==P.Z_PARTIAL_FLUSH&&e.flush!==P.Z_SYNC_FLUSH&&e.flush!==P.Z_FULL_FLUSH&&e.flush!==P.Z_FINISH&&e.flush!==P.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||P.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<P.Z_MIN_CHUNK||e.chunkSize>P.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<P.Z_MIN_WINDOWBITS||e.windowBits>P.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<P.Z_MIN_LEVEL||e.level>P.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<P.Z_MIN_MEMLEVEL||e.memLevel>P.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=P.Z_FILTERED&&e.strategy!=P.Z_HUFFMAN_ONLY&&e.strategy!=P.Z_RLE&&e.strategy!=P.Z_FIXED&&e.strategy!=P.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!C.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new P.Zlib(t);var i=this;this._hadError=!1,this._binding.onerror=function(o,a){i._binding=null,i._hadError=!0;var u=new Error(o);u.errno=a,u.code=P.codes[a],i.emit("error",u)};var n=P.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(n=e.level);var r=P.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(r=e.strategy),this._binding.init(e.windowBits||P.Z_DEFAULT_WINDOWBITS,n,e.memLevel||P.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new C(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=r,this.once("end",this.close)}ge(te,we);te.prototype.params=function(e,t,i){if(e<P.Z_MIN_LEVEL||e>P.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=P.Z_FILTERED&&t!=P.Z_HUFFMAN_ONLY&&t!=P.Z_RLE&&t!=P.Z_FIXED&&t!=P.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(P.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,i&&i())})}else Ke.nextTick(i)};te.prototype.reset=function(){return this._binding.reset()};te.prototype._flush=function(e){this._transform(new C(0),"",e)};te.prototype.flush=function(e,t){var i=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=P.Z_FULL_FLUSH),i.ended)t&&Ke.nextTick(t);else if(i.ending)t&&this.once("end",t);else if(i.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new C(0),"",t)};te.prototype.close=function(e){if(e&&Ke.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;Ke.nextTick(function(){t.emit("close")})}};te.prototype._transform=function(e,t,i){var n,r=this._writableState,o=r.ending||r.ended,a=o&&(!e||r.length===e.length);if(!e===null&&!C.isBuffer(e))return i(new Error("invalid input"));a?n=P.Z_FINISH:(n=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||P.Z_NO_FLUSH)),this._processChunk(e,n,i)};te.prototype._processChunk=function(e,t,i){var n=e&&e.length,r=this._chunkSize-this._offset,o=0,a=this,u=typeof i=="function";if(!u){var f=[],c=0,d;this.on("error",function(y){d=y});do var s=this._binding.writeSync(t,e,o,n,this._buffer,this._offset,r);while(!this._hadError&&p(s[0],s[1]));if(this._hadError)throw d;var l=C.concat(f,c);return this.close(),l}var h=this._binding.write(t,e,o,n,this._buffer,this._offset,r);h.buffer=e,h.callback=p;function p(y,E){if(!a._hadError){var w=r-E;if(Qp(w>=0,"have should not go down"),w>0){var v=a._buffer.slice(a._offset,a._offset+w);a._offset+=w,u?a.push(v):(f.push(v),c+=v.length)}if((E===0||a._offset>=a._chunkSize)&&(r=a._chunkSize,a._offset=0,a._buffer=new C(a._chunkSize)),E===0){if(o+=n-y,n=y,!u)return!0;var m=a._binding.write(t,e,o,n,a._buffer,a._offset,a._chunkSize);m.callback=p,m.buffer=e;return}if(!u)return!1;i()}}};ge(Mt,te);ge(Rt,te);ge(kt,te);ge(Pt,te);ge(Ft,te);ge(Bt,te);ge(Ut,te);const fs={codes:fn,createDeflate:Jp,createInflate:e_,createDeflateRaw:t_,createInflateRaw:i_,createGzip:n_,createGunzip:r_,createUnzip:o_,deflate:a_,deflateSync:s_,gzip:u_,gzipSync:l_,deflateRaw:f_,deflateRawSync:h_,unzip:c_,unzipSync:d_,inflate:p_,inflateSync:__,gunzip:m_,gunzipSync:g_,inflateRaw:y_,inflateRawSync:v_,Deflate:Mt,Inflate:Rt,Gzip:kt,Gunzip:Pt,DeflateRaw:Ft,InflateRaw:Bt,Unzip:Ut,Zlib:te};var sr={},hs;function Do(){return hs||(hs=1,function(){sr.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(B)),sr}var ur={},Ge={},Ve={},cs;function et(){return cs||(cs=1,function(){var e,t,i,n,r,o,a,u=[].slice,f={}.hasOwnProperty;e=function(){var c,d,s,l,h,p;if(p=arguments[0],h=2<=arguments.length?u.call(arguments,1):[],r(Object.assign))Object.assign.apply(null,arguments);else for(c=0,s=h.length;c<s;c++)if(l=h[c],l!=null)for(d in l)f.call(l,d)&&(p[d]=l[d]);return p},r=function(c){return!!c&&Object.prototype.toString.call(c)==="[object Function]"},o=function(c){var d;return!!c&&((d=typeof c)=="function"||d==="object")},i=function(c){return r(Array.isArray)?Array.isArray(c):Object.prototype.toString.call(c)==="[object Array]"},n=function(c){var d;if(i(c))return!c.length;for(d in c)if(f.call(c,d))return!1;return!0},a=function(c){var d,s;return o(c)&&(s=Object.getPrototypeOf(c))&&(d=s.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},t=function(c){return r(c.valueOf)?c.valueOf():c},Ve.assign=e,Ve.isFunction=r,Ve.isObject=o,Ve.isArray=i,Ve.isEmpty=n,Ve.isPlainObject=a,Ve.getValue=t}.call(B)),Ve}var lr={exports:{}},ds;function vl(){return ds||(ds=1,function(){lr.exports=function(){function e(){}return e.prototype.hasFeature=function(t,i){return!0},e.prototype.createDocumentType=function(t,i,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,i,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,i){throw new Error("This DOM method is not implemented.")},e}()}.call(B)),lr.exports}var fr={exports:{}},hr={exports:{}},cr={exports:{}},ps;function w_(){return ps||(ps=1,function(){cr.exports=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}.call(B)),cr.exports}var dr={exports:{}},_s;function b_(){return _s||(_s=1,function(){dr.exports=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}.call(B)),dr.exports}var ms;function x_(){return ms||(ms=1,function(){var e,t;e=w_(),t=b_(),hr.exports=function(){function i(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(i.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),i.prototype.getParameter=function(n){return this.params.hasOwnProperty(n)?this.params[n]:null},i.prototype.canSetParameter=function(n,r){return!0},i.prototype.setParameter=function(n,r){return r!=null?this.params[n]=r:delete this.params[n]},i}()}.call(B)),hr.exports}var pr={exports:{}},_r={exports:{}},mr={exports:{}},gs;function ie(){return gs||(gs=1,function(){mr.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(B)),mr.exports}var gr={exports:{}},ys;function wl(){return ys||(ys=1,function(){var e;e=ie(),Ie(),gr.exports=function(){function t(i,n,r){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),n==null)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(r),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},t.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},t}()}.call(B)),gr.exports}var yr={exports:{}},vs;function Co(){return vs||(vs=1,function(){yr.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var i;return i=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,i||null},e.prototype.removeNamedItem=function(t){var i;return i=this.nodes[t],delete this.nodes[t],i||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,i){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,i){throw new Error("This DOM method is not implemented.")},e}()}.call(B)),yr.exports}var ws;function No(){return ws||(ws=1,function(){var e,t,i,n,r,o,a,u,f=function(d,s){for(var l in s)c.call(s,l)&&(d[l]=s[l]);function h(){this.constructor=d}return h.prototype=s.prototype,d.prototype=new h,d.__super__=s.prototype,d},c={}.hasOwnProperty;u=et(),a=u.isObject,o=u.isFunction,r=u.getValue,n=Ie(),e=ie(),t=wl(),i=Co(),_r.exports=function(d){f(s,d);function s(l,h,p){var y,E,w,v;if(s.__super__.constructor.call(this,l),h==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(h),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,p!=null&&this.attribute(p),l.type===e.Document&&(this.isRoot=!0,this.documentObject=l,l.rootObject=this,l.children)){for(v=l.children,E=0,w=v.length;E<w;E++)if(y=v[E],y.type===e.DocType){y.name=this.name;break}}}return Object.defineProperty(s.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(s.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(s.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(s.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(s.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new i(this.attribs)),this.attributeMap}}),s.prototype.clone=function(){var l,h,p,y;p=Object.create(this),p.isRoot&&(p.documentObject=null),p.attribs={},y=this.attribs;for(h in y)c.call(y,h)&&(l=y[h],p.attribs[h]=l.clone());return p.children=[],this.children.forEach(function(E){var w;return w=E.clone(),w.parent=p,p.children.push(w)}),p},s.prototype.attribute=function(l,h){var p,y;if(l!=null&&(l=r(l)),a(l))for(p in l)c.call(l,p)&&(y=l[p],this.attribute(p,y));else o(h)&&(h=h.apply()),this.options.keepNullAttributes&&h==null?this.attribs[l]=new t(this,l,""):h!=null&&(this.attribs[l]=new t(this,l,h));return this},s.prototype.removeAttribute=function(l){var h,p,y;if(l==null)throw new Error("Missing attribute name. "+this.debugInfo());if(l=r(l),Array.isArray(l))for(p=0,y=l.length;p<y;p++)h=l[p],delete this.attribs[h];else delete this.attribs[l];return this},s.prototype.toString=function(l){return this.options.writer.element(this,this.options.writer.filterOptions(l))},s.prototype.att=function(l,h){return this.attribute(l,h)},s.prototype.a=function(l,h){return this.attribute(l,h)},s.prototype.getAttribute=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l].value:null},s.prototype.setAttribute=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getAttributeNode=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l]:null},s.prototype.setAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.removeAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getAttributeNS=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.setAttributeNS=function(l,h,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.removeAttributeNS=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getAttributeNodeNS=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.setAttributeNodeNS=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagNameNS=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.hasAttribute=function(l){return this.attribs.hasOwnProperty(l)},s.prototype.hasAttributeNS=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.setIdAttribute=function(l,h){return this.attribs.hasOwnProperty(l)?this.attribs[l].isId:h},s.prototype.setIdAttributeNS=function(l,h,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.setIdAttributeNode=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByTagNameNS=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.getElementsByClassName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(l){var h,p,y;if(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.namespaceURI!==this.namespaceURI||l.prefix!==this.prefix||l.localName!==this.localName||l.attribs.length!==this.attribs.length)return!1;for(h=p=0,y=this.attribs.length-1;0<=y?p<=y:p>=y;h=0<=y?++p:--p)if(!this.attribs[h].isEqualNode(l.attribs[h]))return!1;return!0},s}(n)}.call(B)),_r.exports}var vr={exports:{}},wr={exports:{}},bs;function Nn(){return bs||(bs=1,function(){var e,t=function(n,r){for(var o in r)i.call(r,o)&&(n[o]=r[o]);function a(){this.constructor=n}return a.prototype=r.prototype,n.prototype=new a,n.__super__=r.prototype,n},i={}.hasOwnProperty;e=Ie(),wr.exports=function(n){t(r,n);function r(o){r.__super__.constructor.call(this,o),this.value=""}return Object.defineProperty(r.prototype,"data",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(r.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.substringData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.appendData=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.insertData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.deleteData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.replaceData=function(o,a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isEqualNode=function(o){return!(!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.data!==this.data)},r}(e)}.call(B)),wr.exports}var xs;function Mo(){return xs||(xs=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;e=ie(),t=Nn(),vr.exports=function(r){i(o,r);function o(a,u){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(u)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},o}(t)}.call(B)),vr.exports}var br={exports:{}},Es;function Ro(){return Es||(Es=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;e=ie(),t=Nn(),br.exports=function(r){i(o,r);function o(a,u){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(u)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},o}(t)}.call(B)),br.exports}var xr={exports:{}},Ts;function ko(){return Ts||(Ts=1,function(){var e,t,i,n=function(o,a){for(var u in a)r.call(a,u)&&(o[u]=a[u]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},r={}.hasOwnProperty;i=et().isObject,t=Ie(),e=ie(),xr.exports=function(o){n(a,o);function a(u,f,c,d){var s;a.__super__.constructor.call(this,u),i(f)&&(s=f,f=s.version,c=s.encoding,d=s.standalone),f||(f="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(f),c!=null&&(this.encoding=this.stringify.xmlEncoding(c)),d!=null&&(this.standalone=this.stringify.xmlStandalone(d))}return a.prototype.toString=function(u){return this.options.writer.declaration(this,this.options.writer.filterOptions(u))},a}(t)}.call(B)),xr.exports}var Er={exports:{}},Tr={exports:{}},As;function Po(){return As||(As=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;t=Ie(),e=ie(),Tr.exports=function(r){i(o,r);function o(a,u,f,c,d,s){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(f==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(u));if(!c)throw new Error("Missing DTD attribute type. "+this.debugInfo(u));if(!d)throw new Error("Missing DTD attribute default. "+this.debugInfo(u));if(d.indexOf("#")!==0&&(d="#"+d),!d.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(u));if(s&&!d.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(u));this.elementName=this.stringify.name(u),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(f),this.attributeType=this.stringify.dtdAttType(c),s&&(this.defaultValue=this.stringify.dtdAttDefault(s)),this.defaultValueType=d}return o.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},o}(t)}.call(B)),Tr.exports}var Ar={exports:{}},Is;function Fo(){return Is||(Is=1,function(){var e,t,i,n=function(o,a){for(var u in a)r.call(a,u)&&(o[u]=a[u]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},r={}.hasOwnProperty;i=et().isObject,t=Ie(),e=ie(),Ar.exports=function(o){n(a,o);function a(u,f,c,d){if(a.__super__.constructor.call(this,u),c==null)throw new Error("Missing DTD entity name. "+this.debugInfo(c));if(d==null)throw new Error("Missing DTD entity value. "+this.debugInfo(c));if(this.pe=!!f,this.name=this.stringify.name(c),this.type=e.EntityDeclaration,!i(d))this.value=this.stringify.dtdEntityValue(d),this.internal=!0;else{if(!d.pubID&&!d.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(c));if(d.pubID&&!d.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(c));if(this.internal=!1,d.pubID!=null&&(this.pubID=this.stringify.dtdPubID(d.pubID)),d.sysID!=null&&(this.sysID=this.stringify.dtdSysID(d.sysID)),d.nData!=null&&(this.nData=this.stringify.dtdNData(d.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(c))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(u){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(u))},a}(t)}.call(B)),Ar.exports}var Ir={exports:{}},Os;function Bo(){return Os||(Os=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;t=Ie(),e=ie(),Ir.exports=function(r){i(o,r);function o(a,u,f){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing DTD element name. "+this.debugInfo());f||(f="(#PCDATA)"),Array.isArray(f)&&(f="("+f.join(",")+")"),this.name=this.stringify.name(u),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(f)}return o.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},o}(t)}.call(B)),Ir.exports}var Or={exports:{}},Ss;function Uo(){return Ss||(Ss=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;t=Ie(),e=ie(),Or.exports=function(r){i(o,r);function o(a,u,f){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing DTD notation name. "+this.debugInfo(u));if(!f.pubID&&!f.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(u));this.name=this.stringify.name(u),this.type=e.NotationDeclaration,f.pubID!=null&&(this.pubID=this.stringify.dtdPubID(f.pubID)),f.sysID!=null&&(this.sysID=this.stringify.dtdSysID(f.sysID))}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},o}(t)}.call(B)),Or.exports}var Ls;function Ho(){return Ls||(Ls=1,function(){var e,t,i,n,r,o,a,u,f=function(d,s){for(var l in s)c.call(s,l)&&(d[l]=s[l]);function h(){this.constructor=d}return h.prototype=s.prototype,d.prototype=new h,d.__super__=s.prototype,d},c={}.hasOwnProperty;u=et().isObject,a=Ie(),e=ie(),t=Po(),n=Fo(),i=Bo(),r=Uo(),o=Co(),Er.exports=function(d){f(s,d);function s(l,h,p){var y,E,w,v,m,b;if(s.__super__.constructor.call(this,l),this.type=e.DocType,l.children){for(v=l.children,E=0,w=v.length;E<w;E++)if(y=v[E],y.type===e.Element){this.name=y.name;break}}this.documentObject=l,u(h)&&(m=h,h=m.pubID,p=m.sysID),p==null&&(b=[h,p],p=b[0],h=b[1]),h!=null&&(this.pubID=this.stringify.dtdPubID(h)),p!=null&&(this.sysID=this.stringify.dtdSysID(p))}return Object.defineProperty(s.prototype,"entities",{get:function(){var l,h,p,y,E;for(y={},E=this.children,h=0,p=E.length;h<p;h++)l=E[h],l.type===e.EntityDeclaration&&!l.pe&&(y[l.name]=l);return new o(y)}}),Object.defineProperty(s.prototype,"notations",{get:function(){var l,h,p,y,E;for(y={},E=this.children,h=0,p=E.length;h<p;h++)l=E[h],l.type===e.NotationDeclaration&&(y[l.name]=l);return new o(y)}}),Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(s.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),s.prototype.element=function(l,h){var p;return p=new i(this,l,h),this.children.push(p),this},s.prototype.attList=function(l,h,p,y,E){var w;return w=new t(this,l,h,p,y,E),this.children.push(w),this},s.prototype.entity=function(l,h){var p;return p=new n(this,!1,l,h),this.children.push(p),this},s.prototype.pEntity=function(l,h){var p;return p=new n(this,!0,l,h),this.children.push(p),this},s.prototype.notation=function(l,h){var p;return p=new r(this,l,h),this.children.push(p),this},s.prototype.toString=function(l){return this.options.writer.docType(this,this.options.writer.filterOptions(l))},s.prototype.ele=function(l,h){return this.element(l,h)},s.prototype.att=function(l,h,p,y,E){return this.attList(l,h,p,y,E)},s.prototype.ent=function(l,h){return this.entity(l,h)},s.prototype.pent=function(l,h){return this.pEntity(l,h)},s.prototype.not=function(l,h){return this.notation(l,h)},s.prototype.up=function(){return this.root()||this.documentObject},s.prototype.isEqualNode=function(l){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.name!==this.name||l.publicId!==this.publicId||l.systemId!==this.systemId)},s}(a)}.call(B)),Er.exports}var Sr={exports:{}},Ds;function Xo(){return Ds||(Ds=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;e=ie(),t=Ie(),Sr.exports=function(r){i(o,r);function o(a,u){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(u)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},o}(t)}.call(B)),Sr.exports}var Lr={exports:{}},Cs;function jo(){return Cs||(Cs=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;e=ie(),t=Nn(),Lr.exports=function(r){i(o,r);function o(a,u){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(u)}return Object.defineProperty(o.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"wholeText",{get:function(){var a,u,f;for(f="",u=this.previousSibling;u;)f=u.data+f,u=u.previousSibling;for(f+=this.data,a=this.nextSibling;a;)f=f+a.data,a=a.nextSibling;return f}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},o.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o}(t)}.call(B)),Lr.exports}var Dr={exports:{}},Ns;function zo(){return Ns||(Ns=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;e=ie(),t=Nn(),Dr.exports=function(r){i(o,r);function o(a,u,f){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(u),this.name=this.target,f&&(this.value=this.stringify.insValue(f))}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},o.prototype.isEqualNode=function(a){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},o}(t)}.call(B)),Dr.exports}var Cr={exports:{}},Ms;function bl(){return Ms||(Ms=1,function(){var e,t,i=function(r,o){for(var a in o)n.call(o,a)&&(r[a]=o[a]);function u(){this.constructor=r}return u.prototype=o.prototype,r.prototype=new u,r.__super__=o.prototype,r},n={}.hasOwnProperty;t=Ie(),e=ie(),Cr.exports=function(r){i(o,r);function o(a){o.__super__.constructor.call(this,a),this.type=e.Dummy}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return""},o}(t)}.call(B)),Cr.exports}var Nr={exports:{}},Rs;function E_(){return Rs||(Rs=1,function(){Nr.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}.call(B)),Nr.exports}var Mr={exports:{}},ks;function T_(){return ks||(ks=1,function(){Mr.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(B)),Mr.exports}var Ps;function Ie(){return Ps||(Ps=1,function(){var e,t,i,n,r,o,a,u,f,c,d,s,l,h,p,y,E,w={}.hasOwnProperty;E=et(),y=E.isObject,p=E.isFunction,h=E.isEmpty,l=E.getValue,u=null,i=null,n=null,r=null,o=null,d=null,s=null,c=null,a=null,t=null,f=null,e=null,pr.exports=function(){function v(m){this.parent=m,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=No(),i=Mo(),n=Ro(),r=ko(),o=Ho(),d=Xo(),s=jo(),c=zo(),a=bl(),t=ie(),f=E_(),Co(),e=T_())}return Object.defineProperty(v.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(v.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(v.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(v.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(v.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new f(this.children)),this.childNodeList}}),Object.defineProperty(v.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(v.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){var m;return m=this.parent.children.indexOf(this),this.parent.children[m-1]||null}}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){var m;return m=this.parent.children.indexOf(this),this.parent.children[m+1]||null}}),Object.defineProperty(v.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(v.prototype,"textContent",{get:function(){var m,b,T,N,L;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(L="",N=this.children,b=0,T=N.length;b<T;b++)m=N[b],m.textContent&&(L+=m.textContent);return L}else return null},set:function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),v.prototype.setParent=function(m){var b,T,N,L,A;for(this.parent=m,m&&(this.options=m.options,this.stringify=m.stringify),L=this.children,A=[],T=0,N=L.length;T<N;T++)b=L[T],A.push(b.setParent(this));return A},v.prototype.element=function(m,b,T){var N,L,A,_,O,D,k,F,X,K,G;if(D=null,b===null&&T==null&&(X=[{},null],b=X[0],T=X[1]),b==null&&(b={}),b=l(b),y(b)||(K=[b,T],T=K[0],b=K[1]),m!=null&&(m=l(m)),Array.isArray(m))for(A=0,k=m.length;A<k;A++)L=m[A],D=this.element(L);else if(p(m))D=this.element(m.apply());else if(y(m)){for(O in m)if(w.call(m,O))if(G=m[O],p(G)&&(G=G.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&O.indexOf(this.stringify.convertAttKey)===0)D=this.attribute(O.substr(this.stringify.convertAttKey.length),G);else if(!this.options.separateArrayItems&&Array.isArray(G)&&h(G))D=this.dummy();else if(y(G)&&h(G))D=this.element(O);else if(!this.options.keepNullNodes&&G==null)D=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(G))for(_=0,F=G.length;_<F;_++)L=G[_],N={},N[O]=L,D=this.element(N);else y(G)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&O.indexOf(this.stringify.convertTextKey)===0?D=this.element(G):(D=this.element(O),D.element(G)):D=this.element(O,G)}else!this.options.keepNullNodes&&T===null?D=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&m.indexOf(this.stringify.convertTextKey)===0?D=this.text(T):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&m.indexOf(this.stringify.convertCDataKey)===0?D=this.cdata(T):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&m.indexOf(this.stringify.convertCommentKey)===0?D=this.comment(T):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&m.indexOf(this.stringify.convertRawKey)===0?D=this.raw(T):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&m.indexOf(this.stringify.convertPIKey)===0?D=this.instruction(m.substr(this.stringify.convertPIKey.length),T):D=this.node(m,b,T);if(D==null)throw new Error("Could not create any elements with: "+m+". "+this.debugInfo());return D},v.prototype.insertBefore=function(m,b,T){var N,L,A,_,O;if(m?.type)return A=m,_=b,A.setParent(this),_?(L=children.indexOf(_),O=children.splice(L),children.push(A),Array.prototype.push.apply(children,O)):children.push(A),A;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return L=this.parent.children.indexOf(this),O=this.parent.children.splice(L),N=this.parent.element(m,b,T),Array.prototype.push.apply(this.parent.children,O),N},v.prototype.insertAfter=function(m,b,T){var N,L,A;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return L=this.parent.children.indexOf(this),A=this.parent.children.splice(L+1),N=this.parent.element(m,b,T),Array.prototype.push.apply(this.parent.children,A),N},v.prototype.remove=function(){var m;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return m=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[m,m-m+1].concat([])),this.parent},v.prototype.node=function(m,b,T){var N,L;return m!=null&&(m=l(m)),b||(b={}),b=l(b),y(b)||(L=[b,T],T=L[0],b=L[1]),N=new u(this,m,b),T!=null&&N.text(T),this.children.push(N),N},v.prototype.text=function(m){var b;return y(m)&&this.element(m),b=new s(this,m),this.children.push(b),this},v.prototype.cdata=function(m){var b;return b=new i(this,m),this.children.push(b),this},v.prototype.comment=function(m){var b;return b=new n(this,m),this.children.push(b),this},v.prototype.commentBefore=function(m){var b,T;return b=this.parent.children.indexOf(this),T=this.parent.children.splice(b),this.parent.comment(m),Array.prototype.push.apply(this.parent.children,T),this},v.prototype.commentAfter=function(m){var b,T;return b=this.parent.children.indexOf(this),T=this.parent.children.splice(b+1),this.parent.comment(m),Array.prototype.push.apply(this.parent.children,T),this},v.prototype.raw=function(m){var b;return b=new d(this,m),this.children.push(b),this},v.prototype.dummy=function(){var m;return m=new a(this),m},v.prototype.instruction=function(m,b){var T,N,L,A,_;if(m!=null&&(m=l(m)),b!=null&&(b=l(b)),Array.isArray(m))for(A=0,_=m.length;A<_;A++)T=m[A],this.instruction(T);else if(y(m))for(T in m)w.call(m,T)&&(N=m[T],this.instruction(T,N));else p(b)&&(b=b.apply()),L=new c(this,m,b),this.children.push(L);return this},v.prototype.instructionBefore=function(m,b){var T,N;return T=this.parent.children.indexOf(this),N=this.parent.children.splice(T),this.parent.instruction(m,b),Array.prototype.push.apply(this.parent.children,N),this},v.prototype.instructionAfter=function(m,b){var T,N;return T=this.parent.children.indexOf(this),N=this.parent.children.splice(T+1),this.parent.instruction(m,b),Array.prototype.push.apply(this.parent.children,N),this},v.prototype.declaration=function(m,b,T){var N,L;return N=this.document(),L=new r(N,m,b,T),N.children.length===0?N.children.unshift(L):N.children[0].type===t.Declaration?N.children[0]=L:N.children.unshift(L),N.root()||N},v.prototype.dtd=function(m,b){var T,N,L,A,_,O,D,k,F,X;for(N=this.document(),L=new o(N,m,b),F=N.children,A=_=0,D=F.length;_<D;A=++_)if(T=F[A],T.type===t.DocType)return N.children[A]=L,L;for(X=N.children,A=O=0,k=X.length;O<k;A=++O)if(T=X[A],T.isRoot)return N.children.splice(A,0,L),L;return N.children.push(L),L},v.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},v.prototype.root=function(){var m;for(m=this;m;){if(m.type===t.Document)return m.rootObject;if(m.isRoot)return m;m=m.parent}},v.prototype.document=function(){var m;for(m=this;m;){if(m.type===t.Document)return m;m=m.parent}},v.prototype.end=function(m){return this.document().end(m)},v.prototype.prev=function(){var m;if(m=this.parent.children.indexOf(this),m<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[m-1]},v.prototype.next=function(){var m;if(m=this.parent.children.indexOf(this),m===-1||m===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[m+1]},v.prototype.importDocument=function(m){var b;return b=m.root().clone(),b.parent=this,b.isRoot=!1,this.children.push(b),this},v.prototype.debugInfo=function(m){var b,T;return m=m||this.name,m==null&&!((b=this.parent)!=null&&b.name)?"":m==null?"parent: <"+this.parent.name+">":(T=this.parent)!=null&&T.name?"node: <"+m+">, parent: <"+this.parent.name+">":"node: <"+m+">"},v.prototype.ele=function(m,b,T){return this.element(m,b,T)},v.prototype.nod=function(m,b,T){return this.node(m,b,T)},v.prototype.txt=function(m){return this.text(m)},v.prototype.dat=function(m){return this.cdata(m)},v.prototype.com=function(m){return this.comment(m)},v.prototype.ins=function(m,b){return this.instruction(m,b)},v.prototype.doc=function(){return this.document()},v.prototype.dec=function(m,b,T){return this.declaration(m,b,T)},v.prototype.e=function(m,b,T){return this.element(m,b,T)},v.prototype.n=function(m,b,T){return this.node(m,b,T)},v.prototype.t=function(m){return this.text(m)},v.prototype.d=function(m){return this.cdata(m)},v.prototype.c=function(m){return this.comment(m)},v.prototype.r=function(m){return this.raw(m)},v.prototype.i=function(m,b){return this.instruction(m,b)},v.prototype.u=function(){return this.up()},v.prototype.importXMLBuilder=function(m){return this.importDocument(m)},v.prototype.replaceChild=function(m,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.removeChild=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.appendChild=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.hasChildNodes=function(){return this.children.length!==0},v.prototype.cloneNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isSupported=function(m,b){return!0},v.prototype.hasAttributes=function(){return this.attribs.length!==0},v.prototype.compareDocumentPosition=function(m){var b,T;return b=this,b===m?0:this.document()!==m.document()?(T=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?T|=e.Preceding:T|=e.Following,T):b.isAncestor(m)?e.Contains|e.Preceding:b.isDescendant(m)?e.Contains|e.Following:b.isPreceding(m)?e.Preceding:e.Following},v.prototype.isSameNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupPrefix=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isDefaultNamespace=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupNamespaceURI=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isEqualNode=function(m){var b,T,N;if(m.nodeType!==this.nodeType||m.children.length!==this.children.length)return!1;for(b=T=0,N=this.children.length-1;0<=N?T<=N:T>=N;b=0<=N?++T:--T)if(!this.children[b].isEqualNode(m.children[b]))return!1;return!0},v.prototype.getFeature=function(m,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.setUserData=function(m,b,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.getUserData=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.contains=function(m){return m?m===this||this.isDescendant(m):!1},v.prototype.isDescendant=function(m){var b,T,N,L,A;for(A=this.children,N=0,L=A.length;N<L;N++)if(b=A[N],m===b||(T=b.isDescendant(m),T))return!0;return!1},v.prototype.isAncestor=function(m){return m.isDescendant(this)},v.prototype.isPreceding=function(m){var b,T;return b=this.treePosition(m),T=this.treePosition(this),b===-1||T===-1?!1:b<T},v.prototype.isFollowing=function(m){var b,T;return b=this.treePosition(m),T=this.treePosition(this),b===-1||T===-1?!1:b>T},v.prototype.treePosition=function(m){var b,T;return T=0,b=!1,this.foreachTreeNode(this.document(),function(N){if(T++,!b&&N===m)return b=!0}),b?T:-1},v.prototype.foreachTreeNode=function(m,b){var T,N,L,A,_;for(m||(m=this.document()),A=m.children,N=0,L=A.length;N<L;N++){if(T=A[N],_=b(T))return _;if(_=this.foreachTreeNode(T,b),_)return _}},v}()}.call(B)),pr.exports}var Rr={exports:{}},Fs;function xl(){return Fs||(Fs=1,function(){var e=function(i,n){return function(){return i.apply(n,arguments)}},t={}.hasOwnProperty;Rr.exports=function(){function i(n){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var r,o,a;n||(n={}),this.options=n,this.options.version||(this.options.version="1.0"),o=n.stringify||{};for(r in o)t.call(o,r)&&(a=o[r],this[r]=a)}return i.prototype.name=function(n){return this.options.noValidation?n:this.assertLegalName(""+n||"")},i.prototype.text=function(n){return this.options.noValidation?n:this.assertLegalChar(this.textEscape(""+n||""))},i.prototype.cdata=function(n){return this.options.noValidation?n:(n=""+n||"",n=n.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(n))},i.prototype.comment=function(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+n);return this.assertLegalChar(n)},i.prototype.raw=function(n){return this.options.noValidation?n:""+n||""},i.prototype.attValue=function(n){return this.options.noValidation?n:this.assertLegalChar(this.attEscape(n=""+n||""))},i.prototype.insTarget=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.insValue=function(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/\?>/))throw new Error("Invalid processing instruction value: "+n);return this.assertLegalChar(n)},i.prototype.xmlVersion=function(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+n);return n},i.prototype.xmlEncoding=function(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+n);return this.assertLegalChar(n)},i.prototype.xmlStandalone=function(n){return this.options.noValidation?n:n?"yes":"no"},i.prototype.dtdPubID=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdSysID=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdElementValue=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdAttType=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdAttDefault=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdEntityValue=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdNData=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.convertAttKey="@",i.prototype.convertPIKey="?",i.prototype.convertTextKey="#text",i.prototype.convertCDataKey="#cdata",i.prototype.convertCommentKey="#comment",i.prototype.convertRawKey="#raw",i.prototype.assertLegalChar=function(n){var r,o;if(this.options.noValidation)return n;if(r="",this.options.version==="1.0"){if(r=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=n.match(r))throw new Error("Invalid character in string: "+n+" at index "+o.index)}else if(this.options.version==="1.1"&&(r=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=n.match(r)))throw new Error("Invalid character in string: "+n+" at index "+o.index);return n},i.prototype.assertLegalName=function(n){var r;if(this.options.noValidation)return n;if(this.assertLegalChar(n),r=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!n.match(r))throw new Error("Invalid character in name");return n},i.prototype.textEscape=function(n){var r;return this.options.noValidation?n:(r=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(r,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},i.prototype.attEscape=function(n){var r;return this.options.noValidation?n:(r=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(r,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},i}()}.call(B)),Rr.exports}var kr={exports:{}},Pr={exports:{}},Fr={exports:{}},Bs;function Mn(){return Bs||(Bs=1,function(){Fr.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(B)),Fr.exports}var Us;function El(){return Us||(Us=1,function(){var e,t,i,n={}.hasOwnProperty;i=et().assign,e=ie(),ko(),Ho(),Mo(),Ro(),No(),Xo(),jo(),zo(),bl(),Po(),Bo(),Fo(),Uo(),t=Mn(),Pr.exports=function(){function r(o){var a,u,f;o||(o={}),this.options=o,u=o.writer||{};for(a in u)n.call(u,a)&&(f=u[a],this["_"+a]=this[a],this[a]=f)}return r.prototype.filterOptions=function(o){var a,u,f,c,d,s,l,h;return o||(o={}),o=i({},this.options,o),a={writer:this},a.pretty=o.pretty||!1,a.allowEmpty=o.allowEmpty||!1,a.indent=(u=o.indent)!=null?u:"  ",a.newline=(f=o.newline)!=null?f:`
`,a.offset=(c=o.offset)!=null?c:0,a.dontPrettyTextNodes=(d=(s=o.dontPrettyTextNodes)!=null?s:o.dontprettytextnodes)!=null?d:0,a.spaceBeforeSlash=(l=(h=o.spaceBeforeSlash)!=null?h:o.spacebeforeslash)!=null?l:"",a.spaceBeforeSlash===!0&&(a.spaceBeforeSlash=" "),a.suppressPrettyCount=0,a.user={},a.state=t.None,a},r.prototype.indent=function(o,a,u){var f;return!a.pretty||a.suppressPrettyCount?"":a.pretty&&(f=(u||0)+a.offset+1,f>0)?new Array(f).join(a.indent):""},r.prototype.endline=function(o,a,u){return!a.pretty||a.suppressPrettyCount?"":a.newline},r.prototype.attribute=function(o,a,u){var f;return this.openAttribute(o,a,u),f=" "+o.name+'="'+o.value+'"',this.closeAttribute(o,a,u),f},r.prototype.cdata=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u)+"<![CDATA[",a.state=t.InsideTag,f+=o.value,a.state=t.CloseTag,f+="]]>"+this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.comment=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u)+"<!-- ",a.state=t.InsideTag,f+=o.value,a.state=t.CloseTag,f+=" -->"+this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.declaration=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u)+"<?xml",a.state=t.InsideTag,f+=' version="'+o.version+'"',o.encoding!=null&&(f+=' encoding="'+o.encoding+'"'),o.standalone!=null&&(f+=' standalone="'+o.standalone+'"'),a.state=t.CloseTag,f+=a.spaceBeforeSlash+"?>",f+=this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.docType=function(o,a,u){var f,c,d,s,l;if(u||(u=0),this.openNode(o,a,u),a.state=t.OpenTag,s=this.indent(o,a,u),s+="<!DOCTYPE "+o.root().name,o.pubID&&o.sysID?s+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.sysID&&(s+=' SYSTEM "'+o.sysID+'"'),o.children.length>0){for(s+=" [",s+=this.endline(o,a,u),a.state=t.InsideTag,l=o.children,c=0,d=l.length;c<d;c++)f=l[c],s+=this.writeChildNode(f,a,u+1);a.state=t.CloseTag,s+="]"}return a.state=t.CloseTag,s+=a.spaceBeforeSlash+">",s+=this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),s},r.prototype.element=function(o,a,u){var f,c,d,s,l,h,p,y,E,w,v,m,b,T;u||(u=0),w=!1,v="",this.openNode(o,a,u),a.state=t.OpenTag,v+=this.indent(o,a,u)+"<"+o.name,m=o.attribs;for(E in m)n.call(m,E)&&(f=m[E],v+=this.attribute(f,a,u));if(d=o.children.length,s=d===0?null:o.children[0],d===0||o.children.every(function(N){return(N.type===e.Text||N.type===e.Raw)&&N.value===""}))a.allowEmpty?(v+=">",a.state=t.CloseTag,v+="</"+o.name+">"+this.endline(o,a,u)):(a.state=t.CloseTag,v+=a.spaceBeforeSlash+"/>"+this.endline(o,a,u));else if(a.pretty&&d===1&&(s.type===e.Text||s.type===e.Raw)&&s.value!=null)v+=">",a.state=t.InsideTag,a.suppressPrettyCount++,w=!0,v+=this.writeChildNode(s,a,u+1),a.suppressPrettyCount--,w=!1,a.state=t.CloseTag,v+="</"+o.name+">"+this.endline(o,a,u);else{if(a.dontPrettyTextNodes){for(b=o.children,l=0,p=b.length;l<p;l++)if(c=b[l],(c.type===e.Text||c.type===e.Raw)&&c.value!=null){a.suppressPrettyCount++,w=!0;break}}for(v+=">"+this.endline(o,a,u),a.state=t.InsideTag,T=o.children,h=0,y=T.length;h<y;h++)c=T[h],v+=this.writeChildNode(c,a,u+1);a.state=t.CloseTag,v+=this.indent(o,a,u)+"</"+o.name+">",w&&a.suppressPrettyCount--,v+=this.endline(o,a,u),a.state=t.None}return this.closeNode(o,a,u),v},r.prototype.writeChildNode=function(o,a,u){switch(o.type){case e.CData:return this.cdata(o,a,u);case e.Comment:return this.comment(o,a,u);case e.Element:return this.element(o,a,u);case e.Raw:return this.raw(o,a,u);case e.Text:return this.text(o,a,u);case e.ProcessingInstruction:return this.processingInstruction(o,a,u);case e.Dummy:return"";case e.Declaration:return this.declaration(o,a,u);case e.DocType:return this.docType(o,a,u);case e.AttributeDeclaration:return this.dtdAttList(o,a,u);case e.ElementDeclaration:return this.dtdElement(o,a,u);case e.EntityDeclaration:return this.dtdEntity(o,a,u);case e.NotationDeclaration:return this.dtdNotation(o,a,u);default:throw new Error("Unknown XML node type: "+o.constructor.name)}},r.prototype.processingInstruction=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u)+"<?",a.state=t.InsideTag,f+=o.target,o.value&&(f+=" "+o.value),a.state=t.CloseTag,f+=a.spaceBeforeSlash+"?>",f+=this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.raw=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u),a.state=t.InsideTag,f+=o.value,a.state=t.CloseTag,f+=this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.text=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u),a.state=t.InsideTag,f+=o.value,a.state=t.CloseTag,f+=this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.dtdAttList=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u)+"<!ATTLIST",a.state=t.InsideTag,f+=" "+o.elementName+" "+o.attributeName+" "+o.attributeType,o.defaultValueType!=="#DEFAULT"&&(f+=" "+o.defaultValueType),o.defaultValue&&(f+=' "'+o.defaultValue+'"'),a.state=t.CloseTag,f+=a.spaceBeforeSlash+">"+this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.dtdElement=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u)+"<!ELEMENT",a.state=t.InsideTag,f+=" "+o.name+" "+o.value,a.state=t.CloseTag,f+=a.spaceBeforeSlash+">"+this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.dtdEntity=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u)+"<!ENTITY",a.state=t.InsideTag,o.pe&&(f+=" %"),f+=" "+o.name,o.value?f+=' "'+o.value+'"':(o.pubID&&o.sysID?f+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.sysID&&(f+=' SYSTEM "'+o.sysID+'"'),o.nData&&(f+=" NDATA "+o.nData)),a.state=t.CloseTag,f+=a.spaceBeforeSlash+">"+this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.dtdNotation=function(o,a,u){var f;return this.openNode(o,a,u),a.state=t.OpenTag,f=this.indent(o,a,u)+"<!NOTATION",a.state=t.InsideTag,f+=" "+o.name,o.pubID&&o.sysID?f+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.pubID?f+=' PUBLIC "'+o.pubID+'"':o.sysID&&(f+=' SYSTEM "'+o.sysID+'"'),a.state=t.CloseTag,f+=a.spaceBeforeSlash+">"+this.endline(o,a,u),a.state=t.None,this.closeNode(o,a,u),f},r.prototype.openNode=function(o,a,u){},r.prototype.closeNode=function(o,a,u){},r.prototype.openAttribute=function(o,a,u){},r.prototype.closeAttribute=function(o,a,u){},r}()}.call(B)),Pr.exports}var Hs;function Go(){return Hs||(Hs=1,function(){var e,t=function(n,r){for(var o in r)i.call(r,o)&&(n[o]=r[o]);function a(){this.constructor=n}return a.prototype=r.prototype,n.prototype=new a,n.__super__=r.prototype,n},i={}.hasOwnProperty;e=El(),kr.exports=function(n){t(r,n);function r(o){r.__super__.constructor.call(this,o)}return r.prototype.document=function(o,a){var u,f,c,d,s;for(a=this.filterOptions(a),d="",s=o.children,f=0,c=s.length;f<c;f++)u=s[f],d+=this.writeChildNode(u,a,0);return a.pretty&&d.slice(-a.newline.length)===a.newline&&(d=d.slice(0,-a.newline.length)),d},r}(e)}.call(B)),kr.exports}var Xs;function Tl(){return Xs||(Xs=1,function(){var e,t,i,n,r,o,a,u=function(c,d){for(var s in d)f.call(d,s)&&(c[s]=d[s]);function l(){this.constructor=c}return l.prototype=d.prototype,c.prototype=new l,c.__super__=d.prototype,c},f={}.hasOwnProperty;a=et().isPlainObject,i=vl(),t=x_(),n=Ie(),e=ie(),o=xl(),r=Go(),fr.exports=function(c){u(d,c);function d(s){d.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new t,s||(s={}),s.writer||(s.writer=new r),this.options=s,this.stringify=new o(s)}return Object.defineProperty(d.prototype,"implementation",{value:new i}),Object.defineProperty(d.prototype,"doctype",{get:function(){var s,l,h,p;for(p=this.children,l=0,h=p.length;l<h;l++)if(s=p[l],s.type===e.DocType)return s;return null}}),Object.defineProperty(d.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(d.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(d.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(d.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(d.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(d.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(d.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(d.prototype,"origin",{get:function(){return null}}),Object.defineProperty(d.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(d.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(d.prototype,"contentType",{get:function(){return null}}),d.prototype.end=function(s){var l;return l={},s?a(s)&&(l=s,s=this.options.writer):s=this.options.writer,s.document(this,s.filterOptions(l))},d.prototype.toString=function(s){return this.options.writer.document(this,this.options.writer.filterOptions(s))},d.prototype.createElement=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTextNode=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createComment=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createCDATASection=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createProcessingInstruction=function(s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttribute=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEntityReference=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.importNode=function(s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createElementNS=function(s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttributeNS=function(s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(s,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementById=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.adoptNode=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.renameNode=function(s,l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByClassName=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEvent=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createNodeIterator=function(s,l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTreeWalker=function(s,l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d}(n)}.call(B)),fr.exports}var Br={exports:{}},js;function A_(){return js||(js=1,function(){var e,t,i,n,r,o,a,u,f,c,d,s,l,h,p,y,E,w,v,m,b,T,N,L={}.hasOwnProperty;N=et(),b=N.isObject,m=N.isFunction,T=N.isPlainObject,v=N.getValue,e=ie(),s=Tl(),l=No(),n=Mo(),r=Ro(),p=Xo(),w=jo(),h=zo(),c=ko(),d=Ho(),o=Po(),u=Fo(),a=Bo(),f=Uo(),i=wl(),E=xl(),y=Go(),t=Mn(),Br.exports=function(){function A(_,O,D){var k;this.name="?xml",this.type=e.Document,_||(_={}),k={},_.writer?T(_.writer)&&(k=_.writer,_.writer=new y):_.writer=new y,this.options=_,this.writer=_.writer,this.writerOptions=this.writer.filterOptions(k),this.stringify=new E(_),this.onDataCallback=O||function(){},this.onEndCallback=D||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return A.prototype.createChildNode=function(_){var O,D,k,F,X,K,G,H;switch(_.type){case e.CData:this.cdata(_.value);break;case e.Comment:this.comment(_.value);break;case e.Element:k={},G=_.attribs;for(D in G)L.call(G,D)&&(O=G[D],k[D]=O.value);this.node(_.name,k);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(_.value);break;case e.Text:this.text(_.value);break;case e.ProcessingInstruction:this.instruction(_.target,_.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+_.constructor.name)}for(H=_.children,X=0,K=H.length;X<K;X++)F=H[X],this.createChildNode(F),F.type===e.Element&&this.up();return this},A.prototype.dummy=function(){return this},A.prototype.node=function(_,O,D){var k;if(_==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(_));return this.openCurrent(),_=v(_),O==null&&(O={}),O=v(O),b(O)||(k=[O,D],D=k[0],O=k[1]),this.currentNode=new l(this,_,O),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,D!=null&&this.text(D),this},A.prototype.element=function(_,O,D){var k,F,X,K,G,H;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(_)||b(_)||m(_))for(K=this.options.noValidation,this.options.noValidation=!0,H=new s(this.options).element("TEMP_ROOT"),H.element(_),this.options.noValidation=K,G=H.children,F=0,X=G.length;F<X;F++)k=G[F],this.createChildNode(k),k.type===e.Element&&this.up();else this.node(_,O,D);return this},A.prototype.attribute=function(_,O){var D,k;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(_));if(_!=null&&(_=v(_)),b(_))for(D in _)L.call(_,D)&&(k=_[D],this.attribute(D,k));else m(O)&&(O=O.apply()),this.options.keepNullAttributes&&O==null?this.currentNode.attribs[_]=new i(this,_,""):O!=null&&(this.currentNode.attribs[_]=new i(this,_,O));return this},A.prototype.text=function(_){var O;return this.openCurrent(),O=new w(this,_),this.onData(this.writer.text(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.cdata=function(_){var O;return this.openCurrent(),O=new n(this,_),this.onData(this.writer.cdata(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.comment=function(_){var O;return this.openCurrent(),O=new r(this,_),this.onData(this.writer.comment(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.raw=function(_){var O;return this.openCurrent(),O=new p(this,_),this.onData(this.writer.raw(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.instruction=function(_,O){var D,k,F,X,K;if(this.openCurrent(),_!=null&&(_=v(_)),O!=null&&(O=v(O)),Array.isArray(_))for(D=0,X=_.length;D<X;D++)k=_[D],this.instruction(k);else if(b(_))for(k in _)L.call(_,k)&&(F=_[k],this.instruction(k,F));else m(O)&&(O=O.apply()),K=new h(this,_,O),this.onData(this.writer.processingInstruction(K,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},A.prototype.declaration=function(_,O,D){var k;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return k=new c(this,_,O,D),this.onData(this.writer.declaration(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.doctype=function(_,O,D){if(this.openCurrent(),_==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,O,D),this.currentNode.rootNodeName=_,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},A.prototype.dtdElement=function(_,O){var D;return this.openCurrent(),D=new a(this,_,O),this.onData(this.writer.dtdElement(D,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.attList=function(_,O,D,k,F){var X;return this.openCurrent(),X=new o(this,_,O,D,k,F),this.onData(this.writer.dtdAttList(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.entity=function(_,O){var D;return this.openCurrent(),D=new u(this,!1,_,O),this.onData(this.writer.dtdEntity(D,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.pEntity=function(_,O){var D;return this.openCurrent(),D=new u(this,!0,_,O),this.onData(this.writer.dtdEntity(D,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.notation=function(_,O){var D;return this.openCurrent(),D=new f(this,_,O),this.onData(this.writer.dtdNotation(D,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},A.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},A.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},A.prototype.openNode=function(_){var O,D,k,F;if(!_.isOpen){if(!this.root&&this.currentLevel===0&&_.type===e.Element&&(this.root=_),D="",_.type===e.Element){this.writerOptions.state=t.OpenTag,D=this.writer.indent(_,this.writerOptions,this.currentLevel)+"<"+_.name,F=_.attribs;for(k in F)L.call(F,k)&&(O=F[k],D+=this.writer.attribute(O,this.writerOptions,this.currentLevel));D+=(_.children?">":"/>")+this.writer.endline(_,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,D=this.writer.indent(_,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+_.rootNodeName,_.pubID&&_.sysID?D+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(D+=' SYSTEM "'+_.sysID+'"'),_.children?(D+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,D+=">"),D+=this.writer.endline(_,this.writerOptions,this.currentLevel);return this.onData(D,this.currentLevel),_.isOpen=!0}},A.prototype.closeNode=function(_){var O;if(!_.isClosed)return O="",this.writerOptions.state=t.CloseTag,_.type===e.Element?O=this.writer.indent(_,this.writerOptions,this.currentLevel)+"</"+_.name+">"+this.writer.endline(_,this.writerOptions,this.currentLevel):O=this.writer.indent(_,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(_,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(O,this.currentLevel),_.isClosed=!0},A.prototype.onData=function(_,O){return this.documentStarted=!0,this.onDataCallback(_,O+1)},A.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},A.prototype.debugInfo=function(_){return _==null?"":"node: <"+_+">"},A.prototype.ele=function(){return this.element.apply(this,arguments)},A.prototype.nod=function(_,O,D){return this.node(_,O,D)},A.prototype.txt=function(_){return this.text(_)},A.prototype.dat=function(_){return this.cdata(_)},A.prototype.com=function(_){return this.comment(_)},A.prototype.ins=function(_,O){return this.instruction(_,O)},A.prototype.dec=function(_,O,D){return this.declaration(_,O,D)},A.prototype.dtd=function(_,O,D){return this.doctype(_,O,D)},A.prototype.e=function(_,O,D){return this.element(_,O,D)},A.prototype.n=function(_,O,D){return this.node(_,O,D)},A.prototype.t=function(_){return this.text(_)},A.prototype.d=function(_){return this.cdata(_)},A.prototype.c=function(_){return this.comment(_)},A.prototype.r=function(_){return this.raw(_)},A.prototype.i=function(_,O){return this.instruction(_,O)},A.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},A.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},A.prototype.ent=function(_,O){return this.entity(_,O)},A.prototype.pent=function(_,O){return this.pEntity(_,O)},A.prototype.not=function(_,O){return this.notation(_,O)},A}()}.call(B)),Br.exports}var Ur={exports:{}},zs;function I_(){return zs||(zs=1,function(){var e,t,i,n=function(o,a){for(var u in a)r.call(a,u)&&(o[u]=a[u]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},r={}.hasOwnProperty;e=ie(),i=El(),t=Mn(),Ur.exports=function(o){n(a,o);function a(u,f){this.stream=u,a.__super__.constructor.call(this,f)}return a.prototype.endline=function(u,f,c){return u.isLastRootNode&&f.state===t.CloseTag?"":a.__super__.endline.call(this,u,f,c)},a.prototype.document=function(u,f){var c,d,s,l,h,p,y,E,w;for(y=u.children,d=s=0,h=y.length;s<h;d=++s)c=y[d],c.isLastRootNode=d===u.children.length-1;for(f=this.filterOptions(f),E=u.children,w=[],l=0,p=E.length;l<p;l++)c=E[l],w.push(this.writeChildNode(c,f,0));return w},a.prototype.attribute=function(u,f,c){return this.stream.write(a.__super__.attribute.call(this,u,f,c))},a.prototype.cdata=function(u,f,c){return this.stream.write(a.__super__.cdata.call(this,u,f,c))},a.prototype.comment=function(u,f,c){return this.stream.write(a.__super__.comment.call(this,u,f,c))},a.prototype.declaration=function(u,f,c){return this.stream.write(a.__super__.declaration.call(this,u,f,c))},a.prototype.docType=function(u,f,c){var d,s,l,h;if(c||(c=0),this.openNode(u,f,c),f.state=t.OpenTag,this.stream.write(this.indent(u,f,c)),this.stream.write("<!DOCTYPE "+u.root().name),u.pubID&&u.sysID?this.stream.write(' PUBLIC "'+u.pubID+'" "'+u.sysID+'"'):u.sysID&&this.stream.write(' SYSTEM "'+u.sysID+'"'),u.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(u,f,c)),f.state=t.InsideTag,h=u.children,s=0,l=h.length;s<l;s++)d=h[s],this.writeChildNode(d,f,c+1);f.state=t.CloseTag,this.stream.write("]")}return f.state=t.CloseTag,this.stream.write(f.spaceBeforeSlash+">"),this.stream.write(this.endline(u,f,c)),f.state=t.None,this.closeNode(u,f,c)},a.prototype.element=function(u,f,c){var d,s,l,h,p,y,E,w,v;c||(c=0),this.openNode(u,f,c),f.state=t.OpenTag,this.stream.write(this.indent(u,f,c)+"<"+u.name),w=u.attribs;for(E in w)r.call(w,E)&&(d=w[E],this.attribute(d,f,c));if(l=u.children.length,h=l===0?null:u.children[0],l===0||u.children.every(function(m){return(m.type===e.Text||m.type===e.Raw)&&m.value===""}))f.allowEmpty?(this.stream.write(">"),f.state=t.CloseTag,this.stream.write("</"+u.name+">")):(f.state=t.CloseTag,this.stream.write(f.spaceBeforeSlash+"/>"));else if(f.pretty&&l===1&&(h.type===e.Text||h.type===e.Raw)&&h.value!=null)this.stream.write(">"),f.state=t.InsideTag,f.suppressPrettyCount++,this.writeChildNode(h,f,c+1),f.suppressPrettyCount--,f.state=t.CloseTag,this.stream.write("</"+u.name+">");else{for(this.stream.write(">"+this.endline(u,f,c)),f.state=t.InsideTag,v=u.children,p=0,y=v.length;p<y;p++)s=v[p],this.writeChildNode(s,f,c+1);f.state=t.CloseTag,this.stream.write(this.indent(u,f,c)+"</"+u.name+">")}return this.stream.write(this.endline(u,f,c)),f.state=t.None,this.closeNode(u,f,c)},a.prototype.processingInstruction=function(u,f,c){return this.stream.write(a.__super__.processingInstruction.call(this,u,f,c))},a.prototype.raw=function(u,f,c){return this.stream.write(a.__super__.raw.call(this,u,f,c))},a.prototype.text=function(u,f,c){return this.stream.write(a.__super__.text.call(this,u,f,c))},a.prototype.dtdAttList=function(u,f,c){return this.stream.write(a.__super__.dtdAttList.call(this,u,f,c))},a.prototype.dtdElement=function(u,f,c){return this.stream.write(a.__super__.dtdElement.call(this,u,f,c))},a.prototype.dtdEntity=function(u,f,c){return this.stream.write(a.__super__.dtdEntity.call(this,u,f,c))},a.prototype.dtdNotation=function(u,f,c){return this.stream.write(a.__super__.dtdNotation.call(this,u,f,c))},a}(i)}.call(B)),Ur.exports}var Gs;function O_(){return Gs||(Gs=1,function(){var e,t,i,n,r,o,a,u,f,c;c=et(),u=c.assign,f=c.isFunction,i=vl(),n=Tl(),r=A_(),a=Go(),o=I_(),e=ie(),t=Mn(),Ge.create=function(d,s,l,h){var p,y;if(d==null)throw new Error("Root element needs a name.");return h=u({},s,l,h),p=new n(h),y=p.element(d),h.headless||(p.declaration(h),(h.pubID!=null||h.sysID!=null)&&p.dtd(h)),y},Ge.begin=function(d,s,l){var h;return f(d)&&(h=[d,s],s=h[0],l=h[1],d={}),s?new r(d,s,l):new n(d)},Ge.stringWriter=function(d){return new a(d)},Ge.streamWriter=function(d,s){return new o(d,s)},Ge.implementation=new i,Ge.nodeType=e,Ge.writerState=t}.call(B)),Ge}var Vs;function S_(){return Vs||(Vs=1,function(){var e,t,i,n,r,o={}.hasOwnProperty;e=O_(),t=Do().defaults,n=function(a){return typeof a=="string"&&(a.indexOf("&")>=0||a.indexOf(">")>=0||a.indexOf("<")>=0)},r=function(a){return"<![CDATA["+i(a)+"]]>"},i=function(a){return a.replace("]]>","]]]]><![CDATA[>")},ur.Builder=function(){function a(u){var f,c,d;this.options={},c=t["0.2"];for(f in c)o.call(c,f)&&(d=c[f],this.options[f]=d);for(f in u)o.call(u,f)&&(d=u[f],this.options[f]=d)}return a.prototype.buildObject=function(u){var f,c,d,s,l;return f=this.options.attrkey,c=this.options.charkey,Object.keys(u).length===1&&this.options.rootName===t["0.2"].rootName?(l=Object.keys(u)[0],u=u[l]):l=this.options.rootName,d=function(h){return function(p,y){var E,w,v,m,b,T;if(typeof y!="object")h.options.cdata&&n(y)?p.raw(r(y)):p.txt(y);else if(Array.isArray(y)){for(m in y)if(o.call(y,m)){w=y[m];for(b in w)v=w[b],p=d(p.ele(b),v).up()}}else for(b in y)if(o.call(y,b))if(w=y[b],b===f){if(typeof w=="object")for(E in w)T=w[E],p=p.att(E,T)}else if(b===c)h.options.cdata&&n(w)?p=p.raw(r(w)):p=p.txt(w);else if(Array.isArray(w))for(m in w)o.call(w,m)&&(v=w[m],typeof v=="string"?h.options.cdata&&n(v)?p=p.ele(b).raw(r(v)).up():p=p.ele(b,v).up():p=d(p.ele(b),v).up());else typeof w=="object"?p=d(p.ele(b),w).up():typeof w=="string"&&h.options.cdata&&n(w)?p=p.ele(b).raw(r(w)).up():(w==null&&(w=""),p=p.ele(b,w.toString()).up());return p}}(this),s=e.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),d(s,u).end(this.options.renderOpts)},a}()}.call(B)),ur}var Hr={},Xr={};const L_=En(cd),D_=En(Mc);var Ws;function C_(){return Ws||(Ws=1,function(e){(function(t){t.parser=function(x,g){return new n(x,g)},t.SAXParser=n,t.SAXStream=d,t.createStream=c,t.MAX_BUFFER_LENGTH=64*1024;var i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(x,g){if(!(this instanceof n))return new n(x,g);var R=this;o(R),R.q=R.c="",R.bufferCheckPosition=t.MAX_BUFFER_LENGTH,R.opt=g||{},R.opt.lowercase=R.opt.lowercase||R.opt.lowercasetags,R.looseCase=R.opt.lowercase?"toLowerCase":"toUpperCase",R.tags=[],R.closed=R.closedRoot=R.sawRoot=!1,R.tag=R.error=null,R.strict=!!x,R.noscript=!!(x||R.opt.noscript),R.state=_.BEGIN,R.strictEntities=R.opt.strictEntities,R.ENTITIES=R.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),R.attribList=[],R.opt.xmlns&&(R.ns=Object.create(y)),R.trackPosition=R.opt.position!==!1,R.trackPosition&&(R.position=R.line=R.column=0),D(R,"onready")}Object.create||(Object.create=function(x){function g(){}g.prototype=x;var R=new g;return R}),Object.keys||(Object.keys=function(x){var g=[];for(var R in x)x.hasOwnProperty(R)&&g.push(R);return g});function r(x){for(var g=Math.max(t.MAX_BUFFER_LENGTH,10),R=0,I=0,Z=i.length;I<Z;I++){var ne=x[i[I]].length;if(ne>g)switch(i[I]){case"textNode":F(x);break;case"cdata":k(x,"oncdata",x.cdata),x.cdata="";break;case"script":k(x,"onscript",x.script),x.script="";break;default:K(x,"Max buffer length exceeded: "+i[I])}R=Math.max(R,ne)}var oe=t.MAX_BUFFER_LENGTH-R;x.bufferCheckPosition=oe+x.position}function o(x){for(var g=0,R=i.length;g<R;g++)x[i[g]]=""}function a(x){F(x),x.cdata!==""&&(k(x,"oncdata",x.cdata),x.cdata=""),x.script!==""&&(k(x,"onscript",x.script),x.script="")}n.prototype={end:function(){G(this)},write:jl,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var u;try{u=L_.Stream}catch{u=function(){}}var f=t.EVENTS.filter(function(x){return x!=="error"&&x!=="end"});function c(x,g){return new d(x,g)}function d(x,g){if(!(this instanceof d))return new d(x,g);u.apply(this),this._parser=new n(x,g),this.writable=!0,this.readable=!0;var R=this;this._parser.onend=function(){R.emit("end")},this._parser.onerror=function(I){R.emit("error",I),R._parser.error=null},this._decoder=null,f.forEach(function(I){Object.defineProperty(R,"on"+I,{get:function(){return R._parser["on"+I]},set:function(Z){if(!Z)return R.removeAllListeners(I),R._parser["on"+I]=Z,Z;R.on(I,Z)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(u.prototype,{constructor:{value:d}}),d.prototype.write=function(x){if(typeof C=="function"&&typeof C.isBuffer=="function"&&C.isBuffer(x)){if(!this._decoder){var g=D_.StringDecoder;this._decoder=new g("utf8")}x=this._decoder.write(x)}return this._parser.write(x.toString()),this.emit("data",x),!0},d.prototype.end=function(x){return x&&x.length&&this.write(x),this._parser.end(),!0},d.prototype.on=function(x,g){var R=this;return!R._parser["on"+x]&&f.indexOf(x)!==-1&&(R._parser["on"+x]=function(){var I=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);I.splice(0,0,x),R.emit.apply(R,I)}),u.prototype.on.call(R,x,g)};var s="[CDATA[",l="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",y={xml:h,xmlns:p},E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function b(x){return x===" "||x===`
`||x==="\r"||x==="	"}function T(x){return x==='"'||x==="'"}function N(x){return x===">"||b(x)}function L(x,g){return x.test(g)}function A(x,g){return!L(x,g)}var _=0;t.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(x){var g=t.ENTITIES[x],R=typeof g=="number"?String.fromCharCode(g):g;t.ENTITIES[x]=R});for(var O in t.STATE)t.STATE[t.STATE[O]]=O;_=t.STATE;function D(x,g,R){x[g]&&x[g](R)}function k(x,g,R){x.textNode&&F(x),D(x,g,R)}function F(x){x.textNode=X(x.opt,x.textNode),x.textNode&&D(x,"ontext",x.textNode),x.textNode=""}function X(x,g){return x.trim&&(g=g.trim()),x.normalize&&(g=g.replace(/\s+/g," ")),g}function K(x,g){return F(x),x.trackPosition&&(g+=`
Line: `+x.line+`
Column: `+x.column+`
Char: `+x.c),g=new Error(g),x.error=g,D(x,"onerror",g),x}function G(x){return x.sawRoot&&!x.closedRoot&&H(x,"Unclosed root tag"),x.state!==_.BEGIN&&x.state!==_.BEGIN_WHITESPACE&&x.state!==_.TEXT&&K(x,"Unexpected end"),F(x),x.c="",x.closed=!0,D(x,"onend"),n.call(x,x.strict,x.opt),x}function H(x,g){if(typeof x!="object"||!(x instanceof n))throw new Error("bad call to strictFail");x.strict&&K(x,g)}function Hl(x){x.strict||(x.tagName=x.tagName[x.looseCase]());var g=x.tags[x.tags.length-1]||x,R=x.tag={name:x.tagName,attributes:{}};x.opt.xmlns&&(R.ns=g.ns),x.attribList.length=0,k(x,"onopentagstart",R)}function kn(x,g){var R=x.indexOf(":"),I=R<0?["",x]:x.split(":"),Z=I[0],ne=I[1];return g&&x==="xmlns"&&(Z="xmlns",ne=""),{prefix:Z,local:ne}}function Pn(x){if(x.strict||(x.attribName=x.attribName[x.looseCase]()),x.attribList.indexOf(x.attribName)!==-1||x.tag.attributes.hasOwnProperty(x.attribName)){x.attribName=x.attribValue="";return}if(x.opt.xmlns){var g=kn(x.attribName,!0),R=g.prefix,I=g.local;if(R==="xmlns")if(I==="xml"&&x.attribValue!==h)H(x,"xml: prefix must be bound to "+h+`
Actual: `+x.attribValue);else if(I==="xmlns"&&x.attribValue!==p)H(x,"xmlns: prefix must be bound to "+p+`
Actual: `+x.attribValue);else{var Z=x.tag,ne=x.tags[x.tags.length-1]||x;Z.ns===ne.ns&&(Z.ns=Object.create(ne.ns)),Z.ns[I]=x.attribValue}x.attribList.push([x.attribName,x.attribValue])}else x.tag.attributes[x.attribName]=x.attribValue,k(x,"onattribute",{name:x.attribName,value:x.attribValue});x.attribName=x.attribValue=""}function Et(x,g){if(x.opt.xmlns){var R=x.tag,I=kn(x.tagName);R.prefix=I.prefix,R.local=I.local,R.uri=R.ns[I.prefix]||"",R.prefix&&!R.uri&&(H(x,"Unbound namespace prefix: "+JSON.stringify(x.tagName)),R.uri=I.prefix);var Z=x.tags[x.tags.length-1]||x;R.ns&&Z.ns!==R.ns&&Object.keys(R.ns).forEach(function(Jo){k(x,"onopennamespace",{prefix:Jo,uri:R.ns[Jo]})});for(var ne=0,oe=x.attribList.length;ne<oe;ne++){var pe=x.attribList[ne],Ne=pe[0],Wt=pe[1],le=kn(Ne,!0),Xe=le.prefix,zl=le.local,Qo=Xe===""?"":R.ns[Xe]||"",Bn={name:Ne,value:Wt,prefix:Xe,local:zl,uri:Qo};Xe&&Xe!=="xmlns"&&!Qo&&(H(x,"Unbound namespace prefix: "+JSON.stringify(Xe)),Bn.uri=Xe),x.tag.attributes[Ne]=Bn,k(x,"onattribute",Bn)}x.attribList.length=0}x.tag.isSelfClosing=!!g,x.sawRoot=!0,x.tags.push(x.tag),k(x,"onopentag",x.tag),g||(!x.noscript&&x.tagName.toLowerCase()==="script"?x.state=_.SCRIPT:x.state=_.TEXT,x.tag=null,x.tagName=""),x.attribName=x.attribValue="",x.attribList.length=0}function Fn(x){if(!x.tagName){H(x,"Weird empty close tag."),x.textNode+="</>",x.state=_.TEXT;return}if(x.script){if(x.tagName!=="script"){x.script+="</"+x.tagName+">",x.tagName="",x.state=_.SCRIPT;return}k(x,"onscript",x.script),x.script=""}var g=x.tags.length,R=x.tagName;x.strict||(R=R[x.looseCase]());for(var I=R;g--;){var Z=x.tags[g];if(Z.name!==I)H(x,"Unexpected close tag");else break}if(g<0){H(x,"Unmatched closing tag: "+x.tagName),x.textNode+="</"+x.tagName+">",x.state=_.TEXT;return}x.tagName=R;for(var ne=x.tags.length;ne-- >g;){var oe=x.tag=x.tags.pop();x.tagName=x.tag.name,k(x,"onclosetag",x.tagName);var pe={};for(var Ne in oe.ns)pe[Ne]=oe.ns[Ne];var Wt=x.tags[x.tags.length-1]||x;x.opt.xmlns&&oe.ns!==Wt.ns&&Object.keys(oe.ns).forEach(function(le){var Xe=oe.ns[le];k(x,"onclosenamespace",{prefix:le,uri:Xe})})}g===0&&(x.closedRoot=!0),x.tagName=x.attribValue=x.attribName="",x.attribList.length=0,x.state=_.TEXT}function Xl(x){var g=x.entity,R=g.toLowerCase(),I,Z="";return x.ENTITIES[g]?x.ENTITIES[g]:x.ENTITIES[R]?x.ENTITIES[R]:(g=R,g.charAt(0)==="#"&&(g.charAt(1)==="x"?(g=g.slice(2),I=parseInt(g,16),Z=I.toString(16)):(g=g.slice(1),I=parseInt(g,10),Z=I.toString(10))),g=g.replace(/^0+/,""),isNaN(I)||Z.toLowerCase()!==g?(H(x,"Invalid character entity"),"&"+x.entity+";"):String.fromCodePoint(I))}function Yo(x,g){g==="<"?(x.state=_.OPEN_WAKA,x.startTagPosition=x.position):b(g)||(H(x,"Non-whitespace before first tag."),x.textNode=g,x.state=_.TEXT)}function Ko(x,g){var R="";return g<x.length&&(R=x.charAt(g)),R}function jl(x){var g=this;if(this.error)throw this.error;if(g.closed)return K(g,"Cannot write after close. Assign an onready handler.");if(x===null)return G(g);typeof x=="object"&&(x=x.toString());for(var R=0,I="";I=Ko(x,R++),g.c=I,!!I;)switch(g.trackPosition&&(g.position++,I===`
`?(g.line++,g.column=0):g.column++),g.state){case _.BEGIN:if(g.state=_.BEGIN_WHITESPACE,I==="\uFEFF")continue;Yo(g,I);continue;case _.BEGIN_WHITESPACE:Yo(g,I);continue;case _.TEXT:if(g.sawRoot&&!g.closedRoot){for(var Z=R-1;I&&I!=="<"&&I!=="&";)I=Ko(x,R++),I&&g.trackPosition&&(g.position++,I===`
`?(g.line++,g.column=0):g.column++);g.textNode+=x.substring(Z,R-1)}I==="<"&&!(g.sawRoot&&g.closedRoot&&!g.strict)?(g.state=_.OPEN_WAKA,g.startTagPosition=g.position):(!b(I)&&(!g.sawRoot||g.closedRoot)&&H(g,"Text data outside of root node."),I==="&"?g.state=_.TEXT_ENTITY:g.textNode+=I);continue;case _.SCRIPT:I==="<"?g.state=_.SCRIPT_ENDING:g.script+=I;continue;case _.SCRIPT_ENDING:I==="/"?g.state=_.CLOSE_TAG:(g.script+="<"+I,g.state=_.SCRIPT);continue;case _.OPEN_WAKA:if(I==="!")g.state=_.SGML_DECL,g.sgmlDecl="";else if(!b(I))if(L(E,I))g.state=_.OPEN_TAG,g.tagName=I;else if(I==="/")g.state=_.CLOSE_TAG,g.tagName="";else if(I==="?")g.state=_.PROC_INST,g.procInstName=g.procInstBody="";else{if(H(g,"Unencoded <"),g.startTagPosition+1<g.position){var ne=g.position-g.startTagPosition;I=new Array(ne).join(" ")+I}g.textNode+="<"+I,g.state=_.TEXT}continue;case _.SGML_DECL:(g.sgmlDecl+I).toUpperCase()===s?(k(g,"onopencdata"),g.state=_.CDATA,g.sgmlDecl="",g.cdata=""):g.sgmlDecl+I==="--"?(g.state=_.COMMENT,g.comment="",g.sgmlDecl=""):(g.sgmlDecl+I).toUpperCase()===l?(g.state=_.DOCTYPE,(g.doctype||g.sawRoot)&&H(g,"Inappropriately located doctype declaration"),g.doctype="",g.sgmlDecl=""):I===">"?(k(g,"onsgmldeclaration",g.sgmlDecl),g.sgmlDecl="",g.state=_.TEXT):(T(I)&&(g.state=_.SGML_DECL_QUOTED),g.sgmlDecl+=I);continue;case _.SGML_DECL_QUOTED:I===g.q&&(g.state=_.SGML_DECL,g.q=""),g.sgmlDecl+=I;continue;case _.DOCTYPE:I===">"?(g.state=_.TEXT,k(g,"ondoctype",g.doctype),g.doctype=!0):(g.doctype+=I,I==="["?g.state=_.DOCTYPE_DTD:T(I)&&(g.state=_.DOCTYPE_QUOTED,g.q=I));continue;case _.DOCTYPE_QUOTED:g.doctype+=I,I===g.q&&(g.q="",g.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:g.doctype+=I,I==="]"?g.state=_.DOCTYPE:T(I)&&(g.state=_.DOCTYPE_DTD_QUOTED,g.q=I);continue;case _.DOCTYPE_DTD_QUOTED:g.doctype+=I,I===g.q&&(g.state=_.DOCTYPE_DTD,g.q="");continue;case _.COMMENT:I==="-"?g.state=_.COMMENT_ENDING:g.comment+=I;continue;case _.COMMENT_ENDING:I==="-"?(g.state=_.COMMENT_ENDED,g.comment=X(g.opt,g.comment),g.comment&&k(g,"oncomment",g.comment),g.comment=""):(g.comment+="-"+I,g.state=_.COMMENT);continue;case _.COMMENT_ENDED:I!==">"?(H(g,"Malformed comment"),g.comment+="--"+I,g.state=_.COMMENT):g.state=_.TEXT;continue;case _.CDATA:I==="]"?g.state=_.CDATA_ENDING:g.cdata+=I;continue;case _.CDATA_ENDING:I==="]"?g.state=_.CDATA_ENDING_2:(g.cdata+="]"+I,g.state=_.CDATA);continue;case _.CDATA_ENDING_2:I===">"?(g.cdata&&k(g,"oncdata",g.cdata),k(g,"onclosecdata"),g.cdata="",g.state=_.TEXT):I==="]"?g.cdata+="]":(g.cdata+="]]"+I,g.state=_.CDATA);continue;case _.PROC_INST:I==="?"?g.state=_.PROC_INST_ENDING:b(I)?g.state=_.PROC_INST_BODY:g.procInstName+=I;continue;case _.PROC_INST_BODY:if(!g.procInstBody&&b(I))continue;I==="?"?g.state=_.PROC_INST_ENDING:g.procInstBody+=I;continue;case _.PROC_INST_ENDING:I===">"?(k(g,"onprocessinginstruction",{name:g.procInstName,body:g.procInstBody}),g.procInstName=g.procInstBody="",g.state=_.TEXT):(g.procInstBody+="?"+I,g.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:L(w,I)?g.tagName+=I:(Hl(g),I===">"?Et(g):I==="/"?g.state=_.OPEN_TAG_SLASH:(b(I)||H(g,"Invalid character in tag name"),g.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:I===">"?(Et(g,!0),Fn(g)):(H(g,"Forward-slash in opening tag not followed by >"),g.state=_.ATTRIB);continue;case _.ATTRIB:if(b(I))continue;I===">"?Et(g):I==="/"?g.state=_.OPEN_TAG_SLASH:L(E,I)?(g.attribName=I,g.attribValue="",g.state=_.ATTRIB_NAME):H(g,"Invalid attribute name");continue;case _.ATTRIB_NAME:I==="="?g.state=_.ATTRIB_VALUE:I===">"?(H(g,"Attribute without value"),g.attribValue=g.attribName,Pn(g),Et(g)):b(I)?g.state=_.ATTRIB_NAME_SAW_WHITE:L(w,I)?g.attribName+=I:H(g,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if(I==="=")g.state=_.ATTRIB_VALUE;else{if(b(I))continue;H(g,"Attribute without value"),g.tag.attributes[g.attribName]="",g.attribValue="",k(g,"onattribute",{name:g.attribName,value:""}),g.attribName="",I===">"?Et(g):L(E,I)?(g.attribName=I,g.state=_.ATTRIB_NAME):(H(g,"Invalid attribute name"),g.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:if(b(I))continue;T(I)?(g.q=I,g.state=_.ATTRIB_VALUE_QUOTED):(H(g,"Unquoted attribute value"),g.state=_.ATTRIB_VALUE_UNQUOTED,g.attribValue=I);continue;case _.ATTRIB_VALUE_QUOTED:if(I!==g.q){I==="&"?g.state=_.ATTRIB_VALUE_ENTITY_Q:g.attribValue+=I;continue}Pn(g),g.q="",g.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:b(I)?g.state=_.ATTRIB:I===">"?Et(g):I==="/"?g.state=_.OPEN_TAG_SLASH:L(E,I)?(H(g,"No whitespace between attributes"),g.attribName=I,g.attribValue="",g.state=_.ATTRIB_NAME):H(g,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(!N(I)){I==="&"?g.state=_.ATTRIB_VALUE_ENTITY_U:g.attribValue+=I;continue}Pn(g),I===">"?Et(g):g.state=_.ATTRIB;continue;case _.CLOSE_TAG:if(g.tagName)I===">"?Fn(g):L(w,I)?g.tagName+=I:g.script?(g.script+="</"+g.tagName,g.tagName="",g.state=_.SCRIPT):(b(I)||H(g,"Invalid tagname in closing tag"),g.state=_.CLOSE_TAG_SAW_WHITE);else{if(b(I))continue;A(E,I)?g.script?(g.script+="</"+I,g.state=_.SCRIPT):H(g,"Invalid tagname in closing tag."):g.tagName=I}continue;case _.CLOSE_TAG_SAW_WHITE:if(b(I))continue;I===">"?Fn(g):H(g,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:var oe,pe;switch(g.state){case _.TEXT_ENTITY:oe=_.TEXT,pe="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:oe=_.ATTRIB_VALUE_QUOTED,pe="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:oe=_.ATTRIB_VALUE_UNQUOTED,pe="attribValue";break}I===";"?(g[pe]+=Xl(g),g.entity="",g.state=oe):L(g.entity.length?m:v,I)?g.entity+=I:(H(g,"Invalid character in entity name"),g[pe]+="&"+g.entity+I,g.entity="",g.state=oe);continue;default:throw new Error(g,"Unknown state: "+g.state)}return g.position>=g.bufferCheckPosition&&r(g),g}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var x=String.fromCharCode,g=Math.floor,R=function(){var I=16384,Z=[],ne,oe,pe=-1,Ne=arguments.length;if(!Ne)return"";for(var Wt="";++pe<Ne;){var le=Number(arguments[pe]);if(!isFinite(le)||le<0||le>1114111||g(le)!==le)throw RangeError("Invalid code point: "+le);le<=65535?Z.push(le):(le-=65536,ne=(le>>10)+55296,oe=le%1024+56320,Z.push(ne,oe)),(pe+1===Ne||Z.length>I)&&(Wt+=x.apply(null,Z),Z.length=0)}return Wt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:R,configurable:!0,writable:!0}):String.fromCodePoint=R}()})(e)}(Xr)),Xr}const N_=En(_c);var jr={},Zs;function M_(){return Zs||(Zs=1,function(){jr.stripBOM=function(e){return e[0]==="\uFEFF"?e.substring(1):e}}.call(B)),jr}var It={},$s;function Al(){return $s||($s=1,function(){var e;e=new RegExp(/(?!xmlns)^.*:/),It.normalize=function(t){return t.toLowerCase()},It.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},It.stripPrefix=function(t){return t.replace(e,"")},It.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},It.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t=t.toLowerCase()==="true"),t}}.call(B)),It}var zr=1,Vo={},Gr=!1,bn=Y.document,ci;function Il(e){typeof e!="function"&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return Vo[zr]=n,ci(zr),zr++}function Wo(e){delete Vo[e]}function R_(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(void 0,i);break}}function di(e){if(Gr)setTimeout(di,0,e);else{var t=Vo[e];if(t){Gr=!0;try{R_(t)}finally{Wo(e),Gr=!1}}}}function k_(){ci=function(e){Ke.nextTick(function(){di(e)})}}function P_(){if(Y.postMessage&&!Y.importScripts){var e=!0,t=Y.onmessage;return Y.onmessage=function(){e=!1},Y.postMessage("","*"),Y.onmessage=t,e}}function F_(){var e="setImmediate$"+Math.random()+"$",t=function(i){i.source===Y&&typeof i.data=="string"&&i.data.indexOf(e)===0&&di(+i.data.slice(e.length))};Y.addEventListener?Y.addEventListener("message",t,!1):Y.attachEvent("onmessage",t),ci=function(i){Y.postMessage(e+i,"*")}}function B_(){var e=new MessageChannel;e.port1.onmessage=function(t){var i=t.data;di(i)},ci=function(t){e.port2.postMessage(t)}}function U_(){var e=bn.documentElement;ci=function(t){var i=bn.createElement("script");i.onreadystatechange=function(){di(t),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}function H_(){ci=function(e){setTimeout(di,0,e)}}var rn=Object.getPrototypeOf&&Object.getPrototypeOf(Y);rn=rn&&rn.setTimeout?rn:Y;({}).toString.call(Y.process)==="[object process]"?k_():P_()?F_():Y.MessageChannel?B_():bn&&"onreadystatechange"in bn.createElement("script")?U_():H_();var Ol=Function.prototype.apply;function Sl(e){typeof e=="number"&&typeof Y.clearInterval=="function"?Y.clearInterval(e):Zo(e)}function Gi(e){typeof e=="number"&&typeof Y.clearTimeout=="function"?Y.clearTimeout(e):Zo(e)}function Zo(e){e&&typeof e.close=="function"&&e.close()}function $o(){return new Bi(Ol.call(Y.setTimeout,window,arguments))}function Ll(){return new Bi(Ol.call(Y.setInterval,window,arguments))}function Bi(e){this._id=e}Bi.prototype.unref=Bi.prototype.ref=function(){};Bi.prototype.close=function(){Zo(this._id)};function Dl(e,t){Gi(e._idleTimeoutId),e._idleTimeout=t}function Cl(e){Gi(e._idleTimeoutId),e._idleTimeout=-1}var Nl=qo;function qo(e){Gi(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=$o(function(){e._onTimeout&&e._onTimeout()},t))}const X_={setImmediate:Il,clearImmediate:Wo,setTimeout:$o,clearTimeout:Gi,setInterval:Ll,clearInterval:Sl,active:qo,unenroll:Cl,_unrefActive:Nl,enroll:Dl},j_=Object.freeze(Object.defineProperty({__proto__:null,_unrefActive:Nl,active:qo,clearImmediate:Wo,clearInterval:Sl,clearTimeout:Gi,default:X_,enroll:Dl,setImmediate:Il,setInterval:Ll,setTimeout:$o,unenroll:Cl},Symbol.toStringTag,{value:"Module"})),z_=En(j_);var qs;function G_(){return qs||(qs=1,function(e){(function(){var t,i,n,r,o,a,u,f,c=function(l,h){return function(){return l.apply(h,arguments)}},d=function(l,h){for(var p in h)s.call(h,p)&&(l[p]=h[p]);function y(){this.constructor=l}return y.prototype=h.prototype,l.prototype=new y,l.__super__=h.prototype,l},s={}.hasOwnProperty;u=C_(),n=N_,t=M_(),a=Al(),f=z_.setImmediate,i=Do().defaults,r=function(l){return typeof l=="object"&&l!=null&&Object.keys(l).length===0},o=function(l,h,p){var y,E,w;for(y=0,E=l.length;y<E;y++)w=l[y],h=w(h,p);return h},e.Parser=function(l){d(h,l);function h(p){this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this);var y,E,w;if(!(this instanceof e.Parser))return new e.Parser(p);this.options={},E=i["0.2"];for(y in E)s.call(E,y)&&(w=E[y],this.options[y]=w);for(y in p)s.call(p,y)&&(w=p[y],this.options[y]=w);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return h.prototype.processAsync=function(){var p,y;try{return this.remaining.length<=this.options.chunkSize?(p=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(p),this.saxParser.close()):(p=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(p),f(this.processAsync))}catch(E){if(y=E,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(y)}},h.prototype.assignOrPush=function(p,y,E){return y in p?(p[y]instanceof Array||(p[y]=[p[y]]),p[y].push(E)):this.options.explicitArray?p[y]=[E]:p[y]=E},h.prototype.reset=function(){var p,y,E,w;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(v){return function(m){if(v.saxParser.resume(),!v.saxParser.errThrown)return v.saxParser.errThrown=!0,v.emit("error",m)}}(this),this.saxParser.onend=function(v){return function(){if(!v.saxParser.ended)return v.saxParser.ended=!0,v.emit("end",v.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,w=[],p=this.options.attrkey,y=this.options.charkey,this.saxParser.onopentag=function(v){return function(m){var b,T,N,L,A;if(N={},N[y]="",!v.options.ignoreAttrs){A=m.attributes;for(b in A)s.call(A,b)&&(!(p in N)&&!v.options.mergeAttrs&&(N[p]={}),T=v.options.attrValueProcessors?o(v.options.attrValueProcessors,m.attributes[b],b):m.attributes[b],L=v.options.attrNameProcessors?o(v.options.attrNameProcessors,b):b,v.options.mergeAttrs?v.assignOrPush(N,L,T):N[p][L]=T)}return N["#name"]=v.options.tagNameProcessors?o(v.options.tagNameProcessors,m.name):m.name,v.options.xmlns&&(N[v.options.xmlnskey]={uri:m.uri,local:m.local}),w.push(N)}}(this),this.saxParser.onclosetag=function(v){return function(){var m,b,T,N,L,A,_,O,D,k;if(A=w.pop(),L=A["#name"],(!v.options.explicitChildren||!v.options.preserveChildrenOrder)&&delete A["#name"],A.cdata===!0&&(m=A.cdata,delete A.cdata),D=w[w.length-1],A[y].match(/^\s*$/)&&!m?(b=A[y],delete A[y]):(v.options.trim&&(A[y]=A[y].trim()),v.options.normalize&&(A[y]=A[y].replace(/\s{2,}/g," ").trim()),A[y]=v.options.valueProcessors?o(v.options.valueProcessors,A[y],L):A[y],Object.keys(A).length===1&&y in A&&!v.EXPLICIT_CHARKEY&&(A=A[y])),r(A)&&(A=v.options.emptyTag!==""?v.options.emptyTag:b),v.options.validator!=null&&(k="/"+function(){var F,X,K;for(K=[],F=0,X=w.length;F<X;F++)N=w[F],K.push(N["#name"]);return K}().concat(L).join("/"),function(){var F;try{return A=v.options.validator(k,D&&D[L],A)}catch(X){return F=X,v.emit("error",F)}}()),v.options.explicitChildren&&!v.options.mergeAttrs&&typeof A=="object"){if(!v.options.preserveChildrenOrder)N={},v.options.attrkey in A&&(N[v.options.attrkey]=A[v.options.attrkey],delete A[v.options.attrkey]),!v.options.charsAsChildren&&v.options.charkey in A&&(N[v.options.charkey]=A[v.options.charkey],delete A[v.options.charkey]),Object.getOwnPropertyNames(A).length>0&&(N[v.options.childkey]=A),A=N;else if(D){D[v.options.childkey]=D[v.options.childkey]||[],_={};for(T in A)s.call(A,T)&&(_[T]=A[T]);D[v.options.childkey].push(_),delete A["#name"],Object.keys(A).length===1&&y in A&&!v.EXPLICIT_CHARKEY&&(A=A[y])}}return w.length>0?v.assignOrPush(D,L,A):(v.options.explicitRoot&&(O=A,A={},A[L]=O),v.resultObject=A,v.saxParser.ended=!0,v.emit("end",v.resultObject))}}(this),E=function(v){return function(m){var b,T;if(T=w[w.length-1],T)return T[y]+=m,v.options.explicitChildren&&v.options.preserveChildrenOrder&&v.options.charsAsChildren&&(v.options.includeWhiteChars||m.replace(/\\n/g,"").trim()!=="")&&(T[v.options.childkey]=T[v.options.childkey]||[],b={"#name":"__text__"},b[y]=m,v.options.normalize&&(b[y]=b[y].replace(/\s{2,}/g," ").trim()),T[v.options.childkey].push(b)),T}}(this),this.saxParser.ontext=E,this.saxParser.oncdata=function(v){return function(m){var b;if(b=E(m),b)return b.cdata=!0}}()},h.prototype.parseString=function(p,y){var E;y!=null&&typeof y=="function"&&(this.on("end",function(w){return this.reset(),y(null,w)}),this.on("error",function(w){return this.reset(),y(w)}));try{return p=p.toString(),p.trim()===""?(this.emit("end",null),!0):(p=t.stripBOM(p),this.options.async?(this.remaining=p,f(this.processAsync),this.saxParser):this.saxParser.write(p).close())}catch(w){if(E=w,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw E}else return this.emit("error",E),this.saxParser.errThrown=!0}},h.prototype.parseStringPromise=function(p){return new Promise(function(y){return function(E,w){return y.parseString(p,function(v,m){return v?w(v):E(m)})}}(this))},h}(n),e.parseString=function(l,h,p){var y,E,w;return p!=null?(typeof p=="function"&&(y=p),typeof h=="object"&&(E=h)):(typeof h=="function"&&(y=h),E={}),w=new e.Parser(E),w.parseString(l,y)},e.parseStringPromise=function(l,h){var p,y;return typeof h=="object"&&(p=h),y=new e.Parser(p),y.parseStringPromise(l)}}).call(B)}(Hr)),Hr}var Ml;(function(){var e,t,i,n=function(o,a){for(var u in a)r.call(a,u)&&(o[u]=a[u]);function f(){this.constructor=o}return f.prototype=a.prototype,o.prototype=new f,o.__super__=a.prototype,o},r={}.hasOwnProperty;t=Do(),e=S_(),i=G_(),Al(),t.defaults,function(o){n(a,o);function a(u){this.message=u}return a}(Error),e.Builder,i.Parser,Ml=i.parseString,i.parseStringPromise}).call(B);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function vt(e,t,i,n){function r(o){return o instanceof i?o:new i(function(a){a(o)})}return new(i||(i=Promise))(function(o,a){function u(d){try{c(n.next(d))}catch(s){a(s)}}function f(d){try{c(n.throw(d))}catch(s){a(s)}}function c(d){d.done?o(d.value):r(d.value).then(u,f)}c((n=n.apply(e,t||[])).next())})}var ti;(function(e){e.ELLIPSE="ellipse",e.POINT="point",e.POLYGON="polygon",e.RECTANGLE="rectangle"})(ti||(ti={}));var ye;(function(e){e.EDITOR_SETTINGS="editorsettings",e.GROUP="group",e.IMAGE_LAYER="imagelayer",e.LAYER="layer",e.OBJECT_GROUP="objectgroup",e.PROPERTIES="properties",e.TILESET="tileset"})(ye||(ye={}));var xn;(function(e){e.BASE64="base64",e.CSV="csv"})(xn||(xn={}));var Si;(function(e){e.GZIP="gzip",e.ZLIB="zlib"})(Si||(Si={}));var mt;(function(e){e[e.DIAGONALLY=536870912]="DIAGONALLY",e[e.HORIZONTALLY=2147483648]="HORIZONTALLY",e[e.VERTICALLY=1073741824]="VERTICALLY"})(mt||(mt={}));const Je=e=>!!(e&&e.length>0),V_=e=>!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i),W_=e=>vt(void 0,void 0,void 0,function*(){return new Promise(t=>{fetch(e).then(i=>i.text()).then(i=>t(i))})}),Ys=(e,t)=>{const i=[];if(e.length!==t)throw new Error(`Expected ${t} bytes of tile data; received ${e.length}`);for(let n=0;n<t;n+=4)i.push(e.readUInt32LE(n));return i},Ue=e=>e&&Object.entries(e).map(([t,i])=>({[t]:i})),Rn=e=>({properties:e&&Object.assign({},...e.map(({property:t})=>Object.assign({},...t.map(({$:{name:i,value:n},_:r})=>({[i]:n||r})))))||null}),Rl=e=>({H:!!(e&mt.HORIZONTALLY),V:!!(e&mt.VERTICALLY),D:!!(e&mt.DIAGONALLY)}),kl=e=>e&=~(mt.HORIZONTALLY|mt.VERTICALLY|mt.DIAGONALLY),Z_=e=>e.point&&ti.POINT||e.ellipse&&ti.ELLIPSE||e.polygon&&ti.POLYGON||ti.RECTANGLE,$_=e=>{if(e==="true")return!0;if(e==="false")return!1;if(`${e}`.match(/^[+-]?\d+(\.\d+)?$/g)){const t=parseFloat(e);return isNaN(t)?e:t}return e},q_=e=>vt(void 0,void 0,void 0,function*(){const t=V_(e)?yield W_(e):e;return new Promise(i=>Ml(t,{explicitChildren:!0,preserveChildrenOrder:!0,attrValueProcessors:[n=>$_(n)]},(n,r)=>{if(n)throw n;i(r)}))}),Pl=e=>{const{$:t,properties:i,polygon:n,text:r}=e,o=Object.assign(Object.assign(Object.assign({shape:Z_(e)},Je(n)&&{points:n[0].$.points.split(" ").map(a=>{const[u,f]=a.split(",");return[parseFloat(u),parseFloat(f)]})}),Rn(i)),...Ue(t));return r&&(o.text=r[0]._,o.properties=Object.assign({},o.properties,r[0].$)),o.gid&&(o.flips=Rl(o.gid),o.gid=kl(o.gid)),o},Y_=e=>{const{$:t,image:i,object:n,properties:r}=e;return Object.assign(Object.assign(Object.assign(Object.assign({type:e["#name"],visible:1},Je(i)&&{image:Object.assign({},...Ue(i[0].$))}),Je(n)&&{objects:n.map(o=>Pl(o))}),Rn(r)),...Ue(t))},K_=e=>{const{$:t,animation:i,objectgroup:n}=e,r=Je(n)&&n[0].object;return Object.assign(Object.assign(Object.assign({},Je(i)&&{animation:{frames:i[0].frame.map(({$:o})=>Object.assign({},...Ue(o)))}}),Je(r)&&{objects:r.map(o=>Pl(o))}),...Ue(t))},Q_=(e,t,i)=>vt(void 0,void 0,void 0,function*(){return Object.assign(Object.assign({type:e["#name"],layers:Je(e.$$)?yield Promise.all(e.$$.map(n=>Fl(n,t,i))):[]},Rn(e.properties)),...Ue(e.$))}),J_=e=>{const{$:t,$$:i,tile:n}=e,r=i&&Object.assign({},...Ue(i[0].$));if(r){const o=Je(n)&&n.map(a=>K_(a));return Object.assign({},...Ue(t),{image:r,tiles:o})}else throw new Error("Tilesets should be embeded in a map file.")};function em(e,t,i){return vt(this,void 0,void 0,function*(){const{data:n,properties:r}=e;if(!Je(n))throw new Error("TMXLayer data corrupted!");const o=Object.assign(Object.assign(Object.assign(Object.assign({},i?{flips:[]}:{}),{type:e["#name"],visible:1}),Rn(r)),...Ue(e.$)),{_:a,$:u,tile:f}=n[0];if(f)o.data=f.map(({$:c})=>c&&c.gid||0);else{const{encoding:c,compression:d}=u,s=a.trim();switch(c){case xn.CSV:o.data=s.split(",");break;case xn.BASE64:const l=new C(s,c);switch(d){case null:case void 0:o.data=Ys(l,t);break;case Si.GZIP:case Si.ZLIB:const h=d===Si.GZIP?fs.gunzip:fs.inflate;o.data=yield new Promise((p,y)=>h(l,(E,w)=>{E&&y(E),p(Ys(w,t))}));break;default:throw new Error(`unsupported compression: ${d}`)}}}return o.data.map((c,d)=>{i?(o.flips[d]=Rl(c),o.data[d]=kl(c)):o.data[d]=c}),o})}const Fl=(e,t,i)=>vt(void 0,void 0,void 0,function*(){switch(e["#name"]){case ye.GROUP:return yield Q_(e,t,i);case ye.LAYER:return yield em(e,t,i);case ye.IMAGE_LAYER:case ye.OBJECT_GROUP:return Y_(e)}});function tm(e,t){return vt(this,void 0,void 0,function*(){const{map:{$:i,$$:n}}=yield q_(e),r=Object.assign({layers:[],tilesets:[],backgroundcolor:"",height:0,infinite:0,nextlayerid:0,nextobjectid:0,orientation:"",renderorder:"",tiledversion:"",tileheight:0,tilewidth:0,version:0,width:0,properties:void 0},...Ue(i)),o=r.width*r.height*4;return yield Promise.all(n.map((a,u)=>vt(this,void 0,void 0,function*(){switch(a["#name"]){case ye.PROPERTIES:r.properties=Object.assign({},...a.$$.map(({$:{name:f,value:c}})=>({[f]:c})));break;case ye.EDITOR_SETTINGS:r.editorsettings=Object.assign({},...a.$$.map(f=>({[f["#name"]]:f.$})));break;case ye.TILESET:r.tilesets.push(J_(a));break;case ye.GROUP:case ye.IMAGE_LAYER:case ye.LAYER:case ye.OBJECT_GROUP:r.layers[u]=yield Fl(a,o,t);break}}))),Object.assign(Object.assign({},r),{layers:Object.values(r.layers)})})}const im=(e,t=!1)=>vt(void 0,void 0,void 0,function*(){return yield tm(e,t)}),nm=`<?xml version="1.0" encoding="UTF-8"?>
<map version="1.5" tiledversion="1.7.1" orientation="orthogonal" renderorder="right-down" compressionlevel="0" width="189" height="32" tilewidth="16" tileheight="16" infinite="0" nextlayerid="21" nextobjectid="231">
 <tileset firstgid="1" name="tiles" tilewidth="16" tileheight="16" tilecount="192" columns="16">
  <image source="../images/tileset.png" width="256" height="192"/>
  <tile id="0" type="www" probability="6"/>
  <tile id="9" type="oneWay"/>
  <tile id="10" type="oneWay"/>
  <tile id="73" type="oneWay"/>
  <tile id="74" type="oneWay"/>
  <tile id="94" type="oneWay"/>
  <tile id="95" type="oneWay"/>
  <tile id="96" type="noCollide"/>
  <tile id="114" type="noCollide"/>
  <tile id="115" type="noCollide"/>
  <tile id="123" type="noCollide"/>
  <tile id="128" type="noCollide"/>
  <tile id="129" type="noCollide"/>
  <tile id="147" type="noCollide"/>
  <tile id="148" type="noCollide"/>
  <tile id="149" type="noCollide"/>
  <tile id="150" type="noCollide"/>
  <tile id="151" type="noCollide"/>
  <tile id="163">
   <animation>
    <frame tileid="163" duration="200"/>
    <frame tileid="164" duration="200"/>
    <frame tileid="165" duration="200"/>
    <frame tileid="164" duration="200"/>
   </animation>
  </tile>
  <tile id="166">
   <animation>
    <frame tileid="166" duration="300"/>
    <frame tileid="167" duration="300"/>
   </animation>
  </tile>
  <tile id="168">
   <animation>
    <frame tileid="168" duration="200"/>
    <frame tileid="169" duration="200"/>
    <frame tileid="170" duration="200"/>
    <frame tileid="169" duration="200"/>
   </animation>
  </tile>
  <tile id="176">
   <animation>
    <frame tileid="176" duration="100"/>
    <frame tileid="177" duration="100"/>
    <frame tileid="178" duration="100"/>
    <frame tileid="179" duration="100"/>
    <frame tileid="180" duration="100"/>
   </animation>
  </tile>
  <tile id="181">
   <animation>
    <frame tileid="181" duration="100"/>
    <frame tileid="182" duration="100"/>
    <frame tileid="183" duration="100"/>
    <frame tileid="184" duration="100"/>
    <frame tileid="185" duration="100"/>
    <frame tileid="184" duration="100"/>
    <frame tileid="183" duration="100"/>
    <frame tileid="182" duration="100"/>
    <frame tileid="181" duration="100"/>
   </animation>
  </tile>
  <tile id="186">
   <animation>
    <frame tileid="186" duration="100"/>
    <frame tileid="187" duration="100"/>
    <frame tileid="188" duration="100"/>
    <frame tileid="189" duration="100"/>
    <frame tileid="190" duration="100"/>
    <frame tileid="187" duration="100"/>
   </animation>
  </tile>
 </tileset>
 <layer id="1" name="background" width="189" height="32">
  <data encoding="base64" compression="zlib">
   eAHtWmeLFEEQPcyCOaIYTj1zjvjB7Jnwi4o5gYqIAQOYUfGjYsB/oIIY/qWv9qaWsqienTnOm9m5V/C2u6uru6vePJrbvenpoZEBMkAGyMBwMDAKh4wejoN4BhmoCQNjkIeARgaazsBYFDgOoOab/qRZn2VgPDVv6WB/hDDAe36EPGiW2WZANT+h7WGHDDSbAdX8xGaXyerIQJsB1XzbwQ4ZaDgD1HzDHzDLazEwyfBAzRsy2G0UA5NNNVPQnwpMA6h5Qwy7jWFgOiqZ4aqZifEsoIjm+X6CI4/DrmBAtB1ZEc0XiYn2po8MVMkANV8l+zy7CgbqoHn7naIKDnjmyGLgf2h+dgkKo+8UJZYzlAyUZsBrvsx7lbLWr5cEIl9eYmXj8/biHBnoxECkt7z3Kov8hh/tmZeHxM/JC+BcpQzMrfT0oT88pTfxR9rV3/AlE43xeo3WSbxwF/3dk4qXNbRqGPB3WzVZDN2pRepRPc/DsfPd0Z1+w09pOLVnKt4d2/XDBahgIbAIWFzzavRu0/9PRunugnM3sCeahK8XWAIsBZYBVZrWIzmk9Kb67MtJVGM0xH4XUJ9tNV737BRv13Z7fzkKWAGsBFYBq4E1QJ3N3m3R3XcCyZ8ETiWKWAv/OmB9Yn643bae6GzVZzSnvihGvwtE793nxeueRdteBNblDimS8wYEbQQ2AZuBLcBWoBtMnltfkOidzHc3mFPXNnS2AzvUUYNW6oks0qePS8WIP3rvPi/e791pXLc7pFO+exGwD9gPHAAOAmXteLAg8kmY9/txsFXSJc8tsg+Z82M0mfn60R4CDgP3Ml/VTaqelD5tvqmYsnum4u1ZUb+Od8gRJHoUOOYSPo3xGeAscA44D5S1W8GCyCdh3u/HwVZJV+r5vAlWXHC+ixhfAmSPT26uqmGqHvGn5iTXa9m8xFwXh7HUutSeqXizZdjth7dud8hl5HQFuOoyvo/xA0A5eIj+IxPjtWKm2t1It5FPFni/H7c3zel8xpw+58dZ3BO0T4FngNTyHHgBvATEbg80rc9X+HwNpGo2oaW7Rfiym940A8nHm9Ypc1LrT+AP8Bv4AdTFBnOHlOXK1ioa6GSi+S/AW8DrQ/j0eAffe8BqBcOW3cCnfVaZu2cnOgIxr+WvA+5//BqbTdWuEX2Jrn4FmWk9fsry9Q2T302A8CZ7SSv7NsUGe4fkcdUUblgHGSADZIAMkAEyQAbIABmoioG/uok95w==
  </data>
 </layer>
 <layer id="2" name="main" width="189" height="32">
  <data encoding="base64" compression="zlib">
   eAHt2EEKgkAUAFCJVnWBztQl6gYtCtq06ArduO/CUBmsEB0cn/AhTefPf/ORwapyECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAoCyBXZSzL6sk1RAgQIAAAQIEPgKxz3nW+506HAQIECCwTAHv8mWum1nPJ+DbznzWMo0XaPbm+na8pRHWK9DsjdYroHICBAgQIECgdIFD6QWqjwABAgQIEFitgO+i45f+GEMMRTvDr/e1n/GbAIF8AqdIfc6XXmYCBELgGrGdKAB3BR5xeulZ37q3fD3rr9cr8UQ/x1Trmxr333oS0x+81K8/NYec1wYnP8Ofm8hxj8hpIDd/PaAH9IAe0AN6QA/ogaX2wBsdyxja
  </data>
 </layer>
 <objectgroup id="3" name="objects">
  <properties>
   <property name="collide" type="bool" value="true"/>
  </properties>
  <object id="159" name="Player" type="player" x="16" y="400" width="53" height="53"/>
  <object id="20" name="bat" type="bat" x="2404" y="347" width="28" height="28"/>
  <object id="69" name="Spikes" type="spikes" x="1440" y="440" width="64" height="16"/>
  <object id="101" name="Spider trap" type="spider" x="1568" y="340" width="16" height="23">
   <properties>
    <property name="delay" value="800"/>
   </properties>
  </object>
  <object id="102" name="Spider trap" type="spider" x="2928" y="329" width="16" height="23">
   <properties>
    <property name="delay" value="800"/>
   </properties>
  </object>
  <object id="150" name="bat" type="bat" x="1888" y="352" width="28" height="28"/>
  <object id="165" name="bat" type="bat" x="944" y="368" width="28" height="28"/>
  <object id="177" name="Zombie emitter" type="emitter" x="608" y="456" width="96" height="16">
   <properties>
    <property name="max" type="int" value="3"/>
    <property name="volume" type="int" value="1"/>
   </properties>
  </object>
  <object id="178" name="Zombie emitter" type="emitter" x="2096" y="456" width="224" height="16">
   <properties>
    <property name="max" type="int" value="6"/>
    <property name="volume" type="int" value="2"/>
   </properties>
  </object>
  <object id="179" name="Zombie emitter" type="emitter" x="2736" y="424" width="224" height="16">
   <properties>
    <property name="max" type="int" value="6"/>
    <property name="volume" type="int" value="2"/>
   </properties>
  </object>
  <object id="181" name="Zombie emitter" type="emitter" x="2432" y="440" width="176" height="16">
   <properties>
    <property name="max" type="int" value="4"/>
    <property name="volume" type="int" value="1"/>
   </properties>
  </object>
  <object id="183" name="Zombie emitter" type="emitter" x="992" y="456" width="80" height="16">
   <properties>
    <property name="max" type="int" value="4"/>
    <property name="volume" type="int" value="1"/>
   </properties>
  </object>
  <object id="185" name="Zombie emitter" type="emitter" x="1232" y="456" width="80" height="16">
   <properties>
    <property name="max" type="int" value="2"/>
    <property name="volume" type="int" value="1"/>
   </properties>
  </object>
  <object id="187" name="Zombie emitter" type="emitter" x="1536" y="440" width="112" height="16">
   <properties>
    <property name="max" type="int" value="2"/>
    <property name="volume" type="int" value="1"/>
   </properties>
  </object>
  <object id="188" name="Zombie emitter" type="emitter" x="1792" y="440" width="192" height="16">
   <properties>
    <property name="max" type="int" value="2"/>
    <property name="volume" type="int" value="1"/>
   </properties>
  </object>
  <object id="220" name="Zombie emitter" type="emitter" x="352" y="472" width="64" height="16">
   <properties>
    <property name="max" type="int" value="4"/>
    <property name="volume" type="int" value="1"/>
   </properties>
  </object>
  <object id="222" name="Zombie emitter" type="emitter" x="112" y="472" width="64" height="16">
   <properties>
    <property name="max" type="int" value="2"/>
    <property name="volume" type="int" value="1"/>
   </properties>
  </object>
  <object id="227" type="item" gid="177" x="2512" y="144" width="16" height="16"/>
  <object id="228" type="item" gid="187" x="2384" y="256" width="16" height="16"/>
  <object id="229" type="item" gid="187" x="2400" y="256" width="16" height="16"/>
 </objectgroup>
 <layer id="4" name="foreground" width="189" height="32">
  <data encoding="base64" compression="zlib">
   eAHtlmtKQzEUhPuje/K1AHUPvsAq/hHBDfjYgW8XUBB36YzcKce0WuRSqvQLjMk5mSQ3X47iYECDAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEBgWQTOlnVwj3O3tXZH2u2xB0tXl8B/rPk9Pde+dDDn2Q41fzTHs4zpYx06kk6k9U7OjSX3bd7e+Dx+l96k5O0/lWjTBNaUqrztOJ+2/ZgJe7/Pxgynz7An5/h9/CaJPfZbOf6u5Yz0re9KietO/oZNaUtq240St22yZxyGvr/vkfvUe/q7Wzb1+4aaX4S07Z9ovn9+L/PuzpnXpZR6GHc+x/Z7PnP2Z20YO56VM2v7qxROWmXtZPZxX9fUfMb21/V3iu+lh9JfNJ7qX/RYR0+a7/IoPUkvjZ6b2POzcq/K11pV+OX+i77Pb/f3336/1UiqNTfu4tST52sdJTYze/PeWZd9M+/eHvdemzrW8LMN9RPBgBqgBqgBaoAaoAb61kD3rwUdBFaGwAd7sVJD
  </data>
 </layer>
</map>
`;class rm extends ii{id=q.FLASH;draw(){const{ctx:t,resolution:i}=this.game;this.game.getCurrentScene().flash&&(t.fillStyle=Tn.FLASH,t.fillRect(0,0,i.x,i.y))}}class om extends ii{id=q.CUSTOM_OVERLAY;darkOverlay=1;fadeSpeed=1;fadeTo=0;update(){const t=this.darkOverlay,i=this.game.delta;t!==0&&(t<0&&t+i<0||t>0&&t-i>0)&&(this.darkOverlay+=i*this.fadeSpeed*(t<0?1:-1))}draw(){const t=this.game,{ctx:i,resolution:n}=t,r=t.getCurrentScene(),o=t.draw.createPixelFontRenderer(t.getImage("font.png"),5,16),a=r.getObjectByType(j.PLAYER),u=a.energy[0]/10*4,[f,c]=a.ammo;i.drawImage(t.getImage("estrip.png"),2,2),i.drawImage(t.getImage("energy.png"),0,0,u,4,18,5,u,4),o("AMMO",n.x-25-c*3,n.y-9);for(let d=0;d<c;d++)i.drawImage(t.getImage("ammo.png"),d<f?0:3,0,4,8,n.x-7-d*3,n.y-11,4,8);Math.abs(this.darkOverlay)!==this.fadeTo&&(i.save(),i.fillStyle=Tn.BLACK,i.globalAlpha=(this.darkOverlay<0?1:0)+this.darkOverlay,i.fillRect(0,0,n.x+1,n.y+1),i.restore())}fadeIn(){this.darkOverlay=1,this.fadeTo=0}fadeOut(){this.darkOverlay=-1,this.fadeTo=1}}class am extends ii{id=q.CUSTOM_BACKGROUND;scroll=0;draw(){const{game:t}=this,{ctx:i,resolution:n}=t,{camera:r}=t.getCurrentScene(),o=t.getImage("bg2.png"),a=t.getImage("moon.png"),u=t.getImage("clouds.png"),f=r.pos.x/1.5,c=o.width-1,d=f+Math.round(-f/c)*c,s=365+r.pos.y,l=u.width-1,h=r.pos.x/8+this.scroll,p=-30+r.pos.y/4;this.scroll=this.scroll<l?this.scroll+.1:0,i.fillStyle="#47038A",i.fillRect(0,0,n.x,n.y),i.drawImage(a,n.x-70,6),i.drawImage(u,h-l,p),i.drawImage(u,h,p),i.drawImage(o,d-c,s),i.drawImage(o,d,s)}}class sm extends Jr{gravity=.7;flash=!1;player;async init(){const{game:t}=this,{layers:i,tilesets:n,tilewidth:r,tileheight:o,width:a,height:u}=await im(nm);if(this.setDimensions(a,u,r,o),this.addTileset(n[0],"tileset.png"),this.createLayers([am,i[0],rm,i[1],i[2],i[3],om]),this.player=this.getObjectByType(j.PLAYER),this.camera.moveTo(0,0),this.camera.setSpeed(.5),this.camera.setFollow(this.player,!1),t.onKeyDown("Space",()=>this.player?.shoot()),t.onKeyDown("ArrowUp",()=>this.player?.moveTo(Ae.UP)),t.onKeyDown("ArrowLeft",()=>this.player?.moveTo(Ae.LEFT)),t.onKeyDown("ArrowRight",()=>this.player?.moveTo(Ae.RIGHT)),t.setAudioVolume(.1),t.debug&&t.gui){t.gui.add(this,"gravity").listen();const f=t.gui.addFolder("Player");f.add(this.player.pos,"x").listen(),f.add(this.player.pos,"y").listen(),f.add(this.player.energy,"0").name("Energy").step(1).min(1).max(100).listen(),f.add(this.player.ammo,"1").name("Max ammo").step(1).min(2).max(20).listen(),f.add(this.player,"invincible").name("God mode").listen()}}}const Bl=document.querySelector("#canvas"),fo=new Ef({canvas:Bl,backgroundColor:"#000",scenes:[sm],entities:{[j.BAT]:Af,[j.BULLET]:Of,[j.DUST]:Sf,[j.EMITTER]:Lf,[j.ITEM]:Tf,[j.PARTICLE]:If,[j.PLAYER]:Cf,[j.SPIDER]:Mf,[j.SPIKES]:kf,[j.ZOMBIE]:Pf},debug:!0}),Ul=()=>{const e=window.innerWidth,t=window.innerHeight,i=Math.round(t/120);Object.assign(Bl,{width:e,height:t}),fo.setSize(e,t,i)};async function um(){await fo.preload(ih),fo.playScene(0),Ul()}um();window.addEventListener("resize",Ul);
//# sourceMappingURL=index-2bc00cf7.js.map
