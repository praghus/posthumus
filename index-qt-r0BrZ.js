(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();var H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function an(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),i}var Br={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var t=function(){this.init()};t.prototype={init:function(){var a=this||i;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var u=this||i;if(a=parseFloat(a),u.ctx||d(),typeof a<"u"&&a>=0&&a<=1){if(u._volume=a,u._muted)return u;u.usingWebAudio&&u.masterGain.gain.setValueAtTime(a,i.ctx.currentTime);for(var h=0;h<u._howls.length;h++)if(!u._howls[h]._webAudio)for(var g=u._howls[h]._getSoundIds(),v=0;v<g.length;v++){var w=u._howls[h]._soundById(g[v]);w&&w._node&&(w._node.volume=w._volume*a)}return u}return u._volume},mute:function(a){var u=this||i;u.ctx||d(),u._muted=a,u.usingWebAudio&&u.masterGain.gain.setValueAtTime(a?0:u._volume,i.ctx.currentTime);for(var h=0;h<u._howls.length;h++)if(!u._howls[h]._webAudio)for(var g=u._howls[h]._getSoundIds(),v=0;v<g.length;v++){var w=u._howls[h]._soundById(g[v]);w&&w._node&&(w._node.muted=a?!0:w._muted)}return u},stop:function(){for(var a=this||i,u=0;u<a._howls.length;u++)a._howls[u].stop();return a},unload:function(){for(var a=this||i,u=a._howls.length-1;u>=0;u--)a._howls[u].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,d()),a},codecs:function(a){return(this||i)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||i;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var u=new Audio;typeof u.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var u=new Audio;u.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||i,u=null;try{u=typeof Audio<"u"?new Audio:null}catch{return a}if(!u||typeof u.canPlayType!="function")return a;var h=u.canPlayType("audio/mpeg;").replace(/^no$/,""),g=a._navigator?a._navigator.userAgent:"",v=g.match(/OPR\/(\d+)/g),w=v&&parseInt(v[0].split("/")[1],10)<33,A=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,x=g.match(/Version\/(.*?) /),_=A&&x&&parseInt(x[1],10)<15;return a._codecs={mp3:!!(!w&&(h||u.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!h,opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(u.canPlayType('audio/wav; codecs="1"')||u.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!u.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(u.canPlayType("audio/x-m4b;")||u.canPlayType("audio/m4b;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!u.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(u.canPlayType("audio/x-flac;")||u.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||i;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var u=function(h){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,a._releaseHtml5Audio(g)}catch{a.noAudio=!0;break}for(var v=0;v<a._howls.length;v++)if(!a._howls[v]._webAudio)for(var w=a._howls[v]._getSoundIds(),A=0;A<w.length;A++){var x=a._howls[v]._soundById(w[A]);x&&x._node&&!x._node._unlocked&&(x._node._unlocked=!0,x._node.load())}a._autoResume();var _=a.ctx.createBufferSource();_.buffer=a._scratchBuffer,_.connect(a.ctx.destination),typeof _.start>"u"?_.noteOn(0):_.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),_.onended=function(){_.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",u,!0),document.removeEventListener("touchend",u,!0),document.removeEventListener("click",u,!0),document.removeEventListener("keydown",u,!0);for(var b=0;b<a._howls.length;b++)a._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",u,!0),document.addEventListener("touchend",u,!0),document.addEventListener("click",u,!0),document.addEventListener("keydown",u,!0),a}},_obtainHtml5Audio:function(){var a=this||i;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var u=new Audio().play();return u&&typeof Promise<"u"&&(u instanceof Promise||typeof u.then=="function")&&u.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var u=this||i;return a._unlocked&&u._html5AudioPool.push(a),u},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!i.usingWebAudio)){for(var u=0;u<a._howls.length;u++)if(a._howls[u]._webAudio){for(var h=0;h<a._howls[u]._sounds.length;h++)if(!a._howls[u]._sounds[h]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(a.autoSuspend){a._suspendTimer=null,a.state="suspending";var g=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(g,g)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!i.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var u=0;u<a._howls.length;u++)a._howls[u]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var i=new t,n=function(a){var u=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}u.init(a)};n.prototype={init:function(a){var u=this;return i.ctx||d(),u._autoplay=a.autoplay||!1,u._format=typeof a.format!="string"?a.format:[a.format],u._html5=a.html5||!1,u._muted=a.mute||!1,u._loop=a.loop||!1,u._pool=a.pool||5,u._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,u._rate=a.rate||1,u._sprite=a.sprite||{},u._src=typeof a.src!="string"?a.src:[a.src],u._volume=a.volume!==void 0?a.volume:1,u._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},u._duration=0,u._state="unloaded",u._sounds=[],u._endTimers={},u._queue=[],u._playLock=!1,u._onend=a.onend?[{fn:a.onend}]:[],u._onfade=a.onfade?[{fn:a.onfade}]:[],u._onload=a.onload?[{fn:a.onload}]:[],u._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],u._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],u._onpause=a.onpause?[{fn:a.onpause}]:[],u._onplay=a.onplay?[{fn:a.onplay}]:[],u._onstop=a.onstop?[{fn:a.onstop}]:[],u._onmute=a.onmute?[{fn:a.onmute}]:[],u._onvolume=a.onvolume?[{fn:a.onvolume}]:[],u._onrate=a.onrate?[{fn:a.onrate}]:[],u._onseek=a.onseek?[{fn:a.onseek}]:[],u._onunlock=a.onunlock?[{fn:a.onunlock}]:[],u._onresume=[],u._webAudio=i.usingWebAudio&&!u._html5,typeof i.ctx<"u"&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(u),u._autoplay&&u._queue.push({event:"play",action:function(){u.play()}}),u._preload&&u._preload!=="none"&&u.load(),u},load:function(){var a=this,u=null;if(i.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var h=0;h<a._src.length;h++){var g,v;if(a._format&&a._format[h])g=a._format[h];else{if(v=a._src[h],typeof v!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(v),g||(g=/\.([^.]+)$/.exec(v.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&i.codecs(g)){u=a._src[h];break}}if(!u){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=u,a._state="loading",window.location.protocol==="https:"&&u.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new o(a),a._webAudio&&r(a),a},play:function(a,u){var h=this,g=null;if(typeof a=="number")g=a,a=null;else{if(typeof a=="string"&&h._state==="loaded"&&!h._sprite[a])return null;if(typeof a>"u"&&(a="__default",!h._playLock)){for(var v=0,w=0;w<h._sounds.length;w++)h._sounds[w]._paused&&!h._sounds[w]._ended&&(v++,g=h._sounds[w]._id);v===1?a=null:g=null}}var A=g?h._soundById(g):h._inactiveSound();if(!A)return null;if(g&&!a&&(a=A._sprite||"__default"),h._state!=="loaded"){A._sprite=a,A._ended=!1;var x=A._id;return h._queue.push({event:"play",action:function(){h.play(x)}}),x}if(g&&!A._paused)return u||h._loadQueue("play"),A._id;h._webAudio&&i._autoResume();var _=Math.max(0,A._seek>0?A._seek:h._sprite[a][0]/1e3),b=Math.max(0,(h._sprite[a][0]+h._sprite[a][1])/1e3-_),T=b*1e3/Math.abs(A._rate),D=h._sprite[a][0]/1e3,C=(h._sprite[a][0]+h._sprite[a][1])/1e3;A._sprite=a,A._ended=!1;var O=function(){A._paused=!1,A._seek=_,A._start=D,A._stop=C,A._loop=!!(A._loop||h._sprite[a][2])};if(_>=C){h._ended(A);return}var p=A._node;if(h._webAudio){var S=function(){h._playLock=!1,O(),h._refreshBuffer(A);var z=A._muted||h._muted?0:A._volume;p.gain.setValueAtTime(z,i.ctx.currentTime),A._playStart=i.ctx.currentTime,typeof p.bufferSource.start>"u"?A._loop?p.bufferSource.noteGrainOn(0,_,86400):p.bufferSource.noteGrainOn(0,_,b):A._loop?p.bufferSource.start(0,_,86400):p.bufferSource.start(0,_,b),T!==1/0&&(h._endTimers[A._id]=setTimeout(h._ended.bind(h,A),T)),u||setTimeout(function(){h._emit("play",A._id),h._loadQueue()},0)};i.state==="running"&&i.ctx.state!=="interrupted"?S():(h._playLock=!0,h.once("resume",S),h._clearTimer(A._id))}else{var N=function(){p.currentTime=_,p.muted=A._muted||h._muted||i._muted||p.muted,p.volume=A._volume*i.volume(),p.playbackRate=A._rate;try{var z=p.play();if(z&&typeof Promise<"u"&&(z instanceof Promise||typeof z.then=="function")?(h._playLock=!0,O(),z.then(function(){h._playLock=!1,p._unlocked=!0,u?h._loadQueue():h._emit("play",A._id)}).catch(function(){h._playLock=!1,h._emit("playerror",A._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),A._ended=!0,A._paused=!0})):u||(h._playLock=!1,O(),h._emit("play",A._id)),p.playbackRate=A._rate,p.paused){h._emit("playerror",A._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||A._loop?h._endTimers[A._id]=setTimeout(h._ended.bind(h,A),T):(h._endTimers[A._id]=function(){h._ended(A),p.removeEventListener("ended",h._endTimers[A._id],!1)},p.addEventListener("ended",h._endTimers[A._id],!1))}catch(J){h._emit("playerror",A._id,J)}};p.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(p.src=h._src,p.load());var P=window&&window.ejecta||!p.readyState&&i._navigator.isCocoonJS;if(p.readyState>=3||P)N();else{h._playLock=!0,h._state="loading";var j=function(){h._state="loaded",N(),p.removeEventListener(i._canPlayEvent,j,!1)};p.addEventListener(i._canPlayEvent,j,!1),h._clearTimer(A._id)}}return A._id},pause:function(a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"pause",action:function(){u.pause(a)}}),u;for(var h=u._getSoundIds(a),g=0;g<h.length;g++){u._clearTimer(h[g]);var v=u._soundById(h[g]);if(v&&!v._paused&&(v._seek=u.seek(h[g]),v._rateSeek=0,v._paused=!0,u._stopFade(h[g]),v._node))if(u._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),u._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||u._emit("pause",v?v._id:null)}return u},stop:function(a,u){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"stop",action:function(){h.stop(a)}}),h;for(var g=h._getSoundIds(a),v=0;v<g.length;v++){h._clearTimer(g[v]);var w=h._soundById(g[v]);w&&(w._seek=w._start||0,w._rateSeek=0,w._paused=!0,w._ended=!0,h._stopFade(g[v]),w._node&&(h._webAudio?w._node.bufferSource&&(typeof w._node.bufferSource.stop>"u"?w._node.bufferSource.noteOff(0):w._node.bufferSource.stop(0),h._cleanBuffer(w._node)):(!isNaN(w._node.duration)||w._node.duration===1/0)&&(w._node.currentTime=w._start||0,w._node.pause(),w._node.duration===1/0&&h._clearSound(w._node))),u||h._emit("stop",w._id))}return h},mute:function(a,u){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"mute",action:function(){h.mute(a,u)}}),h;if(typeof u>"u")if(typeof a=="boolean")h._muted=a;else return h._muted;for(var g=h._getSoundIds(u),v=0;v<g.length;v++){var w=h._soundById(g[v]);w&&(w._muted=a,w._interval&&h._stopFade(w._id),h._webAudio&&w._node?w._node.gain.setValueAtTime(a?0:w._volume,i.ctx.currentTime):w._node&&(w._node.muted=i._muted?!0:a),h._emit("mute",w._id))}return h},volume:function(){var a=this,u=arguments,h,g;if(u.length===0)return a._volume;if(u.length===1||u.length===2&&typeof u[1]>"u"){var v=a._getSoundIds(),w=v.indexOf(u[0]);w>=0?g=parseInt(u[0],10):h=parseFloat(u[0])}else u.length>=2&&(h=parseFloat(u[0]),g=parseInt(u[1],10));var A;if(typeof h<"u"&&h>=0&&h<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,u)}}),a;typeof g>"u"&&(a._volume=h),g=a._getSoundIds(g);for(var x=0;x<g.length;x++)A=a._soundById(g[x]),A&&(A._volume=h,u[2]||a._stopFade(g[x]),a._webAudio&&A._node&&!A._muted?A._node.gain.setValueAtTime(h,i.ctx.currentTime):A._node&&!A._muted&&(A._node.volume=h*i.volume()),a._emit("volume",A._id))}else return A=g?a._soundById(g):a._sounds[0],A?A._volume:0;return a},fade:function(a,u,h,g){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(a,u,h,g)}}),v;a=Math.min(Math.max(0,parseFloat(a)),1),u=Math.min(Math.max(0,parseFloat(u)),1),h=parseFloat(h),v.volume(a,g);for(var w=v._getSoundIds(g),A=0;A<w.length;A++){var x=v._soundById(w[A]);if(x){if(g||v._stopFade(w[A]),v._webAudio&&!x._muted){var _=i.ctx.currentTime,b=_+h/1e3;x._volume=a,x._node.gain.setValueAtTime(a,_),x._node.gain.linearRampToValueAtTime(u,b)}v._startFadeInterval(x,a,u,h,w[A],typeof g>"u")}}return v},_startFadeInterval:function(a,u,h,g,v,w){var A=this,x=u,_=h-u,b=Math.abs(_/.01),T=Math.max(4,b>0?g/b:g),D=Date.now();a._fadeTo=h,a._interval=setInterval(function(){var C=(Date.now()-D)/g;D=Date.now(),x+=_*C,x=Math.round(x*100)/100,_<0?x=Math.max(h,x):x=Math.min(h,x),A._webAudio?a._volume=x:A.volume(x,a._id,!0),w&&(A._volume=x),(h<u&&x<=h||h>u&&x>=h)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,A.volume(h,a._id),A._emit("fade",a._id))},T)},_stopFade:function(a){var u=this,h=u._soundById(a);return h&&h._interval&&(u._webAudio&&h._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(h._interval),h._interval=null,u.volume(h._fadeTo,a),h._fadeTo=null,u._emit("fade",a)),u},loop:function(){var a=this,u=arguments,h,g,v;if(u.length===0)return a._loop;if(u.length===1)if(typeof u[0]=="boolean")h=u[0],a._loop=h;else return v=a._soundById(parseInt(u[0],10)),v?v._loop:!1;else u.length===2&&(h=u[0],g=parseInt(u[1],10));for(var w=a._getSoundIds(g),A=0;A<w.length;A++)v=a._soundById(w[A]),v&&(v._loop=h,a._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=h,h&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,a.playing(w[A])&&(a.pause(w[A],!0),a.play(w[A],!0)))));return a},rate:function(){var a=this,u=arguments,h,g;if(u.length===0)g=a._sounds[0]._id;else if(u.length===1){var v=a._getSoundIds(),w=v.indexOf(u[0]);w>=0?g=parseInt(u[0],10):h=parseFloat(u[0])}else u.length===2&&(h=parseFloat(u[0]),g=parseInt(u[1],10));var A;if(typeof h=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,u)}}),a;typeof g>"u"&&(a._rate=h),g=a._getSoundIds(g);for(var x=0;x<g.length;x++)if(A=a._soundById(g[x]),A){a.playing(g[x])&&(A._rateSeek=a.seek(g[x]),A._playStart=a._webAudio?i.ctx.currentTime:A._playStart),A._rate=h,a._webAudio&&A._node&&A._node.bufferSource?A._node.bufferSource.playbackRate.setValueAtTime(h,i.ctx.currentTime):A._node&&(A._node.playbackRate=h);var _=a.seek(g[x]),b=(a._sprite[A._sprite][0]+a._sprite[A._sprite][1])/1e3-_,T=b*1e3/Math.abs(A._rate);(a._endTimers[g[x]]||!A._paused)&&(a._clearTimer(g[x]),a._endTimers[g[x]]=setTimeout(a._ended.bind(a,A),T)),a._emit("rate",A._id)}}else return A=a._soundById(g),A?A._rate:a._rate;return a},seek:function(){var a=this,u=arguments,h,g;if(u.length===0)a._sounds.length&&(g=a._sounds[0]._id);else if(u.length===1){var v=a._getSoundIds(),w=v.indexOf(u[0]);w>=0?g=parseInt(u[0],10):a._sounds.length&&(g=a._sounds[0]._id,h=parseFloat(u[0]))}else u.length===2&&(h=parseFloat(u[0]),g=parseInt(u[1],10));if(typeof g>"u")return 0;if(typeof h=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,u)}}),a;var A=a._soundById(g);if(A)if(typeof h=="number"&&h>=0){var x=a.playing(g);x&&a.pause(g,!0),A._seek=h,A._ended=!1,a._clearTimer(g),!a._webAudio&&A._node&&!isNaN(A._node.duration)&&(A._node.currentTime=h);var _=function(){x&&a.play(g,!0),a._emit("seek",g)};if(x&&!a._webAudio){var b=function(){a._playLock?setTimeout(b,0):_()};setTimeout(b,0)}else _()}else if(a._webAudio){var T=a.playing(g)?i.ctx.currentTime-A._playStart:0,D=A._rateSeek?A._rateSeek-A._seek:0;return A._seek+(D+T*Math.abs(A._rate))}else return A._node.currentTime;return a},playing:function(a){var u=this;if(typeof a=="number"){var h=u._soundById(a);return h?!h._paused:!1}for(var g=0;g<u._sounds.length;g++)if(!u._sounds[g]._paused)return!0;return!1},duration:function(a){var u=this,h=u._duration,g=u._soundById(a);return g&&(h=u._sprite[g._sprite][1]/1e3),h},state:function(){return this._state},unload:function(){for(var a=this,u=a._sounds,h=0;h<u.length;h++)u[h]._paused||a.stop(u[h]._id),a._webAudio||(a._clearSound(u[h]._node),u[h]._node.removeEventListener("error",u[h]._errorFn,!1),u[h]._node.removeEventListener(i._canPlayEvent,u[h]._loadFn,!1),u[h]._node.removeEventListener("ended",u[h]._endFn,!1),i._releaseHtml5Audio(u[h]._node)),delete u[h]._node,a._clearTimer(u[h]._id);var g=i._howls.indexOf(a);g>=0&&i._howls.splice(g,1);var v=!0;for(h=0;h<i._howls.length;h++)if(i._howls[h]._src===a._src||a._src.indexOf(i._howls[h]._src)>=0){v=!1;break}return s&&v&&delete s[a._src],i.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,u,h,g){var v=this,w=v["_on"+a];return typeof u=="function"&&w.push(g?{id:h,fn:u,once:g}:{id:h,fn:u}),v},off:function(a,u,h){var g=this,v=g["_on"+a],w=0;if(typeof u=="number"&&(h=u,u=null),u||h)for(w=0;w<v.length;w++){var A=h===v[w].id;if(u===v[w].fn&&A||!u&&A){v.splice(w,1);break}}else if(a)g["_on"+a]=[];else{var x=Object.keys(g);for(w=0;w<x.length;w++)x[w].indexOf("_on")===0&&Array.isArray(g[x[w]])&&(g[x[w]]=[])}return g},once:function(a,u,h){var g=this;return g.on(a,u,h,1),g},_emit:function(a,u,h){for(var g=this,v=g["_on"+a],w=v.length-1;w>=0;w--)(!v[w].id||v[w].id===u||a==="load")&&(setTimeout(function(A){A.call(this,u,h)}.bind(g,v[w].fn),0),v[w].once&&g.off(a,v[w].fn,v[w].id));return g._loadQueue(a),g},_loadQueue:function(a){var u=this;if(u._queue.length>0){var h=u._queue[0];h.event===a&&(u._queue.shift(),u._loadQueue()),a||h.action()}return u},_ended:function(a){var u=this,h=a._sprite;if(!u._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(u._ended.bind(u,a),100),u;var g=!!(a._loop||u._sprite[h][2]);if(u._emit("end",a._id),!u._webAudio&&g&&u.stop(a._id,!0).play(a._id),u._webAudio&&g){u._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=i.ctx.currentTime;var v=(a._stop-a._start)*1e3/Math.abs(a._rate);u._endTimers[a._id]=setTimeout(u._ended.bind(u,a),v)}return u._webAudio&&!g&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,u._clearTimer(a._id),u._cleanBuffer(a._node),i._autoSuspend()),!u._webAudio&&!g&&u.stop(a._id,!0),u},_clearTimer:function(a){var u=this;if(u._endTimers[a]){if(typeof u._endTimers[a]!="function")clearTimeout(u._endTimers[a]);else{var h=u._soundById(a);h&&h._node&&h._node.removeEventListener("ended",u._endTimers[a],!1)}delete u._endTimers[a]}return u},_soundById:function(a){for(var u=this,h=0;h<u._sounds.length;h++)if(a===u._sounds[h]._id)return u._sounds[h];return null},_inactiveSound:function(){var a=this;a._drain();for(var u=0;u<a._sounds.length;u++)if(a._sounds[u]._ended)return a._sounds[u].reset();return new o(a)},_drain:function(){var a=this,u=a._pool,h=0,g=0;if(!(a._sounds.length<u)){for(g=0;g<a._sounds.length;g++)a._sounds[g]._ended&&h++;for(g=a._sounds.length-1;g>=0;g--){if(h<=u)return;a._sounds[g]._ended&&(a._webAudio&&a._sounds[g]._node&&a._sounds[g]._node.disconnect(0),a._sounds.splice(g,1),h--)}}},_getSoundIds:function(a){var u=this;if(typeof a>"u"){for(var h=[],g=0;g<u._sounds.length;g++)h.push(u._sounds[g]._id);return h}else return[a]},_refreshBuffer:function(a){var u=this;return a._node.bufferSource=i.ctx.createBufferSource(),a._node.bufferSource.buffer=s[u._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,i.ctx.currentTime),u},_cleanBuffer:function(a){var u=this,h=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(!a.bufferSource)return u;if(i._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),h))try{a.bufferSource.buffer=i._scratchBuffer}catch{}return a.bufferSource=null,u},_clearSound:function(a){var u=/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent);u||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(a){this._parent=a,this.init()};o.prototype={init:function(){var a=this,u=a._parent;return a._muted=u._muted,a._loop=u._loop,a._volume=u._volume,a._rate=u._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++i._counter,u._sounds.push(a),a.create(),a},create:function(){var a=this,u=a._parent,h=i._muted||a._muted||a._parent._muted?0:a._volume;return u._webAudio?(a._node=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),a._node.gain.setValueAtTime(h,i.ctx.currentTime),a._node.paused=!0,a._node.connect(i.masterGain)):i.noAudio||(a._node=i._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(i._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=u._src,a._node.preload=u._preload===!0?"auto":u._preload,a._node.volume=h*i.volume(),a._node.load()),a},reset:function(){var a=this,u=a._parent;return a._muted=u._muted,a._loop=u._loop,a._volume=u._volume,a._rate=u._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++i._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,u=a._parent;u._duration=Math.ceil(a._node.duration*10)/10,Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue()),a._node.removeEventListener(i._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,u=a._parent;u._duration===1/0&&(u._duration=Math.ceil(a._node.duration*10)/10,u._sprite.__default[1]===1/0&&(u._sprite.__default[1]=u._duration*1e3),u._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var s={},r=function(a){var u=a._src;if(s[u]){a._duration=s[u].duration,f(a);return}if(/^data:[^;]+;base64,/.test(u)){for(var h=atob(u.split(",")[1]),g=new Uint8Array(h.length),v=0;v<h.length;++v)g[v]=h.charCodeAt(v);c(g.buffer,a)}else{var w=new XMLHttpRequest;w.open(a._xhr.method,u,!0),w.withCredentials=a._xhr.withCredentials,w.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(A){w.setRequestHeader(A,a._xhr.headers[A])}),w.onload=function(){var A=(w.status+"")[0];if(A!=="0"&&A!=="2"&&A!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+w.status+".");return}c(w.response,a)},w.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete s[u],a.load())},l(w)}},l=function(a){try{a.send()}catch{a.onerror()}},c=function(a,u){var h=function(){u._emit("loaderror",null,"Decoding audio data failed.")},g=function(v){v&&u._sounds.length>0?(s[u._src]=v,f(u,v)):h()};typeof Promise<"u"&&i.ctx.decodeAudioData.length===1?i.ctx.decodeAudioData(a).then(g).catch(h):i.ctx.decodeAudioData(a,g,h)},f=function(a,u){u&&!a._duration&&(a._duration=u.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},d=function(){if(i.usingWebAudio){try{typeof AudioContext<"u"?i.ctx=new AudioContext:typeof webkitAudioContext<"u"?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch{i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),u=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),h=u?parseInt(u[1],10):null;if(a&&h&&h<9){var g=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!g&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};e.Howler=i,e.Howl=n,typeof H<"u"?(H.HowlerGlobal=t,H.Howler=i,H.Howl=n,H.Sound=o):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=i,window.Howl=n,window.Sound=o)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(i){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var o=n._howls.length-1;o>=0;o--)n._howls[o].stereo(i);return n},HowlerGlobal.prototype.pos=function(i,n,o){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,o=typeof o!="number"?s._pos[2]:o,typeof i=="number")s._pos=[i,n,o],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(i,n,o,s,r,l){var c=this;if(!c.ctx||!c.ctx.listener)return c;var f=c._orientation;if(n=typeof n!="number"?f[1]:n,o=typeof o!="number"?f[2]:o,s=typeof s!="number"?f[3]:s,r=typeof r!="number"?f[4]:r,l=typeof l!="number"?f[5]:l,typeof i=="number")c._orientation=[i,n,o,s,r,l],typeof c.ctx.listener.forwardX<"u"?(c.ctx.listener.forwardX.setTargetAtTime(i,Howler.ctx.currentTime,.1),c.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),c.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),c.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),c.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),c.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):c.ctx.listener.setOrientation(i,n,o,s,r,l);else return f;return c},Howl.prototype.init=function(i){return function(n){var o=this;return o._orientation=n.orientation||[1,0,0],o._stereo=n.stereo||null,o._pos=n.pos||null,o._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},o._onstereo=n.onstereo?[{fn:n.onstereo}]:[],o._onpos=n.onpos?[{fn:n.onpos}]:[],o._onorientation=n.onorientation?[{fn:n.onorientation}]:[],i.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(i,n){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"stereo",action:function(){o.stereo(i,n)}}),o;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof i=="number")o._stereo=i,o._pos=[i,0,0];else return o._stereo;for(var r=o._getSoundIds(n),l=0;l<r.length;l++){var c=o._soundById(r[l]);if(c)if(typeof i=="number")c._stereo=i,c._pos=[i,0,0],c._node&&(c._pannerAttr.panningModel="equalpower",(!c._panner||!c._panner.pan)&&t(c,s),s==="spatial"?typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):c._panner.setPosition(i,0,0):c._panner.pan.setValueAtTime(i,Howler.ctx.currentTime)),o._emit("stereo",c._id);else return c._stereo}return o},Howl.prototype.pos=function(i,n,o,s){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"pos",action:function(){r.pos(i,n,o,s)}}),r;if(n=typeof n!="number"?0:n,o=typeof o!="number"?-.5:o,typeof s>"u")if(typeof i=="number")r._pos=[i,n,o];else return r._pos;for(var l=r._getSoundIds(s),c=0;c<l.length;c++){var f=r._soundById(l[c]);if(f)if(typeof i=="number")f._pos=[i,n,o],f._node&&((!f._panner||f._panner.pan)&&t(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):f._panner.setPosition(i,n,o)),r._emit("pos",f._id);else return f._pos}return r},Howl.prototype.orientation=function(i,n,o,s){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"orientation",action:function(){r.orientation(i,n,o,s)}}),r;if(n=typeof n!="number"?r._orientation[1]:n,o=typeof o!="number"?r._orientation[2]:o,typeof s>"u")if(typeof i=="number")r._orientation=[i,n,o];else return r._orientation;for(var l=r._getSoundIds(s),c=0;c<l.length;c++){var f=r._soundById(l[c]);if(f)if(typeof i=="number")f._orientation=[i,n,o],f._node&&(f._panner||(f._pos||(f._pos=r._pos||[0,0,-.5]),t(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(i,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):f._panner.setOrientation(i,n,o)),r._emit("orientation",f._id);else return f._orientation}return r},Howl.prototype.pannerAttr=function(){var i=this,n=arguments,o,s,r;if(!i._webAudio)return i;if(n.length===0)return i._pannerAttr;if(n.length===1)if(typeof n[0]=="object")o=n[0],typeof s>"u"&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),i._pannerAttr={coneInnerAngle:typeof o.pannerAttr.coneInnerAngle<"u"?o.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:typeof o.pannerAttr.coneOuterAngle<"u"?o.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:typeof o.pannerAttr.coneOuterGain<"u"?o.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:typeof o.pannerAttr.distanceModel<"u"?o.pannerAttr.distanceModel:i._distanceModel,maxDistance:typeof o.pannerAttr.maxDistance<"u"?o.pannerAttr.maxDistance:i._maxDistance,refDistance:typeof o.pannerAttr.refDistance<"u"?o.pannerAttr.refDistance:i._refDistance,rolloffFactor:typeof o.pannerAttr.rolloffFactor<"u"?o.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:typeof o.pannerAttr.panningModel<"u"?o.pannerAttr.panningModel:i._panningModel});else return r=i._soundById(parseInt(n[0],10)),r?r._pannerAttr:i._pannerAttr;else n.length===2&&(o=n[0],s=parseInt(n[1],10));for(var l=i._getSoundIds(s),c=0;c<l.length;c++)if(r=i._soundById(l[c]),r){var f=r._pannerAttr;f={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:f.coneOuterGain,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:f.distanceModel,maxDistance:typeof o.maxDistance<"u"?o.maxDistance:f.maxDistance,refDistance:typeof o.refDistance<"u"?o.refDistance:f.refDistance,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:f.rolloffFactor,panningModel:typeof o.panningModel<"u"?o.panningModel:f.panningModel};var d=r._panner;d||(r._pos||(r._pos=i._pos||[0,0,-.5]),t(r,"spatial"),d=r._panner),d.coneInnerAngle=f.coneInnerAngle,d.coneOuterAngle=f.coneOuterAngle,d.coneOuterGain=f.coneOuterGain,d.distanceModel=f.distanceModel,d.maxDistance=f.maxDistance,d.refDistance=f.refDistance,d.rolloffFactor=f.rolloffFactor,d.panningModel=f.panningModel}return i},Sound.prototype.init=function(i){return function(){var n=this,o=n._parent;n._orientation=o._orientation,n._stereo=o._stereo,n._pos=o._pos,n._pannerAttr=o._pannerAttr,i.call(this),n._stereo?o.stereo(n._stereo):n._pos&&o.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(i){return function(){var n=this,o=n._parent;return n._orientation=o._orientation,n._stereo=o._stereo,n._pos=o._pos,n._pannerAttr=o._pannerAttr,n._stereo?o.stereo(n._stereo):n._pos?o.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,o._refreshBuffer(n)),i.call(this)}}(Sound.prototype.reset);var t=function(i,n){n=n||"spatial",n==="spatial"?(i._panner=Howler.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,typeof i._panner.positionX<"u"?(i._panner.positionX.setValueAtTime(i._pos[0],Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],Howler.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),typeof i._panner.orientationX<"u"?(i._panner.orientationX.setValueAtTime(i._orientation[0],Howler.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],Howler.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],Howler.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=Howler.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,Howler.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}})()})(Br);const te=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};var Ne=[],Ee=[],ru=typeof Uint8Array<"u"?Uint8Array:Array,zr=!1;function ya(){zr=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=e.length;t<i;++t)Ne[t]=e[t],Ee[e.charCodeAt(t)]=t;Ee[45]=62,Ee[95]=63}function su(e){zr||ya();var t,i,n,o,s,r,l=e.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=e[l-2]==="="?2:e[l-1]==="="?1:0,r=new ru(l*3/4-s),n=s>0?l-4:l;var c=0;for(t=0,i=0;t<n;t+=4,i+=3)o=Ee[e.charCodeAt(t)]<<18|Ee[e.charCodeAt(t+1)]<<12|Ee[e.charCodeAt(t+2)]<<6|Ee[e.charCodeAt(t+3)],r[c++]=o>>16&255,r[c++]=o>>8&255,r[c++]=o&255;return s===2?(o=Ee[e.charCodeAt(t)]<<2|Ee[e.charCodeAt(t+1)]>>4,r[c++]=o&255):s===1&&(o=Ee[e.charCodeAt(t)]<<10|Ee[e.charCodeAt(t+1)]<<4|Ee[e.charCodeAt(t+2)]>>2,r[c++]=o>>8&255,r[c++]=o&255),r}function ou(e){return Ne[e>>18&63]+Ne[e>>12&63]+Ne[e>>6&63]+Ne[e&63]}function au(e,t,i){for(var n,o=[],s=t;s<i;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(ou(n));return o.join("")}function Ts(e){zr||ya();for(var t,i=e.length,n=i%3,o="",s=[],r=16383,l=0,c=i-n;l<c;l+=r)s.push(au(e,l,l+r>c?c:l+r));return n===1?(t=e[i-1],o+=Ne[t>>2],o+=Ne[t<<4&63],o+="=="):n===2&&(t=(e[i-2]<<8)+e[i-1],o+=Ne[t>>10],o+=Ne[t>>4&63],o+=Ne[t<<2&63],o+="="),s.push(o),s.join("")}function ln(e,t,i,n,o){var s,r,l=o*8-n-1,c=(1<<l)-1,f=c>>1,d=-7,a=i?o-1:0,u=i?-1:1,h=e[t+a];for(a+=u,s=h&(1<<-d)-1,h>>=-d,d+=l;d>0;s=s*256+e[t+a],a+=u,d-=8);for(r=s&(1<<-d)-1,s>>=-d,d+=n;d>0;r=r*256+e[t+a],a+=u,d-=8);if(s===0)s=1-f;else{if(s===c)return r?NaN:(h?-1:1)*(1/0);r=r+Math.pow(2,n),s=s-f}return(h?-1:1)*r*Math.pow(2,s-n)}function va(e,t,i,n,o,s){var r,l,c,f=s*8-o-1,d=(1<<f)-1,a=d>>1,u=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,g=n?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-r))<1&&(r--,c*=2),r+a>=1?t+=u/c:t+=u*Math.pow(2,1-a),t*c>=2&&(r++,c/=2),r+a>=d?(l=0,r=d):r+a>=1?(l=(t*c-1)*Math.pow(2,o),r=r+a):(l=t*Math.pow(2,a-1)*Math.pow(2,o),r=0));o>=8;e[i+h]=l&255,h+=g,l/=256,o-=8);for(r=r<<o|l,f+=o;f>0;e[i+h]=r&255,h+=g,r/=256,f-=8);e[i+h-g]|=v*128}var lu={}.toString,wa=Array.isArray||function(e){return lu.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var uu=50;R.TYPED_ARRAY_SUPPORT=te.TYPED_ARRAY_SUPPORT!==void 0?te.TYPED_ARRAY_SUPPORT:!0;Qi();function Qi(){return R.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ge(e,t){if(Qi()<t)throw new RangeError("Invalid typed array length");return R.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=R.prototype):(e===null&&(e=new R(t)),e.length=t),e}function R(e,t,i){if(!R.TYPED_ARRAY_SUPPORT&&!(this instanceof R))return new R(e,t,i);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ur(this,e)}return Aa(this,e,t,i)}R.poolSize=8192;R._augment=function(e){return e.__proto__=R.prototype,e};function Aa(e,t,i,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?cu(e,t,i,n):typeof t=="string"?fu(e,t,i):du(e,t)}R.from=function(e,t,i){return Aa(null,e,t,i)};R.TYPED_ARRAY_SUPPORT&&(R.prototype.__proto__=Uint8Array.prototype,R.__proto__=Uint8Array);function ba(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function hu(e,t,i,n){return ba(t),t<=0?Ge(e,t):i!==void 0?typeof n=="string"?Ge(e,t).fill(i,n):Ge(e,t).fill(i):Ge(e,t)}R.alloc=function(e,t,i){return hu(null,e,t,i)};function Ur(e,t){if(ba(t),e=Ge(e,t<0?0:jr(t)|0),!R.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}R.allocUnsafe=function(e){return Ur(null,e)};R.allocUnsafeSlow=function(e){return Ur(null,e)};function fu(e,t,i){if((typeof i!="string"||i==="")&&(i="utf8"),!R.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=xa(t,i)|0;e=Ge(e,n);var o=e.write(t,i);return o!==n&&(e=e.slice(0,o)),e}function Ir(e,t){var i=t.length<0?0:jr(t.length)|0;e=Ge(e,i);for(var n=0;n<i;n+=1)e[n]=t[n]&255;return e}function cu(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return i===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,i):t=new Uint8Array(t,i,n),R.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=R.prototype):e=Ir(e,t),e}function du(e,t){if(ke(t)){var i=jr(t.length)|0;return e=Ge(e,i),e.length===0||t.copy(e,0,0,i),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Ru(t.length)?Ge(e,0):Ir(e,t);if(t.type==="Buffer"&&wa(t.data))return Ir(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function jr(e){if(e>=Qi())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qi().toString(16)+" bytes");return e|0}R.isBuffer=Nu;function ke(e){return!!(e!=null&&e._isBuffer)}R.compare=function(t,i){if(!ke(t)||!ke(i))throw new TypeError("Arguments must be Buffers");if(t===i)return 0;for(var n=t.length,o=i.length,s=0,r=Math.min(n,o);s<r;++s)if(t[s]!==i[s]){n=t[s],o=i[s];break}return n<o?-1:o<n?1:0};R.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};R.concat=function(t,i){if(!wa(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return R.alloc(0);var n;if(i===void 0)for(i=0,n=0;n<t.length;++n)i+=t[n].length;var o=R.allocUnsafe(i),s=0;for(n=0;n<t.length;++n){var r=t[n];if(!ke(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(o,s),s+=r.length}return o};function xa(e,t){if(ke(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var i=e.length;if(i===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Ji(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Oa(e).length;default:if(n)return Ji(e).length;t=(""+t).toLowerCase(),n=!0}}R.byteLength=xa;function pu(e,t,i){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Eu(this,t,i);case"utf8":case"utf-8":return Ia(this,t,i);case"ascii":return bu(this,t,i);case"latin1":case"binary":return xu(this,t,i);case"base64":return wu(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tu(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}R.prototype._isBuffer=!0;function bt(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}R.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)bt(this,i,i+1);return this};R.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)bt(this,i,i+3),bt(this,i+1,i+2);return this};R.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)bt(this,i,i+7),bt(this,i+1,i+6),bt(this,i+2,i+5),bt(this,i+3,i+4);return this};R.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Ia(this,0,t):pu.apply(this,arguments)};R.prototype.equals=function(t){if(!ke(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:R.compare(this,t)===0};R.prototype.inspect=function(){var t="",i=uu;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"};R.prototype.compare=function(t,i,n,o,s){if(!ke(t))throw new TypeError("Argument must be a Buffer");if(i===void 0&&(i=0),n===void 0&&(n=t?t.length:0),o===void 0&&(o=0),s===void 0&&(s=this.length),i<0||n>t.length||o<0||s>this.length)throw new RangeError("out of range index");if(o>=s&&i>=n)return 0;if(o>=s)return-1;if(i>=n)return 1;if(i>>>=0,n>>>=0,o>>>=0,s>>>=0,this===t)return 0;for(var r=s-o,l=n-i,c=Math.min(r,l),f=this.slice(o,s),d=t.slice(i,n),a=0;a<c;++a)if(f[a]!==d[a]){r=f[a],l=d[a];break}return r<l?-1:l<r?1:0};function Ea(e,t,i,n,o){if(e.length===0)return-1;if(typeof i=="string"?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(i<0)if(o)i=0;else return-1;if(typeof t=="string"&&(t=R.from(t,n)),ke(t))return t.length===0?-1:Is(e,t,i,n,o);if(typeof t=="number")return t=t&255,R.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):Is(e,[t],i,n,o);throw new TypeError("val must be string, number or Buffer")}function Is(e,t,i,n,o){var s=1,r=e.length,l=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,r/=2,l/=2,i/=2}function c(h,g){return s===1?h[g]:h.readUInt16BE(g*s)}var f;if(o){var d=-1;for(f=i;f<r;f++)if(c(e,f)===c(t,d===-1?0:f-d)){if(d===-1&&(d=f),f-d+1===l)return d*s}else d!==-1&&(f-=f-d),d=-1}else for(i+l>r&&(i=r-l),f=i;f>=0;f--){for(var a=!0,u=0;u<l;u++)if(c(e,f+u)!==c(t,u)){a=!1;break}if(a)return f}return-1}R.prototype.includes=function(t,i,n){return this.indexOf(t,i,n)!==-1};R.prototype.indexOf=function(t,i,n){return Ea(this,t,i,n,!0)};R.prototype.lastIndexOf=function(t,i,n){return Ea(this,t,i,n,!1)};function gu(e,t,i,n){i=Number(i)||0;var o=e.length-i;n?(n=Number(n),n>o&&(n=o)):n=o;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var r=0;r<n;++r){var l=parseInt(t.substr(r*2,2),16);if(isNaN(l))return r;e[i+r]=l}return r}function mu(e,t,i,n){return fn(Ji(t,e.length-i),e,i,n)}function Ta(e,t,i,n){return fn(Ou(t),e,i,n)}function _u(e,t,i,n){return Ta(e,t,i,n)}function yu(e,t,i,n){return fn(Oa(t),e,i,n)}function vu(e,t,i,n){return fn(Lu(t,e.length-i),e,i,n)}R.prototype.write=function(t,i,n,o){if(i===void 0)o="utf8",n=this.length,i=0;else if(n===void 0&&typeof i=="string")o=i,n=this.length,i=0;else if(isFinite(i))i=i|0,isFinite(n)?(n=n|0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-i;if((n===void 0||n>s)&&(n=s),t.length>0&&(n<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var r=!1;;)switch(o){case"hex":return gu(this,t,i,n);case"utf8":case"utf-8":return mu(this,t,i,n);case"ascii":return Ta(this,t,i,n);case"latin1":case"binary":return _u(this,t,i,n);case"base64":return yu(this,t,i,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vu(this,t,i,n);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),r=!0}};R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function wu(e,t,i){return t===0&&i===e.length?Ts(e):Ts(e.slice(t,i))}function Ia(e,t,i){i=Math.min(e.length,i);for(var n=[],o=t;o<i;){var s=e[o],r=null,l=s>239?4:s>223?3:s>191?2:1;if(o+l<=i){var c,f,d,a;switch(l){case 1:s<128&&(r=s);break;case 2:c=e[o+1],(c&192)===128&&(a=(s&31)<<6|c&63,a>127&&(r=a));break;case 3:c=e[o+1],f=e[o+2],(c&192)===128&&(f&192)===128&&(a=(s&15)<<12|(c&63)<<6|f&63,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:c=e[o+1],f=e[o+2],d=e[o+3],(c&192)===128&&(f&192)===128&&(d&192)===128&&(a=(s&15)<<18|(c&63)<<12|(f&63)<<6|d&63,a>65535&&a<1114112&&(r=a))}}r===null?(r=65533,l=1):r>65535&&(r-=65536,n.push(r>>>10&1023|55296),r=56320|r&1023),n.push(r),o+=l}return Au(n)}var Ss=4096;function Au(e){var t=e.length;if(t<=Ss)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=Ss));return i}function bu(e,t,i){var n="";i=Math.min(e.length,i);for(var o=t;o<i;++o)n+=String.fromCharCode(e[o]&127);return n}function xu(e,t,i){var n="";i=Math.min(e.length,i);for(var o=t;o<i;++o)n+=String.fromCharCode(e[o]);return n}function Eu(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var o="",s=t;s<i;++s)o+=Du(e[s]);return o}function Tu(e,t,i){for(var n=e.slice(t,i),o="",s=0;s<n.length;s+=2)o+=String.fromCharCode(n[s]+n[s+1]*256);return o}R.prototype.slice=function(t,i){var n=this.length;t=~~t,i=i===void 0?n:~~i,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),i<0?(i+=n,i<0&&(i=0)):i>n&&(i=n),i<t&&(i=t);var o;if(R.TYPED_ARRAY_SUPPORT)o=this.subarray(t,i),o.__proto__=R.prototype;else{var s=i-t;o=new R(s,void 0);for(var r=0;r<s;++r)o[r]=this[r+t]}return o};function fe(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}R.prototype.readUIntLE=function(t,i,n){t=t|0,i=i|0,n||fe(t,i,this.length);for(var o=this[t],s=1,r=0;++r<i&&(s*=256);)o+=this[t+r]*s;return o};R.prototype.readUIntBE=function(t,i,n){t=t|0,i=i|0,n||fe(t,i,this.length);for(var o=this[t+--i],s=1;i>0&&(s*=256);)o+=this[t+--i]*s;return o};R.prototype.readUInt8=function(t,i){return i||fe(t,1,this.length),this[t]};R.prototype.readUInt16LE=function(t,i){return i||fe(t,2,this.length),this[t]|this[t+1]<<8};R.prototype.readUInt16BE=function(t,i){return i||fe(t,2,this.length),this[t]<<8|this[t+1]};R.prototype.readUInt32LE=function(t,i){return i||fe(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};R.prototype.readUInt32BE=function(t,i){return i||fe(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};R.prototype.readIntLE=function(t,i,n){t=t|0,i=i|0,n||fe(t,i,this.length);for(var o=this[t],s=1,r=0;++r<i&&(s*=256);)o+=this[t+r]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*i)),o};R.prototype.readIntBE=function(t,i,n){t=t|0,i=i|0,n||fe(t,i,this.length);for(var o=i,s=1,r=this[t+--o];o>0&&(s*=256);)r+=this[t+--o]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*i)),r};R.prototype.readInt8=function(t,i){return i||fe(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};R.prototype.readInt16LE=function(t,i){i||fe(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};R.prototype.readInt16BE=function(t,i){i||fe(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};R.prototype.readInt32LE=function(t,i){return i||fe(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};R.prototype.readInt32BE=function(t,i){return i||fe(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};R.prototype.readFloatLE=function(t,i){return i||fe(t,4,this.length),ln(this,t,!0,23,4)};R.prototype.readFloatBE=function(t,i){return i||fe(t,4,this.length),ln(this,t,!1,23,4)};R.prototype.readDoubleLE=function(t,i){return i||fe(t,8,this.length),ln(this,t,!0,52,8)};R.prototype.readDoubleBE=function(t,i){return i||fe(t,8,this.length),ln(this,t,!1,52,8)};function ye(e,t,i,n,o,s){if(!ke(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}R.prototype.writeUIntLE=function(t,i,n,o){if(t=+t,i=i|0,n=n|0,!o){var s=Math.pow(2,8*n)-1;ye(this,t,i,n,s,0)}var r=1,l=0;for(this[i]=t&255;++l<n&&(r*=256);)this[i+l]=t/r&255;return i+n};R.prototype.writeUIntBE=function(t,i,n,o){if(t=+t,i=i|0,n=n|0,!o){var s=Math.pow(2,8*n)-1;ye(this,t,i,n,s,0)}var r=n-1,l=1;for(this[i+r]=t&255;--r>=0&&(l*=256);)this[i+r]=t/l&255;return i+n};R.prototype.writeUInt8=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,1,255,0),R.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=t&255,i+1};function un(e,t,i,n){t<0&&(t=65535+t+1);for(var o=0,s=Math.min(e.length-i,2);o<s;++o)e[i+o]=(t&255<<8*(n?o:1-o))>>>(n?o:1-o)*8}R.prototype.writeUInt16LE=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,2,65535,0),R.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8):un(this,t,i,!0),i+2};R.prototype.writeUInt16BE=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,2,65535,0),R.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=t&255):un(this,t,i,!1),i+2};function hn(e,t,i,n){t<0&&(t=4294967295+t+1);for(var o=0,s=Math.min(e.length-i,4);o<s;++o)e[i+o]=t>>>(n?o:3-o)*8&255}R.prototype.writeUInt32LE=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,4,4294967295,0),R.TYPED_ARRAY_SUPPORT?(this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=t&255):hn(this,t,i,!0),i+4};R.prototype.writeUInt32BE=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,4,4294967295,0),R.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255):hn(this,t,i,!1),i+4};R.prototype.writeIntLE=function(t,i,n,o){if(t=+t,i=i|0,!o){var s=Math.pow(2,8*n-1);ye(this,t,i,n,s-1,-s)}var r=0,l=1,c=0;for(this[i]=t&255;++r<n&&(l*=256);)t<0&&c===0&&this[i+r-1]!==0&&(c=1),this[i+r]=(t/l>>0)-c&255;return i+n};R.prototype.writeIntBE=function(t,i,n,o){if(t=+t,i=i|0,!o){var s=Math.pow(2,8*n-1);ye(this,t,i,n,s-1,-s)}var r=n-1,l=1,c=0;for(this[i+r]=t&255;--r>=0&&(l*=256);)t<0&&c===0&&this[i+r+1]!==0&&(c=1),this[i+r]=(t/l>>0)-c&255;return i+n};R.prototype.writeInt8=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,1,127,-128),R.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[i]=t&255,i+1};R.prototype.writeInt16LE=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,2,32767,-32768),R.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8):un(this,t,i,!0),i+2};R.prototype.writeInt16BE=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,2,32767,-32768),R.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=t&255):un(this,t,i,!1),i+2};R.prototype.writeInt32LE=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,4,2147483647,-2147483648),R.TYPED_ARRAY_SUPPORT?(this[i]=t&255,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24):hn(this,t,i,!0),i+4};R.prototype.writeInt32BE=function(t,i,n){return t=+t,i=i|0,n||ye(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),R.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255):hn(this,t,i,!1),i+4};function Sa(e,t,i,n,o,s){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Ca(e,t,i,n,o){return o||Sa(e,t,i,4),va(e,t,i,n,23,4),i+4}R.prototype.writeFloatLE=function(t,i,n){return Ca(this,t,i,!0,n)};R.prototype.writeFloatBE=function(t,i,n){return Ca(this,t,i,!1,n)};function Da(e,t,i,n,o){return o||Sa(e,t,i,8),va(e,t,i,n,52,8),i+8}R.prototype.writeDoubleLE=function(t,i,n){return Da(this,t,i,!0,n)};R.prototype.writeDoubleBE=function(t,i,n){return Da(this,t,i,!1,n)};R.prototype.copy=function(t,i,n,o){if(n||(n=0),!o&&o!==0&&(o=this.length),i>=t.length&&(i=t.length),i||(i=0),o>0&&o<n&&(o=n),o===n||t.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-i<o-n&&(o=t.length-i+n);var s=o-n,r;if(this===t&&n<i&&i<o)for(r=s-1;r>=0;--r)t[r+i]=this[r+n];else if(s<1e3||!R.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+i]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),i);return s};R.prototype.fill=function(t,i,n,o){if(typeof t=="string"){if(typeof i=="string"?(o=i,i=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),t.length===1){var s=t.charCodeAt(0);s<256&&(t=s)}if(o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!R.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof t=="number"&&(t=t&255);if(i<0||this.length<i||this.length<n)throw new RangeError("Out of range index");if(n<=i)return this;i=i>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var r;if(typeof t=="number")for(r=i;r<n;++r)this[r]=t;else{var l=ke(t)?t:Ji(new R(t,o).toString()),c=l.length;for(r=0;r<n-i;++r)this[r+i]=l[r%c]}return this};var Iu=/[^+\/0-9A-Za-z-_]/g;function Su(e){if(e=Cu(e).replace(Iu,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Cu(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Du(e){return e<16?"0"+e.toString(16):e.toString(16)}function Ji(e,t){t=t||1/0;for(var i,n=e.length,o=null,s=[],r=0;r<n;++r){if(i=e.charCodeAt(r),i>55295&&i<57344){if(!o){if(i>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(r+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),o=i;continue}i=(o-55296<<10|i-56320)+65536}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return s}function Ou(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i)&255);return t}function Lu(e,t){for(var i,n,o,s=[],r=0;r<e.length&&!((t-=2)<0);++r)i=e.charCodeAt(r),n=i>>8,o=i%256,s.push(o),s.push(n);return s}function Oa(e){return su(Su(e))}function fn(e,t,i,n){for(var o=0;o<n&&!(o+i>=t.length||o>=e.length);++o)t[o+i]=e[o];return o}function Ru(e){return e!==e}function Nu(e){return e!=null&&(!!e._isBuffer||La(e)||Mu(e))}function La(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Mu(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&La(e.slice(0,0))}function Ra(){throw new Error("setTimeout has not been defined")}function Na(){throw new Error("clearTimeout has not been defined")}var Ke=Ra,$e=Na;typeof te.setTimeout=="function"&&(Ke=setTimeout);typeof te.clearTimeout=="function"&&($e=clearTimeout);function Ma(e){if(Ke===setTimeout)return setTimeout(e,0);if((Ke===Ra||!Ke)&&setTimeout)return Ke=setTimeout,setTimeout(e,0);try{return Ke(e,0)}catch{try{return Ke.call(null,e,0)}catch{return Ke.call(this,e,0)}}}function qu(e){if($e===clearTimeout)return clearTimeout(e);if(($e===Na||!$e)&&clearTimeout)return $e=clearTimeout,clearTimeout(e);try{return $e(e)}catch{try{return $e.call(null,e)}catch{return $e.call(this,e)}}}var Ze=[],Kt=!1,xt,Hi=-1;function ku(){!Kt||!xt||(Kt=!1,xt.length?Ze=xt.concat(Ze):Hi=-1,Ze.length&&qa())}function qa(){if(!Kt){var e=Ma(ku);Kt=!0;for(var t=Ze.length;t;){for(xt=Ze,Ze=[];++Hi<t;)xt&&xt[Hi].run();Hi=-1,t=Ze.length}xt=null,Kt=!1,qu(e)}}function xe(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Ze.push(new ka(e,t)),Ze.length===1&&!Kt&&Ma(qa)}function ka(e,t){this.fun=e,this.array=t}ka.prototype.run=function(){this.fun.apply(null,this.array)};var Pu="browser",Fu="browser",Bu=!0,zu={},Uu=[],ju="",Xu={},Hu={},Vu={};function kt(){}var Gu=kt,Zu=kt,Wu=kt,Yu=kt,Qu=kt,Ju=kt,Ku=kt;function $u(e){throw new Error("process.binding is not supported")}function eh(){return"/"}function th(e){throw new Error("process.chdir is not supported")}function ih(){return 0}var Zt=te.performance||{},nh=Zt.now||Zt.mozNow||Zt.msNow||Zt.oNow||Zt.webkitNow||function(){return new Date().getTime()};function rh(e){var t=nh.call(Zt)*.001,i=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(i=i-e[0],n=n-e[1],n<0&&(i--,n+=1e9)),[i,n]}var sh=new Date;function oh(){var e=new Date,t=e-sh;return t/1e3}var qe={nextTick:xe,title:Pu,browser:Bu,env:zu,argv:Uu,version:ju,versions:Xu,on:Gu,addListener:Zu,once:Wu,off:Yu,removeListener:Qu,removeAllListeners:Ju,emit:Ku,binding:$u,cwd:eh,chdir:th,umask:ih,hrtime:rh,platform:Fu,release:Hu,config:Vu,uptime:oh},ah;function ut(){}ut.prototype=Object.create(null);function W(){W.init.call(this)}W.EventEmitter=W;W.usingDomains=!1;W.prototype.domain=void 0;W.prototype._events=void 0;W.prototype._maxListeners=void 0;W.defaultMaxListeners=10;W.init=function(){this.domain=null,W.usingDomains&&ah.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new ut,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};W.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function Pa(e){return e._maxListeners===void 0?W.defaultMaxListeners:e._maxListeners}W.prototype.getMaxListeners=function(){return Pa(this)};function lh(e,t,i){if(t)e.call(i);else for(var n=e.length,o=Di(e,n),s=0;s<n;++s)o[s].call(i)}function uh(e,t,i,n){if(t)e.call(i,n);else for(var o=e.length,s=Di(e,o),r=0;r<o;++r)s[r].call(i,n)}function hh(e,t,i,n,o){if(t)e.call(i,n,o);else for(var s=e.length,r=Di(e,s),l=0;l<s;++l)r[l].call(i,n,o)}function fh(e,t,i,n,o,s){if(t)e.call(i,n,o,s);else for(var r=e.length,l=Di(e,r),c=0;c<r;++c)l[c].call(i,n,o,s)}function ch(e,t,i,n){if(t)e.apply(i,n);else for(var o=e.length,s=Di(e,o),r=0;r<o;++r)s[r].apply(i,n)}W.prototype.emit=function(t){var i,n,o,s,r,l,c,f=t==="error";if(l=this._events,l)f=f&&l.error==null;else if(!f)return!1;if(c=this.domain,f){if(i=arguments[1],c)i||(i=new Error('Uncaught, unspecified "error" event')),i.domainEmitter=this,i.domain=c,i.domainThrown=!1,c.emit("error",i);else{if(i instanceof Error)throw i;var d=new Error('Uncaught, unspecified "error" event. ('+i+")");throw d.context=i,d}return!1}if(n=l[t],!n)return!1;var a=typeof n=="function";switch(o=arguments.length,o){case 1:lh(n,a,this);break;case 2:uh(n,a,this,arguments[1]);break;case 3:hh(n,a,this,arguments[1],arguments[2]);break;case 4:fh(n,a,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(o-1),r=1;r<o;r++)s[r-1]=arguments[r];ch(n,a,this,s)}return!0};function Fa(e,t,i,n){var o,s,r;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),r=s[t]):(s=e._events=new ut,e._eventsCount=0),!r)r=s[t]=i,++e._eventsCount;else if(typeof r=="function"?r=s[t]=n?[i,r]:[r,i]:n?r.unshift(i):r.push(i),!r.warned&&(o=Pa(e),o&&o>0&&r.length>o)){r.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=r.length,dh(l)}return e}function dh(e){typeof console.warn=="function"?console.warn(e):console.log(e)}W.prototype.addListener=function(t,i){return Fa(this,t,i,!1)};W.prototype.on=W.prototype.addListener;W.prototype.prependListener=function(t,i){return Fa(this,t,i,!0)};function Ba(e,t,i){var n=!1;function o(){e.removeListener(t,o),n||(n=!0,i.apply(e,arguments))}return o.listener=i,o}W.prototype.once=function(t,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,Ba(this,t,i)),this};W.prototype.prependOnceListener=function(t,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Ba(this,t,i)),this};W.prototype.removeListener=function(t,i){var n,o,s,r,l;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(o=this._events,!o)return this;if(n=o[t],!n)return this;if(n===i||n.listener&&n.listener===i)--this._eventsCount===0?this._events=new ut:(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||i));else if(typeof n!="function"){for(s=-1,r=n.length;r-- >0;)if(n[r]===i||n[r].listener&&n[r].listener===i){l=n[r].listener,s=r;break}if(s<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new ut,this;delete o[t]}else ph(n,s);o.removeListener&&this.emit("removeListener",t,l||i)}return this};W.prototype.removeAllListeners=function(t){var i,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new ut,this._eventsCount=0):n[t]&&(--this._eventsCount===0?this._events=new ut:delete n[t]),this;if(arguments.length===0){for(var o=Object.keys(n),s=0,r;s<o.length;++s)r=o[s],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new ut,this._eventsCount=0,this}if(i=n[t],typeof i=="function")this.removeListener(t,i);else if(i)do this.removeListener(t,i[i.length-1]);while(i[0]);return this};W.prototype.listeners=function(t){var i,n,o=this._events;return o?(i=o[t],i?typeof i=="function"?n=[i.listener||i]:n=gh(i):n=[]):n=[],n};W.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):za.call(e,t)};W.prototype.listenerCount=za;function za(e){var t=this._events;if(t){var i=t[e];if(typeof i=="function")return 1;if(i)return i.length}return 0}W.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function ph(e,t){for(var i=t,n=i+1,o=e.length;n<o;i+=1,n+=1)e[i]=e[n];e.pop()}function Di(e,t){for(var i=new Array(t);t--;)i[t]=e[t];return i}function gh(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}const mh=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter:W,default:W},Symbol.toStringTag,{value:"Module"}));var Sr;typeof Object.create=="function"?Sr=function(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:Sr=function(t,i){t.super_=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t};const ve=Sr;var _h=/%[sdj%]/g;function yh(e){if(!Hr(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(ht(arguments[i]));return t.join(" ")}for(var i=1,n=arguments,o=n.length,s=String(e).replace(_h,function(l){if(l==="%%")return"%";if(i>=o)return l;switch(l){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}default:return l}}),r=n[i];i<o;r=n[++i])Xr(r)||!Oi(r)?s+=" "+r:s+=" "+ht(r);return s}function Ua(e,t){if(st(te.process))return function(){return Ua(e,t).apply(this,arguments)};if(qe.noDeprecation===!0)return e;var i=!1;function n(){if(!i){if(qe.throwDeprecation)throw new Error(t);qe.traceDeprecation?console.trace(t):console.error(t),i=!0}return e.apply(this,arguments)}return n}var ki={},An;function vh(e){if(st(An)&&(An=qe.env.NODE_DEBUG||""),e=e.toUpperCase(),!ki[e])if(new RegExp("\\b"+e+"\\b","i").test(An)){var t=0;ki[e]=function(){var i=yh.apply(null,arguments);console.error("%s %d: %s",e,t,i)}}else ki[e]=function(){};return ki[e]}function ht(e,t){var i={seen:[],stylize:Ah};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),ja(t)?i.showHidden=t:t&&Ch(i,t),st(i.showHidden)&&(i.showHidden=!1),st(i.depth)&&(i.depth=2),st(i.colors)&&(i.colors=!1),st(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=wh),Ki(i,e,i.depth)}ht.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};ht.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function wh(e,t){var i=ht.styles[t];return i?"\x1B["+ht.colors[i][0]+"m"+e+"\x1B["+ht.colors[i][1]+"m":e}function Ah(e,t){return e}function bh(e){var t={};return e.forEach(function(i,n){t[i]=!0}),t}function Ki(e,t,i){if(e.customInspect&&t&&Tn(t.inspect)&&t.inspect!==ht&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(i,e);return Hr(n)||(n=Ki(e,n,i)),n}var o=xh(e,t);if(o)return o;var s=Object.keys(t),r=bh(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),En(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return bn(t);if(s.length===0){if(Tn(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(xn(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Cs(t))return e.stylize(Date.prototype.toString.call(t),"date");if(En(t))return bn(t)}var c="",f=!1,d=["{","}"];if(Ih(t)&&(f=!0,d=["[","]"]),Tn(t)){var a=t.name?": "+t.name:"";c=" [Function"+a+"]"}if(xn(t)&&(c=" "+RegExp.prototype.toString.call(t)),Cs(t)&&(c=" "+Date.prototype.toUTCString.call(t)),En(t)&&(c=" "+bn(t)),s.length===0&&(!f||t.length==0))return d[0]+c+d[1];if(i<0)return xn(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var u;return f?u=Eh(e,t,i,r,s):u=s.map(function(h){return Cr(e,t,i,r,h,f)}),e.seen.pop(),Th(u,c,d)}function xh(e,t){if(st(t))return e.stylize("undefined","undefined");if(Hr(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(Sh(t))return e.stylize(""+t,"number");if(ja(t))return e.stylize(""+t,"boolean");if(Xr(t))return e.stylize("null","null")}function bn(e){return"["+Error.prototype.toString.call(e)+"]"}function Eh(e,t,i,n,o){for(var s=[],r=0,l=t.length;r<l;++r)Xa(t,String(r))?s.push(Cr(e,t,i,n,String(r),!0)):s.push("");return o.forEach(function(c){c.match(/^\d+$/)||s.push(Cr(e,t,i,n,c,!0))}),s}function Cr(e,t,i,n,o,s){var r,l,c;if(c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},c.get?c.set?l=e.stylize("[Getter/Setter]","special"):l=e.stylize("[Getter]","special"):c.set&&(l=e.stylize("[Setter]","special")),Xa(n,o)||(r="["+o+"]"),l||(e.seen.indexOf(c.value)<0?(Xr(i)?l=Ki(e,c.value,null):l=Ki(e,c.value,i-1),l.indexOf(`
`)>-1&&(s?l=l.split(`
`).map(function(f){return"  "+f}).join(`
`).substr(2):l=`
`+l.split(`
`).map(function(f){return"   "+f}).join(`
`))):l=e.stylize("[Circular]","special")),st(r)){if(s&&o.match(/^\d+$/))return l;r=JSON.stringify(""+o),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=e.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=e.stylize(r,"string"))}return r+": "+l}function Th(e,t,i){var n=e.reduce(function(o,s){return s.indexOf(`
`)>=0,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?i[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function Ih(e){return Array.isArray(e)}function ja(e){return typeof e=="boolean"}function Xr(e){return e===null}function Sh(e){return typeof e=="number"}function Hr(e){return typeof e=="string"}function st(e){return e===void 0}function xn(e){return Oi(e)&&Vr(e)==="[object RegExp]"}function Oi(e){return typeof e=="object"&&e!==null}function Cs(e){return Oi(e)&&Vr(e)==="[object Date]"}function En(e){return Oi(e)&&(Vr(e)==="[object Error]"||e instanceof Error)}function Tn(e){return typeof e=="function"}function Vr(e){return Object.prototype.toString.call(e)}function Ch(e,t){if(!t||!Oi(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e}function Xa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pt(){this.head=null,this.tail=null,this.length=0}Pt.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};Pt.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};Pt.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};Pt.prototype.clear=function(){this.head=this.tail=null,this.length=0};Pt.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i};Pt.prototype.concat=function(e){if(this.length===0)return R.alloc(0);if(this.length===1)return this.head.data;for(var t=R.allocUnsafe(e>>>0),i=this.head,n=0;i;)i.data.copy(t,n),n+=i.data.length,i=i.next;return t};var Dh=R.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Oh(e){if(e&&!Dh(e))throw new Error("Unknown encoding: "+e)}function ri(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),Oh(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Rh;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Nh;break;default:this.write=Lh;return}this.charBuffer=new R(6),this.charReceived=0,this.charLength=0}ri.prototype.write=function(e){for(var t="";this.charLength;){var i=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";e=e.slice(i,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=t.charCodeAt(t.length-1);if(o>=55296&&o<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived),t+=e.toString(this.encoding,0,n);var n=t.length-1,o=t.charCodeAt(n);if(o>=55296&&o<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,n)}return t};ri.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var i=e[e.length-t];if(t==1&&i>>5==6){this.charLength=2;break}if(t<=2&&i>>4==14){this.charLength=3;break}if(t<=3&&i>>3==30){this.charLength=4;break}}this.charReceived=t};ri.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var i=this.charReceived,n=this.charBuffer,o=this.encoding;t+=n.slice(0,i).toString(o)}return t};function Lh(e){return e.toString(this.encoding)}function Rh(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Nh(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}const Mh=Object.freeze(Object.defineProperty({__proto__:null,StringDecoder:ri},Symbol.toStringTag,{value:"Module"}));se.ReadableState=Ha;var ee=vh("stream");ve(se,W);function qh(e,t,i){if(typeof e.prependListener=="function")return e.prependListener(t,i);!e._events||!e._events[t]?e.on(t,i):Array.isArray(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]}function kh(e,t){return e.listeners(t).length}function Ha(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Ae&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Pt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new ri(e.encoding),this.encoding=e.encoding)}function se(e){if(!(this instanceof se))return new se(e);this._readableState=new Ha(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),W.call(this)}se.prototype.push=function(e,t){var i=this._readableState;return!i.objectMode&&typeof e=="string"&&(t=t||i.defaultEncoding,t!==i.encoding&&(e=R.from(e,t),t="")),Va(this,i,e,t,!1)};se.prototype.unshift=function(e){var t=this._readableState;return Va(this,t,e,"",!0)};se.prototype.isPaused=function(){return this._readableState.flowing===!1};function Va(e,t,i,n,o){var s=Bh(t,i);if(s)e.emit("error",s);else if(i===null)t.reading=!1,zh(e,t);else if(t.objectMode||i&&i.length>0)if(t.ended&&!o){var r=new Error("stream.push() after EOF");e.emit("error",r)}else if(t.endEmitted&&o){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else{var c;t.decoder&&!o&&!n&&(i=t.decoder.write(i),c=!t.objectMode&&i.length===0),o||(t.reading=!1),c||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,o?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&cn(e))),Uh(e,t)}else o||(t.reading=!1);return Ph(t)}function Ph(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}se.prototype.setEncoding=function(e){return this._readableState.decoder=new ri(e),this._readableState.encoding=e,this};var Ds=8388608;function Fh(e){return e>=Ds?e=Ds:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Os(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Fh(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}se.prototype.read=function(e){ee("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return ee("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?In(this):cn(this),null;if(e=Os(e,t),e===0&&t.ended)return t.length===0&&In(this),null;var n=t.needReadable;ee("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,ee("length less than watermark",n)),t.ended||t.reading?(n=!1,ee("reading or ended",n)):n&&(ee("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Os(i,t)));var o;return e>0?o=Ga(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&In(this)),o!==null&&this.emit("data",o),o};function Bh(e,t){var i=null;return!R.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i}function zh(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,cn(e)}}function cn(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(ee("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?xe(Ls,e):Ls(e))}function Ls(e){ee("emit readable"),e.emit("readable"),Gr(e)}function Uh(e,t){t.readingMore||(t.readingMore=!0,xe(jh,e,t))}function jh(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(ee("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}se.prototype._read=function(e){this.emit("error",new Error("not implemented"))};se.prototype.pipe=function(e,t){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,ee("pipe count=%d opts=%j",n.pipesCount,t);var o=!t||t.end!==!1,s=o?l:d;n.endEmitted?xe(s):i.once("end",s),e.on("unpipe",r);function r(A){ee("onunpipe"),A===i&&d()}function l(){ee("onend"),e.end()}var c=Xh(i);e.on("drain",c);var f=!1;function d(){ee("cleanup"),e.removeListener("close",g),e.removeListener("finish",v),e.removeListener("drain",c),e.removeListener("error",h),e.removeListener("unpipe",r),i.removeListener("end",l),i.removeListener("end",d),i.removeListener("data",u),f=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var a=!1;i.on("data",u);function u(A){ee("ondata"),a=!1;var x=e.write(A);x===!1&&!a&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Za(n.pipes,e)!==-1)&&!f&&(ee("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,a=!0),i.pause())}function h(A){ee("onerror",A),w(),e.removeListener("error",h),kh(e,"error")===0&&e.emit("error",A)}qh(e,"error",h);function g(){e.removeListener("finish",v),w()}e.once("close",g);function v(){ee("onfinish"),e.removeListener("close",g),w()}e.once("finish",v);function w(){ee("unpipe"),i.unpipe(e)}return e.emit("pipe",i),n.flowing||(ee("pipe resume"),i.resume()),e};function Xh(e){return function(){var t=e._readableState;ee("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,Gr(e))}}se.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this);return this}var s=Za(t.pipes,e);return s===-1?this:(t.pipes.splice(s,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};se.prototype.on=function(e,t){var i=W.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&cn(this):xe(Hh,this))}return i};se.prototype.addListener=se.prototype.on;function Hh(e){ee("readable nexttick read 0"),e.read(0)}se.prototype.resume=function(){var e=this._readableState;return e.flowing||(ee("resume"),e.flowing=!0,Vh(this,e)),this};function Vh(e,t){t.resumeScheduled||(t.resumeScheduled=!0,xe(Gh,e,t))}function Gh(e,t){t.reading||(ee("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Gr(e),t.flowing&&!t.reading&&e.read(0)}se.prototype.pause=function(){return ee("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ee("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Gr(e){var t=e._readableState;for(ee("flow",t.flowing);t.flowing&&e.read()!==null;);}se.prototype.wrap=function(e){var t=this._readableState,i=!1,n=this;e.on("end",function(){if(ee("wrapped end"),t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&n.push(r)}n.push(null)}),e.on("data",function(r){if(ee("wrapped data"),t.decoder&&(r=t.decoder.write(r)),!(t.objectMode&&r==null)&&!(!t.objectMode&&(!r||!r.length))){var l=n.push(r);l||(i=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(r){return function(){return e[r].apply(e,arguments)}}(o));var s=["error","close","destroy","pause","resume"];return Jh(s,function(r){e.on(r,n.emit.bind(n,r))}),n._read=function(r){ee("wrapped _read",r),i&&(i=!1,e.resume())},n};se._fromList=Ga;function Ga(e,t){if(t.length===0)return null;var i;return t.objectMode?i=t.buffer.shift():!e||e>=t.length?(t.decoder?i=t.buffer.join(""):t.buffer.length===1?i=t.buffer.head.data:i=t.buffer.concat(t.length),t.buffer.clear()):i=Zh(e,t.buffer,t.decoder),i}function Zh(e,t,i){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=i?Wh(e,t):Yh(e,t),n}function Wh(e,t){var i=t.head,n=1,o=i.data;for(e-=o.length;i=i.next;){var s=i.data,r=e>s.length?s.length:e;if(r===s.length?o+=s:o+=s.slice(0,e),e-=r,e===0){r===s.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=s.slice(r));break}++n}return t.length-=n,o}function Yh(e,t){var i=R.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(i),e-=n.data.length;n=n.next;){var s=n.data,r=e>s.length?s.length:e;if(s.copy(i,i.length-e,0,r),e-=r,e===0){r===s.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(r));break}++o}return t.length-=o,i}function In(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,xe(Qh,t,e))}function Qh(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Jh(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i],i)}function Za(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}ge.WritableState=Zr;ve(ge,W);function Kh(){}function $h(e,t,i){this.chunk=e,this.encoding=t,this.callback=i,this.next=null}function Zr(e,t){Object.defineProperty(this,"buffer",{get:Ua(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Ae&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){af(t,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ja(this)}Zr.prototype.getBuffer=function(){for(var t=this.bufferedRequest,i=[];t;)i.push(t),t=t.next;return i};function ge(e){if(!(this instanceof ge)&&!(this instanceof Ae))return new ge(e);this._writableState=new Zr(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),W.call(this)}ge.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function ef(e,t){var i=new Error("write after end");e.emit("error",i),xe(t,i)}function tf(e,t,i,n){var o=!0,s=!1;return i===null?s=new TypeError("May not write null values to stream"):!R.isBuffer(i)&&typeof i!="string"&&i!==void 0&&!t.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),xe(n,s),o=!1),o}ge.prototype.write=function(e,t,i){var n=this._writableState,o=!1;return typeof t=="function"&&(i=t,t=null),R.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),typeof i!="function"&&(i=Kh),n.ended?ef(this,i):tf(this,n,e,i)&&(n.pendingcb++,o=rf(this,n,e,t,i)),o};ge.prototype.cork=function(){var e=this._writableState;e.corked++};ge.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Wa(this,e))};ge.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function nf(e,t,i){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=R.from(t,i)),t}function rf(e,t,i,n,o){i=nf(t,i,n),R.isBuffer(i)&&(n="buffer");var s=t.objectMode?1:i.length;t.length+=s;var r=t.length<t.highWaterMark;if(r||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new $h(i,n,o),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Dr(e,t,!1,s,i,n,o);return r}function Dr(e,t,i,n,o,s,r){t.writelen=n,t.writecb=r,t.writing=!0,t.sync=!0,i?e._writev(o,t.onwrite):e._write(o,s,t.onwrite),t.sync=!1}function sf(e,t,i,n,o){--t.pendingcb,i?xe(o,n):o(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function of(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function af(e,t){var i=e._writableState,n=i.sync,o=i.writecb;if(of(i),t)sf(e,i,n,t,o);else{var s=Ya(i);!s&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&Wa(e,i),n?xe(Rs,e,i,s,o):Rs(e,i,s,o)}}function Rs(e,t,i,n){i||lf(e,t),t.pendingcb--,n(),Qa(e,t)}function lf(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Wa(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=i;for(var r=0;i;)o[r]=i,i=i.next,r+=1;Dr(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new Ja(t)}else{for(;i;){var l=i.chunk,c=i.encoding,f=i.callback,d=t.objectMode?1:l.length;if(Dr(e,t,!1,d,l,c,f),i=i.next,t.writing)break}i===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=i,t.bufferProcessing=!1}ge.prototype._write=function(e,t,i){i(new Error("not implemented"))};ge.prototype._writev=null;ge.prototype.end=function(e,t,i){var n=this._writableState;typeof e=="function"?(i=e,e=null,t=null):typeof t=="function"&&(i=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&uf(this,n,i)};function Ya(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Ns(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Qa(e,t){var i=Ya(t);return i&&(t.pendingcb===0?(Ns(e,t),t.finished=!0,e.emit("finish")):Ns(e,t)),i}function uf(e,t,i){t.ending=!0,Qa(e,t),i&&(t.finished?xe(i):e.once("finish",i)),t.ended=!0,e.writable=!1}function Ja(e){var t=this;this.next=null,this.entry=null,this.finish=function(i){var n=t.entry;for(t.entry=null;n;){var o=n.callback;e.pendingcb--,o(i),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}ve(Ae,se);var Ms=Object.keys(ge.prototype);for(var Sn=0;Sn<Ms.length;Sn++){var Cn=Ms[Sn];Ae.prototype[Cn]||(Ae.prototype[Cn]=ge.prototype[Cn])}function Ae(e){if(!(this instanceof Ae))return new Ae(e);se.call(this,e),ge.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",hf)}function hf(){this.allowHalfOpen||this._writableState.ended||xe(ff,this)}function ff(e){e.end()}ve(be,Ae);function cf(e){this.afterTransform=function(t,i){return df(e,t,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function df(e,t,i){var n=e._transformState;n.transforming=!1;var o=n.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,i!=null&&e.push(i),o(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function be(e){if(!(this instanceof be))return new be(e);Ae.call(this,e),this._transformState=new cf(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(i){qs(t,i)}):qs(t)})}be.prototype.push=function(e,t){return this._transformState.needTransform=!1,Ae.prototype.push.call(this,e,t)};be.prototype._transform=function(e,t,i){throw new Error("Not implemented")};be.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};be.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function qs(e,t){if(t)return e.emit("error",t);var i=e._writableState,n=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}ve(ti,be);function ti(e){if(!(this instanceof ti))return new ti(e);be.call(this,e)}ti.prototype._transform=function(e,t,i){i(null,e)};ve(Oe,W);Oe.Readable=se;Oe.Writable=ge;Oe.Duplex=Ae;Oe.Transform=be;Oe.PassThrough=ti;Oe.Stream=Oe;function Oe(){W.call(this)}Oe.prototype.pipe=function(e,t){var i=this;function n(d){e.writable&&e.write(d)===!1&&i.pause&&i.pause()}i.on("data",n);function o(){i.readable&&i.resume&&i.resume()}e.on("drain",o),!e._isStdio&&(!t||t.end!==!1)&&(i.on("end",r),i.on("close",l));var s=!1;function r(){s||(s=!0,e.end())}function l(){s||(s=!0,typeof e.destroy=="function"&&e.destroy())}function c(d){if(f(),W.listenerCount(this,"error")===0)throw d}i.on("error",c),e.on("error",c);function f(){i.removeListener("data",n),e.removeListener("drain",o),i.removeListener("end",r),i.removeListener("close",l),i.removeListener("error",c),e.removeListener("error",c),i.removeListener("end",f),i.removeListener("close",f),e.removeListener("close",f)}return i.on("end",f),i.on("close",f),e.on("close",f),e.emit("pipe",i),e};const pf=Object.freeze(Object.defineProperty({__proto__:null,Duplex:Ae,PassThrough:ti,Readable:se,Stream:Oe,Transform:be,Writable:ge,default:Oe},Symbol.toStringTag,{value:"Module"})),Ka={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function gf(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Ye(e,t,i,n,o){if(t.subarray&&e.subarray){e.set(t.subarray(i,i+n),o);return}for(var s=0;s<n;s++)e[o+s]=t[i+s]}var $i=Uint8Array,Te=Uint16Array,en=Int32Array,mf=4,ks=0,Ps=1,_f=2;function si(e){for(var t=e.length;--t>=0;)e[t]=0}var yf=0,$a=1,vf=2,wf=3,Af=258,Wr=29,Li=256,vi=Li+1+Wr,$t=30,Yr=19,el=2*vi+1,Et=15,Dn=16,bf=7,Qr=256,tl=16,il=17,nl=18,Or=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Vi=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],xf=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rl=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ef=512,Ve=new Array((vi+2)*2);si(Ve);var gi=new Array($t*2);si(gi);var wi=new Array(Ef);si(wi);var Ai=new Array(Af-wf+1);si(Ai);var Jr=new Array(Wr);si(Jr);var tn=new Array($t);si(tn);function On(e,t,i,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}var sl,ol,al;function Ln(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function ll(e){return e<256?wi[e]:wi[256+(e>>>7)]}function bi(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function _e(e,t,i){e.bi_valid>Dn-i?(e.bi_buf|=t<<e.bi_valid&65535,bi(e,e.bi_buf),e.bi_buf=t>>Dn-e.bi_valid,e.bi_valid+=i-Dn):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function Me(e,t,i){_e(e,i[t*2],i[t*2+1])}function ul(e,t){var i=0;do i|=e&1,e>>>=1,i<<=1;while(--t>0);return i>>>1}function Tf(e){e.bi_valid===16?(bi(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function If(e,t){var i=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,r=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,c=t.stat_desc.max_length,f,d,a,u,h,g,v=0;for(u=0;u<=Et;u++)e.bl_count[u]=0;for(i[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<el;f++)d=e.heap[f],u=i[i[d*2+1]*2+1]+1,u>c&&(u=c,v++),i[d*2+1]=u,!(d>n)&&(e.bl_count[u]++,h=0,d>=l&&(h=r[d-l]),g=i[d*2],e.opt_len+=g*(u+h),s&&(e.static_len+=g*(o[d*2+1]+h)));if(v!==0){do{for(u=c-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[c]--,v-=2}while(v>0);for(u=c;u!==0;u--)for(d=e.bl_count[u];d!==0;)a=e.heap[--f],!(a>n)&&(i[a*2+1]!==u&&(e.opt_len+=(u-i[a*2+1])*i[a*2],i[a*2+1]=u),d--)}}function hl(e,t,i){var n=new Array(Et+1),o=0,s,r;for(s=1;s<=Et;s++)n[s]=o=o+i[s-1]<<1;for(r=0;r<=t;r++){var l=e[r*2+1];l!==0&&(e[r*2]=ul(n[l]++,l))}}function Sf(){var e,t,i,n,o,s=new Array(Et+1);for(i=0,n=0;n<Wr-1;n++)for(Jr[n]=i,e=0;e<1<<Or[n];e++)Ai[i++]=n;for(Ai[i-1]=n,o=0,n=0;n<16;n++)for(tn[n]=o,e=0;e<1<<Vi[n];e++)wi[o++]=n;for(o>>=7;n<$t;n++)for(tn[n]=o<<7,e=0;e<1<<Vi[n]-7;e++)wi[256+o++]=n;for(t=0;t<=Et;t++)s[t]=0;for(e=0;e<=143;)Ve[e*2+1]=8,e++,s[8]++;for(;e<=255;)Ve[e*2+1]=9,e++,s[9]++;for(;e<=279;)Ve[e*2+1]=7,e++,s[7]++;for(;e<=287;)Ve[e*2+1]=8,e++,s[8]++;for(hl(Ve,vi+1,s),e=0;e<$t;e++)gi[e*2+1]=5,gi[e*2]=ul(e,5);sl=new On(Ve,Or,Li+1,vi,Et),ol=new On(gi,Vi,0,$t,Et),al=new On(new Array(0),xf,0,Yr,bf)}function fl(e){var t;for(t=0;t<vi;t++)e.dyn_ltree[t*2]=0;for(t=0;t<$t;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Yr;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Qr*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function cl(e){e.bi_valid>8?bi(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Cf(e,t,i,n){cl(e),bi(e,i),bi(e,~i),Ye(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function Fs(e,t,i,n){var o=t*2,s=i*2;return e[o]<e[s]||e[o]===e[s]&&n[t]<=n[i]}function Rn(e,t,i){for(var n=e.heap[i],o=i<<1;o<=e.heap_len&&(o<e.heap_len&&Fs(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!Fs(t,n,e.heap[o],e.depth));)e.heap[i]=e.heap[o],i=o,o<<=1;e.heap[i]=n}function Bs(e,t,i){var n,o,s=0,r,l;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],o=e.pending_buf[e.l_buf+s],s++,n===0?Me(e,o,t):(r=Ai[o],Me(e,r+Li+1,t),l=Or[r],l!==0&&(o-=Jr[r],_e(e,o,l)),n--,r=ll(n),Me(e,r,i),l=Vi[r],l!==0&&(n-=tn[r],_e(e,n,l)));while(s<e.last_lit);Me(e,Qr,t)}function Lr(e,t){var i=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.elems,r,l,c=-1,f;for(e.heap_len=0,e.heap_max=el,r=0;r<s;r++)i[r*2]!==0?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[r*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=c<2?++c:0,i[f*2]=1,e.depth[f]=0,e.opt_len--,o&&(e.static_len-=n[f*2+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)Rn(e,i,r);f=s;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Rn(e,i,1),l=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=l,i[f*2]=i[r*2]+i[l*2],e.depth[f]=(e.depth[r]>=e.depth[l]?e.depth[r]:e.depth[l])+1,i[r*2+1]=i[l*2+1]=f,e.heap[1]=f++,Rn(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],If(e,t),hl(i,c,e.bl_count)}function zs(e,t,i){var n,o=-1,s,r=t[0*2+1],l=0,c=7,f=4;for(r===0&&(c=138,f=3),t[(i+1)*2+1]=65535,n=0;n<=i;n++)s=r,r=t[(n+1)*2+1],!(++l<c&&s===r)&&(l<f?e.bl_tree[s*2]+=l:s!==0?(s!==o&&e.bl_tree[s*2]++,e.bl_tree[tl*2]++):l<=10?e.bl_tree[il*2]++:e.bl_tree[nl*2]++,l=0,o=s,r===0?(c=138,f=3):s===r?(c=6,f=3):(c=7,f=4))}function Us(e,t,i){var n,o=-1,s,r=t[0*2+1],l=0,c=7,f=4;for(r===0&&(c=138,f=3),n=0;n<=i;n++)if(s=r,r=t[(n+1)*2+1],!(++l<c&&s===r)){if(l<f)do Me(e,s,e.bl_tree);while(--l!==0);else s!==0?(s!==o&&(Me(e,s,e.bl_tree),l--),Me(e,tl,e.bl_tree),_e(e,l-3,2)):l<=10?(Me(e,il,e.bl_tree),_e(e,l-3,3)):(Me(e,nl,e.bl_tree),_e(e,l-11,7));l=0,o=s,r===0?(c=138,f=3):s===r?(c=6,f=3):(c=7,f=4)}}function Df(e){var t;for(zs(e,e.dyn_ltree,e.l_desc.max_code),zs(e,e.dyn_dtree,e.d_desc.max_code),Lr(e,e.bl_desc),t=Yr-1;t>=3&&e.bl_tree[rl[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Of(e,t,i,n){var o;for(_e(e,t-257,5),_e(e,i-1,5),_e(e,n-4,4),o=0;o<n;o++)_e(e,e.bl_tree[rl[o]*2+1],3);Us(e,e.dyn_ltree,t-1),Us(e,e.dyn_dtree,i-1)}function Lf(e){var t=4093624447,i;for(i=0;i<=31;i++,t>>>=1)if(t&1&&e.dyn_ltree[i*2]!==0)return ks;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Ps;for(i=32;i<Li;i++)if(e.dyn_ltree[i*2]!==0)return Ps;return ks}var js=!1;function Rf(e){js||(Sf(),js=!0),e.l_desc=new Ln(e.dyn_ltree,sl),e.d_desc=new Ln(e.dyn_dtree,ol),e.bl_desc=new Ln(e.bl_tree,al),e.bi_buf=0,e.bi_valid=0,fl(e)}function dl(e,t,i,n){_e(e,(yf<<1)+(n?1:0),3),Cf(e,t,i)}function Nf(e){_e(e,$a<<1,3),Me(e,Qr,Ve),Tf(e)}function Mf(e,t,i,n){var o,s,r=0;e.level>0?(e.strm.data_type===_f&&(e.strm.data_type=Lf(e)),Lr(e,e.l_desc),Lr(e,e.d_desc),r=Df(e),o=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=o&&(o=s)):o=s=i+5,i+4<=o&&t!==-1?dl(e,t,i,n):e.strategy===mf||s===o?(_e(e,($a<<1)+(n?1:0),3),Bs(e,Ve,gi)):(_e(e,(vf<<1)+(n?1:0),3),Of(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),Bs(e,e.dyn_ltree,e.dyn_dtree)),fl(e),n&&cl(e)}function ft(e,t,i){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=i&255,e.last_lit++,t===0?e.dyn_ltree[i*2]++:(e.matches++,t--,e.dyn_ltree[(Ai[i]+Li+1)*2]++,e.dyn_dtree[ll(t)*2]++),e.last_lit===e.lit_bufsize-1}function Rr(e,t,i,n){for(var o=e&65535|0,s=e>>>16&65535|0,r=0;i!==0;){r=i>2e3?2e3:i,i-=r;do o=o+t[n++]|0,s=s+o|0;while(--r);o%=65521,s%=65521}return o|s<<16|0}function qf(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[i]=e}return t}var kf=qf();function he(e,t,i,n){var o=kf,s=n+i;e^=-1;for(var r=n;r<s;r++)e=e>>>8^o[(e^t[r])&255];return e^-1}var Ft=0,Pf=1,Ff=3,ct=4,Xs=5,it=0,Hs=1,dt=-2,Bf=-3,Nn=-5,zf=-1,Uf=1,Pi=2,jf=3,Xf=4,Hf=2,Kr=8,Vf=9,Gf=29,Zf=256,Nr=Zf+1+Gf,Wf=30,Yf=19,Qf=2*Nr+1,Jf=15,$=3,ot=258,De=ot+$+1,Kf=32,$r=42,Mr=69,Gi=73,Zi=91,Wi=103,Tt=113,di=666,ue=1,Ri=2,It=3,oi=4,$f=3;function at(e,t){return e.msg=Ka[t],t}function Vs(e){return(e<<1)-(e>4?9:0)}function wt(e){for(var t=e.length;--t>=0;)e[t]=0}function et(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),i!==0&&(Ye(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,t.pending===0&&(t.pending_out=0))}function pe(e,t){Mf(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,et(e.strm)}function Q(e,t){e.pending_buf[e.pending++]=t}function fi(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function ec(e,t,i,n){var o=e.avail_in;return o>n&&(o=n),o===0?0:(e.avail_in-=o,Ye(t,e.input,e.next_in,o,i),e.state.wrap===1?e.adler=Rr(e.adler,t,o,i):e.state.wrap===2&&(e.adler=he(e.adler,t,o,i)),e.next_in+=o,e.total_in+=o,o)}function pl(e,t){var i=e.max_chain_length,n=e.strstart,o,s,r=e.prev_length,l=e.nice_match,c=e.strstart>e.w_size-De?e.strstart-(e.w_size-De):0,f=e.window,d=e.w_mask,a=e.prev,u=e.strstart+ot,h=f[n+r-1],g=f[n+r];e.prev_length>=e.good_match&&(i>>=2),l>e.lookahead&&(l=e.lookahead);do if(o=t,!(f[o+r]!==g||f[o+r-1]!==h||f[o]!==f[n]||f[++o]!==f[n+1])){n+=2,o++;do;while(f[++n]===f[++o]&&f[++n]===f[++o]&&f[++n]===f[++o]&&f[++n]===f[++o]&&f[++n]===f[++o]&&f[++n]===f[++o]&&f[++n]===f[++o]&&f[++n]===f[++o]&&n<u);if(s=ot-(u-n),n=u-ot,s>r){if(e.match_start=t,r=s,s>=l)break;h=f[n+r-1],g=f[n+r]}}while((t=a[t&d])>c&&--i!==0);return r<=e.lookahead?r:e.lookahead}function Ni(e){var t=e.w_size,i,n,o,s,r;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-De)){Ye(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,i=n;do o=e.head[--i],e.head[i]=o>=t?o-t:0;while(--n);n=t,i=n;do o=e.prev[--i],e.prev[i]=o>=t?o-t:0;while(--n);s+=t}if(e.strm.avail_in===0)break;if(n=ec(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=n,e.lookahead+e.insert>=$)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+$-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<$)););}while(e.lookahead<De&&e.strm.avail_in!==0)}function tc(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ni(e),e.lookahead===0&&t===Ft)return ue;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,pe(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-De&&(pe(e,!1),e.strm.avail_out===0))return ue}return e.insert=0,t===ct?(pe(e,!0),e.strm.avail_out===0?It:oi):(e.strstart>e.block_start&&(pe(e,!1),e.strm.avail_out===0),ue)}function Mn(e,t){for(var i,n;;){if(e.lookahead<De){if(Ni(e),e.lookahead<De&&t===Ft)return ue;if(e.lookahead===0)break}if(i=0,e.lookahead>=$&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),i!==0&&e.strstart-i<=e.w_size-De&&(e.match_length=pl(e,i)),e.match_length>=$)if(n=ft(e,e.strstart-e.match_start,e.match_length-$),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=$){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=ft(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(pe(e,!1),e.strm.avail_out===0))return ue}return e.insert=e.strstart<$-1?e.strstart:$-1,t===ct?(pe(e,!0),e.strm.avail_out===0?It:oi):e.last_lit&&(pe(e,!1),e.strm.avail_out===0)?ue:Ri}function Ht(e,t){for(var i,n,o;;){if(e.lookahead<De){if(Ni(e),e.lookahead<De&&t===Ft)return ue;if(e.lookahead===0)break}if(i=0,e.lookahead>=$&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=$-1,i!==0&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-De&&(e.match_length=pl(e,i),e.match_length<=5&&(e.strategy===Uf||e.match_length===$&&e.strstart-e.match_start>4096)&&(e.match_length=$-1)),e.prev_length>=$&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-$,n=ft(e,e.strstart-1-e.prev_match,e.prev_length-$),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=$-1,e.strstart++,n&&(pe(e,!1),e.strm.avail_out===0))return ue}else if(e.match_available){if(n=ft(e,0,e.window[e.strstart-1]),n&&pe(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ue}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ft(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<$-1?e.strstart:$-1,t===ct?(pe(e,!0),e.strm.avail_out===0?It:oi):e.last_lit&&(pe(e,!1),e.strm.avail_out===0)?ue:Ri}function ic(e,t){for(var i,n,o,s,r=e.window;;){if(e.lookahead<=ot){if(Ni(e),e.lookahead<=ot&&t===Ft)return ue;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=$&&e.strstart>0&&(o=e.strstart-1,n=r[o],n===r[++o]&&n===r[++o]&&n===r[++o])){s=e.strstart+ot;do;while(n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&o<s);e.match_length=ot-(s-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=$?(i=ft(e,1,e.match_length-$),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=ft(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(pe(e,!1),e.strm.avail_out===0))return ue}return e.insert=0,t===ct?(pe(e,!0),e.strm.avail_out===0?It:oi):e.last_lit&&(pe(e,!1),e.strm.avail_out===0)?ue:Ri}function nc(e,t){for(var i;;){if(e.lookahead===0&&(Ni(e),e.lookahead===0)){if(t===Ft)return ue;break}if(e.match_length=0,i=ft(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(pe(e,!1),e.strm.avail_out===0))return ue}return e.insert=0,t===ct?(pe(e,!0),e.strm.avail_out===0?It:oi):e.last_lit&&(pe(e,!1),e.strm.avail_out===0)?ue:Ri}function Re(e,t,i,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=o}var Yt;Yt=[new Re(0,0,0,0,tc),new Re(4,4,8,4,Mn),new Re(4,5,16,8,Mn),new Re(4,6,32,32,Mn),new Re(4,4,16,16,Ht),new Re(8,16,32,32,Ht),new Re(8,16,128,128,Ht),new Re(8,32,128,256,Ht),new Re(32,128,258,1024,Ht),new Re(32,258,258,4096,Ht)];function rc(e){e.window_size=2*e.w_size,wt(e.head),e.max_lazy_match=Yt[e.level].max_lazy,e.good_match=Yt[e.level].good_length,e.nice_match=Yt[e.level].nice_length,e.max_chain_length=Yt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=$-1,e.match_available=0,e.ins_h=0}function sc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Kr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Te(Qf*2),this.dyn_dtree=new Te((2*Wf+1)*2),this.bl_tree=new Te((2*Yf+1)*2),wt(this.dyn_ltree),wt(this.dyn_dtree),wt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Te(Jf+1),this.heap=new Te(2*Nr+1),wt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Te(2*Nr+1),wt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function oc(e){var t;return!e||!e.state?at(e,dt):(e.total_in=e.total_out=0,e.data_type=Hf,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?$r:Tt,e.adler=t.wrap===2?0:1,t.last_flush=Ft,Rf(t),it)}function gl(e){var t=oc(e);return t===it&&rc(e.state),t}function ac(e,t,i,n,o,s){if(!e)return dt;var r=1;if(t===zf&&(t=6),n<0?(r=0,n=-n):n>15&&(r=2,n-=16),o<1||o>Vf||i!==Kr||n<8||n>15||t<0||t>9||s<0||s>Xf)return at(e,dt);n===8&&(n=9);var l=new sc;return e.state=l,l.strm=e,l.wrap=r,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+$-1)/$),l.window=new $i(l.w_size*2),l.head=new Te(l.hash_size),l.prev=new Te(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new $i(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=i,gl(e)}function lc(e,t){var i,n,o,s;if(!e||!e.state||t>Xs||t<0)return e?at(e,dt):dt;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===di&&t!==ct)return at(e,e.avail_out===0?Nn:dt);if(n.strm=e,i=n.last_flush,n.last_flush=t,n.status===$r)if(n.wrap===2)e.adler=0,Q(n,31),Q(n,139),Q(n,8),n.gzhead?(Q(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Q(n,n.gzhead.time&255),Q(n,n.gzhead.time>>8&255),Q(n,n.gzhead.time>>16&255),Q(n,n.gzhead.time>>24&255),Q(n,n.level===9?2:n.strategy>=Pi||n.level<2?4:0),Q(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Q(n,n.gzhead.extra.length&255),Q(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=he(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Mr):(Q(n,0),Q(n,0),Q(n,0),Q(n,0),Q(n,0),Q(n,n.level===9?2:n.strategy>=Pi||n.level<2?4:0),Q(n,$f),n.status=Tt);else{var r=Kr+(n.w_bits-8<<4)<<8,l=-1;n.strategy>=Pi||n.level<2?l=0:n.level<6?l=1:n.level===6?l=2:l=3,r|=l<<6,n.strstart!==0&&(r|=Kf),r+=31-r%31,n.status=Tt,fi(n,r),n.strstart!==0&&(fi(n,e.adler>>>16),fi(n,e.adler&65535)),e.adler=1}if(n.status===Mr)if(n.gzhead.extra){for(o=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=he(e.adler,n.pending_buf,n.pending-o,o)),et(e),o=n.pending,n.pending===n.pending_buf_size));)Q(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>o&&(e.adler=he(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=Gi)}else n.status=Gi;if(n.status===Gi)if(n.gzhead.name){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=he(e.adler,n.pending_buf,n.pending-o,o)),et(e),o=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,Q(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>o&&(e.adler=he(e.adler,n.pending_buf,n.pending-o,o)),s===0&&(n.gzindex=0,n.status=Zi)}else n.status=Zi;if(n.status===Zi)if(n.gzhead.comment){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=he(e.adler,n.pending_buf,n.pending-o,o)),et(e),o=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,Q(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>o&&(e.adler=he(e.adler,n.pending_buf,n.pending-o,o)),s===0&&(n.status=Wi)}else n.status=Wi;if(n.status===Wi&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&et(e),n.pending+2<=n.pending_buf_size&&(Q(n,e.adler&255),Q(n,e.adler>>8&255),e.adler=0,n.status=Tt)):n.status=Tt),n.pending!==0){if(et(e),e.avail_out===0)return n.last_flush=-1,it}else if(e.avail_in===0&&Vs(t)<=Vs(i)&&t!==ct)return at(e,Nn);if(n.status===di&&e.avail_in!==0)return at(e,Nn);if(e.avail_in!==0||n.lookahead!==0||t!==Ft&&n.status!==di){var c=n.strategy===Pi?nc(n,t):n.strategy===jf?ic(n,t):Yt[n.level].func(n,t);if((c===It||c===oi)&&(n.status=di),c===ue||c===It)return e.avail_out===0&&(n.last_flush=-1),it;if(c===Ri&&(t===Pf?Nf(n):t!==Xs&&(dl(n,0,0,!1),t===Ff&&(wt(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),et(e),e.avail_out===0))return n.last_flush=-1,it}return t!==ct?it:n.wrap<=0?Hs:(n.wrap===2?(Q(n,e.adler&255),Q(n,e.adler>>8&255),Q(n,e.adler>>16&255),Q(n,e.adler>>24&255),Q(n,e.total_in&255),Q(n,e.total_in>>8&255),Q(n,e.total_in>>16&255),Q(n,e.total_in>>24&255)):(fi(n,e.adler>>>16),fi(n,e.adler&65535)),et(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?it:Hs)}function uc(e){var t;return!e||!e.state?dt:(t=e.state.status,t!==$r&&t!==Mr&&t!==Gi&&t!==Zi&&t!==Wi&&t!==Tt&&t!==di?at(e,dt):(e.state=null,t===Tt?at(e,Bf):it))}var Fi=30,hc=12;function fc(e,t){var i,n,o,s,r,l,c,f,d,a,u,h,g,v,w,A,x,_,b,T,D,C,O,p,S;i=e.state,n=e.next_in,p=e.input,o=n+(e.avail_in-5),s=e.next_out,S=e.output,r=s-(t-e.avail_out),l=s+(e.avail_out-257),c=i.dmax,f=i.wsize,d=i.whave,a=i.wnext,u=i.window,h=i.hold,g=i.bits,v=i.lencode,w=i.distcode,A=(1<<i.lenbits)-1,x=(1<<i.distbits)-1;e:do{g<15&&(h+=p[n++]<<g,g+=8,h+=p[n++]<<g,g+=8),_=v[h&A];t:for(;;){if(b=_>>>24,h>>>=b,g-=b,b=_>>>16&255,b===0)S[s++]=_&65535;else if(b&16){T=_&65535,b&=15,b&&(g<b&&(h+=p[n++]<<g,g+=8),T+=h&(1<<b)-1,h>>>=b,g-=b),g<15&&(h+=p[n++]<<g,g+=8,h+=p[n++]<<g,g+=8),_=w[h&x];i:for(;;){if(b=_>>>24,h>>>=b,g-=b,b=_>>>16&255,b&16){if(D=_&65535,b&=15,g<b&&(h+=p[n++]<<g,g+=8,g<b&&(h+=p[n++]<<g,g+=8)),D+=h&(1<<b)-1,D>c){e.msg="invalid distance too far back",i.mode=Fi;break e}if(h>>>=b,g-=b,b=s-r,D>b){if(b=D-b,b>d&&i.sane){e.msg="invalid distance too far back",i.mode=Fi;break e}if(C=0,O=u,a===0){if(C+=f-b,b<T){T-=b;do S[s++]=u[C++];while(--b);C=s-D,O=S}}else if(a<b){if(C+=f+a-b,b-=a,b<T){T-=b;do S[s++]=u[C++];while(--b);if(C=0,a<T){b=a,T-=b;do S[s++]=u[C++];while(--b);C=s-D,O=S}}}else if(C+=a-b,b<T){T-=b;do S[s++]=u[C++];while(--b);C=s-D,O=S}for(;T>2;)S[s++]=O[C++],S[s++]=O[C++],S[s++]=O[C++],T-=3;T&&(S[s++]=O[C++],T>1&&(S[s++]=O[C++]))}else{C=s-D;do S[s++]=S[C++],S[s++]=S[C++],S[s++]=S[C++],T-=3;while(T>2);T&&(S[s++]=S[C++],T>1&&(S[s++]=S[C++]))}}else if(b&64){e.msg="invalid distance code",i.mode=Fi;break e}else{_=w[(_&65535)+(h&(1<<b)-1)];continue i}break}}else if(b&64)if(b&32){i.mode=hc;break e}else{e.msg="invalid literal/length code",i.mode=Fi;break e}else{_=v[(_&65535)+(h&(1<<b)-1)];continue t}break}}while(n<o&&s<l);T=g>>3,n-=T,g-=T<<3,h&=(1<<g)-1,e.next_in=n,e.next_out=s,e.avail_in=n<o?5+(o-n):5-(n-o),e.avail_out=s<l?257+(l-s):257-(s-l),i.hold=h,i.bits=g}var Vt=15,Gs=852,Zs=592,Ws=0,qn=1,Ys=2,cc=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],dc=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],pc=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],gc=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function mi(e,t,i,n,o,s,r,l){var c=l.bits,f=0,d=0,a=0,u=0,h=0,g=0,v=0,w=0,A=0,x=0,_,b,T,D,C,O=null,p=0,S,N=new Te(Vt+1),P=new Te(Vt+1),j=null,z=0,J,Z,X;for(f=0;f<=Vt;f++)N[f]=0;for(d=0;d<n;d++)N[t[i+d]]++;for(h=c,u=Vt;u>=1&&N[u]===0;u--);if(h>u&&(h=u),u===0)return o[s++]=1<<24|64<<16|0,o[s++]=1<<24|64<<16|0,l.bits=1,0;for(a=1;a<u&&N[a]===0;a++);for(h<a&&(h=a),w=1,f=1;f<=Vt;f++)if(w<<=1,w-=N[f],w<0)return-1;if(w>0&&(e===Ws||u!==1))return-1;for(P[1]=0,f=1;f<Vt;f++)P[f+1]=P[f]+N[f];for(d=0;d<n;d++)t[i+d]!==0&&(r[P[t[i+d]]++]=d);if(e===Ws?(O=j=r,S=19):e===qn?(O=cc,p-=257,j=dc,z-=257,S=256):(O=pc,j=gc,S=-1),x=0,d=0,f=a,C=s,g=h,v=0,T=-1,A=1<<h,D=A-1,e===qn&&A>Gs||e===Ys&&A>Zs)return 1;for(;;){J=f-v,r[d]<S?(Z=0,X=r[d]):r[d]>S?(Z=j[z+r[d]],X=O[p+r[d]]):(Z=96,X=0),_=1<<f-v,b=1<<g,a=b;do b-=_,o[C+(x>>v)+b]=J<<24|Z<<16|X|0;while(b!==0);for(_=1<<f-1;x&_;)_>>=1;if(_!==0?(x&=_-1,x+=_):x=0,d++,--N[f]===0){if(f===u)break;f=t[i+r[d]]}if(f>h&&(x&D)!==T){for(v===0&&(v=h),C+=a,g=f-v,w=1<<g;g+v<u&&(w-=N[g+v],!(w<=0));)g++,w<<=1;if(A+=1<<g,e===qn&&A>Gs||e===Ys&&A>Zs)return 1;T=x&D,o[T]=h<<24|g<<16|C-s|0}}return x!==0&&(o[C+x]=f-v<<24|64<<16|0),l.bits=h,0}var mc=0,ml=1,_l=2,Qs=4,_c=5,Bi=6,xi=0,yc=1,vc=2,gt=-2,wc=-3,Ac=-4,bc=-5,Js=8,yl=1,Ks=2,$s=3,eo=4,to=5,io=6,no=7,ro=8,so=9,oo=10,ao=11,ze=12,kn=13,lo=14,Pn=15,uo=16,ho=17,fo=18,co=19,zi=20,Ui=21,po=22,go=23,mo=24,_o=25,yo=26,Fn=27,vo=28,wo=29,re=30,xc=31,Ec=32,Tc=852,Ic=592;function Ao(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function Sc(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Te(320),this.work=new Te(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Cc(e){var t;return!e||!e.state?gt:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=yl,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new en(Tc),t.distcode=t.distdyn=new en(Ic),t.sane=1,t.back=-1,xi)}function vl(e){var t;return!e||!e.state?gt:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,Cc(e))}function Dc(e,t){var i,n;return!e||!e.state||(n=e.state,t<0?(i=0,t=-t):(i=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?gt:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,vl(e))}function Oc(e,t){var i,n;return e?(n=new Sc,e.state=n,n.window=null,i=Dc(e,t),i!==xi&&(e.state=null),i):gt}var bo=!0,Bn,zn;function Lc(e){if(bo){var t;for(Bn=new en(512),zn=new en(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(mi(ml,e.lens,0,288,Bn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;mi(_l,e.lens,0,32,zn,0,e.work,{bits:5}),bo=!1}e.lencode=Bn,e.lenbits=9,e.distcode=zn,e.distbits=5}function Rc(e,t,i,n){var o,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new $i(s.wsize)),n>=s.wsize?(Ye(s.window,t,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(o=s.wsize-s.wnext,o>n&&(o=n),Ye(s.window,t,i-n,o,s.wnext),n-=o,n?(Ye(s.window,t,i-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}function Nc(e,t){var i,n,o,s,r,l,c,f,d,a,u,h,g,v,w=0,A,x,_,b,T,D,C,O,p=new $i(4),S,N,P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return gt;i=e.state,i.mode===ze&&(i.mode=kn),r=e.next_out,o=e.output,c=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,f=i.hold,d=i.bits,a=l,u=c,O=xi;e:for(;;)switch(i.mode){case yl:if(i.wrap===0){i.mode=kn;break}for(;d<16;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(i.wrap&2&&f===35615){i.check=0,p[0]=f&255,p[1]=f>>>8&255,i.check=he(i.check,p,2,0),f=0,d=0,i.mode=Ks;break}if(i.flags=0,i.head&&(i.head.done=!1),!(i.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",i.mode=re;break}if((f&15)!==Js){e.msg="unknown compression method",i.mode=re;break}if(f>>>=4,d-=4,C=(f&15)+8,i.wbits===0)i.wbits=C;else if(C>i.wbits){e.msg="invalid window size",i.mode=re;break}i.dmax=1<<C,e.adler=i.check=1,i.mode=f&512?oo:ze,f=0,d=0;break;case Ks:for(;d<16;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(i.flags=f,(i.flags&255)!==Js){e.msg="unknown compression method",i.mode=re;break}if(i.flags&57344){e.msg="unknown header flags set",i.mode=re;break}i.head&&(i.head.text=f>>8&1),i.flags&512&&(p[0]=f&255,p[1]=f>>>8&255,i.check=he(i.check,p,2,0)),f=0,d=0,i.mode=$s;case $s:for(;d<32;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}i.head&&(i.head.time=f),i.flags&512&&(p[0]=f&255,p[1]=f>>>8&255,p[2]=f>>>16&255,p[3]=f>>>24&255,i.check=he(i.check,p,4,0)),f=0,d=0,i.mode=eo;case eo:for(;d<16;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}i.head&&(i.head.xflags=f&255,i.head.os=f>>8),i.flags&512&&(p[0]=f&255,p[1]=f>>>8&255,i.check=he(i.check,p,2,0)),f=0,d=0,i.mode=to;case to:if(i.flags&1024){for(;d<16;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}i.length=f,i.head&&(i.head.extra_len=f),i.flags&512&&(p[0]=f&255,p[1]=f>>>8&255,i.check=he(i.check,p,2,0)),f=0,d=0}else i.head&&(i.head.extra=null);i.mode=io;case io:if(i.flags&1024&&(h=i.length,h>l&&(h=l),h&&(i.head&&(C=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),Ye(i.head.extra,n,s,h,C)),i.flags&512&&(i.check=he(i.check,n,h,s)),l-=h,s+=h,i.length-=h),i.length))break e;i.length=0,i.mode=no;case no:if(i.flags&2048){if(l===0)break e;h=0;do C=n[s+h++],i.head&&C&&i.length<65536&&(i.head.name+=String.fromCharCode(C));while(C&&h<l);if(i.flags&512&&(i.check=he(i.check,n,h,s)),l-=h,s+=h,C)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=ro;case ro:if(i.flags&4096){if(l===0)break e;h=0;do C=n[s+h++],i.head&&C&&i.length<65536&&(i.head.comment+=String.fromCharCode(C));while(C&&h<l);if(i.flags&512&&(i.check=he(i.check,n,h,s)),l-=h,s+=h,C)break e}else i.head&&(i.head.comment=null);i.mode=so;case so:if(i.flags&512){for(;d<16;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(f!==(i.check&65535)){e.msg="header crc mismatch",i.mode=re;break}f=0,d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=ze;break;case oo:for(;d<32;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}e.adler=i.check=Ao(f),f=0,d=0,i.mode=ao;case ao:if(i.havedict===0)return e.next_out=r,e.avail_out=c,e.next_in=s,e.avail_in=l,i.hold=f,i.bits=d,vc;e.adler=i.check=1,i.mode=ze;case ze:if(t===_c||t===Bi)break e;case kn:if(i.last){f>>>=d&7,d-=d&7,i.mode=Fn;break}for(;d<3;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}switch(i.last=f&1,f>>>=1,d-=1,f&3){case 0:i.mode=lo;break;case 1:if(Lc(i),i.mode=zi,t===Bi){f>>>=2,d-=2;break e}break;case 2:i.mode=ho;break;case 3:e.msg="invalid block type",i.mode=re}f>>>=2,d-=2;break;case lo:for(f>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",i.mode=re;break}if(i.length=f&65535,f=0,d=0,i.mode=Pn,t===Bi)break e;case Pn:i.mode=uo;case uo:if(h=i.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;Ye(o,n,s,h,r),l-=h,s+=h,c-=h,r+=h,i.length-=h;break}i.mode=ze;break;case ho:for(;d<14;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(i.nlen=(f&31)+257,f>>>=5,d-=5,i.ndist=(f&31)+1,f>>>=5,d-=5,i.ncode=(f&15)+4,f>>>=4,d-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=re;break}i.have=0,i.mode=fo;case fo:for(;i.have<i.ncode;){for(;d<3;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}i.lens[P[i.have++]]=f&7,f>>>=3,d-=3}for(;i.have<19;)i.lens[P[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},O=mi(mc,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,O){e.msg="invalid code lengths set",i.mode=re;break}i.have=0,i.mode=co;case co:for(;i.have<i.nlen+i.ndist;){for(;w=i.lencode[f&(1<<i.lenbits)-1],A=w>>>24,x=w>>>16&255,_=w&65535,!(A<=d);){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(_<16)f>>>=A,d-=A,i.lens[i.have++]=_;else{if(_===16){for(N=A+2;d<N;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(f>>>=A,d-=A,i.have===0){e.msg="invalid bit length repeat",i.mode=re;break}C=i.lens[i.have-1],h=3+(f&3),f>>>=2,d-=2}else if(_===17){for(N=A+3;d<N;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}f>>>=A,d-=A,C=0,h=3+(f&7),f>>>=3,d-=3}else{for(N=A+7;d<N;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}f>>>=A,d-=A,C=0,h=11+(f&127),f>>>=7,d-=7}if(i.have+h>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=re;break}for(;h--;)i.lens[i.have++]=C}}if(i.mode===re)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=re;break}if(i.lenbits=9,S={bits:i.lenbits},O=mi(ml,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,O){e.msg="invalid literal/lengths set",i.mode=re;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},O=mi(_l,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,O){e.msg="invalid distances set",i.mode=re;break}if(i.mode=zi,t===Bi)break e;case zi:i.mode=Ui;case Ui:if(l>=6&&c>=258){e.next_out=r,e.avail_out=c,e.next_in=s,e.avail_in=l,i.hold=f,i.bits=d,fc(e,u),r=e.next_out,o=e.output,c=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,f=i.hold,d=i.bits,i.mode===ze&&(i.back=-1);break}for(i.back=0;w=i.lencode[f&(1<<i.lenbits)-1],A=w>>>24,x=w>>>16&255,_=w&65535,!(A<=d);){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(x&&!(x&240)){for(b=A,T=x,D=_;w=i.lencode[D+((f&(1<<b+T)-1)>>b)],A=w>>>24,x=w>>>16&255,_=w&65535,!(b+A<=d);){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}f>>>=b,d-=b,i.back+=b}if(f>>>=A,d-=A,i.back+=A,i.length=_,x===0){i.mode=yo;break}if(x&32){i.back=-1,i.mode=ze;break}if(x&64){e.msg="invalid literal/length code",i.mode=re;break}i.extra=x&15,i.mode=po;case po:if(i.extra){for(N=i.extra;d<N;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}i.length+=f&(1<<i.extra)-1,f>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=go;case go:for(;w=i.distcode[f&(1<<i.distbits)-1],A=w>>>24,x=w>>>16&255,_=w&65535,!(A<=d);){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(!(x&240)){for(b=A,T=x,D=_;w=i.distcode[D+((f&(1<<b+T)-1)>>b)],A=w>>>24,x=w>>>16&255,_=w&65535,!(b+A<=d);){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}f>>>=b,d-=b,i.back+=b}if(f>>>=A,d-=A,i.back+=A,x&64){e.msg="invalid distance code",i.mode=re;break}i.offset=_,i.extra=x&15,i.mode=mo;case mo:if(i.extra){for(N=i.extra;d<N;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}i.offset+=f&(1<<i.extra)-1,f>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=re;break}i.mode=_o;case _o:if(c===0)break e;if(h=u-c,i.offset>h){if(h=i.offset-h,h>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=re;break}h>i.wnext?(h-=i.wnext,g=i.wsize-h):g=i.wnext-h,h>i.length&&(h=i.length),v=i.window}else v=o,g=r-i.offset,h=i.length;h>c&&(h=c),c-=h,i.length-=h;do o[r++]=v[g++];while(--h);i.length===0&&(i.mode=Ui);break;case yo:if(c===0)break e;o[r++]=i.length,c--,i.mode=Ui;break;case Fn:if(i.wrap){for(;d<32;){if(l===0)break e;l--,f|=n[s++]<<d,d+=8}if(u-=c,e.total_out+=u,i.total+=u,u&&(e.adler=i.check=i.flags?he(i.check,o,u,r-u):Rr(i.check,o,u,r-u)),u=c,(i.flags?f:Ao(f))!==i.check){e.msg="incorrect data check",i.mode=re;break}f=0,d=0}i.mode=vo;case vo:if(i.wrap&&i.flags){for(;d<32;){if(l===0)break e;l--,f+=n[s++]<<d,d+=8}if(f!==(i.total&4294967295)){e.msg="incorrect length check",i.mode=re;break}f=0,d=0}i.mode=wo;case wo:O=yc;break e;case re:O=wc;break e;case xc:return Ac;case Ec:default:return gt}return e.next_out=r,e.avail_out=c,e.next_in=s,e.avail_in=l,i.hold=f,i.bits=d,(i.wsize||u!==e.avail_out&&i.mode<re&&(i.mode<Fn||t!==Qs))&&Rc(e,e.output,e.next_out,u-e.avail_out),a-=e.avail_in,u-=e.avail_out,e.total_in+=a,e.total_out+=u,i.total+=u,i.wrap&&u&&(e.adler=i.check=i.flags?he(i.check,o,u,e.next_out-u):Rr(i.check,o,u,e.next_out-u)),e.data_type=i.bits+(i.last?64:0)+(i.mode===ze?128:0)+(i.mode===zi||i.mode===Pn?256:0),(a===0&&u===0||t===Qs)&&O===xi&&(O=bc),O}function Mc(e){if(!e||!e.state)return gt;var t=e.state;return t.window&&(t.window=null),e.state=null,xi}var es=0,ai=1,dn=2,Ei=3,nn=4,ii=5,Ti=6,Ii=7,wl=0,Al=1,bl=2,xl=3,El=4,Tl=5,qc=6,pn=0,Il=1,kc=2,Pc=-1,Fc=-2,Bc=-3,zc=-5,Uc=0,jc=1,Xc=9,Hc=-1,Vc=1,Gc=2,Zc=3,Wc=4,Yc=0,Qc=0,Jc=1,Kc=2,Sl=8;function Fe(e){if(e<ai||e>Ii)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Fe.prototype.init=function(e,t,i,n,o){this.windowBits=e,this.level=t,this.memLevel=i,this.strategy=n,(this.mode===Ei||this.mode===nn)&&(this.windowBits+=16),this.mode===Ii&&(this.windowBits+=32),(this.mode===ii||this.mode===Ti)&&(this.windowBits=-this.windowBits),this.strm=new gf;var s;switch(this.mode){case ai:case Ei:case ii:s=ac(this.strm,this.level,Sl,this.windowBits,this.memLevel,this.strategy);break;case dn:case nn:case Ti:case Ii:s=Oc(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(s!==pn){this._error(s);return}this.write_in_progress=!1,this.init_done=!0};Fe.prototype.params=function(){throw new Error("deflateParams Not supported")};Fe.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===es)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Fe.prototype.write=function(e,t,i,n,o,s,r){this._writeCheck(),this.write_in_progress=!0;var l=this;return qe.nextTick(function(){l.write_in_progress=!1;var c=l._write(e,t,i,n,o,s,r);l.callback(c[0],c[1]),l.pending_close&&l.close()}),this};function $c(e,t){for(var i=0;i<e.length;i++)this[t+i]=e[i]}Fe.prototype.writeSync=function(e,t,i,n,o,s,r){return this._writeCheck(),this._write(e,t,i,n,o,s,r)};Fe.prototype._write=function(e,t,i,n,o,s,r){if(this.write_in_progress=!0,e!==wl&&e!==Al&&e!==bl&&e!==xl&&e!==El&&e!==Tl)throw new Error("Invalid flush value");t==null&&(t=new R(0),n=0,i=0),o._set?o.set=o._set:o.set=$c;var l=this.strm;l.avail_in=n,l.input=t,l.next_in=i,l.avail_out=r,l.output=o,l.next_out=s;var c;switch(this.mode){case ai:case Ei:case ii:c=lc(l,e);break;case Ii:case dn:case nn:case Ti:c=Nc(l,e);break;default:throw new Error("Unknown mode "+this.mode)}return c!==Il&&c!==pn&&this._error(c),this.write_in_progress=!1,[l.avail_in,l.avail_out]};Fe.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===ai||this.mode===Ei||this.mode===ii?uc(this.strm):Mc(this.strm),this.mode=es};var ji;Fe.prototype.reset=function(){switch(this.mode){case ai:case ii:ji=gl(this.strm);break;case dn:case Ti:ji=vl(this.strm);break}ji!==pn&&this._error(ji)};Fe.prototype._error=function(e){this.onerror(Ka[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};const xo=Object.freeze(Object.defineProperty({__proto__:null,DEFLATE:ai,DEFLATERAW:ii,GUNZIP:nn,GZIP:Ei,INFLATE:dn,INFLATERAW:Ti,NONE:es,UNZIP:Ii,Z_BEST_COMPRESSION:Xc,Z_BEST_SPEED:jc,Z_BINARY:Qc,Z_BLOCK:Tl,Z_BUF_ERROR:zc,Z_DATA_ERROR:Bc,Z_DEFAULT_COMPRESSION:Hc,Z_DEFAULT_STRATEGY:Yc,Z_DEFLATED:Sl,Z_ERRNO:Pc,Z_FILTERED:Vc,Z_FINISH:El,Z_FIXED:Wc,Z_FULL_FLUSH:xl,Z_HUFFMAN_ONLY:Gc,Z_NEED_DICT:kc,Z_NO_COMPRESSION:Uc,Z_NO_FLUSH:wl,Z_OK:pn,Z_PARTIAL_FLUSH:Al,Z_RLE:Zc,Z_STREAM_END:Il,Z_STREAM_ERROR:Fc,Z_SYNC_FLUSH:bl,Z_TEXT:Jc,Z_TREES:qc,Z_UNKNOWN:Kc,Zlib:Fe},Symbol.toStringTag,{value:"Module"}));function ed(e,t){if(!e)throw new Error(t)}var B={};Object.keys(xo).forEach(function(e){B[e]=xo[e]});B.Z_MIN_WINDOWBITS=8;B.Z_MAX_WINDOWBITS=15;B.Z_DEFAULT_WINDOWBITS=15;B.Z_MIN_CHUNK=64;B.Z_MAX_CHUNK=1/0;B.Z_DEFAULT_CHUNK=16*1024;B.Z_MIN_MEMLEVEL=1;B.Z_MAX_MEMLEVEL=9;B.Z_DEFAULT_MEMLEVEL=8;B.Z_MIN_LEVEL=-1;B.Z_MAX_LEVEL=9;B.Z_DEFAULT_LEVEL=B.Z_DEFAULT_COMPRESSION;var Yi={Z_OK:B.Z_OK,Z_STREAM_END:B.Z_STREAM_END,Z_NEED_DICT:B.Z_NEED_DICT,Z_ERRNO:B.Z_ERRNO,Z_STREAM_ERROR:B.Z_STREAM_ERROR,Z_DATA_ERROR:B.Z_DATA_ERROR,Z_MEM_ERROR:B.Z_MEM_ERROR,Z_BUF_ERROR:B.Z_BUF_ERROR,Z_VERSION_ERROR:B.Z_VERSION_ERROR};Object.keys(Yi).forEach(function(e){Yi[Yi[e]]=e});function td(e){return new St(e)}function id(e){return new Ct(e)}function nd(e){return new Lt(e)}function rd(e){return new Rt(e)}function sd(e){return new Dt(e)}function od(e){return new Ot(e)}function ad(e){return new Nt(e)}function ld(e,t,i){return typeof t=="function"&&(i=t,t={}),Bt(new St(t),e,i)}function ud(e,t){return zt(new St(t),e)}function hd(e,t,i){return typeof t=="function"&&(i=t,t={}),Bt(new Dt(t),e,i)}function fd(e,t){return zt(new Dt(t),e)}function cd(e,t,i){return typeof t=="function"&&(i=t,t={}),Bt(new Lt(t),e,i)}function dd(e,t){return zt(new Lt(t),e)}function pd(e,t,i){return typeof t=="function"&&(i=t,t={}),Bt(new Nt(t),e,i)}function gd(e,t){return zt(new Nt(t),e)}function md(e,t,i){return typeof t=="function"&&(i=t,t={}),Bt(new Ct(t),e,i)}function _d(e,t){return zt(new Ct(t),e)}function yd(e,t,i){return typeof t=="function"&&(i=t,t={}),Bt(new Ot(t),e,i)}function vd(e,t){return zt(new Ot(t),e)}function wd(e,t,i){return typeof t=="function"&&(i=t,t={}),Bt(new Rt(t),e,i)}function Ad(e,t){return zt(new Rt(t),e)}function Bt(e,t,i){var n=[],o=0;e.on("error",r),e.on("end",l),e.end(t),s();function s(){for(var c;(c=e.read())!==null;)n.push(c),o+=c.length;e.once("readable",s)}function r(c){e.removeListener("end",l),e.removeListener("readable",s),i(c)}function l(){var c=R.concat(n,o);n=[],i(null,c),e.close()}}function zt(e,t){if(typeof t=="string"&&(t=new R(t)),!R.isBuffer(t))throw new TypeError("Not a string or buffer");var i=B.Z_FINISH;return e._processChunk(t,i)}function St(e){if(!(this instanceof St))return new St(e);oe.call(this,e,B.DEFLATE)}function Ct(e){if(!(this instanceof Ct))return new Ct(e);oe.call(this,e,B.INFLATE)}function Dt(e){if(!(this instanceof Dt))return new Dt(e);oe.call(this,e,B.GZIP)}function Ot(e){if(!(this instanceof Ot))return new Ot(e);oe.call(this,e,B.GUNZIP)}function Lt(e){if(!(this instanceof Lt))return new Lt(e);oe.call(this,e,B.DEFLATERAW)}function Rt(e){if(!(this instanceof Rt))return new Rt(e);oe.call(this,e,B.INFLATERAW)}function Nt(e){if(!(this instanceof Nt))return new Nt(e);oe.call(this,e,B.UNZIP)}function oe(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||B.Z_DEFAULT_CHUNK,be.call(this,e),e.flush&&e.flush!==B.Z_NO_FLUSH&&e.flush!==B.Z_PARTIAL_FLUSH&&e.flush!==B.Z_SYNC_FLUSH&&e.flush!==B.Z_FULL_FLUSH&&e.flush!==B.Z_FINISH&&e.flush!==B.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||B.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<B.Z_MIN_CHUNK||e.chunkSize>B.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<B.Z_MIN_WINDOWBITS||e.windowBits>B.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<B.Z_MIN_LEVEL||e.level>B.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<B.Z_MIN_MEMLEVEL||e.memLevel>B.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=B.Z_FILTERED&&e.strategy!=B.Z_HUFFMAN_ONLY&&e.strategy!=B.Z_RLE&&e.strategy!=B.Z_FIXED&&e.strategy!=B.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!R.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new B.Zlib(t);var i=this;this._hadError=!1,this._binding.onerror=function(s,r){i._binding=null,i._hadError=!0;var l=new Error(s);l.errno=r,l.code=B.codes[r],i.emit("error",l)};var n=B.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(n=e.level);var o=B.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(o=e.strategy),this._binding.init(e.windowBits||B.Z_DEFAULT_WINDOWBITS,n,e.memLevel||B.Z_DEFAULT_MEMLEVEL,o,e.dictionary),this._buffer=new R(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=o,this.once("end",this.close)}ve(oe,be);oe.prototype.params=function(e,t,i){if(e<B.Z_MIN_LEVEL||e>B.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=B.Z_FILTERED&&t!=B.Z_HUFFMAN_ONLY&&t!=B.Z_RLE&&t!=B.Z_FIXED&&t!=B.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(B.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,i&&i())})}else qe.nextTick(i)};oe.prototype.reset=function(){return this._binding.reset()};oe.prototype._flush=function(e){this._transform(new R(0),"",e)};oe.prototype.flush=function(e,t){var i=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=B.Z_FULL_FLUSH),i.ended)t&&qe.nextTick(t);else if(i.ending)t&&this.once("end",t);else if(i.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new R(0),"",t)};oe.prototype.close=function(e){if(e&&qe.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;qe.nextTick(function(){t.emit("close")})}};oe.prototype._transform=function(e,t,i){var n,o=this._writableState,s=o.ending||o.ended,r=s&&(!e||o.length===e.length);if(!e===null&&!R.isBuffer(e))return i(new Error("invalid input"));r?n=B.Z_FINISH:(n=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||B.Z_NO_FLUSH)),this._processChunk(e,n,i)};oe.prototype._processChunk=function(e,t,i){var n=e&&e.length,o=this._chunkSize-this._offset,s=0,r=this,l=typeof i=="function";if(!l){var c=[],f=0,d;this.on("error",function(v){d=v});do var a=this._binding.writeSync(t,e,s,n,this._buffer,this._offset,o);while(!this._hadError&&g(a[0],a[1]));if(this._hadError)throw d;var u=R.concat(c,f);return this.close(),u}var h=this._binding.write(t,e,s,n,this._buffer,this._offset,o);h.buffer=e,h.callback=g;function g(v,w){if(!r._hadError){var A=o-w;if(ed(A>=0,"have should not go down"),A>0){var x=r._buffer.slice(r._offset,r._offset+A);r._offset+=A,l?r.push(x):(c.push(x),f+=x.length)}if((w===0||r._offset>=r._chunkSize)&&(o=r._chunkSize,r._offset=0,r._buffer=new R(r._chunkSize)),w===0){if(s+=n-v,n=v,!l)return!0;var _=r._binding.write(t,e,s,n,r._buffer,r._offset,r._chunkSize);_.callback=g,_.buffer=e;return}if(!l)return!1;i()}}};ve(St,oe);ve(Ct,oe);ve(Dt,oe);ve(Ot,oe);ve(Lt,oe);ve(Rt,oe);ve(Nt,oe);const Eo={codes:Yi,createDeflate:td,createInflate:id,createDeflateRaw:nd,createInflateRaw:rd,createGzip:sd,createGunzip:od,createUnzip:ad,deflate:ld,deflateSync:ud,gzip:hd,gzipSync:fd,deflateRaw:cd,deflateRawSync:dd,unzip:pd,unzipSync:gd,inflate:md,inflateSync:_d,gunzip:yd,gunzipSync:vd,inflateRaw:wd,inflateRawSync:Ad,Deflate:St,Inflate:Ct,Gzip:Dt,Gunzip:Ot,DeflateRaw:Lt,InflateRaw:Rt,Unzip:Nt,Zlib:oe};var Un={},To;function ts(){return To||(To=1,function(){Un.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(H)),Un}var jn={},Ue={},je={},Io;function Je(){return Io||(Io=1,function(){var e,t,i,n,o,s,r,l=[].slice,c={}.hasOwnProperty;e=function(){var f,d,a,u,h,g;if(g=arguments[0],h=2<=arguments.length?l.call(arguments,1):[],o(Object.assign))Object.assign.apply(null,arguments);else for(f=0,a=h.length;f<a;f++)if(u=h[f],u!=null)for(d in u)c.call(u,d)&&(g[d]=u[d]);return g},o=function(f){return!!f&&Object.prototype.toString.call(f)==="[object Function]"},s=function(f){var d;return!!f&&((d=typeof f)=="function"||d==="object")},i=function(f){return o(Array.isArray)?Array.isArray(f):Object.prototype.toString.call(f)==="[object Array]"},n=function(f){var d;if(i(f))return!f.length;for(d in f)if(c.call(f,d))return!1;return!0},r=function(f){var d,a;return s(f)&&(a=Object.getPrototypeOf(f))&&(d=a.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},t=function(f){return o(f.valueOf)?f.valueOf():f},je.assign=e,je.isFunction=o,je.isObject=s,je.isArray=i,je.isEmpty=n,je.isPlainObject=r,je.getValue=t}.call(H)),je}var Xn={exports:{}},So;function Cl(){return So||(So=1,function(){Xn.exports=function(){function e(){}return e.prototype.hasFeature=function(t,i){return!0},e.prototype.createDocumentType=function(t,i,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,i,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,i){throw new Error("This DOM method is not implemented.")},e}()}.call(H)),Xn.exports}var Hn={exports:{}},Vn={exports:{}},Gn={exports:{}},Co;function bd(){return Co||(Co=1,function(){Gn.exports=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}.call(H)),Gn.exports}var Zn={exports:{}},Do;function xd(){return Do||(Do=1,function(){Zn.exports=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}.call(H)),Zn.exports}var Oo;function Ed(){return Oo||(Oo=1,function(){var e,t;e=bd(),t=xd(),Vn.exports=function(){function i(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(i.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),i.prototype.getParameter=function(n){return this.params.hasOwnProperty(n)?this.params[n]:null},i.prototype.canSetParameter=function(n,o){return!0},i.prototype.setParameter=function(n,o){return o!=null?this.params[n]=o:delete this.params[n]},i}()}.call(H)),Vn.exports}var Wn={exports:{}},Yn={exports:{}},Qn={exports:{}},Lo;function ae(){return Lo||(Lo=1,function(){Qn.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(H)),Qn.exports}var Jn={exports:{}},Ro;function Dl(){return Ro||(Ro=1,function(){var e;e=ae(),Ie(),Jn.exports=function(){function t(i,n,o){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),n==null)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(o),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},t.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},t}()}.call(H)),Jn.exports}var Kn={exports:{}},No;function is(){return No||(No=1,function(){Kn.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var i;return i=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,i||null},e.prototype.removeNamedItem=function(t){var i;return i=this.nodes[t],delete this.nodes[t],i||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,i){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,i){throw new Error("This DOM method is not implemented.")},e}()}.call(H)),Kn.exports}var Mo;function ns(){return Mo||(Mo=1,function(){var e,t,i,n,o,s,r,l,c=function(d,a){for(var u in a)f.call(a,u)&&(d[u]=a[u]);function h(){this.constructor=d}return h.prototype=a.prototype,d.prototype=new h,d.__super__=a.prototype,d},f={}.hasOwnProperty;l=Je(),r=l.isObject,s=l.isFunction,o=l.getValue,n=Ie(),e=ae(),t=Dl(),i=is(),Yn.exports=function(d){c(a,d);function a(u,h,g){var v,w,A,x;if(a.__super__.constructor.call(this,u),h==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(h),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,g!=null&&this.attribute(g),u.type===e.Document&&(this.isRoot=!0,this.documentObject=u,u.rootObject=this,u.children)){for(x=u.children,w=0,A=x.length;w<A;w++)if(v=x[w],v.type===e.DocType){v.name=this.name;break}}}return Object.defineProperty(a.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(a.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(a.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(a.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(a.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(a.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(a.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(a.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new i(this.attribs)),this.attributeMap}}),a.prototype.clone=function(){var u,h,g,v;g=Object.create(this),g.isRoot&&(g.documentObject=null),g.attribs={},v=this.attribs;for(h in v)f.call(v,h)&&(u=v[h],g.attribs[h]=u.clone());return g.children=[],this.children.forEach(function(w){var A;return A=w.clone(),A.parent=g,g.children.push(A)}),g},a.prototype.attribute=function(u,h){var g,v;if(u!=null&&(u=o(u)),r(u))for(g in u)f.call(u,g)&&(v=u[g],this.attribute(g,v));else s(h)&&(h=h.apply()),this.options.keepNullAttributes&&h==null?this.attribs[u]=new t(this,u,""):h!=null&&(this.attribs[u]=new t(this,u,h));return this},a.prototype.removeAttribute=function(u){var h,g,v;if(u==null)throw new Error("Missing attribute name. "+this.debugInfo());if(u=o(u),Array.isArray(u))for(g=0,v=u.length;g<v;g++)h=u[g],delete this.attribs[h];else delete this.attribs[u];return this},a.prototype.toString=function(u){return this.options.writer.element(this,this.options.writer.filterOptions(u))},a.prototype.att=function(u,h){return this.attribute(u,h)},a.prototype.a=function(u,h){return this.attribute(u,h)},a.prototype.getAttribute=function(u){return this.attribs.hasOwnProperty(u)?this.attribs[u].value:null},a.prototype.setAttribute=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getAttributeNode=function(u){return this.attribs.hasOwnProperty(u)?this.attribs[u]:null},a.prototype.setAttributeNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.removeAttributeNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByTagName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.setAttributeNS=function(u,h,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.removeAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getAttributeNodeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.setAttributeNodeNS=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByTagNameNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.hasAttribute=function(u){return this.attribs.hasOwnProperty(u)},a.prototype.hasAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.setIdAttribute=function(u,h){return this.attribs.hasOwnProperty(u)?this.attribs[u].isId:h},a.prototype.setIdAttributeNS=function(u,h,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.setIdAttributeNode=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByTagName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByTagNameNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByClassName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.isEqualNode=function(u){var h,g,v;if(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(u)||u.namespaceURI!==this.namespaceURI||u.prefix!==this.prefix||u.localName!==this.localName||u.attribs.length!==this.attribs.length)return!1;for(h=g=0,v=this.attribs.length-1;0<=v?g<=v:g>=v;h=0<=v?++g:--g)if(!this.attribs[h].isEqualNode(u.attribs[h]))return!1;return!0},a}(n)}.call(H)),Yn.exports}var $n={exports:{}},er={exports:{}},qo;function gn(){return qo||(qo=1,function(){var e,t=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function r(){this.constructor=n}return r.prototype=o.prototype,n.prototype=new r,n.__super__=o.prototype,n},i={}.hasOwnProperty;e=Ie(),er.exports=function(n){t(o,n);function o(s){o.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(s,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(s,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(s,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(s,r,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},o}(e)}.call(H)),er.exports}var ko;function rs(){return ko||(ko=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=ae(),t=gn(),$n.exports=function(o){i(s,o);function s(r,l){if(s.__super__.constructor.call(this,r),l==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(l)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(r){return this.options.writer.cdata(this,this.options.writer.filterOptions(r))},s}(t)}.call(H)),$n.exports}var tr={exports:{}},Po;function ss(){return Po||(Po=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=ae(),t=gn(),tr.exports=function(o){i(s,o);function s(r,l){if(s.__super__.constructor.call(this,r),l==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(l)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(r){return this.options.writer.comment(this,this.options.writer.filterOptions(r))},s}(t)}.call(H)),tr.exports}var ir={exports:{}},Fo;function os(){return Fo||(Fo=1,function(){var e,t,i,n=function(s,r){for(var l in r)o.call(r,l)&&(s[l]=r[l]);function c(){this.constructor=s}return c.prototype=r.prototype,s.prototype=new c,s.__super__=r.prototype,s},o={}.hasOwnProperty;i=Je().isObject,t=Ie(),e=ae(),ir.exports=function(s){n(r,s);function r(l,c,f,d){var a;r.__super__.constructor.call(this,l),i(c)&&(a=c,c=a.version,f=a.encoding,d=a.standalone),c||(c="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(c),f!=null&&(this.encoding=this.stringify.xmlEncoding(f)),d!=null&&(this.standalone=this.stringify.xmlStandalone(d))}return r.prototype.toString=function(l){return this.options.writer.declaration(this,this.options.writer.filterOptions(l))},r}(t)}.call(H)),ir.exports}var nr={exports:{}},rr={exports:{}},Bo;function as(){return Bo||(Bo=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;t=Ie(),e=ae(),rr.exports=function(o){i(s,o);function s(r,l,c,f,d,a){if(s.__super__.constructor.call(this,r),l==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(c==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(l));if(!f)throw new Error("Missing DTD attribute type. "+this.debugInfo(l));if(!d)throw new Error("Missing DTD attribute default. "+this.debugInfo(l));if(d.indexOf("#")!==0&&(d="#"+d),!d.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(l));if(a&&!d.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(l));this.elementName=this.stringify.name(l),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(c),this.attributeType=this.stringify.dtdAttType(f),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=d}return s.prototype.toString=function(r){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(r))},s}(t)}.call(H)),rr.exports}var sr={exports:{}},zo;function ls(){return zo||(zo=1,function(){var e,t,i,n=function(s,r){for(var l in r)o.call(r,l)&&(s[l]=r[l]);function c(){this.constructor=s}return c.prototype=r.prototype,s.prototype=new c,s.__super__=r.prototype,s},o={}.hasOwnProperty;i=Je().isObject,t=Ie(),e=ae(),sr.exports=function(s){n(r,s);function r(l,c,f,d){if(r.__super__.constructor.call(this,l),f==null)throw new Error("Missing DTD entity name. "+this.debugInfo(f));if(d==null)throw new Error("Missing DTD entity value. "+this.debugInfo(f));if(this.pe=!!c,this.name=this.stringify.name(f),this.type=e.EntityDeclaration,!i(d))this.value=this.stringify.dtdEntityValue(d),this.internal=!0;else{if(!d.pubID&&!d.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(f));if(d.pubID&&!d.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(f));if(this.internal=!1,d.pubID!=null&&(this.pubID=this.stringify.dtdPubID(d.pubID)),d.sysID!=null&&(this.sysID=this.stringify.dtdSysID(d.sysID)),d.nData!=null&&(this.nData=this.stringify.dtdNData(d.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(f))}}return Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return null}}),r.prototype.toString=function(l){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(l))},r}(t)}.call(H)),sr.exports}var or={exports:{}},Uo;function us(){return Uo||(Uo=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;t=Ie(),e=ae(),or.exports=function(o){i(s,o);function s(r,l,c){if(s.__super__.constructor.call(this,r),l==null)throw new Error("Missing DTD element name. "+this.debugInfo());c||(c="(#PCDATA)"),Array.isArray(c)&&(c="("+c.join(",")+")"),this.name=this.stringify.name(l),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(c)}return s.prototype.toString=function(r){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(r))},s}(t)}.call(H)),or.exports}var ar={exports:{}},jo;function hs(){return jo||(jo=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;t=Ie(),e=ae(),ar.exports=function(o){i(s,o);function s(r,l,c){if(s.__super__.constructor.call(this,r),l==null)throw new Error("Missing DTD notation name. "+this.debugInfo(l));if(!c.pubID&&!c.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(l));this.name=this.stringify.name(l),this.type=e.NotationDeclaration,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(r){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(r))},s}(t)}.call(H)),ar.exports}var Xo;function fs(){return Xo||(Xo=1,function(){var e,t,i,n,o,s,r,l,c=function(d,a){for(var u in a)f.call(a,u)&&(d[u]=a[u]);function h(){this.constructor=d}return h.prototype=a.prototype,d.prototype=new h,d.__super__=a.prototype,d},f={}.hasOwnProperty;l=Je().isObject,r=Ie(),e=ae(),t=as(),n=ls(),i=us(),o=hs(),s=is(),nr.exports=function(d){c(a,d);function a(u,h,g){var v,w,A,x,_,b;if(a.__super__.constructor.call(this,u),this.type=e.DocType,u.children){for(x=u.children,w=0,A=x.length;w<A;w++)if(v=x[w],v.type===e.Element){this.name=v.name;break}}this.documentObject=u,l(h)&&(_=h,h=_.pubID,g=_.sysID),g==null&&(b=[h,g],g=b[0],h=b[1]),h!=null&&(this.pubID=this.stringify.dtdPubID(h)),g!=null&&(this.sysID=this.stringify.dtdSysID(g))}return Object.defineProperty(a.prototype,"entities",{get:function(){var u,h,g,v,w;for(v={},w=this.children,h=0,g=w.length;h<g;h++)u=w[h],u.type===e.EntityDeclaration&&!u.pe&&(v[u.name]=u);return new s(v)}}),Object.defineProperty(a.prototype,"notations",{get:function(){var u,h,g,v,w;for(v={},w=this.children,h=0,g=w.length;h<g;h++)u=w[h],u.type===e.NotationDeclaration&&(v[u.name]=u);return new s(v)}}),Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),a.prototype.element=function(u,h){var g;return g=new i(this,u,h),this.children.push(g),this},a.prototype.attList=function(u,h,g,v,w){var A;return A=new t(this,u,h,g,v,w),this.children.push(A),this},a.prototype.entity=function(u,h){var g;return g=new n(this,!1,u,h),this.children.push(g),this},a.prototype.pEntity=function(u,h){var g;return g=new n(this,!0,u,h),this.children.push(g),this},a.prototype.notation=function(u,h){var g;return g=new o(this,u,h),this.children.push(g),this},a.prototype.toString=function(u){return this.options.writer.docType(this,this.options.writer.filterOptions(u))},a.prototype.ele=function(u,h){return this.element(u,h)},a.prototype.att=function(u,h,g,v,w){return this.attList(u,h,g,v,w)},a.prototype.ent=function(u,h){return this.entity(u,h)},a.prototype.pent=function(u,h){return this.pEntity(u,h)},a.prototype.not=function(u,h){return this.notation(u,h)},a.prototype.up=function(){return this.root()||this.documentObject},a.prototype.isEqualNode=function(u){return!(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(u)||u.name!==this.name||u.publicId!==this.publicId||u.systemId!==this.systemId)},a}(r)}.call(H)),nr.exports}var lr={exports:{}},Ho;function cs(){return Ho||(Ho=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=ae(),t=Ie(),lr.exports=function(o){i(s,o);function s(r,l){if(s.__super__.constructor.call(this,r),l==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(l)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(r){return this.options.writer.raw(this,this.options.writer.filterOptions(r))},s}(t)}.call(H)),lr.exports}var ur={exports:{}},Vo;function ds(){return Vo||(Vo=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=ae(),t=gn(),ur.exports=function(o){i(s,o);function s(r,l){if(s.__super__.constructor.call(this,r),l==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(l)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var r,l,c;for(c="",l=this.previousSibling;l;)c=l.data+c,l=l.previousSibling;for(c+=this.data,r=this.nextSibling;r;)c=c+r.data,r=r.nextSibling;return c}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(r){return this.options.writer.text(this,this.options.writer.filterOptions(r))},s.prototype.splitText=function(r){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(r){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(t)}.call(H)),ur.exports}var hr={exports:{}},Go;function ps(){return Go||(Go=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=ae(),t=gn(),hr.exports=function(o){i(s,o);function s(r,l,c){if(s.__super__.constructor.call(this,r),l==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(l),this.name=this.target,c&&(this.value=this.stringify.insValue(c))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(r){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(r))},s.prototype.isEqualNode=function(r){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(r)||r.target!==this.target)},s}(t)}.call(H)),hr.exports}var fr={exports:{}},Zo;function Ol(){return Zo||(Zo=1,function(){var e,t,i=function(o,s){for(var r in s)n.call(s,r)&&(o[r]=s[r]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;t=Ie(),e=ae(),fr.exports=function(o){i(s,o);function s(r){s.__super__.constructor.call(this,r),this.type=e.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(r){return""},s}(t)}.call(H)),fr.exports}var cr={exports:{}},Wo;function Td(){return Wo||(Wo=1,function(){cr.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}.call(H)),cr.exports}var dr={exports:{}},Yo;function Id(){return Yo||(Yo=1,function(){dr.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(H)),dr.exports}var Qo;function Ie(){return Qo||(Qo=1,function(){var e,t,i,n,o,s,r,l,c,f,d,a,u,h,g,v,w,A={}.hasOwnProperty;w=Je(),v=w.isObject,g=w.isFunction,h=w.isEmpty,u=w.getValue,l=null,i=null,n=null,o=null,s=null,d=null,a=null,f=null,r=null,t=null,c=null,e=null,Wn.exports=function(){function x(_){this.parent=_,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=ns(),i=rs(),n=ss(),o=os(),s=fs(),d=cs(),a=ds(),f=ps(),r=Ol(),t=ae(),c=Td(),is(),e=Id())}return Object.defineProperty(x.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(x.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(x.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(x.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(x.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new c(this.children)),this.childNodeList}}),Object.defineProperty(x.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(x.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(x.prototype,"previousSibling",{get:function(){var _;return _=this.parent.children.indexOf(this),this.parent.children[_-1]||null}}),Object.defineProperty(x.prototype,"nextSibling",{get:function(){var _;return _=this.parent.children.indexOf(this),this.parent.children[_+1]||null}}),Object.defineProperty(x.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(x.prototype,"textContent",{get:function(){var _,b,T,D,C;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(C="",D=this.children,b=0,T=D.length;b<T;b++)_=D[b],_.textContent&&(C+=_.textContent);return C}else return null},set:function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),x.prototype.setParent=function(_){var b,T,D,C,O;for(this.parent=_,_&&(this.options=_.options,this.stringify=_.stringify),C=this.children,O=[],T=0,D=C.length;T<D;T++)b=C[T],O.push(b.setParent(this));return O},x.prototype.element=function(_,b,T){var D,C,O,p,S,N,P,j,z,J,Z;if(N=null,b===null&&T==null&&(z=[{},null],b=z[0],T=z[1]),b==null&&(b={}),b=u(b),v(b)||(J=[b,T],T=J[0],b=J[1]),_!=null&&(_=u(_)),Array.isArray(_))for(O=0,P=_.length;O<P;O++)C=_[O],N=this.element(C);else if(g(_))N=this.element(_.apply());else if(v(_)){for(S in _)if(A.call(_,S))if(Z=_[S],g(Z)&&(Z=Z.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&S.indexOf(this.stringify.convertAttKey)===0)N=this.attribute(S.substr(this.stringify.convertAttKey.length),Z);else if(!this.options.separateArrayItems&&Array.isArray(Z)&&h(Z))N=this.dummy();else if(v(Z)&&h(Z))N=this.element(S);else if(!this.options.keepNullNodes&&Z==null)N=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(Z))for(p=0,j=Z.length;p<j;p++)C=Z[p],D={},D[S]=C,N=this.element(D);else v(Z)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&S.indexOf(this.stringify.convertTextKey)===0?N=this.element(Z):(N=this.element(S),N.element(Z)):N=this.element(S,Z)}else!this.options.keepNullNodes&&T===null?N=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&_.indexOf(this.stringify.convertTextKey)===0?N=this.text(T):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&_.indexOf(this.stringify.convertCDataKey)===0?N=this.cdata(T):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&_.indexOf(this.stringify.convertCommentKey)===0?N=this.comment(T):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&_.indexOf(this.stringify.convertRawKey)===0?N=this.raw(T):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&_.indexOf(this.stringify.convertPIKey)===0?N=this.instruction(_.substr(this.stringify.convertPIKey.length),T):N=this.node(_,b,T);if(N==null)throw new Error("Could not create any elements with: "+_+". "+this.debugInfo());return N},x.prototype.insertBefore=function(_,b,T){var D,C,O,p,S;if(_?.type)return O=_,p=b,O.setParent(this),p?(C=children.indexOf(p),S=children.splice(C),children.push(O),Array.prototype.push.apply(children,S)):children.push(O),O;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(_));return C=this.parent.children.indexOf(this),S=this.parent.children.splice(C),D=this.parent.element(_,b,T),Array.prototype.push.apply(this.parent.children,S),D},x.prototype.insertAfter=function(_,b,T){var D,C,O;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(_));return C=this.parent.children.indexOf(this),O=this.parent.children.splice(C+1),D=this.parent.element(_,b,T),Array.prototype.push.apply(this.parent.children,O),D},x.prototype.remove=function(){var _;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return _=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[_,_-_+1].concat([])),this.parent},x.prototype.node=function(_,b,T){var D,C;return _!=null&&(_=u(_)),b||(b={}),b=u(b),v(b)||(C=[b,T],T=C[0],b=C[1]),D=new l(this,_,b),T!=null&&D.text(T),this.children.push(D),D},x.prototype.text=function(_){var b;return v(_)&&this.element(_),b=new a(this,_),this.children.push(b),this},x.prototype.cdata=function(_){var b;return b=new i(this,_),this.children.push(b),this},x.prototype.comment=function(_){var b;return b=new n(this,_),this.children.push(b),this},x.prototype.commentBefore=function(_){var b,T;return b=this.parent.children.indexOf(this),T=this.parent.children.splice(b),this.parent.comment(_),Array.prototype.push.apply(this.parent.children,T),this},x.prototype.commentAfter=function(_){var b,T;return b=this.parent.children.indexOf(this),T=this.parent.children.splice(b+1),this.parent.comment(_),Array.prototype.push.apply(this.parent.children,T),this},x.prototype.raw=function(_){var b;return b=new d(this,_),this.children.push(b),this},x.prototype.dummy=function(){var _;return _=new r(this),_},x.prototype.instruction=function(_,b){var T,D,C,O,p;if(_!=null&&(_=u(_)),b!=null&&(b=u(b)),Array.isArray(_))for(O=0,p=_.length;O<p;O++)T=_[O],this.instruction(T);else if(v(_))for(T in _)A.call(_,T)&&(D=_[T],this.instruction(T,D));else g(b)&&(b=b.apply()),C=new f(this,_,b),this.children.push(C);return this},x.prototype.instructionBefore=function(_,b){var T,D;return T=this.parent.children.indexOf(this),D=this.parent.children.splice(T),this.parent.instruction(_,b),Array.prototype.push.apply(this.parent.children,D),this},x.prototype.instructionAfter=function(_,b){var T,D;return T=this.parent.children.indexOf(this),D=this.parent.children.splice(T+1),this.parent.instruction(_,b),Array.prototype.push.apply(this.parent.children,D),this},x.prototype.declaration=function(_,b,T){var D,C;return D=this.document(),C=new o(D,_,b,T),D.children.length===0?D.children.unshift(C):D.children[0].type===t.Declaration?D.children[0]=C:D.children.unshift(C),D.root()||D},x.prototype.dtd=function(_,b){var T,D,C,O,p,S,N,P,j,z;for(D=this.document(),C=new s(D,_,b),j=D.children,O=p=0,N=j.length;p<N;O=++p)if(T=j[O],T.type===t.DocType)return D.children[O]=C,C;for(z=D.children,O=S=0,P=z.length;S<P;O=++S)if(T=z[O],T.isRoot)return D.children.splice(O,0,C),C;return D.children.push(C),C},x.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},x.prototype.root=function(){var _;for(_=this;_;){if(_.type===t.Document)return _.rootObject;if(_.isRoot)return _;_=_.parent}},x.prototype.document=function(){var _;for(_=this;_;){if(_.type===t.Document)return _;_=_.parent}},x.prototype.end=function(_){return this.document().end(_)},x.prototype.prev=function(){var _;if(_=this.parent.children.indexOf(this),_<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[_-1]},x.prototype.next=function(){var _;if(_=this.parent.children.indexOf(this),_===-1||_===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[_+1]},x.prototype.importDocument=function(_){var b;return b=_.root().clone(),b.parent=this,b.isRoot=!1,this.children.push(b),this},x.prototype.debugInfo=function(_){var b,T;return _=_||this.name,_==null&&!((b=this.parent)!=null&&b.name)?"":_==null?"parent: <"+this.parent.name+">":(T=this.parent)!=null&&T.name?"node: <"+_+">, parent: <"+this.parent.name+">":"node: <"+_+">"},x.prototype.ele=function(_,b,T){return this.element(_,b,T)},x.prototype.nod=function(_,b,T){return this.node(_,b,T)},x.prototype.txt=function(_){return this.text(_)},x.prototype.dat=function(_){return this.cdata(_)},x.prototype.com=function(_){return this.comment(_)},x.prototype.ins=function(_,b){return this.instruction(_,b)},x.prototype.doc=function(){return this.document()},x.prototype.dec=function(_,b,T){return this.declaration(_,b,T)},x.prototype.e=function(_,b,T){return this.element(_,b,T)},x.prototype.n=function(_,b,T){return this.node(_,b,T)},x.prototype.t=function(_){return this.text(_)},x.prototype.d=function(_){return this.cdata(_)},x.prototype.c=function(_){return this.comment(_)},x.prototype.r=function(_){return this.raw(_)},x.prototype.i=function(_,b){return this.instruction(_,b)},x.prototype.u=function(){return this.up()},x.prototype.importXMLBuilder=function(_){return this.importDocument(_)},x.prototype.replaceChild=function(_,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.removeChild=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.appendChild=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.hasChildNodes=function(){return this.children.length!==0},x.prototype.cloneNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.isSupported=function(_,b){return!0},x.prototype.hasAttributes=function(){return this.attribs.length!==0},x.prototype.compareDocumentPosition=function(_){var b,T;return b=this,b===_?0:this.document()!==_.document()?(T=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?T|=e.Preceding:T|=e.Following,T):b.isAncestor(_)?e.Contains|e.Preceding:b.isDescendant(_)?e.Contains|e.Following:b.isPreceding(_)?e.Preceding:e.Following},x.prototype.isSameNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.lookupPrefix=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.isDefaultNamespace=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.lookupNamespaceURI=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.isEqualNode=function(_){var b,T,D;if(_.nodeType!==this.nodeType||_.children.length!==this.children.length)return!1;for(b=T=0,D=this.children.length-1;0<=D?T<=D:T>=D;b=0<=D?++T:--T)if(!this.children[b].isEqualNode(_.children[b]))return!1;return!0},x.prototype.getFeature=function(_,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.setUserData=function(_,b,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getUserData=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.contains=function(_){return _?_===this||this.isDescendant(_):!1},x.prototype.isDescendant=function(_){var b,T,D,C,O;for(O=this.children,D=0,C=O.length;D<C;D++)if(b=O[D],_===b||(T=b.isDescendant(_),T))return!0;return!1},x.prototype.isAncestor=function(_){return _.isDescendant(this)},x.prototype.isPreceding=function(_){var b,T;return b=this.treePosition(_),T=this.treePosition(this),b===-1||T===-1?!1:b<T},x.prototype.isFollowing=function(_){var b,T;return b=this.treePosition(_),T=this.treePosition(this),b===-1||T===-1?!1:b>T},x.prototype.treePosition=function(_){var b,T;return T=0,b=!1,this.foreachTreeNode(this.document(),function(D){if(T++,!b&&D===_)return b=!0}),b?T:-1},x.prototype.foreachTreeNode=function(_,b){var T,D,C,O,p;for(_||(_=this.document()),O=_.children,D=0,C=O.length;D<C;D++){if(T=O[D],p=b(T))return p;if(p=this.foreachTreeNode(T,b),p)return p}},x}()}.call(H)),Wn.exports}var pr={exports:{}},Jo;function Ll(){return Jo||(Jo=1,function(){var e=function(i,n){return function(){return i.apply(n,arguments)}},t={}.hasOwnProperty;pr.exports=function(){function i(n){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,s,r;n||(n={}),this.options=n,this.options.version||(this.options.version="1.0"),s=n.stringify||{};for(o in s)t.call(s,o)&&(r=s[o],this[o]=r)}return i.prototype.name=function(n){return this.options.noValidation?n:this.assertLegalName(""+n||"")},i.prototype.text=function(n){return this.options.noValidation?n:this.assertLegalChar(this.textEscape(""+n||""))},i.prototype.cdata=function(n){return this.options.noValidation?n:(n=""+n||"",n=n.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(n))},i.prototype.comment=function(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+n);return this.assertLegalChar(n)},i.prototype.raw=function(n){return this.options.noValidation?n:""+n||""},i.prototype.attValue=function(n){return this.options.noValidation?n:this.assertLegalChar(this.attEscape(n=""+n||""))},i.prototype.insTarget=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.insValue=function(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/\?>/))throw new Error("Invalid processing instruction value: "+n);return this.assertLegalChar(n)},i.prototype.xmlVersion=function(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+n);return n},i.prototype.xmlEncoding=function(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+n);return this.assertLegalChar(n)},i.prototype.xmlStandalone=function(n){return this.options.noValidation?n:n?"yes":"no"},i.prototype.dtdPubID=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdSysID=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdElementValue=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdAttType=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdAttDefault=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdEntityValue=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.dtdNData=function(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")},i.prototype.convertAttKey="@",i.prototype.convertPIKey="?",i.prototype.convertTextKey="#text",i.prototype.convertCDataKey="#cdata",i.prototype.convertCommentKey="#comment",i.prototype.convertRawKey="#raw",i.prototype.assertLegalChar=function(n){var o,s;if(this.options.noValidation)return n;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=n.match(o))throw new Error("Invalid character in string: "+n+" at index "+s.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=n.match(o)))throw new Error("Invalid character in string: "+n+" at index "+s.index);return n},i.prototype.assertLegalName=function(n){var o;if(this.options.noValidation)return n;if(this.assertLegalChar(n),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!n.match(o))throw new Error("Invalid character in name");return n},i.prototype.textEscape=function(n){var o;return this.options.noValidation?n:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},i.prototype.attEscape=function(n){var o;return this.options.noValidation?n:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},i}()}.call(H)),pr.exports}var gr={exports:{}},mr={exports:{}},_r={exports:{}},Ko;function mn(){return Ko||(Ko=1,function(){_r.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(H)),_r.exports}var $o;function Rl(){return $o||($o=1,function(){var e,t,i,n={}.hasOwnProperty;i=Je().assign,e=ae(),os(),fs(),rs(),ss(),ns(),cs(),ds(),ps(),Ol(),as(),us(),ls(),hs(),t=mn(),mr.exports=function(){function o(s){var r,l,c;s||(s={}),this.options=s,l=s.writer||{};for(r in l)n.call(l,r)&&(c=l[r],this["_"+r]=this[r],this[r]=c)}return o.prototype.filterOptions=function(s){var r,l,c,f,d,a,u,h;return s||(s={}),s=i({},this.options,s),r={writer:this},r.pretty=s.pretty||!1,r.allowEmpty=s.allowEmpty||!1,r.indent=(l=s.indent)!=null?l:"  ",r.newline=(c=s.newline)!=null?c:`
`,r.offset=(f=s.offset)!=null?f:0,r.dontPrettyTextNodes=(d=(a=s.dontPrettyTextNodes)!=null?a:s.dontprettytextnodes)!=null?d:0,r.spaceBeforeSlash=(u=(h=s.spaceBeforeSlash)!=null?h:s.spacebeforeslash)!=null?u:"",r.spaceBeforeSlash===!0&&(r.spaceBeforeSlash=" "),r.suppressPrettyCount=0,r.user={},r.state=t.None,r},o.prototype.indent=function(s,r,l){var c;return!r.pretty||r.suppressPrettyCount?"":r.pretty&&(c=(l||0)+r.offset+1,c>0)?new Array(c).join(r.indent):""},o.prototype.endline=function(s,r,l){return!r.pretty||r.suppressPrettyCount?"":r.newline},o.prototype.attribute=function(s,r,l){var c;return this.openAttribute(s,r,l),c=" "+s.name+'="'+s.value+'"',this.closeAttribute(s,r,l),c},o.prototype.cdata=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l)+"<![CDATA[",r.state=t.InsideTag,c+=s.value,r.state=t.CloseTag,c+="]]>"+this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.comment=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l)+"<!-- ",r.state=t.InsideTag,c+=s.value,r.state=t.CloseTag,c+=" -->"+this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.declaration=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l)+"<?xml",r.state=t.InsideTag,c+=' version="'+s.version+'"',s.encoding!=null&&(c+=' encoding="'+s.encoding+'"'),s.standalone!=null&&(c+=' standalone="'+s.standalone+'"'),r.state=t.CloseTag,c+=r.spaceBeforeSlash+"?>",c+=this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.docType=function(s,r,l){var c,f,d,a,u;if(l||(l=0),this.openNode(s,r,l),r.state=t.OpenTag,a=this.indent(s,r,l),a+="<!DOCTYPE "+s.root().name,s.pubID&&s.sysID?a+=' PUBLIC "'+s.pubID+'" "'+s.sysID+'"':s.sysID&&(a+=' SYSTEM "'+s.sysID+'"'),s.children.length>0){for(a+=" [",a+=this.endline(s,r,l),r.state=t.InsideTag,u=s.children,f=0,d=u.length;f<d;f++)c=u[f],a+=this.writeChildNode(c,r,l+1);r.state=t.CloseTag,a+="]"}return r.state=t.CloseTag,a+=r.spaceBeforeSlash+">",a+=this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),a},o.prototype.element=function(s,r,l){var c,f,d,a,u,h,g,v,w,A,x,_,b,T;l||(l=0),A=!1,x="",this.openNode(s,r,l),r.state=t.OpenTag,x+=this.indent(s,r,l)+"<"+s.name,_=s.attribs;for(w in _)n.call(_,w)&&(c=_[w],x+=this.attribute(c,r,l));if(d=s.children.length,a=d===0?null:s.children[0],d===0||s.children.every(function(D){return(D.type===e.Text||D.type===e.Raw)&&D.value===""}))r.allowEmpty?(x+=">",r.state=t.CloseTag,x+="</"+s.name+">"+this.endline(s,r,l)):(r.state=t.CloseTag,x+=r.spaceBeforeSlash+"/>"+this.endline(s,r,l));else if(r.pretty&&d===1&&(a.type===e.Text||a.type===e.Raw)&&a.value!=null)x+=">",r.state=t.InsideTag,r.suppressPrettyCount++,A=!0,x+=this.writeChildNode(a,r,l+1),r.suppressPrettyCount--,A=!1,r.state=t.CloseTag,x+="</"+s.name+">"+this.endline(s,r,l);else{if(r.dontPrettyTextNodes){for(b=s.children,u=0,g=b.length;u<g;u++)if(f=b[u],(f.type===e.Text||f.type===e.Raw)&&f.value!=null){r.suppressPrettyCount++,A=!0;break}}for(x+=">"+this.endline(s,r,l),r.state=t.InsideTag,T=s.children,h=0,v=T.length;h<v;h++)f=T[h],x+=this.writeChildNode(f,r,l+1);r.state=t.CloseTag,x+=this.indent(s,r,l)+"</"+s.name+">",A&&r.suppressPrettyCount--,x+=this.endline(s,r,l),r.state=t.None}return this.closeNode(s,r,l),x},o.prototype.writeChildNode=function(s,r,l){switch(s.type){case e.CData:return this.cdata(s,r,l);case e.Comment:return this.comment(s,r,l);case e.Element:return this.element(s,r,l);case e.Raw:return this.raw(s,r,l);case e.Text:return this.text(s,r,l);case e.ProcessingInstruction:return this.processingInstruction(s,r,l);case e.Dummy:return"";case e.Declaration:return this.declaration(s,r,l);case e.DocType:return this.docType(s,r,l);case e.AttributeDeclaration:return this.dtdAttList(s,r,l);case e.ElementDeclaration:return this.dtdElement(s,r,l);case e.EntityDeclaration:return this.dtdEntity(s,r,l);case e.NotationDeclaration:return this.dtdNotation(s,r,l);default:throw new Error("Unknown XML node type: "+s.constructor.name)}},o.prototype.processingInstruction=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l)+"<?",r.state=t.InsideTag,c+=s.target,s.value&&(c+=" "+s.value),r.state=t.CloseTag,c+=r.spaceBeforeSlash+"?>",c+=this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.raw=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l),r.state=t.InsideTag,c+=s.value,r.state=t.CloseTag,c+=this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.text=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l),r.state=t.InsideTag,c+=s.value,r.state=t.CloseTag,c+=this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.dtdAttList=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l)+"<!ATTLIST",r.state=t.InsideTag,c+=" "+s.elementName+" "+s.attributeName+" "+s.attributeType,s.defaultValueType!=="#DEFAULT"&&(c+=" "+s.defaultValueType),s.defaultValue&&(c+=' "'+s.defaultValue+'"'),r.state=t.CloseTag,c+=r.spaceBeforeSlash+">"+this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.dtdElement=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l)+"<!ELEMENT",r.state=t.InsideTag,c+=" "+s.name+" "+s.value,r.state=t.CloseTag,c+=r.spaceBeforeSlash+">"+this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.dtdEntity=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l)+"<!ENTITY",r.state=t.InsideTag,s.pe&&(c+=" %"),c+=" "+s.name,s.value?c+=' "'+s.value+'"':(s.pubID&&s.sysID?c+=' PUBLIC "'+s.pubID+'" "'+s.sysID+'"':s.sysID&&(c+=' SYSTEM "'+s.sysID+'"'),s.nData&&(c+=" NDATA "+s.nData)),r.state=t.CloseTag,c+=r.spaceBeforeSlash+">"+this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.dtdNotation=function(s,r,l){var c;return this.openNode(s,r,l),r.state=t.OpenTag,c=this.indent(s,r,l)+"<!NOTATION",r.state=t.InsideTag,c+=" "+s.name,s.pubID&&s.sysID?c+=' PUBLIC "'+s.pubID+'" "'+s.sysID+'"':s.pubID?c+=' PUBLIC "'+s.pubID+'"':s.sysID&&(c+=' SYSTEM "'+s.sysID+'"'),r.state=t.CloseTag,c+=r.spaceBeforeSlash+">"+this.endline(s,r,l),r.state=t.None,this.closeNode(s,r,l),c},o.prototype.openNode=function(s,r,l){},o.prototype.closeNode=function(s,r,l){},o.prototype.openAttribute=function(s,r,l){},o.prototype.closeAttribute=function(s,r,l){},o}()}.call(H)),mr.exports}var ea;function gs(){return ea||(ea=1,function(){var e,t=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function r(){this.constructor=n}return r.prototype=o.prototype,n.prototype=new r,n.__super__=o.prototype,n},i={}.hasOwnProperty;e=Rl(),gr.exports=function(n){t(o,n);function o(s){o.__super__.constructor.call(this,s)}return o.prototype.document=function(s,r){var l,c,f,d,a;for(r=this.filterOptions(r),d="",a=s.children,c=0,f=a.length;c<f;c++)l=a[c],d+=this.writeChildNode(l,r,0);return r.pretty&&d.slice(-r.newline.length)===r.newline&&(d=d.slice(0,-r.newline.length)),d},o}(e)}.call(H)),gr.exports}var ta;function Nl(){return ta||(ta=1,function(){var e,t,i,n,o,s,r,l=function(f,d){for(var a in d)c.call(d,a)&&(f[a]=d[a]);function u(){this.constructor=f}return u.prototype=d.prototype,f.prototype=new u,f.__super__=d.prototype,f},c={}.hasOwnProperty;r=Je().isPlainObject,i=Cl(),t=Ed(),n=Ie(),e=ae(),s=Ll(),o=gs(),Hn.exports=function(f){l(d,f);function d(a){d.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new t,a||(a={}),a.writer||(a.writer=new o),this.options=a,this.stringify=new s(a)}return Object.defineProperty(d.prototype,"implementation",{value:new i}),Object.defineProperty(d.prototype,"doctype",{get:function(){var a,u,h,g;for(g=this.children,u=0,h=g.length;u<h;u++)if(a=g[u],a.type===e.DocType)return a;return null}}),Object.defineProperty(d.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(d.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(d.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(d.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(d.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(d.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(d.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(d.prototype,"origin",{get:function(){return null}}),Object.defineProperty(d.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(d.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(d.prototype,"contentType",{get:function(){return null}}),d.prototype.end=function(a){var u;return u={},a?r(a)&&(u=a,a=this.options.writer):a=this.options.writer,a.document(this,a.filterOptions(u))},d.prototype.toString=function(a){return this.options.writer.document(this,this.options.writer.filterOptions(a))},d.prototype.createElement=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTextNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createComment=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createCDATASection=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createProcessingInstruction=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttribute=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEntityReference=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.importNode=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createElementNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttributeNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementById=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.adoptNode=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.renameNode=function(a,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByClassName=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEvent=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createNodeIterator=function(a,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTreeWalker=function(a,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d}(n)}.call(H)),Hn.exports}var yr={exports:{}},ia;function Sd(){return ia||(ia=1,function(){var e,t,i,n,o,s,r,l,c,f,d,a,u,h,g,v,w,A,x,_,b,T,D,C={}.hasOwnProperty;D=Je(),b=D.isObject,_=D.isFunction,T=D.isPlainObject,x=D.getValue,e=ae(),a=Nl(),u=ns(),n=rs(),o=ss(),g=cs(),A=ds(),h=ps(),f=os(),d=fs(),s=as(),l=ls(),r=us(),c=hs(),i=Dl(),w=Ll(),v=gs(),t=mn(),yr.exports=function(){function O(p,S,N){var P;this.name="?xml",this.type=e.Document,p||(p={}),P={},p.writer?T(p.writer)&&(P=p.writer,p.writer=new v):p.writer=new v,this.options=p,this.writer=p.writer,this.writerOptions=this.writer.filterOptions(P),this.stringify=new w(p),this.onDataCallback=S||function(){},this.onEndCallback=N||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return O.prototype.createChildNode=function(p){var S,N,P,j,z,J,Z,X;switch(p.type){case e.CData:this.cdata(p.value);break;case e.Comment:this.comment(p.value);break;case e.Element:P={},Z=p.attribs;for(N in Z)C.call(Z,N)&&(S=Z[N],P[N]=S.value);this.node(p.name,P);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(p.value);break;case e.Text:this.text(p.value);break;case e.ProcessingInstruction:this.instruction(p.target,p.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+p.constructor.name)}for(X=p.children,z=0,J=X.length;z<J;z++)j=X[z],this.createChildNode(j),j.type===e.Element&&this.up();return this},O.prototype.dummy=function(){return this},O.prototype.node=function(p,S,N){var P;if(p==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(p));return this.openCurrent(),p=x(p),S==null&&(S={}),S=x(S),b(S)||(P=[S,N],N=P[0],S=P[1]),this.currentNode=new u(this,p,S),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,N!=null&&this.text(N),this},O.prototype.element=function(p,S,N){var P,j,z,J,Z,X;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(p)||b(p)||_(p))for(J=this.options.noValidation,this.options.noValidation=!0,X=new a(this.options).element("TEMP_ROOT"),X.element(p),this.options.noValidation=J,Z=X.children,j=0,z=Z.length;j<z;j++)P=Z[j],this.createChildNode(P),P.type===e.Element&&this.up();else this.node(p,S,N);return this},O.prototype.attribute=function(p,S){var N,P;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(p));if(p!=null&&(p=x(p)),b(p))for(N in p)C.call(p,N)&&(P=p[N],this.attribute(N,P));else _(S)&&(S=S.apply()),this.options.keepNullAttributes&&S==null?this.currentNode.attribs[p]=new i(this,p,""):S!=null&&(this.currentNode.attribs[p]=new i(this,p,S));return this},O.prototype.text=function(p){var S;return this.openCurrent(),S=new A(this,p),this.onData(this.writer.text(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.cdata=function(p){var S;return this.openCurrent(),S=new n(this,p),this.onData(this.writer.cdata(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.comment=function(p){var S;return this.openCurrent(),S=new o(this,p),this.onData(this.writer.comment(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.raw=function(p){var S;return this.openCurrent(),S=new g(this,p),this.onData(this.writer.raw(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.instruction=function(p,S){var N,P,j,z,J;if(this.openCurrent(),p!=null&&(p=x(p)),S!=null&&(S=x(S)),Array.isArray(p))for(N=0,z=p.length;N<z;N++)P=p[N],this.instruction(P);else if(b(p))for(P in p)C.call(p,P)&&(j=p[P],this.instruction(P,j));else _(S)&&(S=S.apply()),J=new h(this,p,S),this.onData(this.writer.processingInstruction(J,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},O.prototype.declaration=function(p,S,N){var P;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return P=new f(this,p,S,N),this.onData(this.writer.declaration(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.doctype=function(p,S,N){if(this.openCurrent(),p==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,S,N),this.currentNode.rootNodeName=p,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},O.prototype.dtdElement=function(p,S){var N;return this.openCurrent(),N=new r(this,p,S),this.onData(this.writer.dtdElement(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.attList=function(p,S,N,P,j){var z;return this.openCurrent(),z=new s(this,p,S,N,P,j),this.onData(this.writer.dtdAttList(z,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.entity=function(p,S){var N;return this.openCurrent(),N=new l(this,!1,p,S),this.onData(this.writer.dtdEntity(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.pEntity=function(p,S){var N;return this.openCurrent(),N=new l(this,!0,p,S),this.onData(this.writer.dtdEntity(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.notation=function(p,S){var N;return this.openCurrent(),N=new c(this,p,S),this.onData(this.writer.dtdNotation(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},O.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},O.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},O.prototype.openNode=function(p){var S,N,P,j;if(!p.isOpen){if(!this.root&&this.currentLevel===0&&p.type===e.Element&&(this.root=p),N="",p.type===e.Element){this.writerOptions.state=t.OpenTag,N=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<"+p.name,j=p.attribs;for(P in j)C.call(j,P)&&(S=j[P],N+=this.writer.attribute(S,this.writerOptions,this.currentLevel));N+=(p.children?">":"/>")+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,N=this.writer.indent(p,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+p.rootNodeName,p.pubID&&p.sysID?N+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(N+=' SYSTEM "'+p.sysID+'"'),p.children?(N+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,N+=">"),N+=this.writer.endline(p,this.writerOptions,this.currentLevel);return this.onData(N,this.currentLevel),p.isOpen=!0}},O.prototype.closeNode=function(p){var S;if(!p.isClosed)return S="",this.writerOptions.state=t.CloseTag,p.type===e.Element?S=this.writer.indent(p,this.writerOptions,this.currentLevel)+"</"+p.name+">"+this.writer.endline(p,this.writerOptions,this.currentLevel):S=this.writer.indent(p,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(p,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(S,this.currentLevel),p.isClosed=!0},O.prototype.onData=function(p,S){return this.documentStarted=!0,this.onDataCallback(p,S+1)},O.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},O.prototype.debugInfo=function(p){return p==null?"":"node: <"+p+">"},O.prototype.ele=function(){return this.element.apply(this,arguments)},O.prototype.nod=function(p,S,N){return this.node(p,S,N)},O.prototype.txt=function(p){return this.text(p)},O.prototype.dat=function(p){return this.cdata(p)},O.prototype.com=function(p){return this.comment(p)},O.prototype.ins=function(p,S){return this.instruction(p,S)},O.prototype.dec=function(p,S,N){return this.declaration(p,S,N)},O.prototype.dtd=function(p,S,N){return this.doctype(p,S,N)},O.prototype.e=function(p,S,N){return this.element(p,S,N)},O.prototype.n=function(p,S,N){return this.node(p,S,N)},O.prototype.t=function(p){return this.text(p)},O.prototype.d=function(p){return this.cdata(p)},O.prototype.c=function(p){return this.comment(p)},O.prototype.r=function(p){return this.raw(p)},O.prototype.i=function(p,S){return this.instruction(p,S)},O.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.ent=function(p,S){return this.entity(p,S)},O.prototype.pent=function(p,S){return this.pEntity(p,S)},O.prototype.not=function(p,S){return this.notation(p,S)},O}()}.call(H)),yr.exports}var vr={exports:{}},na;function Cd(){return na||(na=1,function(){var e,t,i,n=function(s,r){for(var l in r)o.call(r,l)&&(s[l]=r[l]);function c(){this.constructor=s}return c.prototype=r.prototype,s.prototype=new c,s.__super__=r.prototype,s},o={}.hasOwnProperty;e=ae(),i=Rl(),t=mn(),vr.exports=function(s){n(r,s);function r(l,c){this.stream=l,r.__super__.constructor.call(this,c)}return r.prototype.endline=function(l,c,f){return l.isLastRootNode&&c.state===t.CloseTag?"":r.__super__.endline.call(this,l,c,f)},r.prototype.document=function(l,c){var f,d,a,u,h,g,v,w,A;for(v=l.children,d=a=0,h=v.length;a<h;d=++a)f=v[d],f.isLastRootNode=d===l.children.length-1;for(c=this.filterOptions(c),w=l.children,A=[],u=0,g=w.length;u<g;u++)f=w[u],A.push(this.writeChildNode(f,c,0));return A},r.prototype.attribute=function(l,c,f){return this.stream.write(r.__super__.attribute.call(this,l,c,f))},r.prototype.cdata=function(l,c,f){return this.stream.write(r.__super__.cdata.call(this,l,c,f))},r.prototype.comment=function(l,c,f){return this.stream.write(r.__super__.comment.call(this,l,c,f))},r.prototype.declaration=function(l,c,f){return this.stream.write(r.__super__.declaration.call(this,l,c,f))},r.prototype.docType=function(l,c,f){var d,a,u,h;if(f||(f=0),this.openNode(l,c,f),c.state=t.OpenTag,this.stream.write(this.indent(l,c,f)),this.stream.write("<!DOCTYPE "+l.root().name),l.pubID&&l.sysID?this.stream.write(' PUBLIC "'+l.pubID+'" "'+l.sysID+'"'):l.sysID&&this.stream.write(' SYSTEM "'+l.sysID+'"'),l.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(l,c,f)),c.state=t.InsideTag,h=l.children,a=0,u=h.length;a<u;a++)d=h[a],this.writeChildNode(d,c,f+1);c.state=t.CloseTag,this.stream.write("]")}return c.state=t.CloseTag,this.stream.write(c.spaceBeforeSlash+">"),this.stream.write(this.endline(l,c,f)),c.state=t.None,this.closeNode(l,c,f)},r.prototype.element=function(l,c,f){var d,a,u,h,g,v,w,A,x;f||(f=0),this.openNode(l,c,f),c.state=t.OpenTag,this.stream.write(this.indent(l,c,f)+"<"+l.name),A=l.attribs;for(w in A)o.call(A,w)&&(d=A[w],this.attribute(d,c,f));if(u=l.children.length,h=u===0?null:l.children[0],u===0||l.children.every(function(_){return(_.type===e.Text||_.type===e.Raw)&&_.value===""}))c.allowEmpty?(this.stream.write(">"),c.state=t.CloseTag,this.stream.write("</"+l.name+">")):(c.state=t.CloseTag,this.stream.write(c.spaceBeforeSlash+"/>"));else if(c.pretty&&u===1&&(h.type===e.Text||h.type===e.Raw)&&h.value!=null)this.stream.write(">"),c.state=t.InsideTag,c.suppressPrettyCount++,this.writeChildNode(h,c,f+1),c.suppressPrettyCount--,c.state=t.CloseTag,this.stream.write("</"+l.name+">");else{for(this.stream.write(">"+this.endline(l,c,f)),c.state=t.InsideTag,x=l.children,g=0,v=x.length;g<v;g++)a=x[g],this.writeChildNode(a,c,f+1);c.state=t.CloseTag,this.stream.write(this.indent(l,c,f)+"</"+l.name+">")}return this.stream.write(this.endline(l,c,f)),c.state=t.None,this.closeNode(l,c,f)},r.prototype.processingInstruction=function(l,c,f){return this.stream.write(r.__super__.processingInstruction.call(this,l,c,f))},r.prototype.raw=function(l,c,f){return this.stream.write(r.__super__.raw.call(this,l,c,f))},r.prototype.text=function(l,c,f){return this.stream.write(r.__super__.text.call(this,l,c,f))},r.prototype.dtdAttList=function(l,c,f){return this.stream.write(r.__super__.dtdAttList.call(this,l,c,f))},r.prototype.dtdElement=function(l,c,f){return this.stream.write(r.__super__.dtdElement.call(this,l,c,f))},r.prototype.dtdEntity=function(l,c,f){return this.stream.write(r.__super__.dtdEntity.call(this,l,c,f))},r.prototype.dtdNotation=function(l,c,f){return this.stream.write(r.__super__.dtdNotation.call(this,l,c,f))},r}(i)}.call(H)),vr.exports}var ra;function Dd(){return ra||(ra=1,function(){var e,t,i,n,o,s,r,l,c,f;f=Je(),l=f.assign,c=f.isFunction,i=Cl(),n=Nl(),o=Sd(),r=gs(),s=Cd(),e=ae(),t=mn(),Ue.create=function(d,a,u,h){var g,v;if(d==null)throw new Error("Root element needs a name.");return h=l({},a,u,h),g=new n(h),v=g.element(d),h.headless||(g.declaration(h),(h.pubID!=null||h.sysID!=null)&&g.dtd(h)),v},Ue.begin=function(d,a,u){var h;return c(d)&&(h=[d,a],a=h[0],u=h[1],d={}),a?new o(d,a,u):new n(d)},Ue.stringWriter=function(d){return new r(d)},Ue.streamWriter=function(d,a){return new s(d,a)},Ue.implementation=new i,Ue.nodeType=e,Ue.writerState=t}.call(H)),Ue}var sa;function Od(){return sa||(sa=1,function(){var e,t,i,n,o,s={}.hasOwnProperty;e=Dd(),t=ts().defaults,n=function(r){return typeof r=="string"&&(r.indexOf("&")>=0||r.indexOf(">")>=0||r.indexOf("<")>=0)},o=function(r){return"<![CDATA["+i(r)+"]]>"},i=function(r){return r.replace("]]>","]]]]><![CDATA[>")},jn.Builder=function(){function r(l){var c,f,d;this.options={},f=t["0.2"];for(c in f)s.call(f,c)&&(d=f[c],this.options[c]=d);for(c in l)s.call(l,c)&&(d=l[c],this.options[c]=d)}return r.prototype.buildObject=function(l){var c,f,d,a,u;return c=this.options.attrkey,f=this.options.charkey,Object.keys(l).length===1&&this.options.rootName===t["0.2"].rootName?(u=Object.keys(l)[0],l=l[u]):u=this.options.rootName,d=function(h){return function(g,v){var w,A,x,_,b,T;if(typeof v!="object")h.options.cdata&&n(v)?g.raw(o(v)):g.txt(v);else if(Array.isArray(v)){for(_ in v)if(s.call(v,_)){A=v[_];for(b in A)x=A[b],g=d(g.ele(b),x).up()}}else for(b in v)if(s.call(v,b))if(A=v[b],b===c){if(typeof A=="object")for(w in A)T=A[w],g=g.att(w,T)}else if(b===f)h.options.cdata&&n(A)?g=g.raw(o(A)):g=g.txt(A);else if(Array.isArray(A))for(_ in A)s.call(A,_)&&(x=A[_],typeof x=="string"?h.options.cdata&&n(x)?g=g.ele(b).raw(o(x)).up():g=g.ele(b,x).up():g=d(g.ele(b),x).up());else typeof A=="object"?g=d(g.ele(b),A).up():typeof A=="string"&&h.options.cdata&&n(A)?g=g.ele(b).raw(o(A)).up():(A==null&&(A=""),g=g.ele(b,A.toString()).up());return g}}(this),a=e.create(u,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),d(a,l).end(this.options.renderOpts)},r}()}.call(H)),jn}var wr={},Ar={};const Ld=an(pf),Rd=an(Mh);var oa;function Nd(){return oa||(oa=1,function(e){(function(t){t.parser=function(y,m){return new n(y,m)},t.SAXParser=n,t.SAXStream=d,t.createStream=f,t.MAX_BUFFER_LENGTH=64*1024;var i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(y,m){if(!(this instanceof n))return new n(y,m);var L=this;s(L),L.q=L.c="",L.bufferCheckPosition=t.MAX_BUFFER_LENGTH,L.opt=m||{},L.opt.lowercase=L.opt.lowercase||L.opt.lowercasetags,L.looseCase=L.opt.lowercase?"toLowerCase":"toUpperCase",L.tags=[],L.closed=L.closedRoot=L.sawRoot=!1,L.tag=L.error=null,L.strict=!!y,L.noscript=!!(y||L.opt.noscript),L.state=p.BEGIN,L.strictEntities=L.opt.strictEntities,L.ENTITIES=L.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),L.attribList=[],L.opt.xmlns&&(L.ns=Object.create(v)),L.opt.unquotedAttributeValues===void 0&&(L.opt.unquotedAttributeValues=!y),L.trackPosition=L.opt.position!==!1,L.trackPosition&&(L.position=L.line=L.column=0),N(L,"onready")}Object.create||(Object.create=function(y){function m(){}m.prototype=y;var L=new m;return L}),Object.keys||(Object.keys=function(y){var m=[];for(var L in y)y.hasOwnProperty(L)&&m.push(L);return m});function o(y){for(var m=Math.max(t.MAX_BUFFER_LENGTH,10),L=0,I=0,V=i.length;I<V;I++){var G=y[i[I]].length;if(G>m)switch(i[I]){case"textNode":j(y);break;case"cdata":P(y,"oncdata",y.cdata),y.cdata="";break;case"script":P(y,"onscript",y.script),y.script="";break;default:J(y,"Max buffer length exceeded: "+i[I])}L=Math.max(L,G)}var ne=t.MAX_BUFFER_LENGTH-L;y.bufferCheckPosition=ne+y.position}function s(y){for(var m=0,L=i.length;m<L;m++)y[i[m]]=""}function r(y){j(y),y.cdata!==""&&(P(y,"oncdata",y.cdata),y.cdata=""),y.script!==""&&(P(y,"onscript",y.script),y.script="")}n.prototype={end:function(){Z(this)},write:U,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){r(this)}};var l;try{l=Ld.Stream}catch{l=function(){}}l||(l=function(){});var c=t.EVENTS.filter(function(y){return y!=="error"&&y!=="end"});function f(y,m){return new d(y,m)}function d(y,m){if(!(this instanceof d))return new d(y,m);l.apply(this),this._parser=new n(y,m),this.writable=!0,this.readable=!0;var L=this;this._parser.onend=function(){L.emit("end")},this._parser.onerror=function(I){L.emit("error",I),L._parser.error=null},this._decoder=null,c.forEach(function(I){Object.defineProperty(L,"on"+I,{get:function(){return L._parser["on"+I]},set:function(V){if(!V)return L.removeAllListeners(I),L._parser["on"+I]=V,V;L.on(I,V)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(l.prototype,{constructor:{value:d}}),d.prototype.write=function(y){if(typeof R=="function"&&typeof R.isBuffer=="function"&&R.isBuffer(y)){if(!this._decoder){var m=Rd.StringDecoder;this._decoder=new m("utf8")}y=this._decoder.write(y)}return this._parser.write(y.toString()),this.emit("data",y),!0},d.prototype.end=function(y){return y&&y.length&&this.write(y),this._parser.end(),!0},d.prototype.on=function(y,m){var L=this;return!L._parser["on"+y]&&c.indexOf(y)!==-1&&(L._parser["on"+y]=function(){var I=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);I.splice(0,0,y),L.emit.apply(L,I)}),l.prototype.on.call(L,y,m)};var a="[CDATA[",u="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",v={xml:h,xmlns:g},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function b(y){return y===" "||y===`
`||y==="\r"||y==="	"}function T(y){return y==='"'||y==="'"}function D(y){return y===">"||b(y)}function C(y,m){return y.test(m)}function O(y,m){return!C(y,m)}var p=0;t.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(y){var m=t.ENTITIES[y],L=typeof m=="number"?String.fromCharCode(m):m;t.ENTITIES[y]=L});for(var S in t.STATE)t.STATE[t.STATE[S]]=S;p=t.STATE;function N(y,m,L){y[m]&&y[m](L)}function P(y,m,L){y.textNode&&j(y),N(y,m,L)}function j(y){y.textNode=z(y.opt,y.textNode),y.textNode&&N(y,"ontext",y.textNode),y.textNode=""}function z(y,m){return y.trim&&(m=m.trim()),y.normalize&&(m=m.replace(/\s+/g," ")),m}function J(y,m){return j(y),y.trackPosition&&(m+=`
Line: `+y.line+`
Column: `+y.column+`
Char: `+y.c),m=new Error(m),y.error=m,N(y,"onerror",m),y}function Z(y){return y.sawRoot&&!y.closedRoot&&X(y,"Unclosed root tag"),y.state!==p.BEGIN&&y.state!==p.BEGIN_WHITESPACE&&y.state!==p.TEXT&&J(y,"Unexpected end"),j(y),y.c="",y.closed=!0,N(y,"onend"),n.call(y,y.strict,y.opt),y}function X(y,m){if(typeof y!="object"||!(y instanceof n))throw new Error("bad call to strictFail");y.strict&&J(y,m)}function Ut(y){y.strict||(y.tagName=y.tagName[y.looseCase]());var m=y.tags[y.tags.length-1]||y,L=y.tag={name:y.tagName,attributes:{}};y.opt.xmlns&&(L.ns=m.ns),y.attribList.length=0,P(y,"onopentagstart",L)}function _t(y,m){var L=y.indexOf(":"),I=L<0?["",y]:y.split(":"),V=I[0],G=I[1];return m&&y==="xmlns"&&(V="xmlns",G=""),{prefix:V,local:G}}function hi(y){if(y.strict||(y.attribName=y.attribName[y.looseCase]()),y.attribList.indexOf(y.attribName)!==-1||y.tag.attributes.hasOwnProperty(y.attribName)){y.attribName=y.attribValue="";return}if(y.opt.xmlns){var m=_t(y.attribName,!0),L=m.prefix,I=m.local;if(L==="xmlns")if(I==="xml"&&y.attribValue!==h)X(y,"xml: prefix must be bound to "+h+`
Actual: `+y.attribValue);else if(I==="xmlns"&&y.attribValue!==g)X(y,"xmlns: prefix must be bound to "+g+`
Actual: `+y.attribValue);else{var V=y.tag,G=y.tags[y.tags.length-1]||y;V.ns===G.ns&&(V.ns=Object.create(G.ns)),V.ns[I]=y.attribValue}y.attribList.push([y.attribName,y.attribValue])}else y.tag.attributes[y.attribName]=y.attribValue,P(y,"onattribute",{name:y.attribName,value:y.attribValue});y.attribName=y.attribValue=""}function Se(y,m){if(y.opt.xmlns){var L=y.tag,I=_t(y.tagName);L.prefix=I.prefix,L.local=I.local,L.uri=L.ns[I.prefix]||"",L.prefix&&!L.uri&&(X(y,"Unbound namespace prefix: "+JSON.stringify(y.tagName)),L.uri=I.prefix);var V=y.tags[y.tags.length-1]||y;L.ns&&V.ns!==L.ns&&Object.keys(L.ns).forEach(function(Es){P(y,"onopennamespace",{prefix:Es,uri:L.ns[Es]})});for(var G=0,ne=y.attribList.length;G<ne;G++){var K=y.attribList[G],ce=K[0],Xt=K[1],de=_t(ce,!0),Be=de.prefix,nu=de.local,xs=Be===""?"":L.ns[Be]||"",wn={name:ce,value:Xt,prefix:Be,local:nu,uri:xs};Be&&Be!=="xmlns"&&!xs&&(X(y,"Unbound namespace prefix: "+JSON.stringify(Be)),wn.uri=Be),y.tag.attributes[ce]=wn,P(y,"onattribute",wn)}y.attribList.length=0}y.tag.isSelfClosing=!!m,y.sawRoot=!0,y.tags.push(y.tag),P(y,"onopentag",y.tag),m||(!y.noscript&&y.tagName.toLowerCase()==="script"?y.state=p.SCRIPT:y.state=p.TEXT,y.tag=null,y.tagName=""),y.attribName=y.attribValue="",y.attribList.length=0}function jt(y){if(!y.tagName){X(y,"Weird empty close tag."),y.textNode+="</>",y.state=p.TEXT;return}if(y.script){if(y.tagName!=="script"){y.script+="</"+y.tagName+">",y.tagName="",y.state=p.SCRIPT;return}P(y,"onscript",y.script),y.script=""}var m=y.tags.length,L=y.tagName;y.strict||(L=L[y.looseCase]());for(var I=L;m--;){var V=y.tags[m];if(V.name!==I)X(y,"Unexpected close tag");else break}if(m<0){X(y,"Unmatched closing tag: "+y.tagName),y.textNode+="</"+y.tagName+">",y.state=p.TEXT;return}y.tagName=L;for(var G=y.tags.length;G-- >m;){var ne=y.tag=y.tags.pop();y.tagName=y.tag.name,P(y,"onclosetag",y.tagName);var K={};for(var ce in ne.ns)K[ce]=ne.ns[ce];var Xt=y.tags[y.tags.length-1]||y;y.opt.xmlns&&ne.ns!==Xt.ns&&Object.keys(ne.ns).forEach(function(de){var Be=ne.ns[de];P(y,"onclosenamespace",{prefix:de,uri:Be})})}m===0&&(y.closedRoot=!0),y.tagName=y.attribValue=y.attribName="",y.attribList.length=0,y.state=p.TEXT}function E(y){var m=y.entity,L=m.toLowerCase(),I,V="";return y.ENTITIES[m]?y.ENTITIES[m]:y.ENTITIES[L]?y.ENTITIES[L]:(m=L,m.charAt(0)==="#"&&(m.charAt(1)==="x"?(m=m.slice(2),I=parseInt(m,16),V=I.toString(16)):(m=m.slice(1),I=parseInt(m,10),V=I.toString(10))),m=m.replace(/^0+/,""),isNaN(I)||V.toLowerCase()!==m?(X(y,"Invalid character entity"),"&"+y.entity+";"):String.fromCodePoint(I))}function M(y,m){m==="<"?(y.state=p.OPEN_WAKA,y.startTagPosition=y.position):b(m)||(X(y,"Non-whitespace before first tag."),y.textNode=m,y.state=p.TEXT)}function q(y,m){var L="";return m<y.length&&(L=y.charAt(m)),L}function U(y){var m=this;if(this.error)throw this.error;if(m.closed)return J(m,"Cannot write after close. Assign an onready handler.");if(y===null)return Z(m);typeof y=="object"&&(y=y.toString());for(var L=0,I="";I=q(y,L++),m.c=I,!!I;)switch(m.trackPosition&&(m.position++,I===`
`?(m.line++,m.column=0):m.column++),m.state){case p.BEGIN:if(m.state=p.BEGIN_WHITESPACE,I==="\uFEFF")continue;M(m,I);continue;case p.BEGIN_WHITESPACE:M(m,I);continue;case p.TEXT:if(m.sawRoot&&!m.closedRoot){for(var V=L-1;I&&I!=="<"&&I!=="&";)I=q(y,L++),I&&m.trackPosition&&(m.position++,I===`
`?(m.line++,m.column=0):m.column++);m.textNode+=y.substring(V,L-1)}I==="<"&&!(m.sawRoot&&m.closedRoot&&!m.strict)?(m.state=p.OPEN_WAKA,m.startTagPosition=m.position):(!b(I)&&(!m.sawRoot||m.closedRoot)&&X(m,"Text data outside of root node."),I==="&"?m.state=p.TEXT_ENTITY:m.textNode+=I);continue;case p.SCRIPT:I==="<"?m.state=p.SCRIPT_ENDING:m.script+=I;continue;case p.SCRIPT_ENDING:I==="/"?m.state=p.CLOSE_TAG:(m.script+="<"+I,m.state=p.SCRIPT);continue;case p.OPEN_WAKA:if(I==="!")m.state=p.SGML_DECL,m.sgmlDecl="";else if(!b(I))if(C(w,I))m.state=p.OPEN_TAG,m.tagName=I;else if(I==="/")m.state=p.CLOSE_TAG,m.tagName="";else if(I==="?")m.state=p.PROC_INST,m.procInstName=m.procInstBody="";else{if(X(m,"Unencoded <"),m.startTagPosition+1<m.position){var G=m.position-m.startTagPosition;I=new Array(G).join(" ")+I}m.textNode+="<"+I,m.state=p.TEXT}continue;case p.SGML_DECL:if(m.sgmlDecl+I==="--"){m.state=p.COMMENT,m.comment="",m.sgmlDecl="";continue}m.doctype&&m.doctype!==!0&&m.sgmlDecl?(m.state=p.DOCTYPE_DTD,m.doctype+="<!"+m.sgmlDecl+I,m.sgmlDecl=""):(m.sgmlDecl+I).toUpperCase()===a?(P(m,"onopencdata"),m.state=p.CDATA,m.sgmlDecl="",m.cdata=""):(m.sgmlDecl+I).toUpperCase()===u?(m.state=p.DOCTYPE,(m.doctype||m.sawRoot)&&X(m,"Inappropriately located doctype declaration"),m.doctype="",m.sgmlDecl=""):I===">"?(P(m,"onsgmldeclaration",m.sgmlDecl),m.sgmlDecl="",m.state=p.TEXT):(T(I)&&(m.state=p.SGML_DECL_QUOTED),m.sgmlDecl+=I);continue;case p.SGML_DECL_QUOTED:I===m.q&&(m.state=p.SGML_DECL,m.q=""),m.sgmlDecl+=I;continue;case p.DOCTYPE:I===">"?(m.state=p.TEXT,P(m,"ondoctype",m.doctype),m.doctype=!0):(m.doctype+=I,I==="["?m.state=p.DOCTYPE_DTD:T(I)&&(m.state=p.DOCTYPE_QUOTED,m.q=I));continue;case p.DOCTYPE_QUOTED:m.doctype+=I,I===m.q&&(m.q="",m.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:I==="]"?(m.doctype+=I,m.state=p.DOCTYPE):I==="<"?(m.state=p.OPEN_WAKA,m.startTagPosition=m.position):T(I)?(m.doctype+=I,m.state=p.DOCTYPE_DTD_QUOTED,m.q=I):m.doctype+=I;continue;case p.DOCTYPE_DTD_QUOTED:m.doctype+=I,I===m.q&&(m.state=p.DOCTYPE_DTD,m.q="");continue;case p.COMMENT:I==="-"?m.state=p.COMMENT_ENDING:m.comment+=I;continue;case p.COMMENT_ENDING:I==="-"?(m.state=p.COMMENT_ENDED,m.comment=z(m.opt,m.comment),m.comment&&P(m,"oncomment",m.comment),m.comment=""):(m.comment+="-"+I,m.state=p.COMMENT);continue;case p.COMMENT_ENDED:I!==">"?(X(m,"Malformed comment"),m.comment+="--"+I,m.state=p.COMMENT):m.doctype&&m.doctype!==!0?m.state=p.DOCTYPE_DTD:m.state=p.TEXT;continue;case p.CDATA:I==="]"?m.state=p.CDATA_ENDING:m.cdata+=I;continue;case p.CDATA_ENDING:I==="]"?m.state=p.CDATA_ENDING_2:(m.cdata+="]"+I,m.state=p.CDATA);continue;case p.CDATA_ENDING_2:I===">"?(m.cdata&&P(m,"oncdata",m.cdata),P(m,"onclosecdata"),m.cdata="",m.state=p.TEXT):I==="]"?m.cdata+="]":(m.cdata+="]]"+I,m.state=p.CDATA);continue;case p.PROC_INST:I==="?"?m.state=p.PROC_INST_ENDING:b(I)?m.state=p.PROC_INST_BODY:m.procInstName+=I;continue;case p.PROC_INST_BODY:if(!m.procInstBody&&b(I))continue;I==="?"?m.state=p.PROC_INST_ENDING:m.procInstBody+=I;continue;case p.PROC_INST_ENDING:I===">"?(P(m,"onprocessinginstruction",{name:m.procInstName,body:m.procInstBody}),m.procInstName=m.procInstBody="",m.state=p.TEXT):(m.procInstBody+="?"+I,m.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:C(A,I)?m.tagName+=I:(Ut(m),I===">"?Se(m):I==="/"?m.state=p.OPEN_TAG_SLASH:(b(I)||X(m,"Invalid character in tag name"),m.state=p.ATTRIB));continue;case p.OPEN_TAG_SLASH:I===">"?(Se(m,!0),jt(m)):(X(m,"Forward-slash in opening tag not followed by >"),m.state=p.ATTRIB);continue;case p.ATTRIB:if(b(I))continue;I===">"?Se(m):I==="/"?m.state=p.OPEN_TAG_SLASH:C(w,I)?(m.attribName=I,m.attribValue="",m.state=p.ATTRIB_NAME):X(m,"Invalid attribute name");continue;case p.ATTRIB_NAME:I==="="?m.state=p.ATTRIB_VALUE:I===">"?(X(m,"Attribute without value"),m.attribValue=m.attribName,hi(m),Se(m)):b(I)?m.state=p.ATTRIB_NAME_SAW_WHITE:C(A,I)?m.attribName+=I:X(m,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if(I==="=")m.state=p.ATTRIB_VALUE;else{if(b(I))continue;X(m,"Attribute without value"),m.tag.attributes[m.attribName]="",m.attribValue="",P(m,"onattribute",{name:m.attribName,value:""}),m.attribName="",I===">"?Se(m):C(w,I)?(m.attribName=I,m.state=p.ATTRIB_NAME):(X(m,"Invalid attribute name"),m.state=p.ATTRIB)}continue;case p.ATTRIB_VALUE:if(b(I))continue;T(I)?(m.q=I,m.state=p.ATTRIB_VALUE_QUOTED):(m.opt.unquotedAttributeValues||J(m,"Unquoted attribute value"),m.state=p.ATTRIB_VALUE_UNQUOTED,m.attribValue=I);continue;case p.ATTRIB_VALUE_QUOTED:if(I!==m.q){I==="&"?m.state=p.ATTRIB_VALUE_ENTITY_Q:m.attribValue+=I;continue}hi(m),m.q="",m.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:b(I)?m.state=p.ATTRIB:I===">"?Se(m):I==="/"?m.state=p.OPEN_TAG_SLASH:C(w,I)?(X(m,"No whitespace between attributes"),m.attribName=I,m.attribValue="",m.state=p.ATTRIB_NAME):X(m,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!D(I)){I==="&"?m.state=p.ATTRIB_VALUE_ENTITY_U:m.attribValue+=I;continue}hi(m),I===">"?Se(m):m.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(m.tagName)I===">"?jt(m):C(A,I)?m.tagName+=I:m.script?(m.script+="</"+m.tagName,m.tagName="",m.state=p.SCRIPT):(b(I)||X(m,"Invalid tagname in closing tag"),m.state=p.CLOSE_TAG_SAW_WHITE);else{if(b(I))continue;O(w,I)?m.script?(m.script+="</"+I,m.state=p.SCRIPT):X(m,"Invalid tagname in closing tag."):m.tagName=I}continue;case p.CLOSE_TAG_SAW_WHITE:if(b(I))continue;I===">"?jt(m):X(m,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:var ne,K;switch(m.state){case p.TEXT_ENTITY:ne=p.TEXT,K="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:ne=p.ATTRIB_VALUE_QUOTED,K="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:ne=p.ATTRIB_VALUE_UNQUOTED,K="attribValue";break}if(I===";"){var ce=E(m);m.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(ce)?(m.entity="",m.state=ne,m.write(ce)):(m[K]+=ce,m.entity="",m.state=ne)}else C(m.entity.length?_:x,I)?m.entity+=I:(X(m,"Invalid character in entity name"),m[K]+="&"+m.entity+I,m.entity="",m.state=ne);continue;default:throw new Error(m,"Unknown state: "+m.state)}return m.position>=m.bufferCheckPosition&&o(m),m}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var y=String.fromCharCode,m=Math.floor,L=function(){var I=16384,V=[],G,ne,K=-1,ce=arguments.length;if(!ce)return"";for(var Xt="";++K<ce;){var de=Number(arguments[K]);if(!isFinite(de)||de<0||de>1114111||m(de)!==de)throw RangeError("Invalid code point: "+de);de<=65535?V.push(de):(de-=65536,G=(de>>10)+55296,ne=de%1024+56320,V.push(G,ne)),(K+1===ce||V.length>I)&&(Xt+=y.apply(null,V),V.length=0)}return Xt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L}()})(e)}(Ar)),Ar}const Md=an(mh);var br={},aa;function qd(){return aa||(aa=1,function(){br.stripBOM=function(e){return e[0]==="\uFEFF"?e.substring(1):e}}.call(H)),br}var yt={},la;function Ml(){return la||(la=1,function(){var e;e=new RegExp(/(?!xmlns)^.*:/),yt.normalize=function(t){return t.toLowerCase()},yt.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},yt.stripPrefix=function(t){return t.replace(e,"")},yt.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},yt.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t=t.toLowerCase()==="true"),t}}.call(H)),yt}var xr=1,ms={},Er=!1,rn=te.document,li;function ql(e){typeof e!="function"&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return ms[xr]=n,li(xr),xr++}function _s(e){delete ms[e]}function kd(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(void 0,i);break}}function ui(e){if(Er)setTimeout(ui,0,e);else{var t=ms[e];if(t){Er=!0;try{kd(t)}finally{_s(e),Er=!1}}}}function Pd(){li=function(e){qe.nextTick(function(){ui(e)})}}function Fd(){if(te.postMessage&&!te.importScripts){var e=!0,t=te.onmessage;return te.onmessage=function(){e=!1},te.postMessage("","*"),te.onmessage=t,e}}function Bd(){var e="setImmediate$"+Math.random()+"$",t=function(i){i.source===te&&typeof i.data=="string"&&i.data.indexOf(e)===0&&ui(+i.data.slice(e.length))};te.addEventListener?te.addEventListener("message",t,!1):te.attachEvent("onmessage",t),li=function(i){te.postMessage(e+i,"*")}}function zd(){var e=new MessageChannel;e.port1.onmessage=function(t){var i=t.data;ui(i)},li=function(t){e.port2.postMessage(t)}}function Ud(){var e=rn.documentElement;li=function(t){var i=rn.createElement("script");i.onreadystatechange=function(){ui(t),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}function jd(){li=function(e){setTimeout(ui,0,e)}}var Xi=Object.getPrototypeOf&&Object.getPrototypeOf(te);Xi=Xi&&Xi.setTimeout?Xi:te;({}).toString.call(te.process)==="[object process]"?Pd():Fd()?Bd():te.MessageChannel?zd():rn&&"onreadystatechange"in rn.createElement("script")?Ud():jd();var kl=Function.prototype.apply;function Pl(e){typeof e=="number"&&typeof te.clearInterval=="function"?te.clearInterval(e):ys(e)}function Mi(e){typeof e=="number"&&typeof te.clearTimeout=="function"?te.clearTimeout(e):ys(e)}function ys(e){e&&typeof e.close=="function"&&e.close()}function vs(){return new Si(kl.call(te.setTimeout,window,arguments))}function Fl(){return new Si(kl.call(te.setInterval,window,arguments))}function Si(e){this._id=e}Si.prototype.unref=Si.prototype.ref=function(){};Si.prototype.close=function(){ys(this._id)};function Bl(e,t){Mi(e._idleTimeoutId),e._idleTimeout=t}function zl(e){Mi(e._idleTimeoutId),e._idleTimeout=-1}var Ul=ws;function ws(e){Mi(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=vs(function(){e._onTimeout&&e._onTimeout()},t))}const Xd={setImmediate:ql,clearImmediate:_s,setTimeout:vs,clearTimeout:Mi,setInterval:Fl,clearInterval:Pl,active:ws,unenroll:zl,_unrefActive:Ul,enroll:Bl},Hd=Object.freeze(Object.defineProperty({__proto__:null,_unrefActive:Ul,active:ws,clearImmediate:_s,clearInterval:Pl,clearTimeout:Mi,default:Xd,enroll:Bl,setImmediate:ql,setInterval:Fl,setTimeout:vs,unenroll:zl},Symbol.toStringTag,{value:"Module"})),Vd=an(Hd);var ua;function Gd(){return ua||(ua=1,function(e){(function(){var t,i,n,o,s,r,l,c,f,d=function(h,g){return function(){return h.apply(g,arguments)}},a=function(h,g){for(var v in g)u.call(g,v)&&(h[v]=g[v]);function w(){this.constructor=h}return w.prototype=g.prototype,h.prototype=new w,h.__super__=g.prototype,h},u={}.hasOwnProperty;c=Nd(),o=Md,t=qd(),l=Ml(),f=Vd.setImmediate,i=ts().defaults,s=function(h){return typeof h=="object"&&h!=null&&Object.keys(h).length===0},r=function(h,g,v){var w,A,x;for(w=0,A=h.length;w<A;w++)x=h[w],g=x(g,v);return g},n=function(h,g,v){var w;return w=Object.create(null),w.value=v,w.writable=!0,w.enumerable=!0,w.configurable=!0,Object.defineProperty(h,g,w)},e.Parser=function(h){a(g,h);function g(v){this.parseStringPromise=d(this.parseStringPromise,this),this.parseString=d(this.parseString,this),this.reset=d(this.reset,this),this.assignOrPush=d(this.assignOrPush,this),this.processAsync=d(this.processAsync,this);var w,A,x;if(!(this instanceof e.Parser))return new e.Parser(v);this.options={},A=i["0.2"];for(w in A)u.call(A,w)&&(x=A[w],this.options[w]=x);for(w in v)u.call(v,w)&&(x=v[w],this.options[w]=x);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(l.normalize)),this.reset()}return g.prototype.processAsync=function(){var v,w;try{return this.remaining.length<=this.options.chunkSize?(v=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(v),this.saxParser.close()):(v=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(v),f(this.processAsync))}catch(A){if(w=A,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(w)}},g.prototype.assignOrPush=function(v,w,A){return w in v?(v[w]instanceof Array||n(v,w,[v[w]]),v[w].push(A)):this.options.explicitArray?n(v,w,[A]):n(v,w,A)},g.prototype.reset=function(){var v,w,A,x;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(_){return function(b){if(_.saxParser.resume(),!_.saxParser.errThrown)return _.saxParser.errThrown=!0,_.emit("error",b)}}(this),this.saxParser.onend=function(_){return function(){if(!_.saxParser.ended)return _.saxParser.ended=!0,_.emit("end",_.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,x=[],v=this.options.attrkey,w=this.options.charkey,this.saxParser.onopentag=function(_){return function(b){var T,D,C,O,p;if(C={},C[w]="",!_.options.ignoreAttrs){p=b.attributes;for(T in p)u.call(p,T)&&(!(v in C)&&!_.options.mergeAttrs&&(C[v]={}),D=_.options.attrValueProcessors?r(_.options.attrValueProcessors,b.attributes[T],T):b.attributes[T],O=_.options.attrNameProcessors?r(_.options.attrNameProcessors,T):T,_.options.mergeAttrs?_.assignOrPush(C,O,D):n(C[v],O,D))}return C["#name"]=_.options.tagNameProcessors?r(_.options.tagNameProcessors,b.name):b.name,_.options.xmlns&&(C[_.options.xmlnskey]={uri:b.uri,local:b.local}),x.push(C)}}(this),this.saxParser.onclosetag=function(_){return function(){var b,T,D,C,O,p,S,N,P,j;if(p=x.pop(),O=p["#name"],(!_.options.explicitChildren||!_.options.preserveChildrenOrder)&&delete p["#name"],p.cdata===!0&&(b=p.cdata,delete p.cdata),P=x[x.length-1],p[w].match(/^\s*$/)&&!b?(T=p[w],delete p[w]):(_.options.trim&&(p[w]=p[w].trim()),_.options.normalize&&(p[w]=p[w].replace(/\s{2,}/g," ").trim()),p[w]=_.options.valueProcessors?r(_.options.valueProcessors,p[w],O):p[w],Object.keys(p).length===1&&w in p&&!_.EXPLICIT_CHARKEY&&(p=p[w])),s(p)&&(typeof _.options.emptyTag=="function"?p=_.options.emptyTag():p=_.options.emptyTag!==""?_.options.emptyTag:T),_.options.validator!=null&&(j="/"+function(){var z,J,Z;for(Z=[],z=0,J=x.length;z<J;z++)C=x[z],Z.push(C["#name"]);return Z}().concat(O).join("/"),function(){var z;try{return p=_.options.validator(j,P&&P[O],p)}catch(J){return z=J,_.emit("error",z)}}()),_.options.explicitChildren&&!_.options.mergeAttrs&&typeof p=="object"){if(!_.options.preserveChildrenOrder)C={},_.options.attrkey in p&&(C[_.options.attrkey]=p[_.options.attrkey],delete p[_.options.attrkey]),!_.options.charsAsChildren&&_.options.charkey in p&&(C[_.options.charkey]=p[_.options.charkey],delete p[_.options.charkey]),Object.getOwnPropertyNames(p).length>0&&(C[_.options.childkey]=p),p=C;else if(P){P[_.options.childkey]=P[_.options.childkey]||[],S={};for(D in p)u.call(p,D)&&n(S,D,p[D]);P[_.options.childkey].push(S),delete p["#name"],Object.keys(p).length===1&&w in p&&!_.EXPLICIT_CHARKEY&&(p=p[w])}}return x.length>0?_.assignOrPush(P,O,p):(_.options.explicitRoot&&(N=p,p={},n(p,O,N)),_.resultObject=p,_.saxParser.ended=!0,_.emit("end",_.resultObject))}}(this),A=function(_){return function(b){var T,D;if(D=x[x.length-1],D)return D[w]+=b,_.options.explicitChildren&&_.options.preserveChildrenOrder&&_.options.charsAsChildren&&(_.options.includeWhiteChars||b.replace(/\\n/g,"").trim()!=="")&&(D[_.options.childkey]=D[_.options.childkey]||[],T={"#name":"__text__"},T[w]=b,_.options.normalize&&(T[w]=T[w].replace(/\s{2,}/g," ").trim()),D[_.options.childkey].push(T)),D}}(this),this.saxParser.ontext=A,this.saxParser.oncdata=function(_){return function(b){var T;if(T=A(b),T)return T.cdata=!0}}()},g.prototype.parseString=function(v,w){var A;w!=null&&typeof w=="function"&&(this.on("end",function(x){return this.reset(),w(null,x)}),this.on("error",function(x){return this.reset(),w(x)}));try{return v=v.toString(),v.trim()===""?(this.emit("end",null),!0):(v=t.stripBOM(v),this.options.async?(this.remaining=v,f(this.processAsync),this.saxParser):this.saxParser.write(v).close())}catch(x){if(A=x,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw A}else return this.emit("error",A),this.saxParser.errThrown=!0}},g.prototype.parseStringPromise=function(v){return new Promise(function(w){return function(A,x){return w.parseString(v,function(_,b){return _?x(_):A(b)})}}(this))},g}(o),e.parseString=function(h,g,v){var w,A,x;return v!=null?(typeof v=="function"&&(w=v),typeof g=="object"&&(A=g)):(typeof g=="function"&&(w=g),A={}),x=new e.Parser(A),x.parseString(h,w)},e.parseStringPromise=function(h,g){var v,w;return typeof g=="object"&&(v=g),w=new e.Parser(v),w.parseStringPromise(h)}}).call(H)}(wr)),wr}var jl;(function(){var e,t,i,n=function(s,r){for(var l in r)o.call(r,l)&&(s[l]=r[l]);function c(){this.constructor=s}return c.prototype=r.prototype,s.prototype=new c,s.__super__=r.prototype,s},o={}.hasOwnProperty;t=ts(),e=Od(),i=Gd(),Ml(),t.defaults,function(s){n(r,s);function r(l){this.message=l}return r}(Error),e.Builder,i.Parser,jl=i.parseString,i.parseStringPromise}).call(H);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function mt(e,t,i,n){function o(s){return s instanceof i?s:new i(function(r){r(s)})}return new(i||(i=Promise))(function(s,r){function l(d){try{f(n.next(d))}catch(a){r(a)}}function c(d){try{f(n.throw(d))}catch(a){r(a)}}function f(d){d.done?s(d.value):o(d.value).then(l,c)}f((n=n.apply(e,[])).next())})}var Qt;(function(e){e.ELLIPSE="ellipse",e.POINT="point",e.POLYGON="polygon",e.RECTANGLE="rectangle"})(Qt||(Qt={}));var we;(function(e){e.EDITOR_SETTINGS="editorsettings",e.GROUP="group",e.IMAGE_LAYER="imagelayer",e.LAYER="layer",e.OBJECT_GROUP="objectgroup",e.PROPERTIES="properties",e.TILESET="tileset"})(we||(we={}));var sn;(function(e){e.BASE64="base64",e.CSV="csv"})(sn||(sn={}));var _i;(function(e){e.GZIP="gzip",e.ZLIB="zlib"})(_i||(_i={}));var pt;(function(e){e[e.DIAGONALLY=536870912]="DIAGONALLY",e[e.HORIZONTALLY=2147483648]="HORIZONTALLY",e[e.VERTICALLY=1073741824]="VERTICALLY"})(pt||(pt={}));const Qe=e=>!!(e&&e.length>0),Zd=e=>!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i),Wd=e=>mt(void 0,void 0,void 0,function*(){return new Promise(t=>{fetch(e).then(i=>i.text()).then(i=>t(i))})}),ha=(e,t)=>{const i=[];if(e.length!==t)throw new Error(`Expected ${t} bytes of tile data; received ${e.length}`);for(let n=0;n<t;n+=4)i.push(e.readUInt32LE(n));return i},Pe=e=>e&&Object.entries(e).map(([t,i])=>({[t]:i})),_n=e=>({properties:e&&Object.assign({},...e.map(({property:t})=>Object.assign({},...t.map(({$:{name:i,value:n},_:o})=>({[i]:n||o})))))||null}),on=e=>({H:!!(e&pt.HORIZONTALLY),V:!!(e&pt.VERTICALLY),D:!!(e&pt.DIAGONALLY)}),Xl=e=>e&=~(pt.HORIZONTALLY|pt.VERTICALLY|pt.DIAGONALLY),Yd=e=>e.point&&Qt.POINT||e.ellipse&&Qt.ELLIPSE||e.polygon&&Qt.POLYGON||Qt.RECTANGLE,Qd=e=>{if(e==="true")return!0;if(e==="false")return!1;if(`${e}`.match(/^[+-]?\d+(\.\d+)?$/g)){const t=parseFloat(e);return isNaN(t)?e:t}return e},Jd=e=>mt(void 0,void 0,void 0,function*(){const t=Zd(e)?yield Wd(e):e;return new Promise(i=>jl(t,{explicitChildren:!0,preserveChildrenOrder:!0,attrValueProcessors:[n=>Qd(n)]},(n,o)=>{if(n)throw n;i(o)}))}),Hl=e=>{const{$:t,properties:i,polygon:n,text:o}=e,s=Object.assign(Object.assign(Object.assign({shape:Yd(e)},Qe(n)&&{points:n[0].$.points.split(" ").map(r=>{const[l,c]=r.split(",");return[parseFloat(l),parseFloat(c)]})}),_n(i)),...Pe(t));return o&&(s.text=o[0]._,s.properties=Object.assign({},s.properties,o[0].$)),s.gid&&(s.flips=on(s.gid),s.gid=Xl(s.gid)),s},Kd=e=>{const{$:t,image:i,object:n,properties:o}=e;return Object.assign(Object.assign(Object.assign(Object.assign({type:e["#name"],visible:1},Qe(i)&&{image:Object.assign({},...Pe(i[0].$))}),Qe(n)&&{objects:n.map(s=>Hl(s))}),_n(o)),...Pe(t))},$d=e=>{const{$:t,animation:i,objectgroup:n}=e,o=Qe(n)&&n[0].object;return Object.assign(Object.assign(Object.assign({},Qe(i)&&{animation:{frames:i[0].frame.map(({$:s})=>Object.assign({},...Pe(s)))}}),Qe(o)&&{objects:o.map(s=>Hl(s))}),...Pe(t))},ep=(e,t,i)=>mt(void 0,void 0,void 0,function*(){return Object.assign(Object.assign({type:e["#name"],layers:Qe(e.$$)?yield Promise.all(e.$$.map(n=>Vl(n,t,i))):[]},_n(e.properties)),...Pe(e.$))}),tp=e=>{const{$:t,$$:i,tile:n}=e,o=i&&Object.assign({},...Pe(i[0].$));if(o){const s=Qe(n)&&n.map(r=>$d(r));return Object.assign({},...Pe(t),{image:o,tiles:s})}else throw new Error("Tilesets should be embeded in a map file.")};function ip(e,t,i){return mt(this,void 0,void 0,function*(){const{data:n,properties:o}=e;if(!Qe(n))throw new Error("TMXLayer data corrupted!");const s=Object.assign(Object.assign(Object.assign(Object.assign({},i?{flips:[]}:{}),{type:e["#name"],visible:1}),_n(o)),...Pe(e.$)),{_:r,$:l,tile:c}=n[0];if(c)s.data=c.map(({$:f})=>f&&f.gid||0);else{const{encoding:f,compression:d}=l,a=r.trim();switch(f){case sn.CSV:s.data=a.split(",");break;case sn.BASE64:const u=new R(a,f);switch(d){case null:case void 0:s.data=ha(u,t);break;case _i.GZIP:case _i.ZLIB:const h=d===_i.GZIP?Eo.gunzip:Eo.inflate;s.data=yield new Promise((g,v)=>h(u,(w,A)=>{w&&v(w),g(ha(A,t))}));break;default:throw new Error(`unsupported compression: ${d}`)}}}return s.data.map((f,d)=>{i?(s.flips[d]=on(f),s.data[d]=Xl(f)):s.data[d]=f}),s})}const Vl=(e,t,i)=>mt(void 0,void 0,void 0,function*(){switch(e["#name"]){case we.GROUP:return yield ep(e,t,i);case we.LAYER:return yield ip(e,t,i);case we.IMAGE_LAYER:case we.OBJECT_GROUP:return Kd(e)}});function np(e,t){return mt(this,void 0,void 0,function*(){const{map:{$:i,$$:n}}=yield Jd(e),o=Object.assign({layers:[],tilesets:[],backgroundcolor:"",height:0,infinite:0,nextlayerid:0,nextobjectid:0,orientation:"",renderorder:"",tiledversion:"",tileheight:0,tilewidth:0,version:0,width:0,properties:void 0},...Pe(i)),s=o.width*o.height*4;return yield Promise.all(n.map((r,l)=>mt(this,void 0,void 0,function*(){switch(r["#name"]){case we.PROPERTIES:o.properties=Object.assign({},...r.$$.map(({$:{name:c,value:f}})=>({[c]:f})));break;case we.EDITOR_SETTINGS:o.editorsettings=Object.assign({},...r.$$.map(c=>({[c["#name"]]:c.$})));break;case we.TILESET:o.tilesets.push(tp(r));break;case we.GROUP:case we.IMAGE_LAYER:case we.LAYER:case we.OBJECT_GROUP:o.layers[l]=yield Vl(r,s,t);break}}))),Object.assign(Object.assign({},o),{layers:Object.values(o.layers)})})}const rp=(e,t=!1)=>mt(void 0,void 0,void 0,function*(){return yield np(e,t)});class Y{constructor(t=255,i=255,n=255,o=1){this.r=255,this.g=255,this.b=255,this.a=1,typeof t=="string"?this.setHex(t):(this.r=t,this.g=i,this.b=n,this.a=o)}copy(){return new Y(this.r,this.g,this.b,this.a)}add(t){return new Y(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}subtract(t){return new Y(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}setAlpha(t){return this.a=t,this}setHex(t){const i=t.replace("#","");return this.r=parseInt(i.substring(0,2),16),this.g=parseInt(i.substring(2,4),16),this.b=parseInt(i.substring(4,6),16),this.a=i.length===8?parseInt(i.substring(6,8),16)/255:1,this}brightness(t){let{r:i,g:n,b:o}=this;return i=i+t,n=n+t,o=o+t,i>255?i=255:i<0&&(i=0),n>255?n=255:n<0&&(n=0),o>255?o=255:o<0&&(o=0),new Y(i,n,o,this.a)}toString(t=!0){const i=n=>((n=n|0)<16?"0":"")+n.toString(16);return"#"+i(this.r)+i(this.g)+i(this.b)+(t?i(this.a*255):"")}}const Ce={Black:new Y("#140C1C"),DarkRed:new Y("#442434"),DarkBlue:new Y("#30346D"),DarkGray:new Y("#4E4A4F"),Brown:new Y("#854C30"),DarkGreen:new Y("#346524"),Red:new Y("#D04648"),LightGray:new Y("#757161"),LightBlue:new Y("#597DCE"),Orange:new Y("#D27D2C"),BlueGray:new Y("#8595A1"),LightGreen:new Y("#6DAA2C"),Peach:new Y("#D2AA99"),Cyan:new Y("#6DC2CA"),Yellow:new Y("#DAD45E"),White:new Y("#DEEED6")};var Jt;(function(e){e.Custom="custom",e.ImageLayer="imagelayer",e.Layer="layer",e.ObjectGroup="objectgroup",e.Properties="properties",e.TileSet="tileset"})(Jt||(Jt={}));var yi;(function(e){e[e.Diagonally=536870912]="Diagonally",e[e.Horizontally=2147483648]="Horizontally",e[e.Vertically=1073741824]="Vertically"})(yi||(yi={}));var ni;(function(e){e.Rectangle="rectangle",e.Ellipse="ellipse",e.Polygon="polygon"})(ni||(ni={}));const sp=`
    margin: 0;
    overflow: hidden;
    touch-action: none; 
    user-select: none; 
    -webkit-user-select: none;
    -webkit-touch-callout: none;
`,op=`
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
`,ap=`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gUeDiMvgyAfEQAADFFJREFUeNrtHVdu6zAsCnw0+9Tx3fx+ngpG4R4eiQUUbaNokRSXKOrxUJZtKFT96/XaXq/X9nAUqR02rqWeaoYsb+ufW+Eiwels5alFPvcZVg+RCYHBEdA8zyQR9DbeemF9j3Vd334w3HFIXdf10f6XdV1VBENtIA+Rw37HTYjBvv9+QoTBn7Fxa+1vsP63ROWv12vDCGVd1wc2BsUJtm3bOmCXZWkY8DSchAD8oyNsWZa2LEvrc4Rf3bZtA8SxjchflqV12C3LQhJB+w88WN/X11prvR8PEcA+xs/H+fd5vHEACABsl2B/R8u4mHme35AId/Y8zx87nQIGRkQcgcB1jzDowOvwGYmgI22e50fnYlgfvTS4mxylI5QTw9z8IQwmzYAUNXdkjRwC7qxxsnC3YYvB6jtAO/AggHv7/rsjgyLkIwpEegc8nB+EQUeUhgi4z7SicJJYJ0T+siz9e391nQi2bYOi4a3diGSKRVH10v8jMDAAdsKh6iHRjHDo8+ufz/P8AWzIujVsnNrVDAfeqM3Ydzj1f+/bSmQPSj+AegKmOVPWgAQUrl5SkrRKFNV0XBtYj6RDfIzb24/6T3R9lIU1tsP+h3h80+28JhqkoFFR7BzgTGxYMAM/9BqwwVvE9LTI+wz9IKyERdpxJgr22zNmxL6O+hGq66MF4w7/P/v4+fuuFaiSHcsRBkUAGgdKFHhaEcKNI81hNHs5Nm1dm2bzUP2PRAC/99Q6OqS6zrooE0Vie7B9NbeizCRg/7vGwUzE0QyLWhGcCcg50syuzN4RVGi8u5TjANjfGi4ScVVTOxMqS3A8qZ6Dj8ZNbK3zeBI7F/iopxBPsTdqkhKL14oADZI54pCAyJ1VSOwb/raIAad1Qs5LEqGcLkASgHaCmImToaBp5ZxEAJyZitVrRYxmfV4dIAobyyY22d5WjTNqBWg5hGQne5WtK1oBkgjPwPVd7nJun0Tm7oqYgVc4/z8FgqwBJRolSGunS+7YiANMmsdZWLBLH5FkCzQbMQRCDZryVUc9kJp+Is4YDQFHOMheyE8ngBGwkoJosdOz2LO0A70EMCIeU0RHE9oK/Gj7MPIlIEnI1xCA18KwsOAs8UYRcFTEROIpy5GfNTglArgJanWAPRTJah0ggiDOv5GC/EolMKP/6Gnj0VZAFEHaeIG73OUuZza1MZ2K+p22y6NmjOYkTjuGN14gMr40N+1ZAIcEjZIYPS+wxjs8e2UDhUIANzDXHtb1/7l+sLo2FG58S1vt+rn6rJ2PxQxoOUBfJxYTIM7felgTUaI0fUscQNrhnvlZ4hyyCSBbSTNHH2URgCWszCsirGah5/MokXlEgHSCp+EALuRnANBal43gPQhA6xCLhr5X6QAhJVAbjhRRsiw7cG8lNlMJPNIK+PrTyrvc5S7G0jD2QJlKVD1m9nnbS22x70n1mvHH/qz9c2No+pfC4aP9sTDOVroi/3suhWTXR88qKtbHJdigorQ1/09aR4xl0VIfXD287u3hEtLY1PeqFSTt/DRwoTiSB3+T11SSWHL2JccIUWGAsoqUrPlHYKOBgXXuT85lq62LcAtJ3l2hWICuQVKEAF0cYJyUBwFce03/EovUKJqZO0OS4XD8bPhVcJ/o/O5yl+8sFdFJlwRCxBWa3f5MZqn2/2i8gsaNWxZ2vjfAoruxYj6aq+laJdaj+GoPcjQ3mE9HAFEKzkJg5Ljbe3PZ6uzxHOhg+RxSRYA1xUu23N2DAPZAsBYPlrsF2PfNRGCZvIdF7nVe793B2fOLyGdNLqNM/U+VKRTakR6XY9QOrbRjsbV41mg5ENO4wjMRz+UWvu3Au9TZ0nv3543Xs8hnz3ey+i8tmUmMjiCAMySXyJD/h+5kTS5bTUygx5GRcXHD4kjhUrFVcwDLGjQp5qzwNRPB2T1xGk9bpZWiNVE9pqSUU7HSMbebJzDL1Vo1/wwC8F5aqSaA6XGREjFZqq5zeeZ/tniHyQNAzE62xAOM35EQJPkBRrkuvaZhJQYpHsBDjNR8ov1b4fczjoDKgIg72OIuKX4KrwVylTcKz28HH7y2qJIopd5jL4d67fQMO7QyIMR7HX1PKyVCAJgZz42P+nq+OSDE2mdFQEimJzDDS4qmjK9G8JUDQqqvz2dyAG2bj4cjrWZcxI4/Y+w/vHXjWf8V7zO8EYDl5k3EjubGGuMOLH4I7gx/vFbFXQ7liMAiPjgishJK1DeAvcwaYi2/mGjgSk/Cl5ox3hMxrYzkrISonR0h7Oj8IjGHlf2r8wNE2RTHgjPGgP16xqieX8b4XP9Qs8eep6P6RwHmSUAgTYB7elajJ0jt+/PtXc5x/XsBmNG+QlHU4osksr2zdv3a/1lmXoWfZMqkwqvoM9o0NNU2eoWOZq2fsuTgFWxgKRVtZH1Hr9+S0+hNnGllXCQewNO+sh6bYyRJllQfTXKlqU9JSvXtNu6dKLHQhq62syP9Z9jR0fqvJgTLcWjWE/BeR0g00bPmSdbsp2utx9Fm/GpzAWMdWEKes+4NVHOmI67HRzhM2Az1sFjqgsXtR/C9bKrdPNkXc54aCrVkqqzUJb715SuJQMbXVrg0fpKZaNb+LbkBrsoBpF20pwjwcgDvGM1ih2Jn2uMhzBF2doafQHIYRefH2d+WZNSegzD2vsRtAOsR+PP+gGgOIK4P6eXPrJdBz+iAOsV6MhDvdcZk6RlRH0AVIva8nGotjdKwsTPts7JQjQyMBotw8llTXzk/qR+u/wn7kKNASgmBwYaWwwgsB76kxFRF4HpPC7UHN1zQqmZdWsWVC5hVBYR44uY7B6lM9RrREaIvlkXlveQn0XgCqfRxngQU/e/nnspOWF4x8fnS07ScowQzEbW732q+cfVe+GFp/Kxi0pRDJ+Ndvz3v5mXkMKpWADOSQXuyidzlRNbWYQiiZCyU69Jv7DxAk9c2qx6OOV6TjhSpf229ljCq5k+VJ5RL4+9lWRoVUjzKrdEdfAVvGnpNylD/DfN/SrteQj6F+CxWViWbtcDLuG00FmyHH0W8T2zXY7ZpFQeIItjStrX2aK2RwJHqjy6e+XPE9+cIer1em5bdU79HjqFFCpxsv9nj2Qmetr9QJPhO2K7HrkprOABGCNIEocsZ+760gN5emT7FXB8lMKm9hdt45i/BdxoROnKDag4QJZBqmWkhME977ZlLlcJ6uA5wa/snmn/UTo/2Xzm/o+z4s7d/Pu7y02X6tgXN8xyOTYB9ePwa4xwE065F2ofHH9lIge3ajuwfQyDUzCUEZzu29u7fxAGiysQ8z6UKi6b/TOXq50SANQwMU0Q0/XjH0fSvRerYh4UYPIQD/QAVm8TS/1frAF4Cs7aJxExWbBJr/7cVcJdcO1TT7xHFsr4KP0j0vD76fakcygGisvDbPXzV31/XVdYBJKrzunzPgvxxfRl+hEtZARiCLY4Ei/3aYUmdalXUc+nSNSd8GSHhZ+Y0k7RTJCBhx53RM/6KxWPzWNdVvT4vsKX+9wilZzmAZC5ISg913Il97jnPjtZL89Ouz2siRo+wqzfQZFlMB5YHKGdV+EZkYXmGv1oHsHqbPIC+tf1911fmCdRekMywEvaWhRmyWHqxFI5VBRdzil+rhutJcRKt39MZprk/iM1Pazoe9baQGKnF3a61JHCQvhNN8MC9XSiNr7k9LN2+1cAk++oX5tHk4GOZ6xNSpSd5Uhbb587F4fzYdGeKXefNAWB1yXI70JqIc5z72AcGHwpnY9tnhBqvUkYAeNa2ruvbT6ZoGTdfj862rM+Ll6cVkBlvCLpk1E5E4jEBIUyyZfwYZt//ljKwuBCQpQNwCPa8HczJOMv9eo0M1UQVezKlSmuDdzI9yaa1SS6vysXvUsX5rjRZgr1uxFr+Pr/ClfWMTKQene05sg8uL36GeRN5eFIi5IF9fmjO47XsMyqrlI4FNXxNihzN+swe1OqXtZy6Btcn+riDxxcBiccbMaVNSG2dH5eDgCKOvsmncUBIFdhJGpt4mPEjVHvA+rz6/Cltnvpc8hUsy9Kkw7B+sTbbR4LhwOlr6fP8+2zSsibNwJKTxTJxa1JIjX1frQN0IsFeLbU8O6c9U8goU1bn2kVWcgLsOBeOB5HDeciop2FhDIGFw1T5TqwFi5doVhGAUWTWYY+UT58gHNEKGBEJr4SdwIpJI3yMGEfReGoz0AkgaWf99JsIFHH08g+xCUH4e1s+1AAAAABJRU5ErkJggg==
`,lt=()=>typeof performance<"u"&&performance.now()||0,Gl=e=>!!(e&&e.length),lp=e=>e.replace(/^.*[\\\/]/,""),up=e=>e*Math.PI/180,Mt=(e,t=0,i=1)=>Math.max(t,Math.min(i,e)),We=(e,t,i)=>t+Mt(e)*(i-t),nt=(e=1,t=0)=>t+Math.random()*(e-t),qr=(e,t,i)=>i-t?Mt((e-t)/(i-t)):0,hp=(e,t=0)=>Math.floor(nt(e,t)),fa=(e,t)=>e.renderOrder-t.renderOrder,Zl=e=>new Promise(t=>setTimeout(t,e)),ca=(e,t)=>Zl(e).then(t);function Wl(e,t,i){const n=i-t;return((e-t)%n+n)%n+t}class le{constructor(t=0,i=0){this.x=t,this.y=i}add(t){return new le(this.x+t.x,this.y+t.y)}subtract(t){return new le(this.x-t.x,this.y-t.y)}multiply(t){return new le(this.x*t.x,this.y*t.y)}divide(t){return typeof t=="number"?new le(this.x/t,this.y/t):new le(this.x/t.x,this.y/t.y)}clone(){return new le(this.x,this.y)}scale(t){return new le(this.x*t,this.y*t)}length(){return Math.pow(this.lengthSquared(),.5)}lengthSquared(){return Math.pow(this.x,2)+Math.pow(this.y,2)}distance(t){return Math.pow(this.distanceSquared(t),.5)}distanceSquared(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)}normalize(t=1){const i=this.length();return i?this.scale(t/i):new le(0,t)}clampLength(t=1){const i=this.length();return i>t?this.scale(t/i):this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}angle(){return Math.atan2(this.x,this.y)}setAngle(t=0,i=1){return this.x=i*Math.sin(t),this.y=i*Math.cos(t),this}rotate(t){const i=Math.cos(t),n=Math.sin(t);return new le(this.x*i-this.y*n,this.x*n+this.y*i)}direction(){return Math.abs(this.x)>Math.abs(this.y)?this.x<0?3:1:this.y<0?2:0}reverse(){return new le(-this.y,-this.x)}invert(){return new le(-this.x,-this.y)}floor(){return new le(Math.floor(this.x),Math.floor(this.y))}area(){return Math.abs(this.x*this.y)}lerp(t,i){return this.add(t.subtract(this).scale(Mt(i)))}inRange(t){return this.x>=0&&this.y>=0&&this.x<t.x&&this.y<t.y}}const k=(e=0,t)=>new le(e,t===void 0?e:t),yn=(e=1)=>new le().setAngle(nt(2*Math.PI),e),fp=(e=1,t=0)=>e>0?yn(e*Math.pow(nt(t/e,1),.5)):new le;let qt=class Wt{constructor(t,i){this.pos=t,this.size=i,this.overlaps=(n,o)=>Math.abs(this.pos.x-n.x)*2<this.size.x+o.x&&Math.abs(this.pos.y-n.y)*2<this.size.y+o.y}move(t){return new Wt(this.pos.add(t),this.size)}scale(t){return new Wt(this.pos.scale(t),this.size.scale(t))}multiply(t){return new Wt(this.pos.multiply(t),this.size.multiply(t))}divide(t){return new Wt(this.pos.divide(t),this.size.divide(t))}floor(){return new Wt(this.pos.floor(),this.size.floor())}};const pi=(e=0,t=0,i=0,n=0)=>new qt(k(e,t),k(i,n));class cp{constructor(t){this.game=t,this.pixelFont=new Image,this.pixelText=()=>{},this.pixelFont.src=ap,this.pixelFont.onload=()=>this.pixelText=this.createPixelFontRenderer(this.pixelFont,8)}fillRect(t,i,n=0){const{ctx:o}=this.game,{pos:s,size:r}=t;o.save(),this.rotate(t,n),o.fillStyle=i.toString(),o.fillRect(s.x,s.y,r.x,r.y),o.restore()}fillEllipse(t,i,n=0){const{ctx:o}=this.game,{pos:s,size:r}=t;o.save(),this.rotate(t,n),o.beginPath(),o.ellipse(s.x+r.x/2,s.y+r.y/2,r.x/2,r.y/2,n,0,Math.PI*2),o.fillStyle=i.toString(),o.fill(),o.restore()}stroke(t,i,n,o=1){const{ctx:s}=this.game;s.lineWidth=o,s.lineJoin="miter",s.beginPath(),s.moveTo(n[0].x+t,n[0].y+i),n.map(r=>s.lineTo(t+r.x,i+r.y)),s.lineTo(n[0].x+t,n[0].y+i),s.stroke()}outline(t,i,n=1,o=0){const{ctx:s}=this.game,{pos:r,size:l}=t;s.save(),this.rotate(t,o),s.strokeStyle=i.toString(),s.lineWidth=n,s.beginPath(),s.rect(r.x,r.y,l.x,l.y),s.stroke(),s.restore()}text(t,i,n,o="1em",s="left",r="top",l=!1){const{ctx:c}=this.game;c.font=`${o} monospace`,c.textBaseline=r,c.textAlign=s,l&&(c.strokeStyle=Ce.Black.setAlpha(.9).toString(),c.lineJoin="round",c.lineWidth=4,c.strokeText(t,i.x,i.y)),c.fillStyle=(n||Ce.White).toString(),c.fillText(t,i.x,i.y)}draw2d(t,i,n=k(1),o=0,s=!1,r=!1,l,c){const f=c||this.game.ctx,{pos:d,size:a}=i,u=s||r,h=k(s?-1:1,r?-1:1),g=k(s?-a.x*n.x:0,r?-a.y*n.y:0),v=d.subtract(g).multiply(h);f.save(),this.rotate(i,o,l?n:k(1)),u&&f.scale(h.x,h.y),f.translate(.5,.5),l?f.drawImage(t,l.x,l.y,a.x,a.y,v.x-.5,v.y-.5,a.x*n.x,a.y*n.y):f.drawImage(t,d.x-.5,d.y-.5,a.x,a.y),f.translate(-.5,-.5),f.restore()}rotate(t,i=0,n=k(1)){const{pos:o,size:s}=t,r=this.game.ctx;r.translate(o.x+s.x*n.x/2,o.y+s.y*n.y/2),r.rotate(i),r.translate(-(o.x+s.x*n.x/2),-(o.y+s.y*n.y/2))}setBlending(t,i=this.game.ctx){i.globalCompositeOperation=t?"lighter":"source-over"}copyToMainContext(t,i,n){const{ctx:o}=this.game;o.drawImage(t,i.x,i.y,n.x,n.y)}createPixelFontRenderer(t,i,n="white"){const{ctx:o}=this.game,s=t.width/i|0,r=document.createElement("canvas"),l=r.getContext("2d");return r.width=t.width,r.height=t.height,l.drawImage(t,0,0),l.fillStyle=n,l.globalCompositeOperation="source-in",l.fillRect(0,0,t.width,t.height),(c,f,d=1,a="left",u="top")=>{let{x:h,y:g}=f.clone();a==="center"&&(h-=c.length*i*d/2),a==="right"&&(h-=c.length*i*d),u==="middle"&&(g-=i*d/2),u==="bottom"&&(g-=i*d),c.split(`
`).reverse().forEach((v,w)=>{for(let A=0;A<v.length;A++){const x=v.charCodeAt(A);o.drawImage(r,x%s*i,Math.ceil((x+1)/s-1)*i,i,i,Math.floor(h+A*i*d),Math.floor(g-w*(i+1)),i*d,i*d)}})}}preloader(t){const{ctx:i,canvas:n,backgroundColor:o,secondaryColor:s}=this.game,{width:r,height:l}=n,c=k(l/4).floor(),f=k(r/2-c.x/2,l/2-c.y/2).floor(),d=c.x/8,a=i.createRadialGradient(r/2,l/2,c.y,r/2,l/2,l);i.save(),a.addColorStop(0,o.brightness(15).toString()),a.addColorStop(.7,o.toString()),i.fillStyle=a,i.fillRect(0,0,r,l),i.shadowColor="rgba(0, 0, 0, 0.3)",i.shadowBlur=6,i.shadowOffsetX=3,i.shadowOffsetY=3,this.fillRect(pi(f.x,f.y,c.x,c.y),Ce.LightBlue),this.fillRect(pi(f.x+d*.8,f.y+d*.8,c.x-d*1.6,c.y-d*1.6),Ce.DarkBlue),i.fillStyle=Ce.White.toString(),this.stroke(f.x+d*2,f.y+d*7,[k(0,d*.2),k(0,-d*5),k(d*4,-d*5),k(d*4,-d),k(d*1.25,-d),k(d*1.25,d*.2)],0),i.fill(),this.fillRect(pi(-d*1.5/2+f.x+c.x/2,-d*1.5/2+f.y+c.y/2,d*1.5,d*1.5),Ce.LightBlue),this.text(t<1?"Loading assets...":"Ready!",k(r/2,l-l*.05),Ce.White,"1em","center","bottom"),this.fillRect(pi(0,l-l*.015,r*t,l*.015),s),i.restore()}}function Ci(e,t,i,n){function o(s){return s instanceof i?s:new i(function(r){r(s)})}return new(i||(i=Promise))(function(s,r){function l(d){try{f(n.next(d))}catch(a){r(a)}}function c(d){try{f(n.throw(d))}catch(a){r(a)}}function f(d){d.done?s(d.value):o(d.value).then(l,c)}f((n=n.apply(e,[])).next())})}function tt(e,t,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(e):n?n.value:t.get(e)}var rt,kr,Pr,Yl,Ql,Fr,Jl,da;const dp=window.ontouchstart!==void 0;class pp{constructor(t){rt.add(this),this.game=t,this.mouseWheel=0,this.mouseScreenPos=k(),this.keyboardData={},this.pointerData={},kr.set(this,i=>{i.repeat||(this.keyboardData[i.code]=3)}),Pr.set(this,i=>{this.keyboardData[i.code]=4}),document.addEventListener("keydown",i=>tt(this,kr,"f").call(this,i),!1),document.addEventListener("keyup",i=>tt(this,Pr,"f").call(this,i),!1),document.addEventListener("mousedown",i=>tt(this,rt,"m",Yl).call(this,i)),document.addEventListener("mousemove",i=>tt(this,rt,"m",Fr).call(this,i)),document.addEventListener("mouseup",i=>tt(this,rt,"m",Ql).call(this,i)),document.addEventListener("wheel",i=>tt(this,rt,"m",Jl).call(this,i))}keyIsDown(t){return this.keyboardData[t]&1}keyWasPressed(t){return this.keyboardData[t]&2?1:0}keyWasReleased(t){return this.keyboardData[t]&4?1:0}mouseIsDown(t){return this.pointerData[t]&1}mouseWasPressed(t){return this.pointerData[t]&2?1:0}mouseWasReleased(t){return this.pointerData[t]&4?1:0}clearInput(){this.keyboardData={},this.pointerData={}}update(){dp||document.hasFocus()||this.clearInput()}postUpdate(){for(const t in this.keyboardData)this.keyboardData[t]&=1;for(const t in this.pointerData)this.pointerData[t]&=1;this.mouseWheel=0}}kr=new WeakMap,Pr=new WeakMap,rt=new WeakSet,Yl=function(t){this.pointerData[t.button]=3,tt(this,rt,"m",Fr).call(this,t),t.button&&t.preventDefault()},Ql=function(t){this.pointerData[t.button]=this.pointerData[t.button]&2|4},Fr=function(t){this.mouseScreenPos=tt(this,rt,"m",da).call(this,k(t.x,t.y))},Jl=function(t){t.ctrlKey||(this.mouseWheel=Math.sign(t.deltaY))},da=function(t){const{canvas:i}=this.game,n=i.getBoundingClientRect();return k(i.width,i.height).multiply(k(qr(t.x,n.left,n.right),qr(t.y,n.top,n.bottom)))};class gp{constructor(t,i){this.game=t,this.time=i===void 0?void 0:t.time+i,this.ts=i}set(t=0){this.time=this.game.time+t,this.ts=t}unset(){this.time=void 0}isSet(){return this.time!==void 0}isActive(){return this.time!==void 0&&this.game.time<=this.time}isDone(){return this.time!==void 0&&this.game.time>this.time}getTime(){return this.time!==void 0?this.game.time-this.time:0}getPercent(){return this.time!==void 0&&this.ts!==void 0?qr(this.time-this.game.time,this.ts,0):0}}class mp{constructor(t){this.scene=t,this.pos=k(),this.offset=k(),this.scale=1,this.speed=k(1),this.scrolling=!0,this.isShaking=!1,this.bounded=!0,this.shakeIntensity=k(),this.shakeDuration=0,this.shakeElapsed=0}setPos(t){this.followEntity=void 0,this.pos=t}setScale(t){this.scale=t}setSpeed(t){this.speed=typeof t=="number"?k(t):t}setScrolling(t){this.scrolling=t}follow(t){this.followEntity=t}unfollow(){this.followEntity=void 0}toggleBounds(t){this.bounded=t}shake(t,i){this.isShaking=!0,this.shakeDuration=t,this.shakeIntensity=k(i.x,i.y),this.offset=k(0),this.shakeElapsed=0}update(){const{game:t,size:i,tileSize:n}=this.scene,o=k(t.width,t.height);if(this.followEntity){const s=this.followEntity.getTranslatedBoundingRect();if(this.scrolling){const r=s.pos.clone().invert().add(o.divide(k(2))).subtract(s.size.divide(k(2)));this.pos.x=Math.ceil(We(this.speed.x,this.pos.x,r.x)),this.pos.y=Math.ceil(We(this.speed.y,this.pos.y,r.y))}else{const r=s.pos.divide(o).floor();this.pos=k(-r.x*o.x,-r.y*o.y)}}if(this.bounded){const s=i.multiply(n).scale(this.scale).subtract(o);this.pos.x<-s.x+this.scale&&(this.pos.x=-s.x+this.scale),this.pos.y<-s.y+this.scale&&(this.pos.y=-s.y+this.scale),this.pos.x>0&&(this.pos.x=0),this.pos.y>0&&(this.pos.y=0)}this.isShaking&&(this.shakeElapsed+=t.delta,this.shakeElapsed<this.shakeDuration?this.offset=k(Math.random()*this.shakeIntensity.x*o.x*2-this.shakeIntensity.x*o.x,Math.random()*this.shakeIntensity.y*o.y*2-this.shakeIntensity.y*o.y).scale(this.scale):(this.isShaking=!1,this.offset=k()),this.pos=this.pos.add(this.offset))}}class _p{constructor(t){this.entity=t,this.then=lt(),this.frameStart=lt(),this.animFrame=0}animate(){const{animation:t}=this.entity;if(t){this.animFrame=this.animFrame||0,this.frameStart=lt(),this.animation!==t&&(this.animation=t,this.animFrame=0);const i=t.strip?t.strip.duration:t.frames&&t.frames[this.animFrame][2]||0,n=t.strip?t.strip.frames:t.frames&&t.frames.length||0;this.frameStart-this.then>i&&(this.animFrame<=n&&t.loop?this.animFrame=Wl(this.animFrame+1,0,n):this.animFrame<n-1&&!t.loop&&(this.animFrame+=1),this.then=lt())}}draw(){const{animation:t,animFrame:i}=this,{angle:n,color:o,scene:s,shape:r,flipH:l,flipV:c}=this.entity,{game:f,camera:d}=s,a=k(d.scale),u=this.entity.image&&s.game.getImage(this.entity.image),h=this.entity.getRelativeBoundingRect();if(u)if(t){const{frames:g,strip:v,width:w,height:A}=t,x=g&&g[i]||[0,0],_=v?k(v.x+i*w,v.y):k(x[0],x[1]),b=t?.offset?k(...t.offset).scale(d.scale):k(0,0),T=new qt(h.pos.add(b),k(w,A));f.draw.draw2d(u,T,a,n,l,c,_)}else f.draw.draw2d(u,h,a,n,l,c);else o&&(r===ni.Ellipse?f.draw.fillEllipse(h,o,n):f.draw.fillRect(h,o,n))}}class Le{constructor(t,i){if(this.scene=t,this.obj=i,this.id=Date.now(),this.bounded=!1,this.flipH=!1,this.flipV=!1,this.solid=!0,this.visible=!0,this.active=!0,this.dead=!1,this.collideTiles=!0,this.collideObjects=!0,this.onGround=!1,this.shape=ni.Rectangle,this.pos=k(),this.lastPos=k(),this.size=k(),this.force=k(),this.mass=1,this.damping=1,this.elasticity=0,this.friction=.8,this.gravityScale=1,this.angleVelocity=0,this.angleDamping=1,this.angle=0,this.maxSpeed=1,this.spawnTime=0,this.renderOrder=0,this.properties={},this.sprite=new _p(this),i)if(this.id=i.id,this.gid=i.gid,this.type=i.type,this.name=i.name,this.layerId=i.layerId,this.properties=i.properties,i.x&&i.y){const{tileSize:n}=t,o=pi(i.x,i.y,i.width,i.height);this.size=k(o.size.x/n.x,o.size.y/n.y),this.pos=k(o.pos.x/n.x+this.size.x/2,o.pos.y/n.y+this.size.y/2-(this.gid?this.size.y:0))}else this.size=i.size||this.size,this.pos=i.pos||this.pos;this.spawnTime=t.game.time,this.angle=i?.rotation?up(i.rotation):this.angle,this.visible=i?.visible!==void 0?i.visible:!0,this.force=i?.force||this.force,this.flipH=i?.flipH||this.flipH,this.flipV=i?.flipV||this.flipV,this.animation=i?.animation||this.animation,this.family=i?.family||this.family,this.shape=i?.shape||this.shape}destroy(){this.dead=!0}getAliveTime(){return this.scene.game.time-this.spawnTime}applyForce(t){this.mass&&(this.force=this.force.add(t.scale(1/this.mass)))}collideWithTile(t,i){return t>0}collideWithTileRaycast(t,i){return t>0}collideWithObject(t){return!0}onScreen(){return this.scene.getCameraVisibleArea().overlaps(this.pos,this.size)}draw(){if(this.visible&&this.onScreen()){if(this.gid){const t=this.scene.getTileObject(this.gid),i=this.size.multiply(this.scene.tileSize).divide(t.size).scale(this.scene.camera.scale);t.draw(this.scene.getScreenPos(this.pos,this.size),this.flipH,this.flipV,this.angle,i)}else this.sprite.draw();this.scene.game.debug&&this.displayDebug()}}setAnimation(t,i=!1,n=!1){this.flipH=i,this.flipV=n,this.animation=t}getAnimationFrame(){var t;return((t=this.sprite)===null||t===void 0?void 0:t.animFrame)||0}setAnimationFrame(t){this.sprite.animFrame=t}getTranslatedBoundingRect(){return new qt(this.scene.getScreenPos(this.pos,this.size),this.size.clone().multiply(this.scene.tileSize).scale(this.scene.camera.scale))}getRelativeBoundingRect(){return this.getTranslatedBoundingRect().move(this.scene.camera.pos)}isOverlapping(t,i=k()){return Math.abs(this.pos.x-t.x)*2<this.size.x+i.x&&Math.abs(this.pos.y-t.y)*2<this.size.y+i.y}update(){const{scene:t}=this;if(this.sprite.animate(),this.ttl&&Math.min(this.getAliveTime()/this.ttl,1)===1&&this.destroy(),this.force.x=Mt(this.force.x,-this.maxSpeed,this.maxSpeed),this.force.y=Mt(this.force.y,-this.maxSpeed,this.maxSpeed),!this.mass)return;this.lastPos=this.pos.clone(),this.force.y+=t.gravity*this.gravityScale,this.pos.x+=this.force.x*=this.damping,this.pos.y+=this.force.y*=this.damping,this.angle+=this.angleVelocity*=this.angleDamping,this.bounded&&(this.pos.x<0&&(this.pos.x=0),this.pos.y<0&&(this.pos.y=0),this.pos.x>t.size.x&&(this.pos.x=t.size.x),this.pos.y>t.size.y&&(this.pos.y=t.size.y));const i=this.force.y>=0;if(this.onGround){const n=this.onGround instanceof Le?this.onGround.force.x:0;this.force.x=n+(this.force.x-n)*this.friction,this.onGround=!1}if(this.collideTiles&&t.testTileCollision(this.pos,this.size,this)&&!t.testTileCollision(this.lastPos,this.size,this)){const n=t.testTileCollision(k(this.lastPos.x,this.pos.y),this.size,this),o=t.testTileCollision(k(this.pos.x,this.lastPos.y),this.size,this);if(n||!o){this.onGround=i,this.force.y*=-this.elasticity;const s=(this.lastPos.y-this.size.y/2|0)-(this.lastPos.y-this.size.y/2);s<0&&s>this.damping*this.force.y+t.gravity*this.gravityScale&&(this.force.y=this.damping?(s-t.gravity*this.gravityScale)/this.damping:0),this.pos.y=this.lastPos.y}o&&(this.pos.x=this.lastPos.x,this.force.x*=-this.elasticity)}if(this.collideObjects){const o=t.objects.filter(s=>s.visible&&s.collideObjects);for(const s of o){if(!this.solid&&!s.solid||s.dead||s==this||!s.isOverlapping(this.pos,this.size))continue;const r=this.collideWithObject(s),l=s.collideWithObject(this);if(!r||!l)continue;if(s.isOverlapping(this.lastPos,this.size)){const h=this.lastPos.subtract(s.pos),g=h.length(),v=.001,w=g<.01?yn(v):h.scale(v/g);this.force=this.force.add(w),s.mass&&(s.force=s.force.subtract(w));continue}const c=this.size.add(s.size),f=(this.lastPos.y-s.pos.y)*2>c.y+t.gravity,d=Math.abs(this.lastPos.y-s.pos.y)*2<c.y,a=Math.abs(this.lastPos.x-s.pos.x)*2<c.x,u=Math.max(this.elasticity,s.elasticity);if(f||a||!d){if(this.pos.y=s.pos.y+(c.y/2+.001)*Math.sign(this.lastPos.y-s.pos.y),s.onGround&&i||!s.mass)i&&(this.onGround=s),this.force.y*=-u;else if(s.mass){const h=(this.mass*this.force.y+s.mass*s.force.y)/(this.mass+s.mass),g=this.force.y*(this.mass-s.mass)/(this.mass+s.mass)+s.force.y*2*s.mass/(this.mass+s.mass),v=s.force.y*(s.mass-this.mass)/(this.mass+s.mass)+this.force.y*2*this.mass/(this.mass+s.mass);this.force.y=We(u,h,g),s.force.y=We(u,h,v)}}if(!f&&d)if(this.pos.x=s.pos.x+(c.x/2+.001)*Math.sign(this.lastPos.x-s.pos.x),s.mass){const h=(this.mass*this.force.x+s.mass*s.force.x)/(this.mass+s.mass),g=this.force.x*(this.mass-s.mass)/(this.mass+s.mass)+s.force.x*2*s.mass/(this.mass+s.mass),v=s.force.x*(s.mass-this.mass)/(this.mass+s.mass)+this.force.x*2*this.mass/(this.mass+s.mass);this.force.x=We(u,h,g),s.force.x=We(u,h,v)}else this.force.x*=-u}}}displayDebug(){const t=this.getRelativeBoundingRect(),{draw:i,primaryColor:n}=this.scene.game,{angle:o,id:s,type:r,visible:l,force:c,pos:f}=this,{Cyan:d,LightGreen:a,Red:u}=Ce,{pos:{x:h,y:g},size:v}=t,w=v.x/2,A=h+w,x="1em";i.outline(t,l?a:d,1),i.text(`${r||s||""}[${o.toFixed(2)}]`,k(A,g-14),n,x,"center","top",!0),i.text(`x:${f.x.toFixed(1)}`,k(A-w-2,g),n,x,"right","top",!0),i.text(`y:${f.y.toFixed(1)}`,k(A-w-2,g+14),n,x,"right","top",!0),Math.abs(c.x)>.012&&i.text(`x:${c.x.toFixed(3)}`,k(A+w+2,g),u,x,"left","top",!0),Math.abs(c.y)>.012&&i.text(`y:${c.y.toFixed(3)}`,k(A+w+2,g+14),u,x,"left","top",!0)}}class yp extends Le{constructor(t,i){super(t,i),this.scene=t,this.type="Platfuse.Particle",this.shape=ni.Rectangle,this.colorStart=new Y,this.colorEnd=new Y,this.ttl=0,this.sizeStart=.1,this.sizeDelta=0,this.fadeRate=.1,this.stretchScale=0,this.pos=i?.pos||k()}draw(){const{time:t}=this.scene.game,i=Math.min((t-this.spawnTime)/this.ttl,1),n=this.sizeStart+i*this.sizeDelta,o=this.fadeRate/2;if(this.size=k(n),this.color=new Y(this.colorStart.r+i*this.colorEnd.r,this.colorStart.g+i*this.colorEnd.g,this.colorStart.b+i*this.colorEnd.b,(this.colorStart.a+i*this.colorEnd.a)*(i<o?i/o:i>1-o?(1-i)/o:1)),this.stretchScale){const s=this.force.length();if(s){const r=this.force.scale(1/s),l=s*this.stretchScale;this.size.y=Math.max(this.size.x,l),this.angle=r.angle()}}i===1&&this.destroy(),super.draw()}displayDebug(){}}class Kl extends Le{constructor(t,i){super(t,i),this.scene=t,this.obj=i,this.type="Platfuse.Emitter",this.shape=ni.Rectangle,this.angle=0,this.emitTime=0,this.emitRate=100,this.emitConeAngle=Math.PI,this.colorStart=new Y,this.colorEnd=new Y,this.ttl=.5,this.sizeStart=.1,this.sizeEnd=1,this.speed=.1,this.damping=1,this.angleDamping=1,this.gravityScale=0,this.particleConeAngle=Math.PI,this.fadeRate=.1,this.randomness=.2,this.collideTiles=!1,this.collideObjects=!1,this.renderOrder=0,this.stretchScale=0,this.timeBuffer=0,this.pos=i?.pos||k(),this.angle=i?.angle||0,this.emitSize=i?.emitSize||0,this.emitTime=i?.emitTime||0,this.emitRate=i?.emitRate||this.emitRate,this.elasticity=i?.elasticity||this.elasticity,this.emitConeAngle=i?.emitConeAngle||this.emitConeAngle,this.colorStart=i?.colorStart||this.colorStart,this.colorEnd=i?.colorEnd||this.colorEnd,this.ttl=i?.ttl||this.ttl,this.sizeStart=i?.sizeStart||this.sizeStart,this.sizeEnd=i?.sizeEnd||this.sizeEnd,this.speed=i?.speed||this.speed,this.damping=i?.damping||this.damping,this.angleDamping=i?.angleDamping||this.angleDamping,this.gravityScale=i?.gravityScale||this.gravityScale,this.particleConeAngle=i?.particleConeAngle||this.particleConeAngle,this.fadeRate=i?.fadeRate||this.fadeRate,this.randomness=i?.randomness||this.randomness,this.collideTiles=!!i?.collideTiles,this.collideObjects=!!i?.collideObjects,this.stretchScale=i?.stretchScale||this.stretchScale,this.elasticity=i?.elasticity||this.elasticity,this.shape=i?.shape||this.shape}update(){const{delta:t}=this.scene.game;if(!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate){const i=1/this.emitRate;for(this.timeBuffer+=t;this.timeBuffer>0;this.timeBuffer-=i)this.emitParticle()}}else this.destroy()}randomize(t){return t+t*nt(this.randomness,-this.randomness)}emitParticle(){const t=this.pos.add(this.emitSize instanceof le?k(nt(-.5,.5),nt(-.5,.5)).multiply(this.emitSize).rotate(this.angle):fp(this.emitSize/2)),i=this.angle+nt(this.particleConeAngle,-this.particleConeAngle),n=new yp(this.scene,Object.assign(Object.assign({},this.obj),{angle:i,pos:t})),o=this.randomize(this.ttl),s=this.randomize(this.sizeStart),r=this.randomize(this.sizeEnd),l=this.randomize(this.speed),c=nt(this.emitConeAngle,-this.emitConeAngle),f=this.angle+c;n.shape=this.shape,n.colorStart=this.colorStart,n.colorEnd=this.colorEnd.subtract(this.colorStart),n.renderOrder=this.renderOrder,n.damping=this.damping,n.angleDamping=this.angleDamping,n.elasticity=this.elasticity,n.friction=this.friction,n.gravityScale=this.gravityScale,n.collideTiles=this.collideTiles,n.collideObjects=this.collideObjects,n.force=k().setAngle(f,l),n.ttl=o,n.sizeStart=s,n.sizeDelta=r-s,n.fadeRate=this.fadeRate,n.stretchScale=this.stretchScale,n.layerId=this.layerId,this.scene.objects.push(n)}draw(){}}function vp(e,t){return Ci(this,void 0,void 0,function*(){const i=Object.keys(e).length;let n=0;const o=s=>{const r=e[s];return new Promise(l=>{if(/\.(gif|jpe?g|png|webp|bmp)$/i.test(r)||/(data:image\/[^;]+;base64[^"]+)$/i.test(r)){const c=new Image;c.src=r,c.onload=()=>(t(++n/i),l(c))}else if(/\.(webm|mp3|wav)$/i.test(r)||/(data:audio\/[^;]+;base64[^"]+)$/i.test(r)){const c=new Br.Howl({src:r});c.once("load",()=>(t(++n/i),l(c)))}else return Promise.resolve()})};return Promise.resolve(Object.assign({},...yield Promise.all(Object.keys(e).map(s=>Ci(this,void 0,void 0,function*(){return{[s]:yield o(s)}})))))})}class At{constructor(t,i){this.scene=t,this.id=Date.now(),this.type=Jt.Custom,this.size=k(),this.renderOrder=0,this.visible=!0,this.properties={},i?(this.id=i.id,this.name=i.name,this.type=i.type,this.size=k(i.width,i.height),this.visible=i.visible===void 0?!0:!!i.visible,this.properties=i?.properties||{},i.type===Jt.Layer&&(this.data=i?.data,this.renderTilesToLayerCanvas())):this.type=Jt.Custom}renderTilesToLayerCanvas(){this.data&&(this.layerCanvas=document.createElement("canvas"),this.layerCanvas.width=this.size.x*this.scene.tileSize.x,this.layerCanvas.height=this.size.y*this.scene.tileSize.y,this.layerContext=this.layerCanvas.getContext("2d"),this.data.forEach((t,i)=>t&&this.drawTileAt(t,i)))}update(){}postUpdate(){}drawTileAt(t,i){if(t){const n=this.scene.getTileObject(t),o=k(i%this.size.x,Math.floor(i/this.size.x)).multiply(this.scene.tileSize),{H:s,V:r}=on(t)||{H:!1,V:!1},{image:l,tilewidth:c,tileheight:f}=n.tileset,{game:d}=this.scene;n.animated||d.draw.draw2d(d.getImage(l.source),new qt(o,k(c,f)),k(1),0,s,r,n.getSpriteClip(),this.layerContext)}}getTile(t){return t.inRange(this.size)&&this.data&&this.data[t.x+this.size.x*t.y]||null}setTile(t,i){if(this.data&&t.inRange(this.size)){const n=t.x+this.size.x*t.y;this.data[n]=i,this.drawTileAt(i,n)}}clearTile(t){var i;this.data&&t.inRange(this.size)&&(this.data[t.x+this.size.x*t.y]=null,(i=this.layerContext)===null||i===void 0||i.clearRect(t.x*this.scene.tileSize.x,t.y*this.scene.tileSize.y,this.scene.tileSize.x,this.scene.tileSize.y))}toggleVisibility(t){this.visible=t}forEachVisibleTile(t){const{pos:i,size:n}=this.scene.getCameraVisibleGrid();for(let o=i.y;o<i.y+n.y;o++)for(let s=i.x;s<i.x+n.x;s++){const r=this.getTile(k(s,o));if(r){const l=this.scene.getTileObject(r),c=this.scene.getScreenPos(k(s,o)),f=on(r),{H:d,V:a}=f||{H:!1,V:!1};t(l,c,d,a)}}}forEachVisibleObject(t){const i=this.scene.objects.filter(({layerId:n})=>n===this.id);i.sort((n,o)=>n.renderOrder-o.renderOrder);for(const n of i)n.visible&&t(n)}draw(){const{camera:t}=this.scene,{draw:i}=this.scene.game;if(this.visible)switch(this.type){case Jt.Layer:i.copyToMainContext(this.layerCanvas,t.pos.subtract(k(t.scale)),this.size.multiply(this.scene.tileSize).scale(t.scale)),this.forEachVisibleTile((n,o,s,r)=>{n.animated&&n.draw(o,s,r)});break;default:this.forEachVisibleObject(n=>n.draw());break}}}class wp{constructor(t,i,n){this.scene=t,this.id=i,this.tileset=n,this.size=k(),this.animated=!1,this.animFrame=0,this.then=lt(),this.frameStart=lt(),this.properties=this.getTileProperties(i,this.tileset),this.type=this.properties&&this.properties.type||null,this.size=k(this.tileset.tilewidth,this.tileset.tileheight),this.animated=this.properties&&this.properties.animation}getTileProperties(t,i){const{firstgid:n,tiles:o}=i;return Gl(o)&&o.filter(s=>s.id===t-n)[0]||{}}getNextGid(){if(this.animated){this.frameStart=lt();const{frames:t}=this.properties.animation;return this.frameStart-this.then>t[this.animFrame].duration&&(this.animFrame<=t.length&&(this.animFrame=Wl(this.animFrame+1,0,t.length)),this.then=lt()),t[this.animFrame].tileid+this.tileset.firstgid}else return this.id}getSpriteClip(){const{columns:t,firstgid:i,tilewidth:n,tileheight:o}=this.tileset,s=this.getNextGid();return k((s-i)%t*n,(Math.ceil((s-i+1)/t)-1)*o)}draw(t,i=!1,n=!1,o=0,s=k(this.scene.camera.scale)){const{image:r,tilewidth:l,tileheight:c}=this.tileset,{game:f,camera:d}=this.scene;f.draw.draw2d(f.getImage(r.source),new qt(t.add(d.pos),k(l,c)),s,o,i,n,this.getSpriteClip())}}class As{constructor(t,i){this.game=t,this.name=i,this.camera=new mp(this),this.size=this.game.getResolution(),this.tileSize=k(1),this.tiles={},this.tileCollisionData=[],this.objects=[],this.layers=[],this.gravity=0,this.nextRenderOrder=0}destroy(){this.objects=[],this.layers=[],this.tiles={},this.tileCollisionData=[],this.nextRenderOrder=0,this.camera.pos=k()}preInit(){return Ci(this,void 0,void 0,function*(){this.tmxMap&&typeof this.tmxMap=="string"&&(this.tmxMap=yield rp(this.tmxMap))})}createFromTmxMap(){if(typeof this.tmxMap=="object"){const{layers:t,tilesets:i,tilewidth:n,tileheight:o,width:s,height:r}=this.tmxMap;this.setDimensions(k(s,r),k(n,o)),this.createTilesets(i),this.createLayers(t)}}init(){}update(){}updateCamera(){this.camera.update()}updateLayers(){for(const t of this.layers)t instanceof At&&t.update()}updateObjects(){for(const t of this.objects)t.active&&(t.update(),t.dead&&this.removeObject(t))}postUpdate(){}postUpdateLayers(){for(const t of this.layers)t instanceof At&&t.postUpdate()}draw(){const{ctx:t,width:i,height:n}=this.game,o=this.layers.filter(r=>r instanceof At&&r.visible),s=this.objects.filter(r=>r.visible&&!r.layerId);o.sort(fa),s.sort(fa),t.imageSmoothingEnabled=!1,t.clearRect(0,0,i,n);for(const r of o)r.draw();for(const r of s)r.draw();this.game.debug&&this.displayDebug()}setDimensions(t,i){this.size=t,this.tileSize=i}setScale(t){this.camera.setScale(t)}setTileCollisionLayer(t,i=[]){var n;const o=this.layers[t];o&&(this.tileCollisionData=((n=o?.data)===null||n===void 0?void 0:n.map(s=>s&&!i.includes(s)?s:0))||[])}testTileCollision(t,i,n){const o=Math.max(t.x-i.x/2|0,0),s=Math.max(t.y-i.y/2|0,0),r=Math.min(t.x+i.x/2,this.size.x),l=Math.min(t.y+i.y/2,this.size.y);for(let c=s;c<l;++c)for(let f=o;f<r;++f){const d=this.tileCollisionData[f+this.size.x*c];if(d&&(!n||n.collideWithTile(d,k(f,c))))return!0}return!1}raycastTileCollision(t,i,n){const o=t.floor(),s=i.subtract(t),r=s.length(),l=s.normalize(),c=k(Math.abs(1/l.x),Math.abs(1/l.y));let f=c.x*(s.x<0?t.x-o.x:o.x-t.x+1),d=c.y*(s.y<0?t.y-o.y:o.y-t.y+1);for(;;){const a=this.getTileCollisionData(o);if(a&&(!n||n.collideWithTileRaycast(a,o)))return o.add(k(.5));if(f>r&&d>r)break;f>d?(o.y+=Math.sign(s.y),d+=c.y):(o.x+=Math.sign(s.x),f+=c.x)}}createLayers(t){this.layers=[],t.forEach(i=>this.addLayer(i))}addLayer(t,i){const n=typeof t=="function"?new t(this):new At(this,t);return typeof t!="function"&&t.objects&&t.objects.forEach(o=>this.addObjectFromLayer(o.type,Object.assign(Object.assign({},o),{layerId:t.id}))),n.renderOrder=i||this.nextRenderOrder++,this.layers.push(n),n}addObjectFromLayer(t,i){const n=this.game.objectClasses[t],o=n?new n(this,i):new Le(this,i);return this.objects.push(o),o}addObject(t,i){if(i){const n=this.getLayerById(i);n instanceof At?t.layerId=n.id:console.warn(`Layer with ID:${i} not found or is not an object layer!`)}return this.objects.push(t),t}removeObject(t){this.objects.splice(this.objects.indexOf(t),1)}addTileset(t,i){const n=Object.assign(Object.assign({},t),{image:Object.assign(Object.assign({},t.image),{source:i})});for(let o=0;o<n.tilecount;o++)this.tiles[o+n.firstgid]=new wp(this,o+n.firstgid,n);return n}createTilesets(t){t.map(i=>{const n=lp(i.image.source);Object.keys(this.game.images).includes(n)&&this.addTileset(i,n)})}setTileCollisionData(t,i=0){t.inRange(this.size)&&(this.tileCollisionData[(t.y|0)*this.size.x+t.x|0]=i)}getTileCollisionData(t){return t.inRange(this.size)?this.tileCollisionData[(t.y|0)*this.size.x+t.x|0]:0}getCameraVisibleGrid(){return new qt(this.camera.pos.divide(this.tileSize).invert().divide(this.camera.scale).floor(),this.game.getResolution().divide(this.tileSize).divide(this.camera.scale).add(k(1)))}getCameraVisibleArea(){const t=this.game.getResolution();return new qt(this.camera.pos.invert().add(t.divide(2)).divide(this.camera.scale),t.divide(this.camera.scale)).divide(this.tileSize)}getGridPos(t){return k(Math.ceil(t.x/this.tileSize.x),Math.ceil(t.y/this.tileSize.y))}getScreenPos(t,i){return t.clone().multiply(this.tileSize).subtract(i?i.multiply(this.tileSize).divide(2):k()).scale(this.camera.scale).subtract(k(this.camera.scale))}getPointerPos(){const{pos:t,scale:i}=this.camera,{mouseScreenPos:n}=this.game.input;return n.clone().subtract(t).divide(i)}getPointerRelativeGridPos(){return this.getPointerPos().divide(this.tileSize)}getLayerById(t){return this.layers.find(i=>i.id===t)||{}}getLayerByIndex(t){return this.layers[t]||{}}getObjectById(t){return this.objects.find(i=>i.id===t)}getObjectByType(t){return this.objects.find(i=>i.type===t)}getObjectsByType(t){return this.objects.filter(i=>i.type===t)}getObjectLayers(){return this.layers.filter(t=>Gl(t.objects))}getTile(t,i){return this.getTileObject(this.getLayerById(i).getTile(t)||0)}getTileObject(t){const i=t&=~(yi.Horizontally|yi.Vertically|yi.Diagonally);return this.tiles[i]}removeLayer(t){this.layers.splice(t,1)}displayDebug(){const{avgFPS:t,canvas:i,draw:n,primaryColor:o}=this.game,{pos:s,scale:r}=this.camera,{width:l,height:c}=i,f=this.getCameraVisibleGrid(),d=this.getPointerPos(),a=(u,h="left")=>{const g=h==="left"&&4||h==="right"&&l-4||l/2;n.text(u,k(g,c-4),o,"1em",h,"bottom",!0)};a(`[${f.pos.x},${f.pos.y}][${s.x.toFixed(2)},${s.y.toFixed(2)}][x${r.toFixed(1)}]`),a(`[${d.x.toFixed(2)},${d.y.toFixed(2)}]`,"center"),a(`[${this.objects.length}][${t.toFixed(1)} FPS]`,"right")}}class Ap{constructor(t,i){this.config=t,this.preload=i,this.draw=new cp(this),this.input=new pp(this),this.pixelPerfect=!1,this.backgroundColor=Ce.DarkBlue,this.primaryColor=Ce.White,this.secondaryColor=Ce.LightBlue,this.images={},this.sounds={},this.objectClasses={},this.sceneClasses={},this.currentScene=null,this.scenes={},this.settings={},this.width=window.innerWidth,this.height=window.innerHeight,this.debug=!1,this.paused=!1,this.frameRate=60,this.delta=1/60,this.avgFPS=0,this.frame=0,this.time=0,this.timeReal=0,this.frameTimeLast=0,this.frameTimeBuffer=0,this.preloadPercent=0,this.audioVolume=1,this.canvas=document.createElement("canvas"),this.objectClasses=t?.entities||{},this.sceneClasses=t?.scenes||{},this.debug=!!t.debug,this.pixelPerfect=!!t?.pixelPerfect,this.backgroundColor=t?.backgroundColor?new Y(t.backgroundColor):this.backgroundColor,this.primaryColor=t?.primaryColor?new Y(t.primaryColor):this.primaryColor,this.secondaryColor=t?.secondaryColor?new Y(t.secondaryColor):this.secondaryColor,this.canvas.setAttribute("style",`${op} ${this.pixelPerfect?"image-rendering: pixelated;":""}`),this.canvas.style.backgroundColor=this.backgroundColor.toString(),this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.onResize.bind(this)),this.onResize(),document.body.style.cssText=`${sp} background: ${this.backgroundColor.toString()};`,document.body.appendChild(this.canvas),t.global&&(window.Platfuse=this)}start(t){return Ci(this,void 0,void 0,function*(){this.update();const i=yield vp(this.preload,n=>this.preloadPercent=n);Object.keys(i).forEach(n=>{i[n]instanceof HTMLImageElement?this.images[n]=i[n]:i[n]instanceof Br.Howl&&(this.sounds[n]=i[n])}),yield Promise.all(Object.keys(this.sceneClasses).map(n=>Ci(this,void 0,void 0,function*(){const o=this.sceneClasses[n],s=new o(this,n);yield s.preInit(),this.scenes[n]=s}))),yield Zl(1e3),t&&this.playScene(t)})}playScene(t,i=!1){if(this.currentScene&&this.currentScene.name===t&&!i)return;if(!this.scenes[t])throw new Error(`Scene '${t}' not found!`);this.currentScene&&this.currentScene.destroy();const n=this.scenes[t];n.tmxMap&&n.createFromTmxMap(),n.init(),this.currentScene=n}restartScene(){this.currentScene&&this.playScene(this.currentScene.name,!0)}onResize(){var t;if(this.width=window.innerWidth,this.height=window.innerHeight,((t=this.config)===null||t===void 0?void 0:t.fixedSize)instanceof le){const{fixedSize:i}=this.config,n=innerWidth/innerHeight,o=i.x/i.y;this.canvas.width=i.x,this.canvas.height=i.y,this.canvas.style.width=n<o?"100%":"",this.canvas.style.height=n<o?"":"100%"}else this.canvas.width=this.width,this.canvas.height=this.height;this.width=this.canvas.width,this.height=this.canvas.height}update(t=0){const i=this.currentScene,n=t-this.frameTimeLast;if(this.frameTimeLast=t,this.avgFPS=We(.05,this.avgFPS,1e3/(n||1)),this.timeReal+=n/1e3,this.frameTimeBuffer+=(this.paused?0:1)*n,i instanceof As){if(this.paused)i.postUpdate(),this.input.postUpdate();else{let o=0;for(this.frameTimeBuffer<0&&this.frameTimeBuffer>-9&&(o=this.frameTimeBuffer,this.frameTimeBuffer=0);this.frameTimeBuffer>=0;this.frameTimeBuffer-=1e3/this.frameRate)this.time=this.frame++/this.frameRate,this.delta=1/this.avgFPS,this.input.update(),i.updateLayers(),i.updateObjects(),i.update(),i.updateCamera(),i.postUpdate(),i.postUpdateLayers(),this.input.postUpdate();this.frameTimeBuffer+=o}i.draw()}else this.draw.preloader(this.preloadPercent);this.animationFrame=requestAnimationFrame(o=>this.update(o))}togglePause(t=!this.paused){this.paused=t}getResolution(){return new le(this.width,this.height)}setSettings(t){this.settings=t}setSetting(t,i){this.settings=Object.assign(Object.assign({},this.settings),{[t]:i})}getSetting(t){return this.settings[t]}timer(t){return new gp(this,t)}getImage(t){if(this.images[t])return this.images[t];throw new Error(`'${t}' is not a valid image!`)}playSound(t){this.sounds[t]&&(this.sounds[t].volume(this.audioVolume),this.sounds[t].play())}setAudioVolume(t){this.audioVolume=t}}var vn=(e=>(e.Up="up",e.Right="right",e.Down="down",e.Left="left",e))(vn||{}),ie=(e=>(e.Bat="bat",e.Box="box",e.Bullet="bullet",e.Dust="dust",e.Item="item",e.Player="player",e.Spikes="spikes",e.Zombie="zombie",e))(ie||{}),ei=(e=>(e[e.Ammo=187]="Ammo",e[e.Coin=182]="Coin",e[e.Health=177]="Health",e))(ei||{});const bp=[10,11,74],xp={angle:Math.PI,emitSize:.2,emitTime:.2,emitRate:50,colorStart:new Y(255,0,0,1),colorEnd:new Y(255,0,0,.1),ttl:1,sizeStart:.05,sizeEnd:.1,speed:.1,angleSpeed:.1,damping:1,angleDamping:.95,gravityScale:.5,fadeRate:.1,randomness:.5,collideTiles:!0,collideObjects:!1,renderOrder:1,elasticity:0,stretchScale:.3},Ep={angle:Math.PI,emitSize:.2,emitTime:.2,emitRate:32,colorStart:new Y("#685f58"),colorEnd:new Y("#43403b"),ttl:3,sizeStart:.08,sizeEnd:.1,speed:.2,angleSpeed:.2,damping:1,angleDamping:.95,gravityScale:.3,fadeRate:.1,randomness:.5,collideTiles:!0,collideObjects:!1,renderOrder:1,elasticity:0,stretchScale:.3},Tp=""+new URL("assets/shoot-CwBfvHEA.mp3",import.meta.url).href,Ip=""+new URL("assets/powerup-BchoSk5p.mp3",import.meta.url).href,Sp="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI2LjEwMAAAAAAAAAAAAAAA//uQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAHAAANDgA/Pz8/Pz8/Pz8/Pz8/P19fX19fX19fX19fX19ff39/f39/f39/f39/f3+fn5+fn5+fn5+fn5+fn5+/v7+/v7+/v7+/v7+/v9/f39/f39/f39/f39/f//////////////////8AAAAATGF2YzU4LjQ2AAAAAAAAAAAAAAAAJAN/AAAAAAAADQ4Bx9HoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQZAAI8pIbyZmJGbAAAA0gAAABDfjlNLT0AAAAADSCgAAEAAJLleWqwkHROZ2THQBk5GswoSYT9w4uvX99EL7pXc9Cc+9EHxOD7y7xOQeXLg/BDUcLg/7QQBM/6wsc2A+H/LreTE5TrPkIfnznreGKgwDjpDIAi3CShpjHThHCbocdIVhNQT56Lpdn8sOBYkMogTBIJRCmxd3Pe5upYgd/fMI+kh3Iu5Z8slF2Lu4fvcLynL8LaccOYsV88oiJURX/ln3A+D4Pg/YLh8PPeoEAfehgJhfjFODEoGIgB8nJwQtbEGhEQgByCCCVBkHQVjQNhNXMNGLPByEhCE0cUKNgbopokXLBYYglLkgIOvgtCMg0gnmPIeqDBY0BNJeRq6jiCFAInoWsjUHOi+4kde8pkbtpgNo4NBD0ML0dYmOJANaRWYNdCYccNecpfCM0U1VvCzErGkNpDDxr/fx+Iagdw7NaV0s5RSlg7/wVCLeUgzgdy5/uHNc/PlNV5cr36Stdjc3Wxp7/bF23Scwq2cOZZ5Zd/LWGct1hvuN7sSil//uSZF2AByFlUv5rAAIAAA0gwAAAHGWVW7mMAAAAADSDAAAAPK8L2f/rl2m7VlVNv995vnPdyPUuqSxy3T2+17dfVJvLefe2/p5yphSAZK7m0VE420gSKi2s0W8kbBcy3sHhEFvOkuAdGeFLBQGymYOVBcBfpZTWYyiwu5/3WbWJW7CPrX3kbC/UEdgqbilgDHVISAV7cQHO0ymxYis5/YzKooxtUdWZlsC0tq9NSCpSVXfbFHX4uQJN1q0q3+Euiffu3LiwlOyeIQVVh+ikUslFPKrkqp6LDGWX+4dtvstR94bdR337hE93sqtbw138uZ15dL7Vuzv88W2dmBoIgmRyztJ8xSz1mXVLMopKlFT93eyy5nYva+zer7zx/GzLabeOFW3eytXshH////4BBlUkkgAEiRFAAAAAJMiviASPARugMUlywtSQrHbi9CQ0bljvqXjLDiIAZCIiggsOE2hb4LwUgQ0RoFoAWiFZMSohxqXzIiAzArwcwG11jmk6REiZOE+xkwXaDQAFQHcZkFIMbJGxAVmZqizoEMGYJwcw0P/7kmQ4gAYZZlZmZkAAAAANIMAAABgxlWFZh4AIAAA0gwAAAGZIM5gfNqloapobl8zMCGDgMThFi6yzFFF/qdRWJxjxfSL6ROKWXVGxeXSv/9EXOUikSqRLkyRMn0FamS9Gir//zM8gs+YHi4dPp6zOW////w8+uiACCAAAQSW29aJAsBkZdFr0wXdlDkzMWVI/jyLIpWlAnjeXTbFazTMoWV8UKHvZDqH6ryPDVNatTCwwyztxwx0maTUcqiJYA6EJtg5rqpmonnLDCONzQxdp1mrqJr1ZmpbRVJG2LmF29TEspBg4qK6gIV6e1q7en8ss+5n9bafq6PiPPNAavbwHN0y0v6tGoc0aK4K+SE83vONwm628eJujFiNBYaR8d7msNZZmSBWSkO28PHdIHp9z7pv302zb4jGgAAAAADhKVcbQ7l4cBelauCUDjJwccBVowyz9LyS5DYUhYC/p4TBEGQMNBWMlClCmD2oxsSRJgfLEj1ejWBOsWGRRNCORqKVDOha4Xbnl2/WlXGlbW+ExWxfcTN6YgNnxS+I6kev3KA//+5JkNQL0ljTUZz3gAAAADSDgAAEUJYlFTCR8iAAANIAAAATltrDjWLUSqckOgaJXpSwvfyQQawwYa1Ue46dqGMNhVihSSLgn3uDQdN4IAAuHsUNJhMratKmNP/IVsOmjyXRmn2i0pch6KGM2KBdUKijvO6ockM06/Go87V2gZVCoZZbAjLnuqzL8w7DLOYzSzT7LCspfiAnujshnoZnpU/1dkyRHwq18y0MYe8lKUkSKJUwFhNyIm0q0iFRM0s1Kv/7+xjLsqiaq1WY4fxo3qWmFXgExqJJQpM5UoexsyozeRKZeWzMpfBWi4/IbAXAAATL4VASzDRe5kzw1F3Pw7TaNs57/HEdLwYQsQ8o6BSpMcrCkFOESHcGEQoeo+z4WU9MtoS+Tz8/Z10mS6m5Ek2XYrJEWdCuXRpItWxE6jYgkcemRSZadUeycXVG0WZvQm5DqOquBlW7zLu+MzwciCgxSQCLMFB7BTpW1y3alegvlV1or1gpUEEAWztYAg2q2G2HMvXI//uLMOk7c8yGd43Z3J9+ZS4C7n2pFModf5y30//uSZFoC9D87TENvM3AAAA0gAAABEVFjLY0kdwgAADSAAAAEdaXYQzVrKDwoNhZKaFXCbTFGzJxkPmOQkcCOB+e6u5ZVZKdw2W+XvLjrP9sbE6hTYfjfQoMTD1PsoWl6xicSpCqvI2TdK8Ztjvnfew5PhHdY6iZxcVJN/HQM7z8xewoQ6QAAO0ISIR7jENvCwWUsuht2J666kZlMdgp3Z+RyiVuLQVpuJxpZcZMpdo/E+TIkaDYU0HkKHFjbJAGRcU2Zk6KGdNPOqpRyIWoR1qzmTjBWZqTlBPBhIOFxUYATO4xSdS+bsCrrhRFC9LpnIMH2qxZTkmSEyWbABq0OlrKHHcVjgGtPUo0HoeAgPh4YEwD4vL7ohoeOE58+F3Ci3IS6hGFwHFaPEAoDelACEjFo23slcOKRmjYQVGa838kMOQkLrPOJCU+TCa3n3OGQIk2hxdxfGYQNrTsaJT72+TEGL2JRu1ipBJoIEExBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqgG4miADBq8Ac//7kmSPg/O1MslDSR0wAAANIAAAAQ5MkSUNsSVAAAA0gAAABJprlLs/naeP8+y2pwXJfUiOeqaInlc/TqtVrLE/mhJSwVGt7goBAKLEY0jCUtYMmi241EpZIiqiyOTJoCBp7jrVHjpI849AT1uJFgrIzup7ISe1XW+9Z37+jorTViJRurINoGTYmeJAJeDiBaMtwIwZKDRkVvZY68Ukcmv36WVUKBtz2UKU8isqWOlzBMQnFzBMQkJYqcKlg+Hg+MjBGw/xWKnUDbmlVk1Ib/rKIhGhojJDZkmFIiGQ+QNu32saaVcb3Yt43P//9mpoiDCQMEJoLRJAoopNSSJI0UBnoLypZ8yna82Tjiyri4vMp2eNmqLi41EkaaYGLJSg5apMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+5Jkw4LzPSXJWy8w8AAADSAAAAETtX7SDSTRyAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",Cp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAIAAAC6ZnJRAAAEp3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjazVZbcuUoDP1nFbMEJBCC5WAeVbODWf4cHsbJTdLd6eqqGTvXYEXocY4QNu2fv7v5CxclYeNFY0ghWFw++cQZk2jXtUayfj7XpXuk93JzFjFEDqNbr6Ft/Qy5PAvUb/n1Xm60bDtxG7o9b4NueGZM6g5yG3K85LTfTeI1yeFNOvvndJo4yq/vXgFGFQgdG26OnJ1Pvzy59cv4KZ7kBIp4Yu5dmHL3ET8z3jYcHwA8sxf8bNly98BhFrJbIbzgtOUkn+M3UXobEfHxzG8jinpcfMCv9xp7byu77IMBXGEndacyZ1C8AOdCI+AeRgVznXfCHW22BcBXpHoZe+ElEQPxTp4qZerU5lioIETPjRUjc2E3ZdEpJy5uUODHTZ3VuOSqi+CpgDkHMZ9YaPpNwx+cRXiuBE0mGCOseHebV8Hv3u8M9T7KnMjGhVObBPMoQoQxmBtPaIEQ6htTmfiSWYN9vQaxDgzKhDkiwWyvZeISemrLTZ6dFQNVb1fJk9ZtABDBtyAYcmDABhQ2BbLKrETAMYKfjMjZeb7AAIkRroiSvXMB5EQevrFGaeqy8BKjvYAIwRZRUJNcBlneiw/YbxEllI048SISRCVKkhxc8EFCCBpGn8rq1KtoUNWoSXN00UeJIWqMMcWcODm0MTEpJE0xpZQznGafYStDP0Nw8eUuf8kVLr3ila5cUD7FFymhaIkllVy5uooWYGqoWmNNNTdqKKXmm7TQtMWWWu6ote6679JD1x576vmwRnvbvmPtlbkfs0abNZ5EDT19WINY9TZBo53I4AyMsScwroMBFDQPzmwk73kwNziziZ1x6FuIUgY5lQZjYNA3Yul0uHuY+5I3A3S/yxt/xpwZ1P0J5syg7g1zH3n7hLWaZ7t1k6CxC4EpOqTD9gNKmWMGfIG84G8cFd8ajf3Nhf+hIa1U5xQUAe5bHILMKZr0lAAjjW7KpPuspcelYKlucaL6tRfucxZwitwL7RqjHaBH8NJRCXPayXY94lImLRGnwq1oQ2aDl6slD17tUsBhHebsYpfP8tcRFTJnpaS1zuCsW8TfIVlq9TqgVD7iuKQoQzrpN0lLNZussZ2M1/8lZLHvE368lOtGLh5Qhgd8sdlwqNAr1KnWmLp/GOIlxU4/9app0SYtp+aimJsiv8Q5+a8ZWkrY0nzLlgePzzpzyM5PLEj3FiddGAg1e4Sl72Bi6mhHp45+CZm6keEvK1vDwxG2+8FF1tLqNZ7F6naRZ9aix01dYP8EmF26/rVyn3DryMmMVPFdkp968WGWWi0dHzJ3/emqv+4tmtJTunGVrnA0Py3dmO51r6PLbdkp0XXj/S3nuKslNXlD0CYzzu+vryvX/AZBsOMW5ilobWul8eMoWqDYRidq9OYZdRWHuj355qVqq3+FwnwLk7QxuVzrx0Se5WMQjtqPkOSnZp9U0He+zNb8Sp3sVtkCdT3Aye5aHqclJmZ1PbcRYdfkqYC0sh3t8KdFYn6AyHZZimvtgJt3C3gLSMTONnPneC35TSYLJ/+tPWz+0LH2fzakHV8ZOErMv2f5dEvwcFvHAAABgmlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAeJx1kctLQkEUhz+1MsowqEVBCwlrlWEGUZsgIyyQEDPotdGbj0Dtcq8S0TZoKxREbXot6i+obdA6CIoiiFYtWhe1Kbmdm4ISOcM555vfzDnMnAFrJK1k9DovZLI5LRzwu+bmF1z2FxroFGvAGVV0dSwUClJzfN5jMeOtx6xV+9y/o3k5ritgaRQeVVQtJzwpHFzLqSbvCLcrqeiy8JlwnyYXFL4z9ViJX01OlvjbZC0SHgdrq7ArWcWxKlZSWkZYXo47k84r5fuYL3HEs7MzErvFutAJE8CPiykmGGeIAUbED+HBR7+sqJHv/c2fZlVyFfEq62iskCRFjj5R81I9LjEhelxmmnWz/3/7qicGfaXqDj/UPxvGew/Yt6FYMIyvI8MoHoPtCS6zlfzVQxj+EL1Q0dwH4NyE86uKFtuFiy3oeFSjWvRXsolZEwl4O4WWeWi7gabFUs/K+5w8QGRDvuoa9vahV847l34A8yVnseHW7fcAAAGCaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRy0tCQRSHP7UyyjCoRUELCWuVYQZRmyAjLJAQM+i10ZuPQO1yrxLRNmgrFERtei3qL6ht0DoIiiKIVi1aF7UpuZ2bghI5wznnm9/MOcycAWskrWT0Oi9ksjktHPC75uYXXPYXGugUa8AZVXR1LBQKUnN83mMx463HrFX73L+jeTmuK2BpFB5VVC0nPCkcXMupJu8Ityup6LLwmXCfJhcUvjP1WIlfTU6W+NtkLRIeB2ursCtZxbEqVlJaRlhejjuTzivl+5gvccSzszMSu8W60AkTwI+LKSYYZ4gBRsQP4cFHv6yoke/9zZ9mVXIV8SrraKyQJEWOPlHzUj0uMSF6XGaadbP/f/uqJwZ9peoOP9Q/G8Z7D9i3oVgwjK8jwygeg+0JLrOV/NVDGP4QvVDR3Afg3ITzq4oW24WLLeh4VKNa9FeyiVkTCXg7hZZ5aLuBpsVSz8r7nDxAZEO+6hr29qFXzjuXfgDzJWexOMA55gAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+QHDw0uBdj3UYIAAABvSURBVAjXbc6xCcJAAEbhL8fhYeEKAWdwFQvncQV3yBJOYCNCGgvBUrgigiBo0NNODOSVD97PXyUjRGzXq9x1y81hMa/RnvYR+Xhuu1t6Z2r0oUTMmt39L09FwIXPcDfgyovedGAfPJkoP1uNPvsCjtsdvVuKV4oAAAAASUVORK5CYII=",Dp=""+new URL("assets/images/bat-B10hkfiq.png",import.meta.url).href,Op=""+new URL("assets/images/background-Dx-MxbAH.png",import.meta.url).href,Lp=""+new URL("assets/images/clouds-bRxD_hhn.png",import.meta.url).href,Rp=""+new URL("assets/images/dust-ChOQNUeO.png",import.meta.url).href,Np="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAECAYAAAD8kH0gAAAFSGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDAiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI0IgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjQiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iNDAiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249IjcyLjAiCiAgIHRpZmY6WVJlc29sdXRpb249IjcyLjAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDYtMjVUMTE6NDA6NDMrMDI6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA2LTI1VDExOjQwOjQzKzAyOjAwIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHhtcE1NOmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHhtcE1NOnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIChNYXIgMzEgMjAyMCkiCiAgICAgIHhtcE1NOndoZW49IjIwMjAtMDYtMjVUMTE6Mjg6MTkrMDI6MDAiLz4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIChNYXIgMzEgMjAyMCkiCiAgICAgIHN0RXZ0OndoZW49IjIwMjAtMDYtMjVUMTE6NDA6NDMrMDI6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/Ps3M9SIAAAGCaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRy0tCQRSHP7UyyjCoRUELCWuVYQZRmyAjLJAQM+i10ZuPQO1yrxLRNmgrFERtei3qL6ht0DoIiiKIVi1aF7UpuZ2bghI5wznnm9/MOcycAWskrWT0Oi9ksjktHPC75uYXXPYXGugUa8AZVXR1LBQKUnN83mMx463HrFX73L+jeTmuK2BpFB5VVC0nPCkcXMupJu8Ityup6LLwmXCfJhcUvjP1WIlfTU6W+NtkLRIeB2ursCtZxbEqVlJaRlhejjuTzivl+5gvccSzszMSu8W60AkTwI+LKSYYZ4gBRsQP4cFHv6yoke/9zZ9mVXIV8SrraKyQJEWOPlHzUj0uMSF6XGaadbP/f/uqJwZ9peoOP9Q/G8Z7D9i3oVgwjK8jwygeg+0JLrOV/NVDGP4QvVDR3Afg3ITzq4oW24WLLeh4VKNa9FeyiVkTCXg7hZZ5aLuBpsVSz8r7nDxAZEO+6hr29qFXzjuXfgDzJWexOMA55gAAAAlwSFlzAAALEwAACxMBAJqcGAAAADJJREFUKJFjZIAC08k7/zMwMDCcznVnHEx8JmQOumMHA58RmXM6133Q8ZmQOci+GCx8AJeKdofbjlxCAAAAAElFTkSuQmCC",Mp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAAKCAYAAADlwU2FAAAFVGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjU4IgogICBleGlmOlBpeGVsWURpbWVuc2lvbj0iMTAiCiAgIGV4aWY6Q29sb3JTcGFjZT0iMSIKICAgdGlmZjpJbWFnZVdpZHRoPSI1OCIKICAgdGlmZjpJbWFnZUxlbmd0aD0iMTAiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249IjcyLjAiCiAgIHRpZmY6WVJlc29sdXRpb249IjcyLjAiCiAgIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiCiAgIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjAtMDYtMjVUMTE6MzE6MTMrMDI6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDYtMjVUMTE6MzE6MTMrMDI6MDAiPgogICA8ZGM6dGl0bGU+CiAgICA8cmRmOkFsdD4KICAgICA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPm92ZXJsYXk8L3JkZjpsaT4KICAgIDwvcmRmOkFsdD4KICAgPC9kYzp0aXRsZT4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIChNYXIgMzEgMjAyMCkiCiAgICAgIHN0RXZ0OndoZW49IjIwMjAtMDYtMjVUMTE6MzE6MTMrMDI6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PorLY0EAAAGCaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRy0tCQRSHP7UyyjCoRUELCWuVYQZRmyAjLJAQM+i10ZuPQO1yrxLRNmgrFERtei3qL6ht0DoIiiKIVi1aF7UpuZ2bghI5wznnm9/MOcycAWskrWT0Oi9ksjktHPC75uYXXPYXGugUa8AZVXR1LBQKUnN83mMx463HrFX73L+jeTmuK2BpFB5VVC0nPCkcXMupJu8Ityup6LLwmXCfJhcUvjP1WIlfTU6W+NtkLRIeB2ursCtZxbEqVlJaRlhejjuTzivl+5gvccSzszMSu8W60AkTwI+LKSYYZ4gBRsQP4cFHv6yoke/9zZ9mVXIV8SrraKyQJEWOPlHzUj0uMSF6XGaadbP/f/uqJwZ9peoOP9Q/G8Z7D9i3oVgwjK8jwygeg+0JLrOV/NVDGP4QvVDR3Afg3ITzq4oW24WLLeh4VKNa9FeyiVkTCXg7hZZ5aLuBpsVSz8r7nDxAZEO+6hr29qFXzjuXfgDzJWexOMA55gAAAAlwSFlzAAALEwAACxMBAJqcGAAAAlNJREFUSInlls9O20AQh7/ZtZ1QKLRvUPUFKvXGhR6IhCrRWyXU0lKIY5xHIoJAD30FDkjOrVIeoz33BEgNJPbu9OA0/1BJeqPqSiP5N/Mba7+1vWsB6HYyZc5Y36zJPM9DHtLtZLq+VRtKQ1R4BgawgIcwFPK+0s2yO7CLLNBDGOubNQkAcAGYAu88AEbA56XJoGDuNv+GfBQqLze2cXaNyP1gEEBUGFzgCYsqt0u32JtVApNT+D7gcQJEwlpfcUTkVCmsUHFX9O7pd97jTR/1gAgigvceJMBKgVHIRcBrCSEh4gq6nUxLBFPgHVwBcn6OdyWMAOruX60XG6+JggHNxhvqaYw4weFJ4pj9dBduAoRrDpL3JOkBq8MbN/frvEtjfkpOwTVJ4y17aQxFgJ/of3xT4emwv5F+QFUwQHpY5zA5AAICLUiSmPgwBm8JgGZSp9n4OJpnMDnpJxcX6M7OGHLOK/FqswZhyKd6fZQzqiRpPNKWgsaEXgZ2knhhf06f3XRx/6wObIlohlWMhW9bW3B5CROQxv4ZtIKhWd8b6aOT9tQkWsfT+rTdZntCz/N/OWuz/xf+Wf25fYp3gzGoHZTUzy30JkDugwToEY6uT1ptqnZpSls/3ruOTs5wE5/BPP9Zq01vsLKwf1Yft9rkXvnaycpEt5OpGBQ7ju9Mayw6u8N2O5kug1ZAMWiFikagESvDXKREVhFUqKgM61VCRVCDlD7ChfsNVsGUYVCMlHWDIqUOYBTdTjaKAEBNBbQ/gng250lCuWX/S8eLwP/xw/ALsiZEQdFl1JoAAAAASUVORK5CYII=",qp=""+new URL("assets/images/logo-B1fGGjLU.png",import.meta.url).href,kp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEEECM7Nt6T+wAAAsVJREFUaN7lmz1vwjAQhnNpQLCAOiDaSp2y8f9/C1umShTEUMECAkE6OTImts++80eEpaqiTUIev6/P54sDRYTWtu0YcxwAXELfC6QETNEBkBtkaHjIHZQbHIYCygUOQ4SlQMMQQSngMHRYV2iICFsjjmlCQ0Ng2JpwbhMCGgLA1sxubTihISbs/daudf8r32DFCa6D5gSuXQDVdtgfi/liZuuAhgpcMcCSQG1uUMBrLHjbtuM+aOCG/dseHmBl1Uzqms6hqK1CU4BrVRH1xjHQunOQ4A0J2BdWVTVn6JI61jCwJigTrGukx7SSqu75eup+fBTGjHHqvC+zlZSLy+pORlMvO/t0Ro/K6GSn4rKyUFgFt8HKlpaPtVn9fmvXiGSl39I+WVWfhU0qY9TVwXM0wQgOwJ1tfn+2awws900jUtLGFq0r6hf6qJqyVb7LPx2oq6q2LIvb1tgo/WBnTlWpgErEtkbr0kdZ07zrmkjEGutsmdbQWsU5finTSyyVX07h4MA+Yzo7YNtCIVVACgJ8vp5QyYZLp2QftDIGtRYDSuQjiu5Cn98fq6ws6rBiAoBLsKCVa47tHbRU68qfc15QlD7jQ9haQMq/ZVi1U3abXbKl4QMwZRuBCXIymnbzcOr5WDB6j2GhslhM2JKP+WJWLL+WbEmJT3mnq3g4VD2elmBq9UN0gFBddYCtPo1JVCi16VL9A3WuE4CY0m2suZe1EN83L+sqmCYbY8e6r5WfLM1tbcwUJeyLLfOwP1tyBO4tqejAdZ0xX8yK3Wb3FNAQqvI8PYwN3RfwZHhOWC0wB7QPuFD8sD8W7x/zlW+QMgXhaHs8MPCWhUnYPR4hoENNO1hYKzABmgM+/j4tJmgX+PQ78Zihgy8O2IBzhg6ymzZH8OD7pXOCjrojPiV4snceYoNn81ZLSPis31vi6IAYb6a9XPsHYmu6Wi6h80YAAAAASUVORK5CYII=",Pp=""+new URL("assets/images/player-C5GA19YF.png",import.meta.url).href,Fp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAICAYAAACLUr1bAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QwcFAAbX7ml4QAAADdJREFUOMtjYBgFqOD/////SVHPRG0LSHUAIcBIruMYGRkZCTkMWQ0hebpFEb1DeMDT4CigFAAA+Uon6PQAbmgAAAAASUVORK5CYII=",Bp=""+new URL("assets/images/zombie-DkqX3C5d.png",import.meta.url).href,zp=""+new URL("assets/images/tileset-Pz82qz4a.png",import.meta.url).href,Up={"ammo.png":Cp,"bat.png":Dp,"background.png":Op,"clouds.png":Lp,"dust.png":Rp,"energy.png":Np,"estrip.png":Mp,"logo.png":qp,"moon.png":kp,"player.png":Pp,"shine.png":Fp,"tileset.png":zp,"zombie.png":Bp,"shoot.mp3":Tp,"powerup.mp3":Ip,"reload.mp3":Sp};class $l extends At{name="Custom.Background";bg=this.scene.game.getImage("background.png");moon=this.scene.game.getImage("moon.png");clouds=this.scene.game.getImage("clouds.png");scroll=0;draw(){const{camera:t,game:i}=this.scene,{ctx:n,width:o,height:s}=i,r=i.getSetting("flash"),l=t.pos.x*.5,c=(this.bg.width-1)*t.scale,f=(this.clouds.width-1)*t.scale,d=l+Math.round(-l/c)*c,a=this.bg.height*2.8*t.scale+t.pos.y,u=t.pos.x/2+this.scroll,h=1e3+t.pos.y*.8,g=n.createRadialGradient(i.width-240,180,15,i.width-240,180,o);g.addColorStop(0,i.backgroundColor.brightness(50).toString()),g.addColorStop(.7,i.backgroundColor.toString()),n.fillStyle=g,n.fillRect(0,0,o,s),n.drawImage(this.moon,o-420,20,this.moon.width*t.scale,this.moon.height*t.scale),n.drawImage(this.clouds,u-f,h,this.clouds.width*t.scale,this.clouds.height*t.scale),n.drawImage(this.clouds,u,h,this.clouds.width*t.scale,this.clouds.height*t.scale),n.drawImage(this.bg,d-c,a,this.bg.width*t.scale,this.bg.height*t.scale),n.drawImage(this.bg,d,a,this.bg.width*t.scale,this.bg.height*t.scale),n.fillStyle=r?"#ffffffaa":i.primaryColor.toString(),r&&n.fillRect(0,0,o,s)}update(){this.scroll=this.scroll<(this.clouds.width-1)*this.scene.camera.scale?this.scroll+.3:0}}class jp extends Le{image="logo.png";solid=!1;mass=0;update(){const{game:t,camera:i,tileSize:n}=this.scene,o=t.width/i.scale/1.3;this.pos=k(t.width/i.scale/n.x/2,366),this.size=k(o,o/2.9)}draw(){super.draw();const{width:t,height:i}=this.scene.game,n=Math.min(t/this.scene.tileSize.x/225,3);this.scene.game.draw.pixelText("Press spacebar to start...",k(t/2,i-80),n,"center")}}class Xp extends As{init(){this.setScale(6),this.addLayer($l),this.addObject(new jp(this)),this.camera.setPos(k(0,-1900))}update(){this.game.input.keyIsDown("Space")&&this.game.playScene("MainScene")}}var bs={exports:{}},eu={exports:{}},F=eu.exports=F||{};F.gui=F.gui||{};F.utils=F.utils||{};F.controllers=F.controllers||{};F.dom=F.dom||{};F.color=F.color||{};F.utils.css=function(){return{load:function(e,t){t=t||document;var i=t.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,t.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,t){t=t||document;var i=document.createElement("style");i.type="text/css",i.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(i)}}}();F.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(i){return this.each(t.call(arguments,1),function(n){for(var o in n)this.isUndefined(n[o])||(i[o]=n[o])},this),i},defaults:function(i){return this.each(t.call(arguments,1),function(n){for(var o in n)this.isUndefined(i[o])&&(i[o]=n[o])},this),i},compose:function(){var i=t.call(arguments);return function(){for(var n=t.call(arguments),o=i.length-1;o>=0;o--)n=[i[o].apply(this,n)];return n[0]}},each:function(i,n,o){if(e&&i.forEach===e)i.forEach(n,o);else if(i.length===i.length+0){for(var s=0,r=i.length;s<r;s++)if(s in i&&n.call(o,i[s],s)===this.BREAK)return}else for(var s in i)if(n.call(o,i[s],s)===this.BREAK)return},defer:function(i){setTimeout(i,0)},toArray:function(i){return i.toArray?i.toArray():t.call(i)},isUndefined:function(i){return i===void 0},isNull:function(i){return i===null},isNaN:function(i){return i!==i},isArray:Array.isArray||function(i){return i.constructor===Array},isObject:function(i){return i===Object(i)},isNumber:function(i){return i===i+0},isString:function(i){return i===i+""},isBoolean:function(i){return i===!1||i===!0},isFunction:function(i){return Object.prototype.toString.call(i)==="[object Function]"}}}();F.controllers.Controller=function(e){var t=function(i,n){this.initialValue=i[n],this.domElement=document.createElement("div"),this.object=i,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0};return e.extend(t.prototype,{onChange:function(i){return this.__onChange=i,this},onFinishChange:function(i){return this.__onFinishChange=i,this},setValue:function(i){return this.object[this.property]=i,this.__onChange&&this.__onChange.call(this,i),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(F.utils.common);F.dom.dom=function(e){var t={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},i={};e.each(t,function(r,l){e.each(r,function(c){i[c]=l})});var n=/(\d+(\.\d+)?)px/;function o(r){if(r==="0"||e.isUndefined(r))return 0;var l=r.match(n);return e.isNull(l)?0:parseFloat(l[1])}var s={makeSelectable:function(r,l){r===void 0||r.style===void 0||(r.onselectstart=l?function(){return!1}:function(){},r.style.MozUserSelect=l?"auto":"none",r.style.KhtmlUserSelect=l?"auto":"none",r.unselectable=l?"on":"off")},makeFullscreen:function(r,l,c){e.isUndefined(l)&&(l=!0),e.isUndefined(c)&&(c=!0),r.style.position="absolute",l&&(r.style.left=0,r.style.right=0),c&&(r.style.top=0,r.style.bottom=0)},fakeEvent:function(r,l,c,f){c=c||{};var d=i[l];if(!d)throw new Error("Event type "+l+" not supported.");var a=document.createEvent(d);switch(d){case"MouseEvents":var u=c.x||c.clientX||0,h=c.y||c.clientY||0;a.initMouseEvent(l,c.bubbles||!1,c.cancelable||!0,window,c.clickCount||1,0,0,u,h,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var g=a.initKeyboardEvent||a.initKeyEvent;e.defaults(c,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),g(l,c.bubbles||!1,c.cancelable,window,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.keyCode,c.charCode);break;default:a.initEvent(l,c.bubbles||!1,c.cancelable||!0);break}e.defaults(a,f),r.dispatchEvent(a)},bind:function(r,l,c,f){return f=f||!1,r.addEventListener?r.addEventListener(l,c,f):r.attachEvent&&r.attachEvent("on"+l,c),s},unbind:function(r,l,c,f){return f=f||!1,r.removeEventListener?r.removeEventListener(l,c,f):r.detachEvent&&r.detachEvent("on"+l,c),s},addClass:function(r,l){if(r.className===void 0)r.className=l;else if(r.className!==l){var c=r.className.split(/ +/);c.indexOf(l)==-1&&(c.push(l),r.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return s},removeClass:function(r,l){if(l){if(r.className!==void 0)if(r.className===l)r.removeAttribute("class");else{var c=r.className.split(/ +/),f=c.indexOf(l);f!=-1&&(c.splice(f,1),r.className=c.join(" "))}}else r.className=void 0;return s},hasClass:function(r,l){return new RegExp("(?:^|\\s+)"+l+"(?:\\s+|$)").test(r.className)||!1},getWidth:function(r){var l=getComputedStyle(r);return o(l["border-left-width"])+o(l["border-right-width"])+o(l["padding-left"])+o(l["padding-right"])+o(l.width)},getHeight:function(r){var l=getComputedStyle(r);return o(l["border-top-width"])+o(l["border-bottom-width"])+o(l["padding-top"])+o(l["padding-bottom"])+o(l.height)},getOffset:function(r){var l={left:0,top:0};if(r.offsetParent)do l.left+=r.offsetLeft,l.top+=r.offsetTop;while(r=r.offsetParent);return l},isActive:function(r){return r===document.activeElement&&(r.type||r.href)}};return s}(F.utils.common);F.controllers.OptionController=function(e,t,i){var n=function(o,s,r){n.superclass.call(this,o,s);var l=this;if(this.__select=document.createElement("select"),i.isArray(r)){var c={};i.each(r,function(f){c[f]=f}),r=c}i.each(r,function(f,d){var a=document.createElement("option");a.innerHTML=d,a.setAttribute("value",f),l.__select.appendChild(a)}),this.updateDisplay(),t.bind(this.__select,"change",function(){var f=this.options[this.selectedIndex].value;l.setValue(f)}),this.domElement.appendChild(this.__select)};return n.superclass=e,i.extend(n.prototype,e.prototype,{setValue:function(o){var s=n.superclass.prototype.setValue.call(this,o);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),s},updateDisplay:function(){return this.__select.value=this.getValue(),n.superclass.prototype.updateDisplay.call(this)}}),n}(F.controllers.Controller,F.dom.dom,F.utils.common);F.controllers.NumberController=function(e,t){var i=function(o,s,r){i.superclass.call(this,o,s),r=r||{},this.__min=r.min,this.__max=r.max,this.__step=r.step,t.isUndefined(this.__step)?this.initialValue==0?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)};i.superclass=e,t.extend(i.prototype,e.prototype,{setValue:function(o){return this.__min!==void 0&&o<this.__min?o=this.__min:this.__max!==void 0&&o>this.__max&&(o=this.__max),this.__step!==void 0&&o%this.__step!=0&&(o=Math.round(o/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,o)},min:function(o){return this.__min=o,this},max:function(o){return this.__max=o,this},step:function(o){return this.__step=o,this}});function n(o){return o=o.toString(),o.indexOf(".")>-1?o.length-o.indexOf(".")-1:0}return i}(F.controllers.Controller,F.utils.common);F.controllers.NumberControllerBox=function(e,t,i){var n=function(s,r,l){this.__truncationSuspended=!1,n.superclass.call(this,s,r,l);var c=this,f;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",d),t.bind(this.__input,"blur",a),t.bind(this.__input,"mousedown",u),t.bind(this.__input,"keydown",function(v){v.keyCode===13&&(c.__truncationSuspended=!0,this.blur(),c.__truncationSuspended=!1)});function d(){var v=parseFloat(c.__input.value);i.isNaN(v)||c.setValue(v)}function a(){d(),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}function u(v){t.bind(window,"mousemove",h),t.bind(window,"mouseup",g),f=v.clientY}function h(v){var w=f-v.clientY;c.setValue(c.getValue()+w*c.__impliedStep),f=v.clientY}function g(){t.unbind(window,"mousemove",h),t.unbind(window,"mouseup",g)}this.updateDisplay(),this.domElement.appendChild(this.__input)};n.superclass=e,i.extend(n.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():o(this.getValue(),this.__precision),n.superclass.prototype.updateDisplay.call(this)}});function o(s,r){var l=Math.pow(10,r);return Math.round(s*l)/l}return n}(F.controllers.NumberController,F.dom.dom,F.utils.common);F.controllers.NumberControllerSlider=function(e,t,i,n,o){var s=function(l,c,f,d,a){s.superclass.call(this,l,c,{min:f,max:d,step:a});var u=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",h),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg");function h(w){t.bind(window,"mousemove",g),t.bind(window,"mouseup",v),g(w)}function g(w){w.preventDefault();var A=t.getOffset(u.__background),x=t.getWidth(u.__background);return u.setValue(r(w.clientX,A.left,A.left+x,u.__min,u.__max)),!1}function v(){t.unbind(window,"mousemove",g),t.unbind(window,"mouseup",v),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};s.superclass=e,s.useDefaultStyles=function(){i.inject(o)},n.extend(s.prototype,e.prototype,{updateDisplay:function(){var l=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=l*100+"%",s.superclass.prototype.updateDisplay.call(this)}});function r(l,c,f,d,a){return d+(a-d)*((l-c)/(f-c))}return s}(F.controllers.NumberController,F.dom.dom,F.utils.css,F.utils.common,`.slider {
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);
  height: 1em;
  border-radius: 1em;
  background-color: #eee;
  padding: 0 0.5em;
  overflow: hidden;
}

.slider-fg {
  padding: 1px 0 2px 0;
  background-color: #aaa;
  height: 1em;
  margin-left: -0.5em;
  padding-right: 0.5em;
  border-radius: 1em 0 0 1em;
}

.slider-fg:after {
  display: inline-block;
  border-radius: 1em;
  background-color: #fff;
  border:  1px solid #aaa;
  content: '';
  float: right;
  margin-right: -1em;
  margin-top: -1px;
  height: 0.9em;
  width: 0.9em;
}`);F.controllers.FunctionController=function(e,t,i){var n=function(o,s,r){n.superclass.call(this,o,s);var l=this;this.__button=document.createElement("div"),this.__button.innerHTML=r===void 0?"Fire":r,t.bind(this.__button,"click",function(c){return c.preventDefault(),l.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return n.superclass=e,i.extend(n.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),n}(F.controllers.Controller,F.dom.dom,F.utils.common);F.controllers.BooleanController=function(e,t,i){var n=function(o,s){n.superclass.call(this,o,s);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",l,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay();function l(){r.setValue(!r.__prev)}};return n.superclass=e,i.extend(n.prototype,e.prototype,{setValue:function(o){var s=n.superclass.prototype.setValue.call(this,o);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),s},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,n.superclass.prototype.updateDisplay.call(this)}}),n}(F.controllers.Controller,F.dom.dom,F.utils.common);F.color.toString=function(e){return function(t){if(t.a==1||e.isUndefined(t.a)){for(var i=t.hex.toString(16);i.length<6;)i="0"+i;return"#"+i}else return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(F.utils.common);F.color.interpret=function(e,t){var i,n,o=function(){n=!1;var r=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(s,function(l){if(l.litmus(r))return t.each(l.conversions,function(c,f){if(i=c.read(r),n===!1&&i!==!1)return n=i,i.conversionName=f,i.conversion=c,t.BREAK}),t.BREAK}),n},s=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(r){var l=r.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return l===null?!1:{space:"HEX",hex:parseInt("0x"+l[1].toString()+l[1].toString()+l[2].toString()+l[2].toString()+l[3].toString()+l[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(r){var l=r.match(/^#([A-F0-9]{6})$/i);return l===null?!1:{space:"HEX",hex:parseInt("0x"+l[1].toString())}},write:e},CSS_RGB:{read:function(r){var l=r.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return l===null?!1:{space:"RGB",r:parseFloat(l[1]),g:parseFloat(l[2]),b:parseFloat(l[3])}},write:e},CSS_RGBA:{read:function(r){var l=r.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return l===null?!1:{space:"RGB",r:parseFloat(l[1]),g:parseFloat(l[2]),b:parseFloat(l[3]),a:parseFloat(l[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(r){return{space:"HEX",hex:r,conversionName:"HEX"}},write:function(r){return r.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(r){return r.length!=3?!1:{space:"RGB",r:r[0],g:r[1],b:r[2]}},write:function(r){return[r.r,r.g,r.b]}},RGBA_ARRAY:{read:function(r){return r.length!=4?!1:{space:"RGB",r:r[0],g:r[1],b:r[2],a:r[3]}},write:function(r){return[r.r,r.g,r.b,r.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(r){return t.isNumber(r.r)&&t.isNumber(r.g)&&t.isNumber(r.b)&&t.isNumber(r.a)?{space:"RGB",r:r.r,g:r.g,b:r.b,a:r.a}:!1},write:function(r){return{r:r.r,g:r.g,b:r.b,a:r.a}}},RGB_OBJ:{read:function(r){return t.isNumber(r.r)&&t.isNumber(r.g)&&t.isNumber(r.b)?{space:"RGB",r:r.r,g:r.g,b:r.b}:!1},write:function(r){return{r:r.r,g:r.g,b:r.b}}},HSVA_OBJ:{read:function(r){return t.isNumber(r.h)&&t.isNumber(r.s)&&t.isNumber(r.v)&&t.isNumber(r.a)?{space:"HSV",h:r.h,s:r.s,v:r.v,a:r.a}:!1},write:function(r){return{h:r.h,s:r.s,v:r.v,a:r.a}}},HSV_OBJ:{read:function(r){return t.isNumber(r.h)&&t.isNumber(r.s)&&t.isNumber(r.v)?{space:"HSV",h:r.h,s:r.s,v:r.v}:!1},write:function(r){return{h:r.h,s:r.s,v:r.v}}}}}];return o}(F.color.toString,F.utils.common);F.GUI=F.gui.GUI=function(e,t,i,n,o,s,r,l,c,f,d,a,u,h,g){e.inject(i);var v="dg",w=72,A=20,x="Default",_=function(){try{return"localStorage"in window&&window.localStorage!==null}catch{return!1}}(),b,T=!0,D,C=!1,O=[],p=function(E){var M=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),h.addClass(this.domElement,v),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],E=E||{},E=g.defaults(E,{autoPlace:!0,width:p.DEFAULT_WIDTH}),E=g.defaults(E,{resizable:E.autoPlace,hideable:E.autoPlace}),g.isUndefined(E.load)?E.load={preset:x}:E.preset&&(E.load.preset=E.preset),g.isUndefined(E.parent)&&E.hideable&&O.push(this),E.resizable=g.isUndefined(E.parent)&&E.resizable,E.autoPlace&&g.isUndefined(E.scrollable)&&(E.scrollable=!0);var q=_&&localStorage.getItem(z(this,"isLocal"))==="true";if(Object.defineProperties(this,{parent:{get:function(){return E.parent}},scrollable:{get:function(){return E.scrollable}},autoPlace:{get:function(){return E.autoPlace}},preset:{get:function(){return M.parent?M.getRoot().preset:E.load.preset},set:function(G){M.parent?M.getRoot().preset=G:E.load.preset=G,hi(this),M.revert()}},width:{get:function(){return E.width},set:function(G){E.width=G,X(M,G)}},name:{get:function(){return E.name},set:function(G){E.name=G,y&&(y.innerHTML=E.name)}},closed:{get:function(){return E.closed},set:function(G){E.closed=G,E.closed?h.addClass(M.__ul,p.CLASS_CLOSED):h.removeClass(M.__ul,p.CLASS_CLOSED),this.onResize(),M.__closeButton&&(M.__closeButton.innerHTML=G?p.TEXT_OPEN:p.TEXT_CLOSED)}},load:{get:function(){return E.load}},useLocalStorage:{get:function(){return q},set:function(G){_&&(q=G,G?h.bind(window,"unload",I):h.unbind(window,"unload",I),localStorage.setItem(z(M,"isLocal"),G))}}}),g.isUndefined(E.parent)){if(E.closed=!1,h.addClass(this.domElement,p.CLASS_MAIN),h.makeSelectable(this.domElement,!1),_&&q){M.useLocalStorage=!0;var U=localStorage.getItem(z(this,"gui"));U&&(E.load=JSON.parse(U))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=p.TEXT_CLOSED,h.addClass(this.__closeButton,p.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),h.bind(this.__closeButton,"click",function(){M.closed=!M.closed})}else{E.closed===void 0&&(E.closed=!0);var y=document.createTextNode(E.name);h.addClass(y,"controller-name");var m=N(M,y),L=function(G){return G.preventDefault(),M.closed=!M.closed,!1};h.addClass(this.__ul,p.CLASS_CLOSED),h.addClass(m,"title"),h.bind(m,"click",L),E.closed||(this.closed=!1)}E.autoPlace&&(g.isUndefined(E.parent)&&(T&&(D=document.createElement("div"),h.addClass(D,v),h.addClass(D,p.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(D),T=!1),D.appendChild(this.domElement),h.addClass(this.domElement,p.CLASS_AUTO_PLACE)),this.parent||X(M,E.width)),h.bind(window,"resize",function(){M.onResize()}),h.bind(this.__ul,"webkitTransitionEnd",function(){M.onResize()}),h.bind(this.__ul,"transitionend",function(){M.onResize()}),h.bind(this.__ul,"oTransitionEnd",function(){M.onResize()}),this.onResize(),E.resizable&&Z(this);function I(){localStorage.setItem(z(M,"gui"),JSON.stringify(M.getSaveObject()))}M.getRoot();function V(){var G=M.getRoot();G.width+=1,g.defer(function(){G.width-=1})}E.parent||V()};p.toggleHide=function(){C=!C,g.each(O,function(E){E.domElement.style.zIndex=C?-999:999,E.domElement.style.opacity=C?0:1})},p.CLASS_AUTO_PLACE="a",p.CLASS_AUTO_PLACE_CONTAINER="ac",p.CLASS_MAIN="main",p.CLASS_CONTROLLER_ROW="cr",p.CLASS_TOO_TALL="taller-than-window",p.CLASS_CLOSED="closed",p.CLASS_CLOSE_BUTTON="close-button",p.CLASS_DRAG="drag",p.DEFAULT_WIDTH=245,p.TEXT_CLOSED="Close Controls",p.TEXT_OPEN="Open Controls",h.bind(window,"keydown",function(E){document.activeElement.type!=="text"&&(E.which===w||E.keyCode==w)&&p.toggleHide()},!1),g.extend(p.prototype,{add:function(E,M){return S(this,E,M,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(E,M){return S(this,E,M,{color:!0})},remove:function(E){this.__ul.removeChild(E.__li),this.__controllers.slice(this.__controllers.indexOf(E),1);var M=this;g.defer(function(){M.onResize()})},destroy:function(){this.autoPlace&&D.removeChild(this.domElement)},addFolder:function(E){if(this.__folders[E]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+E+'"');var M={name:E,parent:this};M.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[E]&&(M.closed=this.load.folders[E].closed,M.load=this.load.folders[E]);var q=new p(M);this.__folders[E]=q;var U=N(this,q.domElement);return h.addClass(U,"folder"),q},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var E=this.getRoot();if(E.scrollable){var M=h.getOffset(E.__ul).top,q=0;g.each(E.__ul.childNodes,function(U){E.autoPlace&&U===E.__save_row||(q+=h.getHeight(U))}),window.innerHeight-M-A<q?(h.addClass(E.domElement,p.CLASS_TOO_TALL),E.__ul.style.height=window.innerHeight-M-A+"px"):(h.removeClass(E.domElement,p.CLASS_TOO_TALL),E.__ul.style.height="auto")}E.__resize_handle&&g.defer(function(){E.__resize_handle.style.height=E.__ul.offsetHeight+"px"}),E.__closeButton&&(E.__closeButton.style.width=E.width+"px")},remember:function(){if(g.isUndefined(b)&&(b=new u,b.domElement.innerHTML=t),this.parent)throw new Error("You can only call remember on a top level GUI.");var E=this;g.each(Array.prototype.slice.call(arguments),function(M){E.__rememberedObjects.length==0&&J(E),E.__rememberedObjects.indexOf(M)==-1&&E.__rememberedObjects.push(M)}),this.autoPlace&&X(this,this.width)},getRoot:function(){for(var E=this;E.parent;)E=E.parent;return E},getSaveObject:function(){var E=this.load;return E.closed=this.closed,this.__rememberedObjects.length>0&&(E.preset=this.preset,E.remembered||(E.remembered={}),E.remembered[this.preset]=Ut(this)),E.folders={},g.each(this.__folders,function(M,q){E.folders[q]=M.getSaveObject()}),E},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Ut(this),Se(this,!1)},saveAs:function(E){this.load.remembered||(this.load.remembered={},this.load.remembered[x]=Ut(this,!0)),this.load.remembered[E]=Ut(this),this.preset=E,_t(this,E,!0)},revert:function(E){g.each(this.__controllers,function(M){this.getRoot().load.remembered?j(E||this.getRoot(),M):M.setValue(M.initialValue)},this),g.each(this.__folders,function(M){M.revert(M)}),E||Se(this.getRoot(),!1)},listen:function(E){var M=this.__listening.length==0;this.__listening.push(E),M&&jt(this.__listening)}});function S(E,M,q,U){if(M[q]===void 0)throw new Error("Object "+M+' has no property "'+q+'"');var y;if(U.color)y=new d(M,q);else{var m=[M,q].concat(U.factoryArgs);y=n.apply(E,m)}U.before instanceof o&&(U.before=U.before.__li),j(E,y),h.addClass(y.domElement,"c");var L=document.createElement("span");h.addClass(L,"property-name"),L.innerHTML=y.property;var I=document.createElement("div");I.appendChild(L),I.appendChild(y.domElement);var V=N(E,I,U.before);return h.addClass(V,p.CLASS_CONTROLLER_ROW),h.addClass(V,typeof y.getValue()),P(E,V,y),E.__controllers.push(y),y}function N(E,M,q){var U=document.createElement("li");return M&&U.appendChild(M),q?E.__ul.insertBefore(U,params.before):E.__ul.appendChild(U),E.onResize(),U}function P(E,M,q){if(q.__li=M,q.__gui=E,g.extend(q,{options:function(m){if(arguments.length>1)return q.remove(),S(E,q.object,q.property,{before:q.__li.nextElementSibling,factoryArgs:[g.toArray(arguments)]});if(g.isArray(m)||g.isObject(m))return q.remove(),S(E,q.object,q.property,{before:q.__li.nextElementSibling,factoryArgs:[m]})},name:function(m){return q.__li.firstElementChild.firstElementChild.innerHTML=m,q},listen:function(){return q.__gui.listen(q),q},remove:function(){return q.__gui.remove(q),q}}),q instanceof c){var U=new l(q.object,q.property,{min:q.__min,max:q.__max,step:q.__step});g.each(["updateDisplay","onChange","onFinishChange"],function(m){var L=q[m],I=U[m];q[m]=U[m]=function(){var V=Array.prototype.slice.call(arguments);return L.apply(q,V),I.apply(U,V)}}),h.addClass(M,"has-slider"),q.domElement.insertBefore(U.domElement,q.domElement.firstElementChild)}else if(q instanceof l){var y=function(m){return g.isNumber(q.__min)&&g.isNumber(q.__max)?(q.remove(),S(E,q.object,q.property,{before:q.__li.nextElementSibling,factoryArgs:[q.__min,q.__max,q.__step]})):m};q.min=g.compose(y,q.min),q.max=g.compose(y,q.max)}else q instanceof s?(h.bind(M,"click",function(){h.fakeEvent(q.__checkbox,"click")}),h.bind(q.__checkbox,"click",function(m){m.stopPropagation()})):q instanceof r?(h.bind(M,"click",function(){h.fakeEvent(q.__button,"click")}),h.bind(M,"mouseover",function(){h.addClass(q.__button,"hover")}),h.bind(M,"mouseout",function(){h.removeClass(q.__button,"hover")})):q instanceof d&&(h.addClass(M,"color"),q.updateDisplay=g.compose(function(m){return M.style.borderLeftColor=q.__color.toString(),m},q.updateDisplay),q.updateDisplay());q.setValue=g.compose(function(m){return E.getRoot().__preset_select&&q.isModified()&&Se(E.getRoot(),!0),m},q.setValue)}function j(E,M){var q=E.getRoot(),U=q.__rememberedObjects.indexOf(M.object);if(U!=-1){var y=q.__rememberedObjectIndecesToControllers[U];if(y===void 0&&(y={},q.__rememberedObjectIndecesToControllers[U]=y),y[M.property]=M,q.load&&q.load.remembered){var m=q.load.remembered,L;if(m[E.preset])L=m[E.preset];else if(m[x])L=m[x];else return;if(L[U]&&L[U][M.property]!==void 0){var I=L[U][M.property];M.initialValue=I,M.setValue(I)}}}}function z(E,M){return document.location.href+"."+M}function J(E){var M=E.__save_row=document.createElement("li");h.addClass(E.domElement,"has-save"),E.__ul.insertBefore(M,E.__ul.firstChild),h.addClass(M,"save-row");var q=document.createElement("span");q.innerHTML="&nbsp;",h.addClass(q,"button gears");var U=document.createElement("span");U.innerHTML="Save",h.addClass(U,"button"),h.addClass(U,"save");var y=document.createElement("span");y.innerHTML="New",h.addClass(y,"button"),h.addClass(y,"save-as");var m=document.createElement("span");m.innerHTML="Revert",h.addClass(m,"button"),h.addClass(m,"revert");var L=E.__preset_select=document.createElement("select");if(E.load&&E.load.remembered?g.each(E.load.remembered,function(K,ce){_t(E,ce,ce==E.preset)}):_t(E,x,!1),h.bind(L,"change",function(){for(var K=0;K<E.__preset_select.length;K++)E.__preset_select[K].innerHTML=E.__preset_select[K].value;E.preset=this.value}),M.appendChild(L),M.appendChild(q),M.appendChild(U),M.appendChild(y),M.appendChild(m),_){let K=function(){V.style.display=E.useLocalStorage?"block":"none"};var I=document.getElementById("dg-save-locally"),V=document.getElementById("dg-local-explain");I.style.display="block";var G=document.getElementById("dg-local-storage");localStorage.getItem(z(E,"isLocal"))==="true"&&G.setAttribute("checked","checked"),K(),h.bind(G,"change",function(){E.useLocalStorage=!E.useLocalStorage,K()})}var ne=document.getElementById("dg-new-constructor");h.bind(ne,"keydown",function(K){K.metaKey&&(K.which===67||K.keyCode==67)&&b.hide()}),h.bind(q,"click",function(){ne.innerHTML=JSON.stringify(E.getSaveObject(),void 0,2),b.show(),ne.focus(),ne.select()}),h.bind(U,"click",function(){E.save()}),h.bind(y,"click",function(){var K=prompt("Enter a new preset name.");K&&E.saveAs(K)}),h.bind(m,"click",function(){E.revert()})}function Z(E){E.__resize_handle=document.createElement("div"),g.extend(E.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var M;h.bind(E.__resize_handle,"mousedown",q),h.bind(E.__closeButton,"mousedown",q),E.domElement.insertBefore(E.__resize_handle,E.domElement.firstElementChild);function q(m){return m.preventDefault(),M=m.clientX,h.addClass(E.__closeButton,p.CLASS_DRAG),h.bind(window,"mousemove",U),h.bind(window,"mouseup",y),!1}function U(m){return m.preventDefault(),E.width+=M-m.clientX,E.onResize(),M=m.clientX,!1}function y(){h.removeClass(E.__closeButton,p.CLASS_DRAG),h.unbind(window,"mousemove",U),h.unbind(window,"mouseup",y)}}function X(E,M){E.domElement.style.width=M+"px",E.__save_row&&E.autoPlace&&(E.__save_row.style.width=M+"px"),E.__closeButton&&(E.__closeButton.style.width=M+"px")}function Ut(E,M){var q={};return g.each(E.__rememberedObjects,function(U,y){var m={},L=E.__rememberedObjectIndecesToControllers[y];g.each(L,function(I,V){m[V]=M?I.initialValue:I.getValue()}),q[y]=m}),q}function _t(E,M,q){var U=document.createElement("option");U.innerHTML=M,U.value=M,E.__preset_select.appendChild(U),q&&(E.__preset_select.selectedIndex=E.__preset_select.length-1)}function hi(E){for(var M=0;M<E.__preset_select.length;M++)E.__preset_select[M].value==E.preset&&(E.__preset_select.selectedIndex=M)}function Se(E,M){var q=E.__preset_select[E.__preset_select.selectedIndex];M?q.innerHTML=q.value+"*":q.innerHTML=q.value}function jt(E){E.length!=0&&a(function(){jt(E)}),g.each(E,function(M){M.updateDisplay()})}return p}(F.utils.css,`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.
      
    </div>
    
  </div>

</div>`,`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`,F.controllers.factory=function(e,t,i,n,o,s,r){return function(l,c){var f=l[c];if(r.isArray(arguments[2])||r.isObject(arguments[2]))return new e(l,c,arguments[2]);if(r.isNumber(f))return r.isNumber(arguments[2])&&r.isNumber(arguments[3])?new i(l,c,arguments[2],arguments[3]):new t(l,c,{min:arguments[2],max:arguments[3]});if(r.isString(f))return new n(l,c);if(r.isFunction(f))return new o(l,c,"");if(r.isBoolean(f))return new s(l,c)}}(F.controllers.OptionController,F.controllers.NumberControllerBox,F.controllers.NumberControllerSlider,F.controllers.StringController=function(e,t,i){var n=function(o,s){n.superclass.call(this,o,s);var r=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",l),t.bind(this.__input,"change",l),t.bind(this.__input,"blur",c),t.bind(this.__input,"keydown",function(f){f.keyCode===13&&this.blur()});function l(){r.setValue(r.__input.value)}function c(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}this.updateDisplay(),this.domElement.appendChild(this.__input)};return n.superclass=e,i.extend(n.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),n.superclass.prototype.updateDisplay.call(this)}}),n}(F.controllers.Controller,F.dom.dom,F.utils.common),F.controllers.FunctionController,F.controllers.BooleanController,F.utils.common),F.controllers.Controller,F.controllers.BooleanController,F.controllers.FunctionController,F.controllers.NumberControllerBox,F.controllers.NumberControllerSlider,F.controllers.OptionController,F.controllers.ColorController=function(e,t,i,n,o){var s=function(f,d){s.superclass.call(this,f,d),this.__color=new i(this.getValue()),this.__temp=new i(0);var a=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(_){_.keyCode===13&&v.call(this)}),t.bind(this.__input,"blur",v),t.bind(this.__selector,"mousedown",function(_){t.addClass(this,"drag").bind(window,"mouseup",function(b){t.removeClass(a.__selector,"drag")})});var u=document.createElement("div");o.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(u.style,{width:"100%",height:"100%",background:"none"}),l(u,"top","rgba(0,0,0,0)","#000"),o.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),c(this.__hue_field),o.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",h),t.bind(this.__field_knob,"mousedown",h),t.bind(this.__hue_field,"mousedown",function(_){x(_),t.bind(window,"mousemove",x),t.bind(window,"mouseup",w)});function h(_){A(_),t.bind(window,"mousemove",A),t.bind(window,"mouseup",g)}function g(){t.unbind(window,"mousemove",A),t.unbind(window,"mouseup",g)}function v(){var _=n(this.value);_!==!1?(a.__color.__state=_,a.setValue(a.__color.toOriginal())):this.value=a.__color.toString()}function w(){t.unbind(window,"mousemove",x),t.unbind(window,"mouseup",w)}this.__saturation_field.appendChild(u),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay();function A(_){_.preventDefault();var b=t.getWidth(a.__saturation_field),T=t.getOffset(a.__saturation_field),D=(_.clientX-T.left+document.body.scrollLeft)/b,C=1-(_.clientY-T.top+document.body.scrollTop)/b;return C>1?C=1:C<0&&(C=0),D>1?D=1:D<0&&(D=0),a.__color.v=C,a.__color.s=D,a.setValue(a.__color.toOriginal()),!1}function x(_){_.preventDefault();var b=t.getHeight(a.__hue_field),T=t.getOffset(a.__hue_field),D=1-(_.clientY-T.top+document.body.scrollTop)/b;return D>1?D=1:D<0&&(D=0),a.__color.h=D*360,a.setValue(a.__color.toOriginal()),!1}};s.superclass=e,o.extend(s.prototype,e.prototype,{updateDisplay:function(){var f=n(this.getValue());if(f!==!1){var d=!1;o.each(i.COMPONENTS,function(h){if(!o.isUndefined(f[h])&&!o.isUndefined(this.__color.__state[h])&&f[h]!==this.__color.__state[h])return d=!0,{}},this),d&&o.extend(this.__color.__state,f)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,u=255-a;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,l(this.__saturation_field,"left","#fff",this.__temp.toString()),o.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+u+","+u+","+u+",.7)"})}});var r=["-moz-","-o-","-webkit-","-ms-",""];function l(f,d,a,u){f.style.background="",o.each(r,function(h){f.style.cssText+="background: "+h+"linear-gradient("+d+", "+a+" 0%, "+u+" 100%); "})}function c(f){f.style.background="",f.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",f.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",f.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",f.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",f.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}return s}(F.controllers.Controller,F.dom.dom,F.color.Color=function(e,t,i,n){var o=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};o.COMPONENTS=["r","g","b","h","s","v","hex","a"],n.extend(o.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),s(o.prototype,"r",2),s(o.prototype,"g",1),s(o.prototype,"b",0),r(o.prototype,"h"),r(o.prototype,"s"),r(o.prototype,"v"),Object.defineProperty(o.prototype,"a",{get:function(){return this.__state.a},set:function(f){this.__state.a=f}}),Object.defineProperty(o.prototype,"hex",{get:function(){return!this.__state.space!=="HEX"&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(f){this.__state.space="HEX",this.__state.hex=f}});function s(f,d,a){Object.defineProperty(f,d,{get:function(){return this.__state.space==="RGB"?this.__state[d]:(l(this,d,a),this.__state[d])},set:function(u){this.__state.space!=="RGB"&&(l(this,d,a),this.__state.space="RGB"),this.__state[d]=u}})}function r(f,d){Object.defineProperty(f,d,{get:function(){return this.__state.space==="HSV"?this.__state[d]:(c(this),this.__state[d])},set:function(a){this.__state.space!=="HSV"&&(c(this),this.__state.space="HSV"),this.__state[d]=a}})}function l(f,d,a){if(f.__state.space==="HEX")f.__state[d]=t.component_from_hex(f.__state.hex,a);else if(f.__state.space==="HSV")n.extend(f.__state,t.hsv_to_rgb(f.__state.h,f.__state.s,f.__state.v));else throw"Corrupted color state"}function c(f){var d=t.rgb_to_hsv(f.r,f.g,f.b);n.extend(f.__state,{s:d.s,v:d.v}),n.isNaN(d.h)?n.isUndefined(f.__state.h)&&(f.__state.h=0):f.__state.h=d.h}return o}(F.color.interpret,F.color.math=function(){var e;return{hsv_to_rgb:function(t,i,n){var o=Math.floor(t/60)%6,s=t/60-Math.floor(t/60),r=n*(1-i),l=n*(1-s*i),c=n*(1-(1-s)*i),f=[[n,c,r],[l,n,r],[r,n,c],[r,l,n],[c,r,n],[n,r,l]][o];return{r:f[0]*255,g:f[1]*255,b:f[2]*255}},rgb_to_hsv:function(t,i,n){var o=Math.min(t,i,n),s=Math.max(t,i,n),r=s-o,l,c;if(s!=0)c=r/s;else return{h:NaN,s:0,v:0};return t==s?l=(i-n)/r:i==s?l=2+(n-t)/r:l=4+(t-i)/r,l/=6,l<0&&(l+=1),{h:l*360,s:c,v:s/255}},rgb_to_hex:function(t,i,n){var o=this.hex_with_component(0,2,t);return o=this.hex_with_component(o,1,i),o=this.hex_with_component(o,0,n),o},component_from_hex:function(t,i){return t>>i*8&255},hex_with_component:function(t,i,n){return n<<(e=i*8)|t&~(255<<e)}}}(),F.color.toString,F.utils.common),F.color.interpret,F.utils.common),F.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),F.dom.CenteredDiv=function(e,t){var i=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return i.prototype.show=function(){var n=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){n.backgroundElement.style.opacity=1,n.domElement.style.opacity=1,n.domElement.style.webkitTransform="scale(1)"})},i.prototype.hide=function(){var n=this,o=function(){n.domElement.style.display="none",n.backgroundElement.style.display="none",e.unbind(n.domElement,"webkitTransitionEnd",o),e.unbind(n.domElement,"transitionend",o),e.unbind(n.domElement,"oTransitionEnd",o)};e.bind(this.domElement,"webkitTransitionEnd",o),e.bind(this.domElement,"transitionend",o),e.bind(this.domElement,"oTransitionEnd",o),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},i.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},i}(F.dom.dom,F.utils.common),F.dom.dom,F.utils.common);var Hp=eu.exports,tu={exports:{}},me=tu.exports=me||{};me.color=me.color||{};me.utils=me.utils||{};me.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(i){return this.each(t.call(arguments,1),function(n){for(var o in n)this.isUndefined(n[o])||(i[o]=n[o])},this),i},defaults:function(i){return this.each(t.call(arguments,1),function(n){for(var o in n)this.isUndefined(i[o])&&(i[o]=n[o])},this),i},compose:function(){var i=t.call(arguments);return function(){for(var n=t.call(arguments),o=i.length-1;o>=0;o--)n=[i[o].apply(this,n)];return n[0]}},each:function(i,n,o){if(e&&i.forEach===e)i.forEach(n,o);else if(i.length===i.length+0){for(var s=0,r=i.length;s<r;s++)if(s in i&&n.call(o,i[s],s)===this.BREAK)return}else for(var s in i)if(n.call(o,i[s],s)===this.BREAK)return},defer:function(i){setTimeout(i,0)},toArray:function(i){return i.toArray?i.toArray():t.call(i)},isUndefined:function(i){return i===void 0},isNull:function(i){return i===null},isNaN:function(i){return i!==i},isArray:Array.isArray||function(i){return i.constructor===Array},isObject:function(i){return i===Object(i)},isNumber:function(i){return i===i+0},isString:function(i){return i===i+""},isBoolean:function(i){return i===!1||i===!0},isFunction:function(i){return Object.prototype.toString.call(i)==="[object Function]"}}}();me.color.toString=function(e){return function(t){if(t.a==1||e.isUndefined(t.a)){for(var i=t.hex.toString(16);i.length<6;)i="0"+i;return"#"+i}else return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(me.utils.common);me.Color=me.color.Color=function(e,t,i,n){var o=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};o.COMPONENTS=["r","g","b","h","s","v","hex","a"],n.extend(o.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),s(o.prototype,"r",2),s(o.prototype,"g",1),s(o.prototype,"b",0),r(o.prototype,"h"),r(o.prototype,"s"),r(o.prototype,"v"),Object.defineProperty(o.prototype,"a",{get:function(){return this.__state.a},set:function(f){this.__state.a=f}}),Object.defineProperty(o.prototype,"hex",{get:function(){return!this.__state.space!=="HEX"&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(f){this.__state.space="HEX",this.__state.hex=f}});function s(f,d,a){Object.defineProperty(f,d,{get:function(){return this.__state.space==="RGB"?this.__state[d]:(l(this,d,a),this.__state[d])},set:function(u){this.__state.space!=="RGB"&&(l(this,d,a),this.__state.space="RGB"),this.__state[d]=u}})}function r(f,d){Object.defineProperty(f,d,{get:function(){return this.__state.space==="HSV"?this.__state[d]:(c(this),this.__state[d])},set:function(a){this.__state.space!=="HSV"&&(c(this),this.__state.space="HSV"),this.__state[d]=a}})}function l(f,d,a){if(f.__state.space==="HEX")f.__state[d]=t.component_from_hex(f.__state.hex,a);else if(f.__state.space==="HSV")n.extend(f.__state,t.hsv_to_rgb(f.__state.h,f.__state.s,f.__state.v));else throw"Corrupted color state"}function c(f){var d=t.rgb_to_hsv(f.r,f.g,f.b);n.extend(f.__state,{s:d.s,v:d.v}),n.isNaN(d.h)?n.isUndefined(f.__state.h)&&(f.__state.h=0):f.__state.h=d.h}return o}(me.color.interpret=function(e,t){var i,n,o=function(){n=!1;var r=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(s,function(l){if(l.litmus(r))return t.each(l.conversions,function(c,f){if(i=c.read(r),n===!1&&i!==!1)return n=i,i.conversionName=f,i.conversion=c,t.BREAK}),t.BREAK}),n},s=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(r){var l=r.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return l===null?!1:{space:"HEX",hex:parseInt("0x"+l[1].toString()+l[1].toString()+l[2].toString()+l[2].toString()+l[3].toString()+l[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(r){var l=r.match(/^#([A-F0-9]{6})$/i);return l===null?!1:{space:"HEX",hex:parseInt("0x"+l[1].toString())}},write:e},CSS_RGB:{read:function(r){var l=r.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return l===null?!1:{space:"RGB",r:parseFloat(l[1]),g:parseFloat(l[2]),b:parseFloat(l[3])}},write:e},CSS_RGBA:{read:function(r){var l=r.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return l===null?!1:{space:"RGB",r:parseFloat(l[1]),g:parseFloat(l[2]),b:parseFloat(l[3]),a:parseFloat(l[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(r){return{space:"HEX",hex:r,conversionName:"HEX"}},write:function(r){return r.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(r){return r.length!=3?!1:{space:"RGB",r:r[0],g:r[1],b:r[2]}},write:function(r){return[r.r,r.g,r.b]}},RGBA_ARRAY:{read:function(r){return r.length!=4?!1:{space:"RGB",r:r[0],g:r[1],b:r[2],a:r[3]}},write:function(r){return[r.r,r.g,r.b,r.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(r){return t.isNumber(r.r)&&t.isNumber(r.g)&&t.isNumber(r.b)&&t.isNumber(r.a)?{space:"RGB",r:r.r,g:r.g,b:r.b,a:r.a}:!1},write:function(r){return{r:r.r,g:r.g,b:r.b,a:r.a}}},RGB_OBJ:{read:function(r){return t.isNumber(r.r)&&t.isNumber(r.g)&&t.isNumber(r.b)?{space:"RGB",r:r.r,g:r.g,b:r.b}:!1},write:function(r){return{r:r.r,g:r.g,b:r.b}}},HSVA_OBJ:{read:function(r){return t.isNumber(r.h)&&t.isNumber(r.s)&&t.isNumber(r.v)&&t.isNumber(r.a)?{space:"HSV",h:r.h,s:r.s,v:r.v,a:r.a}:!1},write:function(r){return{h:r.h,s:r.s,v:r.v,a:r.a}}},HSV_OBJ:{read:function(r){return t.isNumber(r.h)&&t.isNumber(r.s)&&t.isNumber(r.v)?{space:"HSV",h:r.h,s:r.s,v:r.v}:!1},write:function(r){return{h:r.h,s:r.s,v:r.v}}}}}];return o}(me.color.toString,me.utils.common),me.color.math=function(){var e;return{hsv_to_rgb:function(t,i,n){var o=Math.floor(t/60)%6,s=t/60-Math.floor(t/60),r=n*(1-i),l=n*(1-s*i),c=n*(1-(1-s)*i),f=[[n,c,r],[l,n,r],[r,n,c],[r,l,n],[c,r,n],[n,r,l]][o];return{r:f[0]*255,g:f[1]*255,b:f[2]*255}},rgb_to_hsv:function(t,i,n){var o=Math.min(t,i,n),s=Math.max(t,i,n),r=s-o,l,c;if(s!=0)c=r/s;else return{h:NaN,s:0,v:0};return t==s?l=(i-n)/r:i==s?l=2+(n-t)/r:l=4+(t-i)/r,l/=6,l<0&&(l+=1),{h:l*360,s:c,v:s/255}},rgb_to_hex:function(t,i,n){var o=this.hex_with_component(0,2,t);return o=this.hex_with_component(o,1,i),o=this.hex_with_component(o,0,n),o},component_from_hex:function(t,i){return t>>i*8&255},hex_with_component:function(t,i,n){return n<<(e=i*8)|t&~(255<<e)}}}(),me.color.toString,me.utils.common);var Vp=tu.exports;bs.exports=Hp;bs.exports.color=Vp;var pa=bs.exports;const Gp=`<?xml version="1.0" encoding="UTF-8"?>
<map version="1.10" tiledversion="1.11.0" orientation="orthogonal" renderorder="right-down" compressionlevel="0" width="189" height="32" tilewidth="16" tileheight="16" infinite="0" nextlayerid="21" nextobjectid="276">
 <tileset firstgid="1" name="tiles" tilewidth="16" tileheight="16" tilecount="192" columns="16">
  <image source="../images/tileset.png" width="256" height="192"/>
  <tile id="0" type="www" probability="6"/>
  <tile id="9" type="oneWay"/>
  <tile id="10" type="oneWay"/>
  <tile id="73" type="oneWay"/>
  <tile id="74" type="oneWay"/>
  <tile id="94" type="oneWay"/>
  <tile id="95" type="oneWay"/>
  <tile id="96" type="noCollide"/>
  <tile id="114" type="noCollide"/>
  <tile id="115" type="noCollide"/>
  <tile id="123" type="noCollide"/>
  <tile id="128" type="noCollide"/>
  <tile id="129" type="noCollide"/>
  <tile id="147" type="noCollide"/>
  <tile id="148" type="noCollide"/>
  <tile id="149" type="noCollide"/>
  <tile id="150" type="noCollide"/>
  <tile id="151" type="noCollide"/>
  <tile id="163">
   <animation>
    <frame tileid="163" duration="200"/>
    <frame tileid="164" duration="200"/>
    <frame tileid="165" duration="200"/>
    <frame tileid="164" duration="200"/>
   </animation>
  </tile>
  <tile id="166">
   <animation>
    <frame tileid="166" duration="300"/>
    <frame tileid="167" duration="300"/>
   </animation>
  </tile>
  <tile id="168">
   <animation>
    <frame tileid="168" duration="200"/>
    <frame tileid="169" duration="200"/>
    <frame tileid="170" duration="200"/>
    <frame tileid="169" duration="200"/>
   </animation>
  </tile>
  <tile id="176">
   <animation>
    <frame tileid="176" duration="100"/>
    <frame tileid="177" duration="100"/>
    <frame tileid="178" duration="100"/>
    <frame tileid="179" duration="100"/>
    <frame tileid="180" duration="100"/>
   </animation>
  </tile>
  <tile id="181">
   <animation>
    <frame tileid="181" duration="100"/>
    <frame tileid="182" duration="100"/>
    <frame tileid="183" duration="100"/>
    <frame tileid="184" duration="100"/>
    <frame tileid="185" duration="100"/>
    <frame tileid="184" duration="100"/>
    <frame tileid="183" duration="100"/>
    <frame tileid="182" duration="100"/>
    <frame tileid="181" duration="100"/>
   </animation>
  </tile>
  <tile id="186">
   <animation>
    <frame tileid="186" duration="100"/>
    <frame tileid="187" duration="100"/>
    <frame tileid="188" duration="100"/>
    <frame tileid="189" duration="100"/>
    <frame tileid="190" duration="100"/>
    <frame tileid="187" duration="100"/>
   </animation>
  </tile>
 </tileset>
 <layer id="1" name="background" width="189" height="32">
  <data encoding="base64" compression="zlib">
   eAHtW9eKVEEQXcyCOaIYVl1zjvhgdtUVX1TMCVREDBjAjIqPigH/QIXF8JeeWm8NRVM9c+/MMrftOQ1nurq6bnfV6TPNDjPb18dGBsgAGSAD3WBgDDYZ242NuAcZSISBcchDwEYGcmdgPAqcAFDzuZ8067MMTKTmLR20e4QB3vM9ctAss8GAan5Sw0ODDOTNgGp+ct5lsjoy0GBANd9w0CADmTNAzWd+wCxvhIEphgdq3pBBMysGpppqpsGeDswAqHlDDM1sGJiJSmYF1czGeA5AzQfEcJgNA6Jtr5XRPH+T4zFHX+oMdKL5Mu+L1Otnfr3HQAqat58peu8EWHG3Gahb895nim5zwP16i4FQ81V+Vxn722ZuRQrDHCo+znAyUIkBT29lf1cZ07y3ZrOkJH5eswDO1crA/Fp3H/3NY3qL6bnM91btaH70K+OKnTAQnnMna6XwbJl6VPMLkPBCk7R+byUujQnv6Jjm5b7w/u6JxZttszAXoYrFwBJgaeIV6Tnr95Neunvg3Avs8ybh6weWAcuBFUCdTeuRHGJ6Uz0POIm2+t6q1Zr6PrKfHZxtsnKtRDWrgNXAGmAtsA5Iudlz1jOz+Z7E4BRw2jqNvR72BmCj8dVp2nq8PFTz3pz6wphWGtb4AV0AvX52MK5SZj+iUrlDyiS8CUGbgS3AVmAbsB34H5qcmz0zzfluYdxTh9PvgG8nsMuZq8sl9XhN/LE5jfdiVMPe/5p48bJWq310P9undofY3Dx7P5wHgIPAIeAwULWdcB7wfBLm+T2fXTI2Hzufj8XDn+wigT2I8RHgKHA/mKtrGKtH/LE5zTUWI37vf02axeuaVfoU75BjKGAIOB4Ucgbjs8A54DxwAajabjsPeD4J8/yezy4Zm4/p4K19uLAvBr5LGF8GZI3PwVxdw1g9MX3aPGMxVdeMxdu9PHsQztTukCvI6SpwLUj4AcYPAeXsEezHJibUiplqmJ4mPZ884Pk9X2Nx55kv8F0HJOcngLSnwDPgOSD+F8BL4BUg7c6/buT1NV7fALGaTWhlswxfdtHdZiD5hE3r1Fp/IuAP8BsYLoJtzI3Cp523psyJ35vzfLpWs76dO6QqV3Z/0UCrJpr/CrwDQn1o/bZ/j7gPgNUKhiPtJl5vFbbt5Pz0DEMdfysCrV9j7Rop2aKvYeCXk5TWE05Zvr5j8ocJEN5kLell3Vxau3dIM65y4YZ1kAEyQAbIABkgA2SADJCBuhj4CyvmPtc=
  </data>
 </layer>
 <layer id="2" name="main" width="189" height="32">
  <data encoding="base64" compression="zlib">
   eAHt2kEOgjAQBVBiXOEFPJOXcenWK3hjhwWmGiRt0Qj1kTQh0JHO88dUY9c5CBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAg0JZAH+0c2mpJNwQIECBAgACBh0Dsc67DfmcYDgIECBDYpoDP8m2+b1ZNgACBKYFxb77kN8kltVNrco0AAQIE1i0wfh9Y9yqtjgABAgQIECBQL3CsL1VJgAABAgT+TuAUHc+NFGRuXnrvXU163XmdQB9l/p9cZ6eKAAECBNoXOEeL+2TcClvOqX+dkz7v2+eF7RRP/2VvOXbFDX24YBevd4mRs1ZzOMmADMiADMiADMiADMjAcwbu98kYMQ==
  </data>
 </layer>
 <objectgroup id="3" name="objects">
  <properties>
   <property name="collide" type="bool" value="true"/>
  </properties>
  <object id="159" name="Player" type="player" x="32" y="416" width="13" height="35"/>
  <object id="69" name="Spikes" type="spikes" x="1440" y="440" width="64" height="16"/>
  <object id="165" name="bat" type="bat" x="912" y="352" width="8" height="16"/>
  <object id="227" type="item" gid="177" x="2512" y="144" width="16" height="16"/>
  <object id="228" type="item" gid="187" x="2384" y="256" width="16" height="16"/>
  <object id="229" type="item" gid="187" x="2720" y="288" width="16" height="16"/>
  <object id="231" type="box" gid="163" x="272" y="464" width="16" height="16"/>
  <object id="232" type="box" gid="163" x="288" y="464" width="16" height="16"/>
  <object id="233" type="box" gid="163" x="288" y="447" width="16" height="16"/>
  <object id="234" type="box" gid="163" x="288" y="430" width="16" height="16"/>
  <object id="236" type="box" gid="163" x="304" y="464" width="16" height="16"/>
  <object id="237" type="box" gid="163" x="304" y="447" width="16" height="16"/>
  <object id="238" type="box" gid="163" x="304" y="430" width="16" height="16"/>
  <object id="239" type="box" gid="163" x="304" y="413" width="16" height="16"/>
  <object id="240" type="zombie" x="416" y="432" width="10" height="32"/>
  <object id="241" type="zombie" x="144" y="432" width="10" height="32"/>
  <object id="242" name="bat" type="bat" x="215" y="384" width="8" height="16"/>
  <object id="243" type="zombie" x="592" y="416" width="10" height="32"/>
  <object id="244" type="zombie" x="800" y="416" width="10" height="32"/>
  <object id="245" type="zombie" x="1040" y="416" width="10" height="32"/>
  <object id="247" type="zombie" x="1584" y="400" width="10" height="32"/>
  <object id="248" type="zombie" x="1808" y="400" width="10" height="32"/>
  <object id="249" type="zombie" x="2032" y="416" width="10" height="32"/>
  <object id="250" type="zombie" x="2128" y="416" width="10" height="32"/>
  <object id="251" type="zombie" x="2224" y="416" width="10" height="32"/>
  <object id="252" type="zombie" x="2272" y="416" width="10" height="32"/>
  <object id="253" type="zombie" x="2480" y="400" width="10" height="32"/>
  <object id="254" type="zombie" x="2640" y="400" width="10" height="32"/>
  <object id="255" type="zombie" x="2832" y="400" width="10" height="32"/>
  <object id="256" type="zombie" x="1328" y="416" width="10" height="32"/>
  <object id="258" type="zombie" x="1216" y="416" width="10" height="32"/>
  <object id="260" name="bat" type="bat" x="1573" y="339" width="8" height="16"/>
  <object id="261" name="bat" type="bat" x="1656" y="360" width="8" height="16"/>
  <object id="262" type="item" gid="187" x="256" y="384" width="16" height="16"/>
  <object id="263" type="item" gid="177" x="1968" y="416" width="16" height="16"/>
  <object id="267" type="box" gid="163" x="688" y="448" width="16" height="16"/>
  <object id="268" type="box" gid="163" x="704" y="448" width="16" height="16"/>
  <object id="269" type="box" gid="163" x="704" y="432" width="16" height="16"/>
  <object id="270" type="item" gid="187" x="1184" y="384" width="16" height="16"/>
  <object id="271" type="zombie" x="1680" y="400" width="10" height="32"/>
  <object id="272" type="zombie" x="2176" y="416" width="10" height="32"/>
  <object id="273" type="zombie" x="2352" y="416" width="10" height="32"/>
  <object id="274" type="zombie" x="912" y="416" width="10" height="32"/>
 </objectgroup>
 <layer id="4" name="foreground" width="189" height="32">
  <data encoding="base64" compression="zlib">
   eAHtlllKQ0EQRfORPTktQN2DExjFHxHEf4cdOLuAgLhL7w3vStFEQniSqDkF166uHqrrvAo4GGAQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQgsi8DZshL3yLutszvSbo87OLq6BP5iz+/pc+1LBzM+26HWj2bsYfl/E1hTecfSSDqRNqRzaR5b12ZrLPl8a87h9eT5kO9cmdt3fs+/s+TI2O67VuCmk9+wKW1Jrd0qcNcGf2Dut7t+15F6ap1+d8sm76scUl/u8+j7atw5Mpc7yelc753vNZ85lX6L+U15Y+p1zLVcSn5vag43j+HpNe/P2TD2fFrMrL2/StMvG8qLHMw9HuuZGo/v/Tnr8V56kB7LeCG/7lmkf6XcMdfyJD1Lr41emrnXp8XeFE+vyp3YIuuZN5d/B/5WI6n23Libp9e8XvsoczPz3nzvnMu9WffoPR59Nn0sd2JD/UUwoAfoAXqAHqAH6IG+PdD9a8EAgZUh8Al4IFJh
  </data>
 </layer>
</map>
`;class Zp extends At{name="Overlay";darkOverlay=1;fadeSpeed=1;fadeTo=0;update(){const t=this.darkOverlay,i=this.scene.game.delta;t!==0&&(t<0&&t+i<0||t>0&&t-i>0)&&(this.darkOverlay+=i*this.fadeSpeed*(t<0?1:-1))}draw(){const{camera:t,game:i}=this.scene,{scale:n}=t,{ctx:o}=i,s=i.getResolution(),r=i.getImage("estrip.png"),l=i.getImage("energy.png"),c=this.scene.getObjectByType(ie.Player),f=c.health[0]*4,[d,a]=c.ammo;o.drawImage(r,2*n,2*n,r.width*n,r.height*n),o.drawImage(l,0,0,f,4,18*n,5*n,f*n,4*n);for(let u=0;u<a;u++)o.drawImage(i.getImage("ammo.png"),u<d?0:3,0,4,8,s.x-7*n-u*3*n,s.y-11*n,4*n,8*n);Math.abs(this.darkOverlay)!==this.fadeTo&&(o.save(),o.fillStyle="black",o.globalAlpha=(this.darkOverlay<0?1:0)+this.darkOverlay,o.fillRect(0,0,s.x+1,s.y+1),o.restore())}fadeIn(){this.darkOverlay=1,this.fadeTo=0}fadeOut(){this.darkOverlay=-1,this.fadeTo=1}}class Wp extends As{gravity=.05;tmxMap=Gp;overlay;gui;init(){this.setScale(6),this.setTileCollisionLayer(1),this.addLayer($l,-1),this.overlay=this.addLayer(Zp);const t=this.getObjectByType(ie.Player);this.camera.setSpeed(.06),this.camera.follow(t),this.initGUI(),console.log("Main Scene initialized",this)}initGUI(){if(this.gui instanceof pa.GUI||!this.game.debug)return;this.gui=new pa.GUI;const t=this.gui.addFolder("Scene"),i=t.addFolder("Layers");t.add(this,"gravity").step(.01).min(.01).max(1),t.add(this.camera,"scale").step(.1).min(1).max(10).listen(),this.layers.sort((n,o)=>o.renderOrder-n.renderOrder).map(n=>i.add(n,"visible").name(`${n.name}`).listen())}postUpdate(){this.game.input.keyWasPressed("KeyP")&&(console.info("Pause"),this.game.togglePause())}fadeIn(){this.overlay?.fadeIn()}fadeOut(){this.overlay?.fadeOut()}}const ga={Idle:{strip:{x:168,y:0,frames:1,duration:0},width:28,height:20,offset:[-10,-2],loop:!1},Fly:{strip:{x:0,y:0,frames:6,duration:80},width:28,height:20,offset:[-12,0],loop:!0},Fall:{strip:{x:196,y:0,frames:1,duration:0},width:28,height:20,offset:[-12,-2],loop:!1}};class iu extends Le{type=ie.Item;mass=.1;size=k(1);elasticity=.7;gravityScale=.3;collideWithObject(t){return t.type===ie.Player}}const{Left:Tr,Right:Yp}=vn;class qi extends Le{bounded=!0;facing=Tr;damage=0;turn(){this.facing=this.facing===Tr?Yp:Tr}blood(t){this.scene.addObject(new Kl(this.scene,{...xp,pos:t}))}destroy(){const t=Math.random()*100;let i=ei.Coin;t<10?i=ei.Health:t<30&&(i=ei.Ammo),this.scene.addObject(new iu(this.scene,{pos:this.pos.subtract(k(0,1)),gid:i}),3),this.dead=!0}}class Qp extends qi{type=ie.Bat;family="enemy";image="bat.png";animation=ga.Idle;health=2;damage=1;idle=!0;mass=.1;damping=.88;gravityScale=0;hurtTimer=this.scene.game.timer();isKilled=!1;update(){const t=this.scene.getObjectByType(ie.Player);this.idle?this.onScreen()&&this.pos.x<t.pos.x&&(this.idle=!1):(this.hurtTimer.isDone()&&this.hurtTimer.unset(),this.hurtTimer.isActive()||(this.force.x=We(this.force.x,t.pos.x-this.pos.x,.002)/200,this.force.y=We(this.force.y,t.pos.y-this.pos.y,.001)/200),this.setAnimation(ga.Fly,this.pos.x>t.pos.x)),super.update()}collideWithObject(t){return this.hurtTimer.isActive()||this.idle?!1:(t.type===ie.Bullet&&(this.health--,this.hurtTimer.set(.4),this.blood(t.pos.add(yn(.2))),this.health<=0&&this.destroy()),!0)}}class Jp extends qi{type=ie.Box;hitColor=new Y(255,255,255,.5);hitTimer=this.scene.game.timer();damping=.8;health=3;draw(){if(super.draw(),this.hitTimer.isActive()){const{draw:t}=this.scene.game;t.setBlending(!0),t.fillRect(this.getRelativeBoundingRect(),this.hitColor),t.setBlending(!1)}}collideWithObject(t){return t.type===ie.Bullet&&(this.hitTimer.set(.05),--this.health<=0&&(this.dead=!0),this.scene.addObject(new Kl(this.scene,{...Ep,pos:this.pos}))),!0}}const Xe={Idle:{strip:{x:0,y:0,frames:4,duration:200},width:53,height:53,offset:[-20,-18],loop:!0},Walk:{strip:{x:212,y:0,frames:8,duration:60},width:53,height:53,offset:[-20,-18],loop:!0},Jump:{strip:{x:636,y:0,frames:5,duration:200},width:53,height:53,offset:[-20,-18],loop:!1},Fall:{strip:{x:848,y:0,frames:1,duration:0},width:53,height:53,offset:[-20,-18],loop:!1},Shoot:{strip:{x:901,y:0,frames:5,duration:140},width:53,height:53,offset:[-20,-18],loop:!1},Hurt:{strip:{x:1325,y:0,frames:3,duration:100},width:53,height:53,offset:[-20,-18],loop:!0},Reload:{strip:{x:1484,y:0,frames:3,duration:300},width:53,height:53,offset:[-20,-18],loop:!0},Defeat:{strip:{x:1643,y:0,frames:6,duration:100},width:53,height:53,offset:[-20,-18],loop:!1}};class Kp extends Le{type=ie.Bullet;mass=.5;maxSpeed=3;gravityScale=0;size=k(.25,.08);color=new Y(255,220,220);ttl=1;collideWithObject(){return this.destroy(),!0}}const $p={Dust:{strip:{x:0,y:0,frames:9,duration:60},width:16,height:16,loop:!1}};class eg extends Le{type=ie.Dust;image="dust.png";animation=$p.Dust;size=k(.5,.5);collideObjects=!1;collideTiles=!1;solid=!1;mass=0;ttl=.5}const{Left:vt,Right:ci}=vn;class tg extends qi{type=ie.Player;image="player.png";animation=Xe.Idle;facing=ci;health=[10,10];ammo=[4,4];renderOrder=10;damping=.92;friction=.9;moveInput=k();startPos=this.pos.clone();holdingJump=!1;wasHoldingJump=!1;isShooting=!1;isReloading=!1;deadTimer=this.scene.game.timer();groundTimer=this.scene.game.timer();idleTimer=this.scene.game.timer();hurtTimer=this.scene.game.timer();jumpPressedTimer=this.scene.game.timer();jumpTimer=this.scene.game.timer();shootTimer=this.scene.game.timer();reloadTimer=this.scene.game.timer();handleInput(){const{game:t}=this.scene,{input:i}=t;if(this.holdingJump=!!(i.keyIsDown("ArrowUp")||i.keyIsDown("KeyW")),this.isShooting=!!i.keyIsDown("Space"),this.moveInput=k((i.keyIsDown("ArrowRight")||i.keyIsDown("KeyD"))-(i.keyIsDown("ArrowLeft")||i.keyIsDown("KeyA")),(i.keyIsDown("ArrowUp")||i.keyIsDown("KeyW"))-(i.keyIsDown("ArrowDown")|i.keyIsDown("KeyS"))),this.facing=this.moveInput.x===1?ci:this.moveInput.x===-1?vt:this.facing,i.mouseWasPressed(0)&&this.moveInput.y===0){const n=this.scene.getPointerRelativeGridPos();(this.moveInput.x===0||this.facing===ci&&n.x>this.pos.x||this.facing===vt&&n.x<this.pos.x)&&(this.isShooting=!0,this.facing=n.x>this.pos.x?ci:vt)}}update(){if(!this.onScreen())return super.update();this.handleInput();const t=this.deadTimer.isActive()?k(0):this.moveInput.clone();this.hurtTimer.isDone()&&this.hurtTimer.unset(),this.onGround&&this.groundTimer.set(.1),this.isShooting&&this.groundTimer.isActive()&&this.ammo[0]>0&&!this.shootTimer.isActive()&&(this.setAnimationFrame(0),this.shootTimer.set(.5),this.scene.game.playSound("shoot.mp3"),this.scene.addObject(new Kp(this.scene,{pos:this.pos.add(k(this.facing===vt?-1.2:1.2,-.15)),force:k(this.facing===vt?-.6:.6,0)})),this.ammo[0]--,this.scene.game.setSetting("flash",!0),this.reloadTimer.set(2)),this.shootTimer.isActive()&&(t.x=0,this.shootTimer.getPercent()>.1&&this.scene.game.setSetting("flash",!1)),this.reloadTimer.isActive()&&this.reloadTimer.getPercent()>.6&&(this.isReloading=this.ammo[0]<this.ammo[1]),this.reloadTimer.isDone()&&(this.ammo[0]<this.ammo[1]?(this.ammo[0]+=1,this.reloadTimer.set(1),this.scene.game.playSound("reload.mp3"),this.ammo[0]===this.ammo[1]&&(this.isReloading=!1)):(this.isReloading=!1,this.reloadTimer.unset())),(this.moveInput.x!==0||this.moveInput.y!==0)&&(this.reloadTimer.set(1),this.isReloading=!1),this.holdingJump?this.wasHoldingJump||this.jumpPressedTimer.set(.3):this.jumpPressedTimer.unset(),this.groundTimer.isActive()&&this.jumpPressedTimer.isActive()&&!this.jumpTimer.isActive()&&(this.force.y=-.15,this.jumpTimer.set(.5)),this.jumpTimer.isActive()&&(this.groundTimer.unset(),this.holdingJump&&this.force.y<0&&this.jumpTimer.isActive()&&(this.force.y-=.06)),this.wasHoldingJump=this.holdingJump,this.onGround||(Math.sign(t.x)===Math.sign(this.force.x)?t.x*=.4:t.x*=.8,this.force.y>0&&(this.force.y-=this.scene.gravity*.2)),this.onGround&&Math.sign(this.moveInput.x)!==Math.sign(this.force.x)&&Math.abs(this.force.x)>.123&&this.dust(),this.force.x=Mt(this.force.x+t.x*.028,-this.maxSpeed,this.maxSpeed),this.lastPos=this.pos.clone(),super.update();let i=Xe.Idle;this.deadTimer.isActive()?i=Xe.Defeat:this.hurtTimer.isActive()?i=Xe.Hurt:this.jumpTimer.isActive()&&!this.onGround?i=this.force.y<=0?Xe.Jump:Xe.Fall:this.shootTimer.isActive()?i=Xe.Shoot:this.isReloading?i=Xe.Reload:t.x&&Math.abs(this.force.x)!==0&&this.onGround&&(i=Xe.Walk),this.setAnimation(i,this.facing===vt)}collideWithTile(t,i){return bp.includes(t)?this.force.y>0&&this.pos.y<i.y&&this.moveInput.y!==-1:!0}collideWithObject(t){if(this.deadTimer.isActive()||t.type===ie.Bullet)return!1;if(t.type===ie.Item){switch(this.scene.game.playSound("powerup.mp3"),t.gid){case ei.Ammo:this.ammo[1]+=1;break;case ei.Health:this.health[0]=this.health[1];break}t.destroy()}return t.family==="enemy"&&!this.hurtTimer.isActive()&&(this.health[0]-=t.damage||1,this.health[0]>0?(this.hurtTimer.set(.5),this.scene.camera.shake(.5,k(.001))):(this.deadTimer.set(2),this.hurtTimer.unset(),ca(500,()=>this.scene.fadeOut()),ca(2e3,()=>this.scene.game.restartScene())),this.setAnimationFrame(0),this.blood(this.pos.add(yn(.2)))),!0}dust(t=this.facing){const i=k(t===vt?-1.2:.85,.3),n=new eg(this.scene,{pos:this.pos.add(i),flipH:t===ci});this.scene.addObject(n,3)}}const ig={Shine:{strip:{x:0,y:0,frames:5,duration:40},width:8,height:8,loop:!1}};class ng extends Le{image="shine.png";animation=ig.Shine;collideTiles=!1;collideObjects=!1;size=k(.5);mass=0;ttl=.5}class rg extends qi{family="enemy";collideTiles=!1;shineTimer=this.scene.game.timer();damage=10;mass=0;update(){this.onScreen()&&(this.shineTimer.isDone()&&(this.shineTimer.unset(),this.scene.addObject(new ng(this.scene,{pos:this.pos.clone().add(k(hp(0,this.size.x)-this.size.x/2,-1))}),3)),this.shineTimer.isActive()||this.shineTimer.set(1))}}const He={Idle:{strip:{x:0,y:0,frames:9,duration:100},width:58,height:46,offset:[-24,-10],loop:!0},Walk:{strip:{x:522,y:0,frames:12,duration:100},width:58,height:46,offset:[-24,-10],loop:!0},Run:{strip:{x:1218,y:0,frames:8,duration:100},width:58,height:46,offset:[-24,-10],loop:!0},Attack:{strip:{x:1682,y:0,frames:11,duration:100},width:58,height:46,offset:[-24,-10],loop:!0},Hurt1:{strip:{x:2320,y:0,frames:13,duration:100},width:58,height:46,offset:[-24,-10],loop:!1},Hurt2:{strip:{x:3074,y:0,frames:15,duration:100},width:58,height:46,offset:[-24,-10],loop:!1},Rise:{strip:{x:3944,y:0,frames:9,duration:100},width:58,height:46,offset:[-24,-12],loop:!1},Dead:{strip:{x:3944,y:0,frames:1,duration:100},width:58,height:46,offset:[-24,-12],loop:!1}},{Left:Gt,Right:ma}=vn;class sg extends qi{image="zombie.png";family="enemy";animation=He.Rise;facing=Gt;damping=.88;renderOrder=10;health=2;damage=1;isSpawned=!1;riseTimer=this.scene.game.timer();idleTimer=this.scene.game.timer();hurtTimer=this.scene.game.timer();attackTimer=this.scene.game.timer();spawnTimer=this.scene.game.timer();walkTimer=this.scene.game.timer();draw(){this.isSpawned&&super.draw()}update(){this.hurtTimer.isDone()&&this.hurtTimer.unset(),this.spawnTimer.isDone()&&(this.spawnTimer.unset(),this.riseTimer.set(.7),this.isSpawned=!0,this.setAnimationFrame(0)),!this.isSpawned&&this.onScreen()&&!this.spawnTimer.isActive()&&this.spawnTimer.set(1.5),this.riseTimer.isDone()&&(this.idleTimer.set(2),this.riseTimer.unset()),this.idleTimer.isDone()&&(this.idleTimer.unset(),this.walkTimer.set(5)),this.walkTimer.isDone()&&(this.walkTimer.unset(),this.idleTimer.set(1),this.turn());const t=this.scene.getObjectByType(ie.Player);if(this.walkTimer.isActive()&&!this.hurtTimer.isActive()&&!this.attackTimer.isActive()){const n=this.facing===Gt&&this.pos.x>t.pos.x||this.facing===ma&&this.pos.x<t.pos.x?.025:.005;this.force.x=Mt(this.force.x+(this.facing===Gt?-1:1)*n,-this.maxSpeed,this.maxSpeed)}this.collideObjects=this.isSpawned&&!this.riseTimer.isActive(),super.update();let i=He.Idle;this.hurtTimer.isActive()?(i=this.force.x>0&&this.facing===Gt?He.Hurt2:He.Hurt1,this.health<=0&&this.getAnimationFrame()===5&&this.destroy()):this.riseTimer.isActive()||!this.isSpawned?i=He.Rise:this.attackTimer.isActive()?i=He.Attack:Math.abs(this.force.x)>.02?i=He.Run:Math.abs(this.force.x)>.01?i=He.Walk:this.force.x===0&&(i=He.Idle),this.setAnimation(i,this.facing===Gt)}collideWithObject(t){return t.family==="enemy"||this.hurtTimer.isActive()?!1:(t.type===ie.Box||(t.type===ie.Bullet&&(this.health--,this.hurtTimer.set(1.5),this.setAnimationFrame(0),this.walkTimer.unset(),this.blood(t.pos)),t.type===ie.Player&&(this.attackTimer.set(1),this.facing=this.pos.x<t.pos.x?ma:Gt)),!0)}collideWithTile(){return this.turn(),!0}}const og={pixelPerfect:!0,entities:{[ie.Bat]:Qp,[ie.Box]:Jp,[ie.Item]:iu,[ie.Player]:tg,[ie.Spikes]:rg,[ie.Zombie]:sg},scenes:{IntroScene:Xp,MainScene:Wp}},_a=new Ap(og,Up);async function ag(){await _a.start("IntroScene"),_a.setAudioVolume(.1)}ag();
//# sourceMappingURL=index-qt-r0BrZ.js.map
